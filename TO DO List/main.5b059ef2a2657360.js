"use strict";(self.webpackChunkPayment=self.webpackChunkPayment||[]).push([[179],{2011:(It,Se,k)=>{k.d(Se,{Dh:()=>_e,GT:()=>ne,cc:()=>Ce,hO:()=>He,on:()=>z,pX:()=>se,xv:()=>de});var m=k(4650),J=k(9260),O=k(4976);It=k.hmd(It);const ie=["ngOnDestroy"],se=(xe,Ne,Be,Pe={})=>new Proxy(xe,{get:(Ee,we)=>Be.runOutsideAngular(()=>{var ze;if(xe[we])return!(null===(ze=Pe?.spy)||void 0===ze)&&ze.get&&Pe.spy.get(we,xe[we]),xe[we];if(ie.indexOf(we)>-1)return()=>{};const Oe=Ne.toPromise().then(at=>{const re=at&&at[we];return"function"==typeof re?re.bind(at):re&&re.then?re.then(At=>Be.run(()=>At)):Be.run(()=>re)});return new Proxy(()=>{},{get:(at,re)=>Oe[re],apply:(at,re,At)=>Oe.then(nt=>{var Xt;const ht=nt&&nt(...At);return!(null===(Xt=Pe?.spy)||void 0===Xt)&&Xt.apply&&Pe.spy.apply(we,At,ht),ht})})})}),ne=(xe,Ne)=>{Ne.forEach(Be=>{Object.getOwnPropertyNames(Be.prototype||Be).forEach(Pe=>{Object.defineProperty(xe.prototype,Pe,Object.getOwnPropertyDescriptor(Be.prototype||Be,Pe))})})};class ge{constructor(Ne){return Ne}}const _e=new m.OlP("angularfire2.app.options"),de=new m.OlP("angularfire2.app.name");function z(xe,Ne,Be){const Ee="object"==typeof Be&&Be||{};Ee.name=Ee.name||"string"==typeof Be&&Be||"[DEFAULT]";const ze=J.Z.apps.filter(Oe=>Oe&&Oe.name===Ee.name)[0]||Ne.runOutsideAngular(()=>J.Z.initializeApp(xe,Ee));try{JSON.stringify(xe)!==JSON.stringify(ze.options)&&$("error",`${ze.name} Firebase App already initialized with different options${It.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ge(ze)}const $=(xe,...Ne)=>{(0,m.X6Q)()&&typeof console<"u"&&console[xe](...Ne)},K={provide:ge,useFactory:z,deps:[_e,m.R0b,[new m.FiY,de]]};let He=(()=>{class xe{constructor(Be){J.Z.registerVersion("angularfire",O.q4.full,"core"),J.Z.registerVersion("angularfire",O.q4.full,"app-compat"),J.Z.registerVersion("angular",m.q4F.full,Be.toString())}static initializeApp(Be,Pe){return{ngModule:xe,providers:[{provide:_e,useValue:Be},{provide:de,useValue:Pe}]}}}return xe.\u0275fac=function(Be){return new(Be||xe)(m.LFG(m.Lbi))},xe.\u0275mod=m.oAB({type:xe}),xe.\u0275inj=m.cJS({providers:[K]}),xe})();function Ce(xe,Ne,Be,Pe,Ee){const[,we,ze]=globalThis.\u0275AngularfireInstanceCache.find(Oe=>Oe[0]===xe)||[];if(we)return function qe(xe,Ne){try{return xe.toString()===Ne.toString()}catch{return xe===Ne}}(Ee,ze)||(fe("error",`${Ne} was already initialized on the ${Be} Firebase App with different settings.${pt?" You may need to reload as Firebase is not HMR aware.":""}`),fe("warn",{is:Ee,was:ze})),we;{const Oe=Pe();return globalThis.\u0275AngularfireInstanceCache.push([xe,Oe,Ee]),Oe}}const pt=!!It.hot,fe=(xe,...Ne)=>{(0,m.X6Q)()&&typeof console<"u"&&console[xe](...Ne)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(It,Se,k)=>{k.d(Se,{q4:()=>ri,iC:()=>mi,HU:()=>Vt,vb:()=>Vc,JM:()=>Lc});var m=k(4650),J=k(259),O=k(5861),ie=k(6881),se=k(2090),ne=k(4859),ge=k(1877);const _e=(w,C)=>C.some(M=>w instanceof M);let de,z;const He=new WeakMap,Ce=new WeakMap,qe=new WeakMap,pt=new WeakMap,fe=new WeakMap;let Be={get(w,C,M){if(w instanceof IDBTransaction){if("done"===C)return Ce.get(w);if("objectStoreNames"===C)return w.objectStoreNames||qe.get(w);if("store"===C)return M.objectStoreNames[1]?void 0:M.objectStore(M.objectStoreNames[0])}return ze(w[C])},set:(w,C,M)=>(w[C]=M,!0),has:(w,C)=>w instanceof IDBTransaction&&("done"===C||"store"===C)||C in w};function we(w){return"function"==typeof w?function Ee(w){return w!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function K(){return z||(z=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(w)?function(...C){return w.apply(Oe(this),C),ze(He.get(this))}:function(...C){return ze(w.apply(Oe(this),C))}:function(C,...M){const P=w.call(Oe(this),C,...M);return qe.set(P,C.sort?C.sort():[C]),ze(P)}}(w):(w instanceof IDBTransaction&&function Ne(w){if(Ce.has(w))return;const C=new Promise((M,P)=>{const H=()=>{w.removeEventListener("complete",Z),w.removeEventListener("error",ue),w.removeEventListener("abort",ue)},Z=()=>{M(),H()},ue=()=>{P(w.error||new DOMException("AbortError","AbortError")),H()};w.addEventListener("complete",Z),w.addEventListener("error",ue),w.addEventListener("abort",ue)});Ce.set(w,C)}(w),_e(w,function $(){return de||(de=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(w,Be):w)}function ze(w){if(w instanceof IDBRequest)return function xe(w){const C=new Promise((M,P)=>{const H=()=>{w.removeEventListener("success",Z),w.removeEventListener("error",ue)},Z=()=>{M(ze(w.result)),H()},ue=()=>{P(w.error),H()};w.addEventListener("success",Z),w.addEventListener("error",ue)});return C.then(M=>{M instanceof IDBCursor&&He.set(M,w)}).catch(()=>{}),fe.set(C,w),C}(w);if(pt.has(w))return pt.get(w);const C=we(w);return C!==w&&(pt.set(w,C),fe.set(C,w)),C}const Oe=w=>fe.get(w),At=["get","getKey","getAll","getAllKeys","count"],nt=["put","add","delete","clear"],Xt=new Map;function ht(w,C){if(!(w instanceof IDBDatabase)||C in w||"string"!=typeof C)return;if(Xt.get(C))return Xt.get(C);const M=C.replace(/FromIndex$/,""),P=C!==M,H=nt.includes(M);if(!(M in(P?IDBIndex:IDBObjectStore).prototype)||!H&&!At.includes(M))return;const Z=function(){var ue=(0,O.Z)(function*(Fe,...Ue){const ct=this.transaction(Fe,H?"readwrite":"readonly");let Mt=ct.store;return P&&(Mt=Mt.index(Ue.shift())),(yield Promise.all([Mt[M](...Ue),H&&ct.done]))[0]});return function(Ue){return ue.apply(this,arguments)}}();return Xt.set(C,Z),Z}!function Pe(w){Be=w(Be)}(w=>({...w,get:(C,M,P)=>ht(C,M)||w.get(C,M,P),has:(C,M)=>!!ht(C,M)||w.has(C,M)}));const he="@firebase/installations",pe="0.6.4",De=1e4,Te=`w:${pe}`,Ge="FIS_v2",je="https://firebaseinstallations.googleapis.com/v1",gt=36e5,Qt=new se.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function St(w){return w instanceof se.ZR&&w.code.includes("request-failed")}function un({projectId:w}){return`${je}/projects/${w}/installations`}function yn(w){return{token:w.token,requestStatus:2,expiresIn:fo(w.expiresIn),creationTime:Date.now()}}function Rn(w,C){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,O.Z)(function*(w,C){const P=(yield C.json()).error;return Qt.create("request-failed",{requestName:w,serverCode:P.code,serverMessage:P.message,serverStatus:P.status})})).apply(this,arguments)}function Xr({apiKey:w}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":w})}function ho(w){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,O.Z)(function*(w){const C=yield w();return C.status>=500&&C.status<600?w():C})).apply(this,arguments)}function fo(w){return Number(w.replace("s","000"))}function Di(){return(Di=(0,O.Z)(function*({appConfig:w,heartbeatServiceProvider:C},{fid:M}){const P=un(w),H=Xr(w),Z=C.getImmediate({optional:!0});if(Z){const ct=yield Z.getHeartbeatsHeader();ct&&H.append("x-firebase-client",ct)}const Fe={method:"POST",headers:H,body:JSON.stringify({fid:M,authVersion:Ge,appId:w.appId,sdkVersion:Te})},Ue=yield ho(()=>fetch(P,Fe));if(Ue.ok){const ct=yield Ue.json();return{fid:ct.fid||M,registrationStatus:2,refreshToken:ct.refreshToken,authToken:yn(ct.authToken)}}throw yield Rn("Create Installation",Ue)})).apply(this,arguments)}function vt(w){return new Promise(C=>{setTimeout(C,w)})}const ka=/^[cdef][\w-]{21}$/,An="";function Ci(){try{const w=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(w),w[0]=112+w[0]%16;const M=function ci(w){return function Oa(w){return btoa(String.fromCharCode(...w)).replace(/\+/g,"-").replace(/\//g,"_")}(w).substr(0,22)}(w);return ka.test(M)?M:An}catch{return An}}function Tt(w){return`${w.appName}!${w.appId}`}const ut=new Map;function Ot(w,C){const M=Tt(w);Mr(M,C),function mr(w,C){const M=function di(){return!On&&"BroadcastChannel"in self&&(On=new BroadcastChannel("[Firebase] FID Change"),On.onmessage=w=>{Mr(w.data.key,w.data.fid)}),On}();M&&M.postMessage({key:w,fid:C}),function vn(){0===ut.size&&On&&(On.close(),On=null)}()}(M,C)}function Mr(w,C){const M=ut.get(w);if(M)for(const P of M)P(C)}let On=null;const Fa="firebase-installations-database",on=1,$r="firebase-installations-store";let bi=null;function ln(){return bi||(bi=function at(w,C,{blocked:M,upgrade:P,blocking:H,terminated:Z}={}){const ue=indexedDB.open(w,C),Fe=ze(ue);return P&&ue.addEventListener("upgradeneeded",Ue=>{P(ze(ue.result),Ue.oldVersion,Ue.newVersion,ze(ue.transaction))}),M&&ue.addEventListener("blocked",()=>M()),Fe.then(Ue=>{Z&&Ue.addEventListener("close",()=>Z()),H&&Ue.addEventListener("versionchange",()=>H())}).catch(()=>{}),Fe}(Fa,on,{upgrade:(w,C)=>{0===C&&w.createObjectStore($r)}})),bi}function $n(w,C){return yr.apply(this,arguments)}function yr(){return(yr=(0,O.Z)(function*(w,C){const M=Tt(w),H=(yield ln()).transaction($r,"readwrite"),Z=H.objectStore($r),ue=yield Z.get(M);return yield Z.put(C,M),yield H.done,(!ue||ue.fid!==C.fid)&&Ot(w,C.fid),C})).apply(this,arguments)}function Si(w){return kn.apply(this,arguments)}function kn(){return(kn=(0,O.Z)(function*(w){const C=Tt(w),P=(yield ln()).transaction($r,"readwrite");yield P.objectStore($r).delete(C),yield P.done})).apply(this,arguments)}function Hr(w,C){return ei.apply(this,arguments)}function ei(){return(ei=(0,O.Z)(function*(w,C){const M=Tt(w),H=(yield ln()).transaction($r,"readwrite"),Z=H.objectStore($r),ue=yield Z.get(M),Fe=C(ue);return void 0===Fe?yield Z.delete(M):yield Z.put(Fe,M),yield H.done,Fe&&(!ue||ue.fid!==Fe.fid)&&Ot(w,Fe.fid),Fe})).apply(this,arguments)}function B(w){return V.apply(this,arguments)}function V(){return V=(0,O.Z)(function*(w){let C;const M=yield Hr(w.appConfig,P=>{const H=function q(w){return Mn(w||{fid:Ci(),registrationStatus:0})}(P),Z=function me(w,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(Qt.create("app-offline"))};const M={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},P=function X(w,C){return Ye.apply(this,arguments)}(w,M);return{installationEntry:M,registrationPromise:P}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:We(w)}:{installationEntry:C}}(w,H);return C=Z.registrationPromise,Z.installationEntry});return M.fid===An?{installationEntry:yield C}:{installationEntry:M,registrationPromise:C}}),V.apply(this,arguments)}function Ye(){return Ye=(0,O.Z)(function*(w,C){try{const M=yield function Ar(w,C){return Di.apply(this,arguments)}(w,C);return $n(w.appConfig,M)}catch(M){throw St(M)&&409===M.customData.serverCode?yield Si(w.appConfig):yield $n(w.appConfig,{fid:C.fid,registrationStatus:0}),M}}),Ye.apply(this,arguments)}function We(w){return sn.apply(this,arguments)}function sn(){return(sn=(0,O.Z)(function*(w){let C=yield Kn(w.appConfig);for(;1===C.registrationStatus;)yield vt(100),C=yield Kn(w.appConfig);if(0===C.registrationStatus){const{installationEntry:M,registrationPromise:P}=yield B(w);return P||M}return C})).apply(this,arguments)}function Kn(w){return Hr(w,C=>{if(!C)throw Qt.create("installation-not-found");return Mn(C)})}function Mn(w){return function Fn(w){return 1===w.registrationStatus&&w.registrationTime+De<Date.now()}(w)?{fid:w.fid,registrationStatus:0}:w}function Qn(){return(Qn=(0,O.Z)(function*({appConfig:w,heartbeatServiceProvider:C},M){const P=function Xi(w,{fid:C}){return`${un(w)}/${C}/authTokens:generate`}(w,M),H=function Br(w,{refreshToken:C}){const M=Xr(w);return M.append("Authorization",function Bs(w){return`${Ge} ${w}`}(C)),M}(w,M),Z=C.getImmediate({optional:!0});if(Z){const ct=yield Z.getHeartbeatsHeader();ct&&H.append("x-firebase-client",ct)}const Fe={method:"POST",headers:H,body:JSON.stringify({installation:{sdkVersion:Te,appId:w.appId}})},Ue=yield ho(()=>fetch(P,Fe));if(Ue.ok)return yn(yield Ue.json());throw yield Rn("Generate Auth Token",Ue)})).apply(this,arguments)}function Hi(w){return La.apply(this,arguments)}function La(){return La=(0,O.Z)(function*(w,C=!1){let M;const P=yield Hr(w.appConfig,Z=>{if(!qt(Z))throw Qt.create("not-registered");const ue=Z.authToken;if(!C&&function cn(w){return 2===w.requestStatus&&!function kt(w){const C=Date.now();return C<w.creationTime||w.creationTime+w.expiresIn<C+gt}(w)}(ue))return Z;if(1===ue.requestStatus)return M=function le(w,C){return ee.apply(this,arguments)}(w,C),Z;{if(!navigator.onLine)throw Qt.create("app-offline");const Fe=function nn(w){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},w),{authToken:C})}(Z);return M=function yt(w,C){return bt.apply(this,arguments)}(w,Fe),Fe}});return M?yield M:P.authToken}),La.apply(this,arguments)}function ee(){return(ee=(0,O.Z)(function*(w,C){let M=yield Me(w.appConfig);for(;1===M.authToken.requestStatus;)yield vt(100),M=yield Me(w.appConfig);const P=M.authToken;return 0===P.requestStatus?Hi(w,C):P})).apply(this,arguments)}function Me(w){return Hr(w,C=>{if(!qt(C))throw Qt.create("not-registered");return function Cn(w){return 1===w.requestStatus&&w.requestTime+De<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function bt(){return bt=(0,O.Z)(function*(w,C){try{const M=yield function Gt(w,C){return Qn.apply(this,arguments)}(w,C),P=Object.assign(Object.assign({},C),{authToken:M});return yield $n(w.appConfig,P),M}catch(M){if(!St(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const P=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield $n(w.appConfig,P)}else yield Si(w.appConfig);throw M}}),bt.apply(this,arguments)}function qt(w){return void 0!==w&&2===w.registrationStatus}function zr(){return(zr=(0,O.Z)(function*(w){const C=w,{installationEntry:M,registrationPromise:P}=yield B(C);return P?P.catch(console.error):Hi(C).catch(console.error),M.fid})).apply(this,arguments)}function Va(){return Va=(0,O.Z)(function*(w,C=!1){const M=w;return yield function go(w){return Jn.apply(this,arguments)}(M),(yield Hi(M,C)).token}),Va.apply(this,arguments)}function Jn(){return(Jn=(0,O.Z)(function*(w){const{registrationPromise:C}=yield B(w);C&&(yield C)})).apply(this,arguments)}function mo(w){return Qt.create("missing-app-config-values",{valueName:w})}const Ua="installations",Ba=w=>{const C=w.getProvider("app").getImmediate(),M=function Ln(w){if(!w||!w.options)throw mo("App Configuration");if(!w.name)throw mo("App Name");const C=["projectId","apiKey","appId"];for(const M of C)if(!w.options[M])throw mo(M);return{appName:w.name,projectId:w.options.projectId,apiKey:w.options.apiKey,appId:w.options.appId}}(C);return{app:C,appConfig:M,heartbeatServiceProvider:(0,ie._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},Ai=w=>{const C=w.getProvider("app").getImmediate(),M=(0,ie._getProvider)(C,Ua).getImmediate();return{getId:()=>function Ti(w){return zr.apply(this,arguments)}(M),getToken:H=>function jf(w){return Va.apply(this,arguments)}(M,H)}};(function ec(){(0,ie._registerComponent)(new ne.wA(Ua,Ba,"PUBLIC")),(0,ie._registerComponent)(new ne.wA("installations-internal",Ai,"PRIVATE"))})(),(0,ie.registerVersion)(he,pe),(0,ie.registerVersion)(he,pe,"esm2017");const ts="@firebase/remote-config",Xn=new se.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ns{constructor(C,M,P,H){this.client=C,this.storage=M,this.storageCache=P,this.logger=H}isCachedDataFresh(C,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const P=Date.now()-M,H=P<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${P}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${H}.`),H}fetch(C){var M=this;return(0,O.Z)(function*(){const[P,H]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(H&&M.isCachedDataFresh(C.cacheMaxAgeMillis,P))return H;C.eTag=H&&H.eTag;const Z=yield M.client.fetch(C),ue=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Z.status&&ue.push(M.storage.setLastSuccessfulFetchResponse(Z)),yield Promise.all(ue),Z})()}}function _m(w=navigator){return w.languages&&w.languages[0]||w.language}class nc{constructor(C,M,P,H,Z,ue){this.firebaseInstallations=C,this.sdkVersion=M,this.namespace=P,this.projectId=H,this.apiKey=Z,this.appId=ue}fetch(C){var M=this;return(0,O.Z)(function*(){const[P,H]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),ue=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,Fe={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},Ue={sdk_version:M.sdkVersion,app_instance_id:P,app_instance_id_token:H,app_id:M.appId,language_code:_m()},ct={method:"POST",headers:Fe,body:JSON.stringify(Ue)},Mt=fetch(ue,ct),Ft=new Promise((br,bs)=>{C.signal.addEventListener(()=>{const Js=new Error("The operation was aborted.");Js.name="AbortError",bs(Js)})});let Pr;try{yield Promise.race([Mt,Ft]),Pr=yield Mt}catch(br){let bs="fetch-client-network";throw"AbortError"===br?.name&&(bs="fetch-timeout"),Xn.create(bs,{originalErrorMessage:br?.message})}let In=Pr.status;const Ut=Pr.headers.get("ETag")||void 0;let Oo,Qs;if(200===Pr.status){let br;try{br=yield Pr.json()}catch(bs){throw Xn.create("fetch-client-parse",{originalErrorMessage:bs?.message})}Oo=br.entries,Qs=br.state}if("INSTANCE_STATE_UNSPECIFIED"===Qs?In=500:"NO_CHANGE"===Qs?In=304:("NO_TEMPLATE"===Qs||"EMPTY_CONFIG"===Qs)&&(Oo={}),304!==In&&200!==In)throw Xn.create("fetch-status",{httpStatus:In});return{status:In,eTag:Ut,config:Oo}})()}}class wm{constructor(C,M){this.client=C,this.storage=M}fetch(C){var M=this;return(0,O.Z)(function*(){const P=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(C,P)})()}attemptFetch(C,{throttleEndTimeMillis:M,backoffCount:P}){var H=this;return(0,O.Z)(function*(){yield function Em(w,C){return new Promise((M,P)=>{const H=Math.max(C-Date.now(),0),Z=setTimeout(M,H);w.addEventListener(()=>{clearTimeout(Z),P(Xn.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,M);try{const Z=yield H.client.fetch(C);return yield H.storage.deleteThrottleMetadata(),Z}catch(Z){if(!function qd(w){if(!(w instanceof se.ZR&&w.customData))return!1;const C=Number(w.customData.httpStatus);return 429===C||500===C||503===C||504===C}(Z))throw Z;const ue={throttleEndTimeMillis:Date.now()+(0,se.$s)(P),backoffCount:P+1};return yield H.storage.setThrottleMetadata(ue),H.attemptFetch(C,ue)}})()}}class Tv{constructor(C,M,P,H,Z){this.app=C,this._client=M,this._storageCache=P,this._storage=H,this._logger=Z,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ju(w,C){const M=w.target.error||void 0;return Xn.create(C,{originalErrorMessage:M&&M?.message})}const Ri="app_namespace_store";class Gf{constructor(C,M,P,H=function Qo(){return new Promise((w,C)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=P=>{C(ju(P,"storage-open"))},M.onsuccess=P=>{w(P.target.result)},M.onupgradeneeded=P=>{0===P.oldVersion&&P.target.result.createObjectStore(Ri,{keyPath:"compositeKey"})}}catch(M){C(Xn.create("storage-open",{originalErrorMessage:M?.message}))}})}()){this.appId=C,this.appName=M,this.namespace=P,this.openDbPromise=H}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var M=this;return(0,O.Z)(function*(){const P=yield M.openDbPromise;return new Promise((H,Z)=>{const Fe=P.transaction([Ri],"readonly").objectStore(Ri),Ue=M.createCompositeKey(C);try{const ct=Fe.get(Ue);ct.onerror=Mt=>{Z(ju(Mt,"storage-get"))},ct.onsuccess=Mt=>{const Ft=Mt.target.result;H(Ft?Ft.value:void 0)}}catch(ct){Z(Xn.create("storage-get",{originalErrorMessage:ct?.message}))}})})()}set(C,M){var P=this;return(0,O.Z)(function*(){const H=yield P.openDbPromise;return new Promise((Z,ue)=>{const Ue=H.transaction([Ri],"readwrite").objectStore(Ri),ct=P.createCompositeKey(C);try{const Mt=Ue.put({compositeKey:ct,value:M});Mt.onerror=Ft=>{ue(ju(Ft,"storage-set"))},Mt.onsuccess=()=>{Z()}}catch(Mt){ue(Xn.create("storage-set",{originalErrorMessage:Mt?.message}))}})})()}delete(C){var M=this;return(0,O.Z)(function*(){const P=yield M.openDbPromise;return new Promise((H,Z)=>{const Fe=P.transaction([Ri],"readwrite").objectStore(Ri),Ue=M.createCompositeKey(C);try{const ct=Fe.delete(Ue);ct.onerror=Mt=>{Z(ju(Mt,"storage-delete"))},ct.onsuccess=()=>{H()}}catch(ct){Z(Xn.create("storage-delete",{originalErrorMessage:ct?.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class qf{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,O.Z)(function*(){const M=C.storage.getLastFetchStatus(),P=C.storage.getLastSuccessfulFetchTimestampMillis(),H=C.storage.getActiveConfig(),Z=yield M;Z&&(C.lastFetchStatus=Z);const ue=yield P;ue&&(C.lastSuccessfulFetchTimestampMillis=ue);const Fe=yield H;Fe&&(C.activeConfig=Fe)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function Wf(){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,O.Z)(function*(){if(!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}!function vs(){(0,ie._registerComponent)(new ne.wA("remote-config",function w(C,{instanceIdentifier:M}){const P=C.getProvider("app").getImmediate(),H=C.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Xn.create("registration-window");if(!(0,se.hl)())throw Xn.create("indexed-db-unavailable");const{projectId:Z,apiKey:ue,appId:Fe}=P.options;if(!Z)throw Xn.create("registration-project-id");if(!ue)throw Xn.create("registration-api-key");if(!Fe)throw Xn.create("registration-app-id");const Ue=new Gf(Fe,P.name,M=M||"firebase"),ct=new qf(Ue),Mt=new ge.Yd(ts);Mt.logLevel=ge.in.ERROR;const Ft=new nc(H,ie.SDK_VERSION,M,Z,ue,Fe),Pr=new wm(Ft,Ue),In=new ns(Pr,Ue,ct,Mt),Ut=new Tv(P,In,ct,Ue,Mt);return function vm(w){const C=(0,se.m9)(w);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(Ut),Ut},"PUBLIC").setMultipleInstances(!0)),(0,ie.registerVersion)(ts,"0.4.4"),(0,ie.registerVersion)(ts,"0.4.4","esm2017")}();const ic=(w,C)=>C.some(M=>w instanceof M);let sc,yo;const Kd=new WeakMap,rs=new WeakMap,oc=new WeakMap,bn=new WeakMap,Ha=new WeakMap;let ea={get(w,C,M){if(w instanceof IDBTransaction){if("done"===C)return rs.get(w);if("objectStoreNames"===C)return w.objectStoreNames||oc.get(w);if("store"===C)return M.objectStoreNames[1]?void 0:M.objectStore(M.objectStoreNames[0])}return Gi(w[C])},set:(w,C,M)=>(w[C]=M,!0),has:(w,C)=>w instanceof IDBTransaction&&("done"===C||"store"===C)||C in w};function Zf(w){return"function"==typeof w?function ni(w){return w!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Xo(){return yo||(yo=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(w)?function(...C){return w.apply(is(this),C),Gi(Kd.get(this))}:function(...C){return Gi(w.apply(is(this),C))}:function(C,...M){const P=w.call(is(this),C,...M);return oc.set(P,C.sort?C.sort():[C]),Gi(P)}}(w):(w instanceof IDBTransaction&&function Vn(w){if(rs.has(w))return;const C=new Promise((M,P)=>{const H=()=>{w.removeEventListener("complete",Z),w.removeEventListener("error",ue),w.removeEventListener("abort",ue)},Z=()=>{M(),H()},ue=()=>{P(w.error||new DOMException("AbortError","AbortError")),H()};w.addEventListener("complete",Z),w.addEventListener("error",ue),w.addEventListener("abort",ue)});rs.set(w,C)}(w),ic(w,function Kf(){return sc||(sc=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(w,ea):w)}function Gi(w){if(w instanceof IDBRequest)return function Zd(w){const C=new Promise((M,P)=>{const H=()=>{w.removeEventListener("success",Z),w.removeEventListener("error",ue)},Z=()=>{M(Gi(w.result)),H()},ue=()=>{P(w.error),H()};w.addEventListener("success",Z),w.addEventListener("error",ue)});return C.then(M=>{M instanceof IDBCursor&&Kd.set(M,w)}).catch(()=>{}),Ha.set(C,w),C}(w);if(bn.has(w))return bn.get(w);const C=Zf(w);return C!==w&&(bn.set(w,C),Ha.set(C,w)),C}const is=w=>Ha.get(w);function xr(w,C,{blocked:M,upgrade:P,blocking:H,terminated:Z}={}){const ue=indexedDB.open(w,C),Fe=Gi(ue);return P&&ue.addEventListener("upgradeneeded",Ue=>{P(Gi(ue.result),Ue.oldVersion,Ue.newVersion,Gi(ue.transaction))}),M&&ue.addEventListener("blocked",()=>M()),Fe.then(Ue=>{Z&&Ue.addEventListener("close",()=>Z()),H&&Ue.addEventListener("versionchange",()=>H())}).catch(()=>{}),Fe}function ta(w,{blocked:C}={}){const M=indexedDB.deleteDatabase(w);return C&&M.addEventListener("blocked",()=>C()),Gi(M).then(()=>{})}const na=["get","getKey","getAll","getAllKeys","count"],Yf=["put","add","delete","clear"],xi=new Map;function $u(w,C){if(!(w instanceof IDBDatabase)||C in w||"string"!=typeof C)return;if(xi.get(C))return xi.get(C);const M=C.replace(/FromIndex$/,""),P=C!==M,H=Yf.includes(M);if(!(M in(P?IDBIndex:IDBObjectStore).prototype)||!H&&!na.includes(M))return;const Z=function(){var ue=(0,O.Z)(function*(Fe,...Ue){const ct=this.transaction(Fe,H?"readwrite":"readonly");let Mt=ct.store;return P&&(Mt=Mt.index(Ue.shift())),(yield Promise.all([Mt[M](...Ue),H&&ct.done]))[0]});return function(Ue){return ue.apply(this,arguments)}}();return xi.set(C,Z),Z}!function zs(w){ea=w(ea)}(w=>({...w,get:(C,M,P)=>$u(C,M)||w.get(C,M,P),has:(C,M)=>!!$u(C,M)||w.has(C,M)}));const za="/firebase-messaging-sw.js",Nt="/firebase-cloud-messaging-push-scope",Hu="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Qf="https://fcmregistrations.googleapis.com/v1",zu="google.c.a.c_id",Yd="google.c.a.c_l",ac="google.c.a.ts",Jf="google.c.a.e";var _n=(()=>{return(w=_n||(_n={})).PUSH_RECEIVED="push-received",w.NOTIFICATION_CLICKED="notification-clicked",_n;var w})();function Ie(w){const C=new Uint8Array(w);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function tn(w){const M=(w+"=".repeat((4-w.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),P=atob(M),H=new Uint8Array(P.length);for(let Z=0;Z<P.length;++Z)H[Z]=P.charCodeAt(Z);return H}const Ga="fcm_token_details_db",uc=5,Un="fcm_token_object_Store";function _s(){return _s=(0,O.Z)(function*(w){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Z=>Z.name).includes(Ga))return null;let C=null;return(yield xr(Ga,uc,{upgrade:(P=(0,O.Z)(function*(H,Z,ue,Fe){var Ue;if(Z<2||!H.objectStoreNames.contains(Un))return;const ct=Fe.objectStore(Un),Mt=yield ct.index("fcmSenderId").get(w);if(yield ct.clear(),Mt)if(2===Z){const Ft=Mt;if(!Ft.auth||!Ft.p256dh||!Ft.endpoint)return;C={token:Ft.fcmToken,createTime:null!==(Ue=Ft.createTime)&&void 0!==Ue?Ue:Date.now(),subscriptionOptions:{auth:Ft.auth,p256dh:Ft.p256dh,endpoint:Ft.endpoint,swScope:Ft.swScope,vapidKey:"string"==typeof Ft.vapidKey?Ft.vapidKey:Ie(Ft.vapidKey)}}}else if(3===Z){const Ft=Mt;C={token:Ft.fcmToken,createTime:Ft.createTime,subscriptionOptions:{auth:Ie(Ft.auth),p256dh:Ie(Ft.p256dh),endpoint:Ft.endpoint,swScope:Ft.swScope,vapidKey:Ie(Ft.vapidKey)}}}else if(4===Z){const Ft=Mt;C={token:Ft.fcmToken,createTime:Ft.createTime,subscriptionOptions:{auth:Ie(Ft.auth),p256dh:Ie(Ft.p256dh),endpoint:Ft.endpoint,swScope:Ft.swScope,vapidKey:Ie(Ft.vapidKey)}}}}),function(Z,ue,Fe,Ue){return P.apply(this,arguments)})})).close(),yield ta(Ga),yield ta("fcm_vapid_details_db"),yield ta("undefined"),function Es(w){if(!w||!w.subscriptionOptions)return!1;const{subscriptionOptions:C}=w;return"number"==typeof w.createTime&&w.createTime>0&&"string"==typeof w.token&&w.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}(C)?C:null;var P}),_s.apply(this,arguments)}const Gu="firebase-messaging-database",Jd=1,ss="firebase-messaging-store";let lc=null;function ra(){return lc||(lc=xr(Gu,Jd,{upgrade:(w,C)=>{0===C&&w.createObjectStore(ss)}})),lc}function ur(w){return _r.apply(this,arguments)}function _r(){return _r=(0,O.Z)(function*(w){const C=qa(w),P=yield(yield ra()).transaction(ss).objectStore(ss).get(C);if(P)return P;{const H=yield function Xf(w){return _s.apply(this,arguments)}(w.appConfig.senderId);if(H)return yield cc(w,H),H}}),_r.apply(this,arguments)}function cc(w,C){return ws.apply(this,arguments)}function ws(){return(ws=(0,O.Z)(function*(w,C){const M=qa(w),H=(yield ra()).transaction(ss,"readwrite");return yield H.objectStore(ss).put(C,M),yield H.done,C})).apply(this,arguments)}function qu(){return(qu=(0,O.Z)(function*(w){const C=qa(w),P=(yield ra()).transaction(ss,"readwrite");yield P.objectStore(ss).delete(C),yield P.done})).apply(this,arguments)}function qa({appConfig:w}){return w.appId}const Er=new se.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ia(w,C){return Wu.apply(this,arguments)}function Wu(){return(Wu=(0,O.Z)(function*(w,C){const M=yield pc(w),P=Xd(C),H={method:"POST",headers:M,body:JSON.stringify(P)};let Z;try{Z=yield(yield fetch(sa(w.appConfig),H)).json()}catch(ue){throw Er.create("token-subscribe-failed",{errorInfo:ue?.toString()})}if(Z.error)throw Er.create("token-subscribe-failed",{errorInfo:Z.error.message});if(!Z.token)throw Er.create("token-subscribe-no-token");return Z.token})).apply(this,arguments)}function Ku(){return(Ku=(0,O.Z)(function*(w,C){const M=yield pc(w),P=Xd(C.subscriptionOptions),H={method:"PATCH",headers:M,body:JSON.stringify(P)};let Z;try{Z=yield(yield fetch(`${sa(w.appConfig)}/${C.token}`,H)).json()}catch(ue){throw Er.create("token-update-failed",{errorInfo:ue?.toString()})}if(Z.error)throw Er.create("token-update-failed",{errorInfo:Z.error.message});if(!Z.token)throw Er.create("token-update-no-token");return Z.token})).apply(this,arguments)}function hc(w,C){return fc.apply(this,arguments)}function fc(){return(fc=(0,O.Z)(function*(w,C){const P={method:"DELETE",headers:yield pc(w)};try{const Z=yield(yield fetch(`${sa(w.appConfig)}/${C}`,P)).json();if(Z.error)throw Er.create("token-unsubscribe-failed",{errorInfo:Z.error.message})}catch(H){throw Er.create("token-unsubscribe-failed",{errorInfo:H?.toString()})}})).apply(this,arguments)}function sa({projectId:w}){return`${Qf}/projects/${w}/registrations`}function pc(w){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,O.Z)(function*({appConfig:w,installations:C}){const M=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":w.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function Xd({p256dh:w,auth:C,endpoint:M,vapidKey:P}){const H={web:{endpoint:M,auth:C,p256dh:w}};return P!==Hu&&(H.web.applicationPubKey=P),H}const gc=6048e5;function Zu(){return Zu=(0,O.Z)(function*(w){const C=yield function tp(w,C){return th.apply(this,arguments)}(w.swRegistration,w.vapidKey),M={vapidKey:w.vapidKey,swScope:w.swRegistration.scope,endpoint:C.endpoint,auth:Ie(C.getKey("auth")),p256dh:Ie(C.getKey("p256dh"))},P=yield ur(w.firebaseDependencies);if(P){if(function Cm(w,C){return C.vapidKey===w.vapidKey&&C.endpoint===w.endpoint&&C.auth===w.auth&&C.p256dh===w.p256dh}(P.subscriptionOptions,M))return Date.now()>=P.createTime+gc?function vo(w,C){return En.apply(this,arguments)}(w,{token:P.token,createTime:Date.now(),subscriptionOptions:M}):P.token;try{yield hc(w.firebaseDependencies,P.token)}catch(H){console.warn(H)}return ep(w.firebaseDependencies,M)}return ep(w.firebaseDependencies,M)}),Zu.apply(this,arguments)}function wr(){return wr=(0,O.Z)(function*(w){const C=yield ur(w.firebaseDependencies);C&&(yield hc(w.firebaseDependencies,C.token),yield function os(w){return qu.apply(this,arguments)}(w.firebaseDependencies));const M=yield w.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()}),wr.apply(this,arguments)}function En(){return En=(0,O.Z)(function*(w,C){try{const M=yield function dc(w,C){return Ku.apply(this,arguments)}(w.firebaseDependencies,C),P=Object.assign(Object.assign({},C),{token:M,createTime:Date.now()});return yield cc(w.firebaseDependencies,P),M}catch(M){throw yield function eh(w){return wr.apply(this,arguments)}(w),M}}),En.apply(this,arguments)}function ep(w,C){return _o.apply(this,arguments)}function _o(){return(_o=(0,O.Z)(function*(w,C){const P={token:yield ia(w,C),createTime:Date.now(),subscriptionOptions:C};return yield cc(w,P),P.token})).apply(this,arguments)}function th(){return(th=(0,O.Z)(function*(w,C){return(yield w.pushManager.getSubscription())||w.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:tn(C)})})).apply(this,arguments)}function np(w){const C={from:w.from,collapseKey:w.collapse_key,messageId:w.fcmMessageId};return function yc(w,C){if(!C.notification)return;w.notification={};const M=C.notification.title;M&&(w.notification.title=M);const P=C.notification.body;P&&(w.notification.body=P);const H=C.notification.image;H&&(w.notification.image=H);const Z=C.notification.icon;Z&&(w.notification.icon=Z)}(C,w),function vc(w,C){C.data&&(w.data=C.data)}(C,w),function _c(w,C){var M,P,H,Z,ue;if(!(C.fcmOptions||null!==(M=C.notification)&&void 0!==M&&M.click_action))return;w.fcmOptions={};const Fe=null!==(H=null===(P=C.fcmOptions)||void 0===P?void 0:P.link)&&void 0!==H?H:null===(Z=C.notification)||void 0===Z?void 0:Z.click_action;Fe&&(w.fcmOptions.link=Fe);const Ue=null===(ue=C.fcmOptions)||void 0===ue?void 0:ue.analytics_label;Ue&&(w.fcmOptions.analyticsLabel=Ue)}(C,w),C}function Eo(w,C){const M=[];for(let P=0;P<w.length;P++)M.push(w.charAt(P)),P<C.length&&M.push(C.charAt(P));return M.join("")}function as(w){return Er.create("missing-app-config-values",{valueName:w})}Eo("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Eo("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Qu{constructor(C,M,P){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const H=function rp(w){if(!w||!w.options)throw as("App Configuration Object");if(!w.name)throw as("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:M}=w;for(const P of C)if(!M[P])throw as(P);return{appName:w.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:H,installations:M,analyticsProvider:P}}_delete(){return Promise.resolve()}}function nh(w){return ip.apply(this,arguments)}function ip(){return(ip=(0,O.Z)(function*(w){try{w.swRegistration=yield navigator.serviceWorker.register(za,{scope:Nt}),w.swRegistration.update().catch(()=>{})}catch(C){throw Er.create("failed-service-worker-registration",{browserErrorMessage:C?.message})}})).apply(this,arguments)}function Ju(){return(Ju=(0,O.Z)(function*(w,C){if(!C&&!w.swRegistration&&(yield nh(w)),C||!w.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw Er.create("invalid-sw-registration");w.swRegistration=C}})).apply(this,arguments)}function Gs(){return(Gs=(0,O.Z)(function*(w,C){C?w.vapidKey=C:w.vapidKey||(w.vapidKey=Hu)})).apply(this,arguments)}function Ec(){return Ec=(0,O.Z)(function*(w,C){if(!navigator)throw Er.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Er.create("permission-blocked");return yield function wo(w,C){return Gs.apply(this,arguments)}(w,C?.vapidKey),yield function rh(w,C){return Ju.apply(this,arguments)}(w,C?.serviceWorkerRegistration),function mc(w){return Zu.apply(this,arguments)}(w)}),Ec.apply(this,arguments)}function Io(){return(Io=(0,O.Z)(function*(w,C,M){const P=function tl(w){switch(w){case _n.NOTIFICATION_CLICKED:return"notification_open";case _n.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(C);(yield w.firebaseDependencies.analyticsProvider.get()).logEvent(P,{message_id:M[zu],message_name:M[Yd],message_time:M[ac],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Co(){return Co=(0,O.Z)(function*(w,C){const M=C.data;if(!M.isFirebaseMessaging)return;w.onMessageHandler&&M.messageType===_n.PUSH_RECEIVED&&("function"==typeof w.onMessageHandler?w.onMessageHandler(np(M)):w.onMessageHandler.next(np(M)));const P=M.data;(function Yu(w){return"object"==typeof w&&!!w&&zu in w})(P)&&"1"===P[Jf]&&(yield function el(w,C,M){return Io.apply(this,arguments)}(w,M.messageType,P))}),Co.apply(this,arguments)}const oa="@firebase/messaging",nl=w=>{const C=new Qu(w.getProvider("app").getImmediate(),w.getProvider("installations-internal").getImmediate(),w.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function Do(w,C){return Co.apply(this,arguments)}(C,M)),C},Za=w=>{const C=w.getProvider("messaging").getImmediate();return{getToken:P=>function Xu(w,C){return Ec.apply(this,arguments)}(C,P)}};function Ya(){return ih.apply(this,arguments)}function ih(){return(ih=(0,O.Z)(function*(){try{yield(0,se.eu)()}catch{return!1}return typeof window<"u"&&(0,se.hl)()&&(0,se.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function rl(){(0,ie._registerComponent)(new ne.wA("messaging",nl,"PUBLIC")),(0,ie._registerComponent)(new ne.wA("messaging-internal",Za,"PRIVATE")),(0,ie.registerVersion)(oa,"0.12.4"),(0,ie.registerVersion)(oa,"0.12.4","esm2017")}();const gn="analytics",il="firebase_id",Ic="origin",Dc=6e4,sl="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ol="https://www.googletagmanager.com/gtag/js",tr=new ge.Yd("@firebase/analytics"),Ir=new se.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Is(w){if(!w.startsWith(ol)){const C=Ir.create("invalid-gtag-resource",{gtagURL:w});return tr.warn(C.message),""}return w}function ul(w){return Promise.all(w.map(C=>C.catch(M=>M)))}function ua(){return(ua=(0,O.Z)(function*(w,C,M,P,H,Z){const ue=P[H];try{if(ue)yield C[ue];else{const Ue=(yield ul(M)).find(ct=>ct.measurementId===H);Ue&&(yield C[Ue.appId])}}catch(Fe){tr.error(Fe)}w("config",H,Z)})).apply(this,arguments)}function ll(){return(ll=(0,O.Z)(function*(w,C,M,P,H){try{let Z=[];if(H&&H.send_to){let ue=H.send_to;Array.isArray(ue)||(ue=[ue]);const Fe=yield ul(M);for(const Ue of ue){const ct=Fe.find(Ft=>Ft.measurementId===Ue),Mt=ct&&C[ct.appId];if(!Mt){Z=[];break}Z.push(Mt)}}0===Z.length&&(Z=Object.values(C)),yield Promise.all(Z),w("event",P,H||{})}catch(Z){tr.error(Z)}})).apply(this,arguments)}const nu=30,cl=new class la{constructor(C={},M=1e3){this.throttleMetadata=C,this.intervalMillis=M}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,M){this.throttleMetadata[C]=M}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function Ao(w){return new Headers({Accept:"application/json","x-goog-api-key":w})}function us(){return(us=(0,O.Z)(function*(w){var C;const{appId:M,apiKey:P}=w,H={method:"GET",headers:Ao(P)},Z=sl.replace("{app-id}",M),ue=yield fetch(Z,H);if(200!==ue.status&&304!==ue.status){let Fe="";try{const Ue=yield ue.json();null!==(C=Ue.error)&&void 0!==C&&C.message&&(Fe=Ue.error.message)}catch{}throw Ir.create("config-fetch-failed",{httpStatus:ue.status,responseMessage:Fe})}return ue.json()})).apply(this,arguments)}function iu(){return(iu=(0,O.Z)(function*(w,C=cl,M){const{appId:P,apiKey:H,measurementId:Z}=w.options;if(!P)throw Ir.create("no-app-id");if(!H){if(Z)return{measurementId:Z,appId:P};throw Ir.create("no-api-key")}const ue=C.getThrottleMetadata(P)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Fe=new Mv;return setTimeout((0,O.Z)(function*(){Fe.abort()}),void 0!==M?M:Dc),bc({appId:P,apiKey:H,measurementId:Z},ue,Fe,C)})).apply(this,arguments)}function bc(w,C,M){return Sc.apply(this,arguments)}function Sc(){return Sc=(0,O.Z)(function*(w,{throttleEndTimeMillis:C,backoffCount:M},P,H=cl){var Z;const{appId:ue,measurementId:Fe}=w;try{yield function Av(w,C){return new Promise((M,P)=>{const H=Math.max(C-Date.now(),0),Z=setTimeout(M,H);w.addEventListener(()=>{clearTimeout(Z),P(Ir.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(P,C)}catch(Ue){if(Fe)return tr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Fe} provided in the "measurementId" field in the local Firebase config. [${Ue?.message}]`),{appId:ue,measurementId:Fe};throw Ue}try{const Ue=yield function op(w){return us.apply(this,arguments)}(w);return H.deleteThrottleMetadata(ue),Ue}catch(Ue){const ct=Ue;if(!function ap(w){if(!(w instanceof se.ZR&&w.customData))return!1;const C=Number(w.customData.httpStatus);return 429===C||500===C||503===C||504===C}(ct)){if(H.deleteThrottleMetadata(ue),Fe)return tr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Fe} provided in the "measurementId" field in the local Firebase config. [${ct?.message}]`),{appId:ue,measurementId:Fe};throw Ue}const Mt=503===Number(null===(Z=ct?.customData)||void 0===Z?void 0:Z.httpStatus)?(0,se.$s)(M,H.intervalMillis,nu):(0,se.$s)(M,H.intervalMillis),Ft={throttleEndTimeMillis:Date.now()+Mt,backoffCount:M+1};return H.setThrottleMetadata(ue,Ft),tr.debug(`Calling attemptFetch again in ${Mt} millis`),bc(w,Ft,P,H)}}),Sc.apply(this,arguments)}class Mv{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}let oh,uh;function up(){return(up=(0,O.Z)(function*(w,C,M,P,H){if(H&&H.global)w("event",M,P);else{const Z=yield C;w("event",M,Object.assign(Object.assign({},P),{send_to:Z}))}})).apply(this,arguments)}function Jt(){return(Jt=(0,O.Z)(function*(){if(!(0,se.hl)())return tr.warn(Ir.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,se.eu)()}catch(w){return tr.warn(Ir.create("indexeddb-unavailable",{errorInfo:w?.toString()}).message),!1}return!0})).apply(this,arguments)}function rt(){return rt=(0,O.Z)(function*(w,C,M,P,H,Z,ue){var Fe;const Ue=function wn(w){return iu.apply(this,arguments)}(w);Ue.then(In=>{M[In.measurementId]=In.appId,w.options.measurementId&&In.measurementId!==w.options.measurementId&&tr.warn(`The measurement ID in the local Firebase config (${w.options.measurementId}) does not match the measurement ID fetched from the server (${In.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(In=>tr.error(In)),C.push(Ue);const ct=function lp(){return Jt.apply(this,arguments)}().then(In=>{if(In)return P.getId()}),[Mt,Ft]=yield Promise.all([Ue,ct]);(function To(w){const C=window.document.getElementsByTagName("script");for(const M of Object.values(C))if(M.src&&M.src.includes(ol)&&M.src.includes(w))return M;return null})(Z)||function Ja(w,C){const M=function Qa(w,C){let M;return window.trustedTypes&&(M=window.trustedTypes.createPolicy(w,C)),M}("firebase-js-sdk-policy",{createScriptURL:Is}),P=document.createElement("script"),H=`${ol}?l=${w}&id=${C}`;P.src=M?M?.createScriptURL(H):H,P.async=!0,document.head.appendChild(P)}(Z,Mt.measurementId),uh&&(H("consent","default",uh),function lh(w){uh=w}(void 0)),H("js",new Date);const Pr=null!==(Fe=ue?.config)&&void 0!==Fe?Fe:{};return Pr[Ic]="firebase",Pr.update=!0,null!=Ft&&(Pr[il]=Ft),H("config",Mt.measurementId,Pr),oh&&(H("set",oh),function ou(w){oh=w}(void 0)),Mt.measurementId}),rt.apply(this,arguments)}class pi{constructor(C){this.app=C}_delete(){return delete Nn[this.app.options.appId],Promise.resolve()}}let Nn={},ch=[];const au={};let Ac,cs,gi="dataLayer",hl="gtag",uu=!1;function qi(w,C,M){!function Mc(){const w=[];if((0,se.ru)()&&w.push("This is a browser extension environment."),(0,se.zI)()||w.push("Cookies are not available."),w.length>0){const C=w.map((P,H)=>`(${H+1}) ${P}`).join(" "),M=Ir.create("invalid-analytics-context",{errorInfo:C});tr.warn(M.message)}}();const P=w.options.appId;if(!P)throw Ir.create("no-app-id");if(!w.options.apiKey){if(!w.options.measurementId)throw Ir.create("no-api-key");tr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${w.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Nn[P])throw Ir.create("already-exists",{id:P});if(!uu){!function aa(w){let C=[];Array.isArray(window[w])?C=window[w]:window[w]=C}(gi);const{wrappedGtag:Z,gtagCore:ue}=function tu(w,C,M,P,H){let Z=function(...ue){window[P].push(arguments)};return window[H]&&"function"==typeof window[H]&&(Z=window[H]),window[H]=function eu(w,C,M,P){function Z(){return Z=(0,O.Z)(function*(ue,...Fe){try{if("event"===ue){const[Ue,ct]=Fe;yield function Xa(w,C,M,P,H){return ll.apply(this,arguments)}(w,C,M,Ue,ct)}else if("config"===ue){const[Ue,ct]=Fe;yield function Cc(w,C,M,P,H,Z){return ua.apply(this,arguments)}(w,C,M,P,Ue,ct)}else if("consent"===ue){const[Ue]=Fe;w("consent","update",Ue)}else if("get"===ue){const[Ue,ct,Mt]=Fe;w("get",Ue,ct,Mt)}else if("set"===ue){const[Ue]=Fe;w("set",Ue)}else w(ue,...Fe)}catch(Ue){tr.error(Ue)}}),Z.apply(this,arguments)}return function H(ue){return Z.apply(this,arguments)}}(Z,w,C,M),{gtagCore:Z,wrappedGtag:window[H]}}(Nn,ch,au,gi,hl);cs=Z,Ac=ue,uu=!0}return Nn[P]=function ls(w,C,M,P,H,Z,ue){return rt.apply(this,arguments)}(w,ch,au,C,Ac,gi,M),new pi(w)}function Rc(){return lu.apply(this,arguments)}function lu(){return(lu=(0,O.Z)(function*(){if((0,se.ru)()||!(0,se.zI)()||!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}const xo="@firebase/analytics";!function Tm(){(0,ie._registerComponent)(new ne.wA(gn,(C,{options:M})=>qi(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,ie._registerComponent)(new ne.wA("analytics-internal",function w(C){try{const M=C.getProvider(gn).getImmediate();return{logEvent:(P,H,Z)=>function Nc(w,C,M,P){w=(0,se.m9)(w),function dl(w,C,M,P,H){return up.apply(this,arguments)}(cs,Nn[w.app.options.appId],C,M,P).catch(H=>tr.error(H))}(M,P,H,Z)}}catch(M){throw Ir.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,ie.registerVersion)(xo,"0.10.0"),(0,ie.registerVersion)(xo,"0.10.0","esm2017")}();var cu=k(4408),Ys=k(7565);const Nr=new class No extends Ys.v{}(class du extends cu.o{constructor(C,M){super(C,M),this.scheduler=C,this.work=M}schedule(C,M=0){return M>0?super.schedule(C,M):(this.delay=M,this.state=C,this.scheduler.flush(this),this)}execute(C,M){return M>0||this.closed?super.execute(C,M):this._execute(C,M)}requestAsyncId(C,M,P=0){return null!=P&&P>0||null==P&&this.delay>0?super.requestAsyncId(C,M,P):(C.flush(this),0)}});var hu=k(4986),Dr=k(8505),Cs=k(9468),ha=k(5363);const ri=new m.GfV("7.6.1"),dr="__angularfire_symbol__analyticsIsSupportedValue",ds="__angularfire_symbol__analyticsIsSupported",Oc="__angularfire_symbol__remoteConfigIsSupportedValue",kc="__angularfire_symbol__remoteConfigIsSupported",ii="__angularfire_symbol__messagingIsSupportedValue",hs="__angularfire_symbol__messagingIsSupported";function Lc(w,C,M){if(C){if(1===C.length)return C[0];const Z=C.filter(ue=>ue.app===M);if(1===Z.length)return Z[0]}return M.container.getProvider(w).getImmediate({optional:!0})}globalThis[ds]||(globalThis[ds]=Rc().then(w=>globalThis[dr]=w).catch(()=>globalThis[dr]=!1)),globalThis[hs]||(globalThis[hs]=Ya().then(w=>globalThis[ii]=w).catch(()=>globalThis[ii]=!1)),globalThis[kc]||(globalThis[kc]=Wf().then(w=>globalThis[Oc]=w).catch(()=>globalThis[Oc]=!1));const Vc=(w,C)=>{const M=C?[C]:(0,J.C6)(),P=[];return M.forEach(H=>{H.container.getProvider(w).instances.forEach(ue=>{P.includes(ue)||P.push(ue)})}),P};function fs(){}class Uc{constructor(C,M=Nr){this.zone=C,this.delegate=M}now(){return this.delegate.now()}schedule(C,M,P){const H=this.zone;return this.delegate.schedule(function(ue){H.runGuarded(()=>{C.apply(this,[ue])})},M,P)}}class pl{constructor(C){this.zone=C,this.task=null}call(C,M){const P=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",fs,{},fs,fs)),M.pipe((0,Dr.b)({next:P,complete:P,error:P})).subscribe(C).add(P)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Vt=(()=>{class w{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new Uc(Zone.current)),this.insideAngular=M.run(()=>new Uc(Zone.current,hu.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return w.\u0275fac=function(M){return new(M||w)(m.LFG(m.R0b))},w.\u0275prov=m.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();function Zn(){const w=globalThis.\u0275AngularFireScheduler;if(!w)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return w}function mi(w){return Zn(),function ph(w){return function(M){return(M=M.lift(new pl(w.ngZone))).pipe((0,Cs.R)(w.outsideAngular),(0,ha.Q)(w.insideAngular))}}(Zn())(w)}},2090:(It,Se,k)=>{k.d(Se,{$s:()=>Si,BH:()=>we,G6:()=>Te,L:()=>de,LL:()=>Je,Pz:()=>Ee,Sg:()=>ze,UG:()=>re,US:()=>ne,ZB:()=>K,ZR:()=>Lt,aH:()=>Pe,b$:()=>Xt,eu:()=>je,hl:()=>Ge,jU:()=>At,m9:()=>ei,ne:()=>Tt,pd:()=>Ci,r3:()=>Ji,ru:()=>nt,tV:()=>z,uI:()=>at,vZ:()=>Di,w1:()=>he,xO:()=>ka,xb:()=>Bs,z$:()=>Oe,zI:()=>gt,zd:()=>An});const ie=function(B){const V=[];let q=0;for(let me=0;me<B.length;me++){let X=B.charCodeAt(me);X<128?V[q++]=X:X<2048?(V[q++]=X>>6|192,V[q++]=63&X|128):55296==(64512&X)&&me+1<B.length&&56320==(64512&B.charCodeAt(me+1))?(X=65536+((1023&X)<<10)+(1023&B.charCodeAt(++me)),V[q++]=X>>18|240,V[q++]=X>>12&63|128,V[q++]=X>>6&63|128,V[q++]=63&X|128):(V[q++]=X>>12|224,V[q++]=X>>6&63|128,V[q++]=63&X|128)}return V},ne={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(B,V){if(!Array.isArray(B))throw Error("encodeByteArray takes an array as a parameter");this.init_();const q=V?this.byteToCharMapWebSafe_:this.byteToCharMap_,me=[];for(let X=0;X<B.length;X+=3){const Ye=B[X],We=X+1<B.length,sn=We?B[X+1]:0,Kn=X+2<B.length,Mn=Kn?B[X+2]:0;let Qn=(15&sn)<<2|Mn>>6,Xi=63&Mn;Kn||(Xi=64,We||(Qn=64)),me.push(q[Ye>>2],q[(3&Ye)<<4|sn>>4],q[Qn],q[Xi])}return me.join("")},encodeString(B,V){return this.HAS_NATIVE_SUPPORT&&!V?btoa(B):this.encodeByteArray(ie(B),V)},decodeString(B,V){return this.HAS_NATIVE_SUPPORT&&!V?atob(B):function(B){const V=[];let q=0,me=0;for(;q<B.length;){const X=B[q++];if(X<128)V[me++]=String.fromCharCode(X);else if(X>191&&X<224){const Ye=B[q++];V[me++]=String.fromCharCode((31&X)<<6|63&Ye)}else if(X>239&&X<365){const Kn=((7&X)<<18|(63&B[q++])<<12|(63&B[q++])<<6|63&B[q++])-65536;V[me++]=String.fromCharCode(55296+(Kn>>10)),V[me++]=String.fromCharCode(56320+(1023&Kn))}else{const Ye=B[q++],We=B[q++];V[me++]=String.fromCharCode((15&X)<<12|(63&Ye)<<6|63&We)}}return V.join("")}(this.decodeStringToByteArray(B,V))},decodeStringToByteArray(B,V){this.init_();const q=V?this.charToByteMapWebSafe_:this.charToByteMap_,me=[];for(let X=0;X<B.length;){const Ye=q[B.charAt(X++)],sn=X<B.length?q[B.charAt(X)]:0;++X;const Mn=X<B.length?q[B.charAt(X)]:64;++X;const Gt=X<B.length?q[B.charAt(X)]:64;if(++X,null==Ye||null==sn||null==Mn||null==Gt)throw new ge;me.push(Ye<<2|sn>>4),64!==Mn&&(me.push(sn<<4&240|Mn>>2),64!==Gt&&me.push(Mn<<6&192|Gt))}return me},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let B=0;B<this.ENCODED_VALS.length;B++)this.byteToCharMap_[B]=this.ENCODED_VALS.charAt(B),this.charToByteMap_[this.byteToCharMap_[B]]=B,this.byteToCharMapWebSafe_[B]=this.ENCODED_VALS_WEBSAFE.charAt(B),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[B]]=B,B>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(B)]=B,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(B)]=B)}}};class ge extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const de=function(B){return function(B){const V=ie(B);return ne.encodeByteArray(V,!0)}(B).replace(/\./g,"")},z=function(B){try{return ne.decodeString(B,!0)}catch(V){console.error("base64Decode failed: ",V)}return null};function K(B,V){if(!(V instanceof Object))return V;switch(V.constructor){case Date:return new Date(V.getTime());case Object:void 0===B&&(B={});break;case Array:B=[];break;default:return V}for(const q in V)!V.hasOwnProperty(q)||!He(q)||(B[q]=K(B[q],V[q]));return B}function He(B){return"__proto__"!==B}const xe=()=>{try{return function Ce(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const B=process.env.__FIREBASE_DEFAULTS__;return B?JSON.parse(B):void 0})()||(()=>{if(typeof document>"u")return;let B;try{B=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const V=B&&z(B[1]);return V&&JSON.parse(V)})()}catch(B){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${B}`)}},Pe=()=>{var B;return null===(B=xe())||void 0===B?void 0:B.config},Ee=B=>{var V;return null===(V=xe())||void 0===V?void 0:V[`_${B}`]};class we{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((V,q)=>{this.resolve=V,this.reject=q})}wrapCallback(V){return(q,me)=>{q?this.reject(q):this.resolve(me),"function"==typeof V&&(this.promise.catch(()=>{}),1===V.length?V(q):V(q,me))}}}function ze(B,V){if(B.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const me=V||"demo-project",X=B.iat||0,Ye=B.sub||B.user_id;if(!Ye)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const We=Object.assign({iss:`https://securetoken.google.com/${me}`,aud:me,iat:X,exp:X+3600,auth_time:X,sub:Ye,user_id:Ye,firebase:{sign_in_provider:"custom",identities:{}}},B);return[de(JSON.stringify({alg:"none",type:"JWT"})),de(JSON.stringify(We)),""].join(".")}function Oe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function at(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Oe())}function re(){var B;const V=null===(B=xe())||void 0===B?void 0:B.forceEnvironment;if("node"===V)return!0;if("browser"===V)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function At(){return"object"==typeof self&&self.self===self}function nt(){const B="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof B&&void 0!==B.id}function Xt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function he(){const B=Oe();return B.indexOf("MSIE ")>=0||B.indexOf("Trident/")>=0}function Te(){return!re()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ge(){try{return"object"==typeof indexedDB}catch{return!1}}function je(){return new Promise((B,V)=>{try{let q=!0;const me="validate-browser-context-for-indexeddb-analytics-module",X=self.indexedDB.open(me);X.onsuccess=()=>{X.result.close(),q||self.indexedDB.deleteDatabase(me),B(!0)},X.onupgradeneeded=()=>{q=!1},X.onerror=()=>{var Ye;V((null===(Ye=X.error)||void 0===Ye?void 0:Ye.message)||"")}}catch(q){V(q)}})}function gt(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Lt extends Error{constructor(V,q,me){super(q),this.code=V,this.customData=me,this.name="FirebaseError",Object.setPrototypeOf(this,Lt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Je.prototype.create)}}class Je{constructor(V,q,me){this.service=V,this.serviceName=q,this.errors=me}create(V,...q){const me=q[0]||{},X=`${this.service}/${V}`,Ye=this.errors[V],We=Ye?function Qt(B,V){return B.replace(St,(q,me)=>{const X=V[me];return null!=X?String(X):`<${me}?>`})}(Ye,me):"Error";return new Lt(X,`${this.serviceName}: ${We} (${X}).`,me)}}const St=/\{\$([^}]+)}/g;function Ji(B,V){return Object.prototype.hasOwnProperty.call(B,V)}function Bs(B){for(const V in B)if(Object.prototype.hasOwnProperty.call(B,V))return!1;return!0}function Di(B,V){if(B===V)return!0;const q=Object.keys(B),me=Object.keys(V);for(const X of q){if(!me.includes(X))return!1;const Ye=B[X],We=V[X];if(vt(Ye)&&vt(We)){if(!Di(Ye,We))return!1}else if(Ye!==We)return!1}for(const X of me)if(!q.includes(X))return!1;return!0}function vt(B){return null!==B&&"object"==typeof B}function ka(B){const V=[];for(const[q,me]of Object.entries(B))Array.isArray(me)?me.forEach(X=>{V.push(encodeURIComponent(q)+"="+encodeURIComponent(X))}):V.push(encodeURIComponent(q)+"="+encodeURIComponent(me));return V.length?"&"+V.join("&"):""}function An(B){const V={};return B.replace(/^\?/,"").split("&").forEach(me=>{if(me){const[X,Ye]=me.split("=");V[decodeURIComponent(X)]=decodeURIComponent(Ye)}}),V}function Ci(B){const V=B.indexOf("?");if(!V)return"";const q=B.indexOf("#",V);return B.substring(V,q>0?q:void 0)}function Tt(B,V){const q=new ut(B,V);return q.subscribe.bind(q)}class ut{constructor(V,q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=q,this.task.then(()=>{V(this)}).catch(me=>{this.error(me)})}next(V){this.forEachObserver(q=>{q.next(V)})}error(V){this.forEachObserver(q=>{q.error(V)}),this.close(V)}complete(){this.forEachObserver(V=>{V.complete()}),this.close()}subscribe(V,q,me){let X;if(void 0===V&&void 0===q&&void 0===me)throw new Error("Missing Observer.");X=function po(B,V){if("object"!=typeof B||null===B)return!1;for(const q of V)if(q in B&&"function"==typeof B[q])return!0;return!1}(V,["next","error","complete"])?V:{next:V,error:q,complete:me},void 0===X.next&&(X.next=jr),void 0===X.error&&(X.error=jr),void 0===X.complete&&(X.complete=jr);const Ye=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?X.error(this.finalError):X.complete()}catch{}}),this.observers.push(X),Ye}unsubscribeOne(V){void 0===this.observers||void 0===this.observers[V]||(delete this.observers[V],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(V){if(!this.finalized)for(let q=0;q<this.observers.length;q++)this.sendOne(q,V)}sendOne(V,q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[V])try{q(this.observers[V])}catch(me){typeof console<"u"&&console.error&&console.error(me)}})}close(V){this.finalized||(this.finalized=!0,void 0!==V&&(this.finalError=V),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function jr(){}const bi=1e3,ln=2,$n=144e5,yr=.5;function Si(B,V=bi,q=ln){const me=V*Math.pow(q,B),X=Math.round(yr*me*(Math.random()-.5)*2);return Math.min($n,me+X)}function ei(B){return B&&B._delegate?B._delegate:B}},1906:(It,Se,k)=>{var m=k(4650);let J=null;function O(){return J}class se{}const ne=new m.OlP("DocumentToken");let ge=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return function _e(){return(0,m.LFG)(z)}()},providedIn:"platform"}),n})();const de=new m.OlP("Location Initialized");let z=(()=>{class n extends ge{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){$()?this._history.pushState(t,r,i):this._location.hash=i}replaceState(t,r,i){$()?this._history.replaceState(t,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ne))},n.\u0275prov=m.Yz7({token:n,factory:function(){return function K(){return new z((0,m.LFG)(ne))}()},providedIn:"platform"}),n})();function $(){return!!window.history.pushState}function He(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ce(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function qe(n){return n&&"?"!==n[0]?"?"+n:n}let pt=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return(0,m.f3M)(xe)},providedIn:"root"}),n})();const fe=new m.OlP("appBaseHref");let xe=(()=>{class n extends pt{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,m.f3M)(ne).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return He(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+qe(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+qe(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+qe(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ge),m.LFG(fe,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ne=(()=>{class n extends pt{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=He(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+qe(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+qe(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ge),m.LFG(fe,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),Be=(()=>{class n{constructor(t){this._subject=new m.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function ze(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(Ce(we(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+qe(r))}normalize(t){return n.stripTrailingSlash(function Ee(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,we(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+qe(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+qe(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=qe,n.joinWithSlash=He,n.stripTrailingSlash=Ce,n.\u0275fac=function(t){return new(t||n)(m.LFG(pt))},n.\u0275prov=m.Yz7({token:n,factory:function(){return function Pe(){return new Be((0,m.LFG)(pt))}()},providedIn:"root"}),n})();function we(n){return n.replace(/\/index.html$/,"")}function Va(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}const go=/\s+/,Jn=[];let Xe=(()=>{class n{constructor(t,r,i,a){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=a,this.initialClasses=Jn,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(go):Jn}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(go):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,Boolean(t[r]));this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(go).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.ZZ4),m.Y36(m.aQg),m.Y36(m.SBq),m.Y36(m.Qsj))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class es{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Rr=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new es(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===a?void 0:a);else if(null!==a){const f=r.get(a);r.move(f,l),Zo(f,i)}});for(let i=0,a=r.length;i<a;i++){const f=r.get(i).context;f.index=i,f.count=a,f.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Zo(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.s_b),m.Y36(m.Rgc),m.Y36(m.ZZ4))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Zo(n,e){n.context.$implicit=e.item}let Ri=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();const Im="server";function vs(n){return n===Im}let Jo=(()=>{class n{}return n.\u0275prov=(0,m.Yz7)({token:n,providedIn:"root",factory:()=>new ic((0,m.LFG)(ne),window)}),n})();class ic{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function yo(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=sc(this.window.history)||sc(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function sc(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Xo{}class _c extends se{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Yu extends _c{static makeCurrent(){!function ie(n){J||(J=n)}(new Yu)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function rp(){return Eo=Eo||document.querySelector("base"),Eo?Eo.getAttribute("href"):null}();return null==t?null:function Qu(n){as=as||document.createElement("a"),as.setAttribute("href",n);const e=as.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Eo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Va(document.cookie,e)}}let as,Eo=null;const nh=new m.OlP("TRANSITION_ID"),rh=[{provide:m.ip1,useFactory:function ip(n,e,t){return()=>{t.get(m.CZH).donePromise.then(()=>{const r=O(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[nh,ne,m.zs3],multi:!0}];let wo=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Gs=new m.OlP("EventManagerPlugins");let Xu=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const l=i[a];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Gs),m.LFG(m.R0b))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class Ec{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=O().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let el=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,r){const i=this.usageCount;let a=i.get(t)??0;return a+=r,a>0?i.set(t,a):i.delete(t),a}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),Io=(()=>{class n extends el{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.forEach(a=>a.remove()),r.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,r){const i=this.doc.createElement("style");i.textContent=r,t.appendChild(i);const a=this.styleRef.get(r);a?a.push(i):this.styleRef.set(r,[i])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ne))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const tl={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Do=/%COMP%/g,rl=new m.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function sh(n,e){return e.flat(100).map(t=>t.replace(Do,n))}function qs(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let wc=(()=>{class n{constructor(t,r,i,a){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=a,this.rendererByCompId=new Map,this.defaultRenderer=new lr(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(t,r);return i instanceof il?i.applyToHost(t):i instanceof gn&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let a=i.get(r.id);if(!a){const l=this.eventManager,f=this.sharedStylesHost,y=this.removeStylesOnCompDestory;switch(r.encapsulation){case m.ifc.Emulated:a=new il(l,f,r,this.appId,y);break;case m.ifc.ShadowDom:return new sp(l,f,t,r);default:a=new gn(l,f,r,y)}a.onDestroy=()=>i.delete(r.id),i.set(r.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Xu),m.LFG(Io),m.LFG(m.AFp),m.LFG(rl))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class lr{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(tl[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(So(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(So(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=tl[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=tl[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(m.JOm.DashCase|m.JOm.Important)?e.style.setProperty(t,r,i&m.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&m.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,qs(r)):this.eventManager.addEventListener(e,t,qs(r))}}function So(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class sp extends lr{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=sh(i.id,i.styles);for(const l of a){const f=document.createElement("style");f.textContent=l,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class gn extends lr{constructor(e,t,r,i,a=r.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=sh(a,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class il extends gn{constructor(e,t,r,i,a){const l=i+"-"+r.id;super(e,t,r,a,l),this.contentAttr=function Ya(n){return"_ngcontent-%COMP%".replace(Do,n)}(l),this.hostAttr=function ih(n){return"_nghost-%COMP%".replace(Do,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let Ic=(()=>{class n extends Ec{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ne))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Dc=["alt","control","meta","shift"],sl={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ol={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let tr=(()=>{class n extends Ec{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="",f=r.indexOf("code");if(f>-1&&(r.splice(f,1),l="code."),Dc.forEach(I=>{const S=r.indexOf(I);S>-1&&(r.splice(S,1),l+=I+".")}),l+=a,0!=r.length||0===a.length)return null;const y={};return y.domEventName=i,y.fullKey=l,y}static matchEventFullKeyCode(t,r){let i=sl[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Dc.forEach(l=>{l!==i&&(0,ol[l])(t)&&(a+=l+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ne))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Xa=(0,m.eFA)(m._c5,"browser",[{provide:m.Lbi,useValue:"browser"},{provide:m.g9A,useValue:function Ja(){Yu.makeCurrent()},multi:!0},{provide:ne,useFactory:function Cc(){return(0,m.RDi)(document),document},deps:[]}]),ll=new m.OlP(""),eu=[{provide:m.rWj,useClass:class Ju{addToWindow(e){m.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},m.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),m.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),m.dqk.frameworkStabilizers||(m.dqk.frameworkStabilizers=[]),m.dqk.frameworkStabilizers.push(r=>{const i=m.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const f=function(y){l=l||y,a--,0==a&&r(l)};i.forEach(function(y){y.whenStable(f)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:m.lri,useClass:m.dDg,deps:[m.R0b,m.eoX,m.rWj]},{provide:m.dDg,useClass:m.dDg,deps:[m.R0b,m.eoX,m.rWj]}],tu=[{provide:m.zSh,useValue:"root"},{provide:m.qLn,useFactory:function aa(){return new m.qLn},deps:[]},{provide:Gs,useClass:Ic,multi:!0,deps:[ne,m.R0b,m.Lbi]},{provide:Gs,useClass:tr,multi:!0,deps:[ne]},{provide:wc,useClass:wc,deps:[Xu,Io,m.AFp,rl]},{provide:m.FYo,useExisting:wc},{provide:el,useExisting:Io},{provide:Io,useClass:Io,deps:[ne]},{provide:Xu,useClass:Xu,deps:[Gs,m.R0b]},{provide:Xo,useClass:wo,deps:[]},[]];let To=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:m.AFp,useValue:t.appId},{provide:nh,useExisting:m.AFp},rh]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ll,12))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[...tu,...eu],imports:[Ri,m.hGG]}),n})(),Ao=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ne))},n.\u0275prov=m.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function cl(){return new Ao((0,m.LFG)(ne))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var Jt=k(8996),ls=k(7669);function rt(...n){const e=(0,ls.yG)(n);return(0,Jt.D)(n,e)}var pi=k(7579);class Nn extends pi.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const au=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var gi=k(9751);const{isArray:hl}=Array,{getPrototypeOf:Ac,prototype:cs,keys:uu}=Object;var qi=k(4671),Ct=k(4004);const{isArray:Ro}=Array;var cr=k(5403),fl=k(9672);function xc(...n){const e=(0,ls.yG)(n),t=(0,ls.jO)(n),{args:r,keys:i}=function da(n){if(1===n.length){const e=n[0];if(hl(e))return{args:e,keys:null};if(function Mc(n){return n&&"object"==typeof n&&Ac(n)===cs}(e)){const t=uu(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,Jt.D)([],e);const a=new gi.y(function dh(n,e,t=qi.y){return r=>{Ks(e,()=>{const{length:i}=n,a=new Array(i);let l=i,f=i;for(let y=0;y<i;y++)Ks(e,()=>{const I=(0,Jt.D)(n[y],e);let S=!1;I.subscribe((0,cr.x)(r,R=>{a[y]=R,S||(S=!0,f--),f||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>function Ds(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,l):qi.y));return t?a.pipe(function lu(n){return(0,Ct.U)(e=>function Rc(n,e){return Ro(e)?n(...e):n(e)}(n,e))}(t)):a}function Ks(n,e,t){n?(0,fl.f)(t,n,e):e()}var Zs=k(8189);function hh(...n){return function Nc(){return(0,Zs.J)(1)}()((0,Jt.D)(n,(0,ls.yG)(n)))}var xo=k(8421);function Pc(n){return new gi.y(e=>{(0,xo.Xf)(n()).subscribe(e)})}var Tm=k(9635),cu=k(576);function du(n,e){const t=(0,cu.m)(n)?n:()=>n,r=i=>i.error(t());return new gi.y(e?i=>e.schedule(r,0,i):r)}var Ys=k(515),No=k(727),Nr=k(4482);function fh(){return(0,Nr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,cr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class hu extends gi.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Nr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new No.w0;const t=this.getSubject();e.add(this.source.subscribe((0,cr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=No.w0.EMPTY)}return e}refCount(){return fh()(this)}}function Dr(n,e){return(0,Nr.e)((t,r)=>{let i=null,a=0,l=!1;const f=()=>l&&!i&&r.complete();t.subscribe((0,cr.x)(r,y=>{i?.unsubscribe();let I=0;const S=a++;(0,xo.Xf)(n(y,S)).subscribe(i=(0,cr.x)(r,R=>r.next(e?e(y,R,S,I++):R),()=>{i=null,f()}))},()=>{l=!0,f()}))})}function Cs(n){return n<=0?()=>Ys.E:(0,Nr.e)((e,t)=>{let r=0;e.subscribe((0,cr.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function ha(...n){const e=(0,ls.yG)(n);return(0,Nr.e)((t,r)=>{(e?hh(n,t,e):hh(n,t)).subscribe(r)})}function ri(n,e){return(0,Nr.e)((t,r)=>{let i=0;t.subscribe((0,cr.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var dr=k(5577);function ds(n){return(0,Nr.e)((e,t)=>{let r=!1;e.subscribe((0,cr.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Oc(n=kc){return(0,Nr.e)((e,t)=>{let r=!1;e.subscribe((0,cr.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function kc(){return new au}function ii(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ri((i,a)=>n(i,a,r)):qi.y,Cs(1),t?ds(e):Oc(()=>new au))}function hs(n,e){return(0,cu.m)(e)?(0,dr.z)(n,e,1):(0,dr.z)(n,1)}var Cr=k(8505);function Po(n){return(0,Nr.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,cr.x)(t,void 0,void 0,l=>{a=(0,xo.Xf)(n(l,Po(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function Fc(n,e){return(0,Nr.e)(function cp(n,e,t,r,i){return(a,l)=>{let f=t,y=e,I=0;a.subscribe((0,cr.x)(l,S=>{const R=I++;y=f?n(y,S,R):(f=!0,S),r&&l.next(y)},i&&(()=>{f&&l.next(y),l.complete()})))}}(n,e,arguments.length>=2,!0))}function Lc(n){return n<=0?()=>Ys.E:(0,Nr.e)((e,t)=>{let r=[];e.subscribe((0,cr.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Vc(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ri((i,a)=>n(i,a,r)):qi.y,Lc(1),t?ds(e):Oc(()=>new au))}function pl(n){return(0,Nr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Vt="primary",Zn=Symbol("RouteTitle");class gl{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ni(n){return new gl(n)}function Am(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],f=n[a];if(l.startsWith(":"))i[l.substring(1)]=f;else if(l!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function mi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!ph(n[i],e[i]))return!1;return!0}function ph(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function gh(n){return Array.prototype.concat.apply([],n)}function hp(n){return n.length>0?n[n.length-1]:null}function C(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function M(n){return(0,m.CqO)(n)?n:(0,m.QGY)(n)?(0,Jt.D)(Promise.resolve(n)):rt(n)}const P=!1,H={exact:function Ue(n,e,t){if(!br(n.segments,e.segments)||!Pr(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Ue(n.children[r],e.children[r],t))return!1;return!0},subset:Mt},Z={exact:function Fe(n,e){return mi(n,e)},subset:function ct(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>ph(n[t],e[t]))},ignored:()=>!0};function ue(n,e,t){return H[t.paths](n.root,e.root,t.matrixParams)&&Z[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Mt(n,e,t){return Ft(n,e,e.segments,t)}function Ft(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!br(i,t)||e.hasChildren()||!Pr(i,t,r))}if(n.segments.length===t.length){if(!br(n.segments,t)||!Pr(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Mt(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(br(n.segments,i)&&Pr(n.segments,i,r)&&n.children[Vt])&&Ft(n.children[Vt],e,a,r)}}function Pr(n,e,t){return e.every((r,i)=>Z[t](n[i].parameters,r.parameters))}class In{constructor(e=new Ut([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ni(this.queryParams)),this._queryParamMap}toString(){return xv.serialize(this)}}class Ut{constructor(e,t){this.segments=e,this.children=t,this.parent=null,C(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return pu(this)}}class Oo{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Ni(this.parameters)),this._parameterMap}toString(){return pp(this)}}function br(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Js=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return new fu},providedIn:"root"}),n})();class fu{parse(e){const t=new _h(e);return new In(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${gu(e.root,!0)}`,r=function gp(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${ko(t)}=${ko(i)}`).join("&"):`${ko(t)}=${ko(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function mh(n){return encodeURI(n)}(e.fragment)}`:""}`}}const xv=new fu;function pu(n){return n.segments.map(e=>pp(e)).join("/")}function gu(n,e){if(!n.hasChildren())return pu(n);if(e){const t=n.children[Vt]?gu(n.children[Vt],!1):"",r=[];return C(n.children,(i,a)=>{a!==Vt&&r.push(`${a}:${gu(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function bs(n,e){let t=[];return C(n.children,(r,i)=>{i===Vt&&(t=t.concat(e(r,i)))}),C(n.children,(r,i)=>{i!==Vt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Vt?[gu(n.children[Vt],!1)]:[`${i}:${gu(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Vt]?`${pu(n)}/${t[0]}`:`${pu(n)}/(${t.join("//")})`}}function fp(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ko(n){return fp(n).replace(/%3B/gi,";")}function Bc(n){return fp(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Fo(n){return decodeURIComponent(n)}function yh(n){return Fo(n.replace(/\+/g,"%20"))}function pp(n){return`${Bc(n.path)}${function Nv(n){return Object.keys(n).map(e=>`;${Bc(e)}=${Bc(n[e])}`).join("")}(n.parameters)}`}const Mm=/^[^\/()?;=#]+/;function vh(n){const e=n.match(Mm);return e?e[0]:""}const Sw=/^[^=?&#]+/,Pv=/^[^&#]+/;class _h{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ut([],{}):new Ut([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Vt]=new Ut(e,t)),r}parseSegment(){const e=vh(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new m.vHH(4009,P);return this.capture(e),new Oo(Fo(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=vh(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=vh(this.remaining);i&&(r=i,this.capture(r))}e[Fo(t)]=Fo(r)}parseQueryParam(e){const t=function mu(n){const e=n.match(Sw);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function Ov(n){const e=n.match(Pv);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=yh(t),a=yh(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=vh(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new m.vHH(4010,P);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Vt);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[Vt]:new Ut([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new m.vHH(4011,P)}}function jc(n){return n.segments.length>0?new Ut([],{[Vt]:n}):n}function yu(n){const e={};for(const r of Object.keys(n.children)){const a=yu(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function mp(n){if(1===n.numberOfChildren&&n.children[Vt]){const e=n.children[Vt];return new Ut(n.segments.concat(e.segments),e.children)}return n}(new Ut(n.segments,e))}function vu(n){return n instanceof In}const $c=!1;function Rm(n,e,t,r,i){if(0===t.length)return zc(e.root,e.root,e.root,r,i);const a=function qc(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new vp(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const f={};return C(a.outlets,(y,I)=>{f[I]="string"==typeof y?y.split("/"):y}),[...i,{outlets:f}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((f,y)=>{0==y&&"."===f||(0==y&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,a]},[]);return new vp(t,e,r)}(t);return a.toRoot()?zc(e.root,e.root,new Ut([],{}),r,i):function l(y){const I=function Wc(n,e,t,r){if(n.isAbsolute)return new _u(e.root,!0,0);if(-1===r)return new _u(t,t===e.root,0);return function Kc(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new m.vHH(4005,$c&&"Invalid number of '../'");i=r.segments.length}return new _u(r,!1,i-a)}(t,r+(ml(n.commands[0])?0:1),n.numberOfDoubleDots)}(a,e,n.snapshot?._urlSegment,y),S=I.processChildren?eo(I.segmentGroup,I.index,a.commands):yl(I.segmentGroup,I.index,a.commands);return zc(e.root,I.segmentGroup,S,r,i)}(n.snapshot?._lastPathIndex)}function ml(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Hc(n){return"object"==typeof n&&null!=n&&n.outlets}function zc(n,e,t,r,i){let l,a={};r&&C(r,(y,I)=>{a[I]=Array.isArray(y)?y.map(S=>`${S}`):`${y}`}),l=n===e?t:Gc(n,e,t);const f=jc(yu(l));return new In(f,a,i)}function Gc(n,e,t){const r={};return C(n.children,(i,a)=>{r[a]=i===e?t:Gc(i,e,t)}),new Ut(n.segments,r)}class vp{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&ml(r[0]))throw new m.vHH(4003,$c&&"Root segment cannot have matrix parameters");const i=r.find(Hc);if(i&&i!==hp(r))throw new m.vHH(4004,$c&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class _u{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function yl(n,e,t){if(n||(n=new Ut([],{})),0===n.segments.length&&n.hasChildren())return eo(n,e,t);const r=function _p(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],f=t[r];if(Hc(f))break;const y=`${f}`,I=r<t.length-1?t[r+1]:null;if(i>0&&void 0===y)break;if(y&&I&&"object"==typeof I&&void 0===I.outlets){if(!Nm(y,I,l))return a;r+=2}else{if(!Nm(y,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new Ut(n.segments.slice(0,r.pathIndex),{});return a.children[Vt]=new Ut(n.segments.slice(r.pathIndex),n.children),eo(a,0,i)}return r.match&&0===i.length?new Ut(n.segments,{}):r.match&&!n.hasChildren()?Zc(n,e,t):r.match?eo(n,0,i):Zc(n,e,t)}function eo(n,e,t){if(0===t.length)return new Ut(n.segments,{});{const r=function Eh(n){return Hc(n[0])?n[0].outlets:{[Vt]:n}}(t),i={};if(!r[Vt]&&n.children[Vt]&&1===n.numberOfChildren&&0===n.children[Vt].segments.length){const a=eo(n.children[Vt],e,t);return new Ut(n.segments,a.children)}return C(r,(a,l)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[l]=yl(n.children[l],e,a))}),C(n.children,(a,l)=>{void 0===r[l]&&(i[l]=a)}),new Ut(n.segments,i)}}function Zc(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(Hc(a)){const y=Ep(a.outlets);return new Ut(r,y)}if(0===i&&ml(t[0])){r.push(new Oo(n.segments[e].path,Eu(t[0]))),i++;continue}const l=Hc(a)?a.outlets[Vt]:`${a}`,f=i<t.length-1?t[i+1]:null;l&&f&&ml(f)?(r.push(new Oo(l,Eu(f))),i+=2):(r.push(new Oo(l,{})),i++)}return new Ut(r,{})}function Ep(n){const e={};return C(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Zc(new Ut([],{}),0,t))}),e}function Eu(n){const e={};return C(n,(t,r)=>e[r]=`${t}`),e}function Nm(n,e,t){return n==t.path&&mi(e,t.parameters)}const vl="imperative";class to{constructor(e,t){this.id=e,this.url=t}}class wp extends to{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ss extends to{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Yc extends to{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class _l extends to{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class El extends to{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ip extends to{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wl extends to{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fv extends to{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Pm extends to{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Om extends to{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Dp{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class wh{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Lv{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ih{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Dh{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yi{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wu{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let Ch=(()=>{class n{createUrlTree(t,r,i,a,l,f){return Rm(t||r.root,i,a,l,f)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),Vv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(e){return Ch.\u0275fac(e)},providedIn:"root"}),n})();class Sp{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Tp(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Tp(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=no(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return no(e,this._root).map(t=>t.value)}}function Tp(n,e){if(n===e.value)return e;for(const t of e.children){const r=Tp(n,t);if(r)return r}return null}function no(n,e){if(n===e.value)return[e];for(const t of e.children){const r=no(n,t);if(r.length)return r.unshift(e),r}return[]}class Wr{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ro(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Fm extends Sp{constructor(e,t){super(e),this.snapshot=t,Iu(this,e)}toString(){return this.snapshot.toString()}}function Uv(n,e){const t=function Bv(n,e){const l=new Qc([],{},{},"",{},Vt,e,null,n.root,-1,{});return new io("",new Wr(l,[]))}(n,e),r=new Nn([new Oo("",{})]),i=new Nn({}),a=new Nn({}),l=new Nn({}),f=new Nn(""),y=new Or(r,i,l,f,a,Vt,e,t.root);return y.snapshot=t.root,new Fm(new Wr(y,[]),t)}class Or{constructor(e,t,r,i,a,l,f,y){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=f,this.title=this.data?.pipe((0,Ct.U)(I=>I[Zn]))??rt(void 0),this._futureSnapshot=y}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ct.U)(e=>Ni(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ct.U)(e=>Ni(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ap(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function Lm(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Qc{get title(){return this.data?.[Zn]}constructor(e,t,r,i,a,l,f,y,I,S,R){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=f,this.routeConfig=y,this._urlSegment=I,this._lastPathIndex=S,this._resolve=R}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ni(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ni(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class io extends Sp{constructor(e,t){super(t),this.url=e,Iu(this,t)}toString(){return Mp(this._root)}}function Iu(n,e){e.value._routerState=n,e.children.forEach(t=>Iu(n,t))}function Mp(n){const e=n.children.length>0?` { ${n.children.map(Mp).join(", ")} } `:"";return`${n.value}${e}`}function bh(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,mi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),mi(e.params,t.params)||n.params.next(t.params),function dp(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!mi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),mi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Jc(n,e){const t=mi(n.params,e.params)&&function Qs(n,e){return br(n,e)&&n.every((t,r)=>mi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Jc(n.parent,e.parent))}function Lo(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Vm(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Lo(n,r,i);return Lo(n,r)})}(n,e,t);return new Wr(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(f=>Lo(n,f)),l}}const r=function Um(n){return new Or(new Nn(n.url),new Nn(n.params),new Nn(n.queryParams),new Nn(n.fragment),new Nn(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>Lo(n,a));return new Wr(r,i)}}const Sh="ngNavigationCancelingError";function v(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=vu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=h(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function h(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Sh]=!0,r.cancellationCode=e,t&&(r.url=t),r}function p(n){return E(n)&&vu(n.url)}function E(n){return n&&n[Sh]}class T{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new x,this.attachRef=null}}let x=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new T,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const j=!1;let Y=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Vt,this.activateEvents=new m.vpe,this.deactivateEvents=new m.vpe,this.attachEvents=new m.vpe,this.detachEvents=new m.vpe,this.parentContexts=(0,m.f3M)(x),this.location=(0,m.f3M)(m.s_b),this.changeDetector=(0,m.f3M)(m.sBO),this.environmentInjector=(0,m.f3M)(m.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new m.vHH(4012,j);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new m.vHH(4012,j);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new m.vHH(4012,j);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new m.vHH(4013,j);this._activatedRoute=t;const i=this.location,l=t.snapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,y=new Ae(t,f,i.injector);if(r&&function $e(n){return!!n.resolveComponentFactory}(r)){const I=r.resolveComponentFactory(l);this.activated=i.createComponent(I,i.length,y)}else this.activated=i.createComponent(l,{index:i.length,injector:y,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=m.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[m.TTD]}),n})();class Ae{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Or?this.route:e===x?this.childContexts:this.parent.get(e,t)}}let tt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[m.jDz],decls:1,vars:0,template:function(t,r){1&t&&m._UZ(0,"router-outlet")},dependencies:[Y],encapsulation:2}),n})();function st(n,e){return n.providers&&!n._injector&&(n._injector=(0,m.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function ed(n){const e=n.children&&n.children.map(ed),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Vt&&(t.component=tt),t}function Pi(n){return n.outlet||Vt}function Th(n,e){const t=n.filter(r=>Pi(r)===e);return t.push(...n.filter(r=>Pi(r)!==e)),t}function Il(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Pp{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),bh(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=ro(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),C(i,(a,l)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=ro(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=ro(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=ro(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new yi(a.value.snapshot))}),e.children.length&&this.forwardEvent(new Ih(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(bh(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(f.contexts),l.attachRef=f.componentRef,l.route=f.route.value,l.outlet&&l.outlet.attach(f.componentRef,f.route.value),bh(f.route.value),this.activateChildRoutes(e,null,l.children)}else{const f=Il(i.snapshot),y=f?.get(m._Vd)??null;l.attachRef=null,l.route=i,l.resolver=y,l.injector=f,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class Op{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class $v{constructor(e,t){this.component=e,this.route=t}}function jM(n,e,t){const r=n._root;return Ah(r,e?e._root:null,t,[r.value])}function Dl(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,m.Z0I)(n)?e.get(n):n:r}function Ah(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=ro(e);return n.children.forEach(l=>{(function Tw(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const y=function Aw(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!br(n.url,e.url);case"pathParamsOrQueryParamsChange":return!br(n.url,e.url)||!mi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Jc(n,e)||!mi(n.queryParams,e.queryParams);default:return!Jc(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);y?i.canActivateChecks.push(new Op(r)):(a.data=l.data,a._resolvedData=l._resolvedData),Ah(n,e,a.component?f?f.children:null:t,r,i),y&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new $v(f.outlet.component,l))}else l&&Fp(e,f,i),i.canActivateChecks.push(new Op(r)),Ah(n,null,a.component?f?f.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),C(a,(l,f)=>Fp(l,t.getContext(f),i)),i}function Fp(n,e,t){const r=ro(n),i=n.value;C(r,(a,l)=>{Fp(a,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new $v(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Lp(n){return"function"==typeof n}function jm(n){return n instanceof au||"EmptyError"===n?.name}const fa=Symbol("INITIAL_VALUE");function Mh(){return Dr(n=>xc(n.map(e=>e.pipe(Cs(1),ha(fa)))).pipe((0,Ct.U)(e=>{for(const t of e)if(!0!==t){if(t===fa)return fa;if(!1===t||t instanceof In)return t}return!0}),ri(e=>e!==fa),Cs(1)))}function Ow(n){return(0,Tm.z)((0,Cr.b)(e=>{if(vu(e))throw v(0,e)}),(0,Ct.U)(e=>!0===e))}const Cl={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Fw(n,e,t,r,i){const a=Kv(n,e,t);return a.matched?function kw(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?rt(i.map(l=>{const f=Dl(l,n);return M(function BC(n){return n&&Lp(n.canMatch)}(f)?f.canMatch(e,t):n.runInContext(()=>f(e,t)))})).pipe(Mh(),Ow()):rt(!0)}(r=st(e,r),e,t).pipe((0,Ct.U)(l=>!0===l?a:{...Cl})):rt(a)}function Kv(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Cl}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Am)(t,n,e);if(!i)return{...Cl};const a={};C(i.posParams,(f,y)=>{a[y]=f.path});const l=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function zm(n,e,t,r){if(t.length>0&&function Lw(n,e,t){return t.some(r=>Vp(n,e,r)&&Pi(r)!==Vt)}(n,t,r)){const a=new Ut(e,function HC(n,e,t,r){const i={};i[Vt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&Pi(a)!==Vt){const l=new Ut([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[Pi(a)]=l}return i}(n,e,r,new Ut(t,n.children)));return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:[]}}if(0===t.length&&function zC(n,e,t){return t.some(r=>Vp(n,e,r))}(n,t,r)){const a=new Ut(n.segments,function Zv(n,e,t,r,i){const a={};for(const l of r)if(Vp(n,t,l)&&!i[Pi(l)]){const f=new Ut([],{});f._sourceSegment=n,f._segmentIndexShift=e.length,a[Pi(l)]=f}return{...i,...a}}(n,e,t,r,n.children));return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}const i=new Ut(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}function Vp(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function GC(n,e,t,r){return!!(Pi(n)===r||r!==Vt&&Vp(e,t,n))&&("**"===n.path||Kv(e,n,t).matched)}function Vw(n,e,t){return 0===e.length&&!n.children[t]}const bl=!1;class Gm{constructor(e){this.segmentGroup=e||null}}class nd{constructor(e){this.urlTree=e}}function Du(n){return du(new Gm(n))}function Uw(n){return du(new nd(n))}class KC{constructor(e,t,r,i,a){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0}apply(){const e=zm(this.urlTree.root,[],[],this.config).segmentGroup,t=new Ut(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Vt).pipe((0,Ct.U)(a=>this.createUrlTree(yu(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Po(a=>{if(a instanceof nd)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof Gm?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Vt).pipe((0,Ct.U)(i=>this.createUrlTree(yu(i),e.queryParams,e.fragment))).pipe(Po(i=>{throw i instanceof Gm?this.noMatchError(i):i}))}noMatchError(e){return new m.vHH(4002,bl)}createUrlTree(e,t,r){const i=jc(e);return new In(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Ct.U)(a=>new Ut([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,Jt.D)(i).pipe(hs(a=>{const l=r.children[a],f=Th(t,a);return this.expandSegmentGroup(e,f,l,a).pipe((0,Ct.U)(y=>({segment:y,outlet:a})))}),Fc((a,l)=>(a[l.outlet]=l.segment,a),{}),Vc())}expandSegment(e,t,r,i,a,l){return(0,Jt.D)(r).pipe(hs(f=>this.expandSegmentAgainstRoute(e,t,r,f,i,a,l).pipe(Po(I=>{if(I instanceof Gm)return rt(null);throw I}))),ii(f=>!!f),Po((f,y)=>{if(jm(f))return Vw(t,i,a)?rt(new Ut([],{})):Du(t);throw f}))}expandSegmentAgainstRoute(e,t,r,i,a,l,f){return GC(i,t,a,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,l):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l):Du(t):Du(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Uw(a):this.lineralizeSegments(r,a).pipe((0,dr.z)(l=>{const f=new Ut(l,{});return this.expandSegment(e,f,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:f,consumedSegments:y,remainingSegments:I,positionalParamSegments:S}=Kv(t,i,a);if(!f)return Du(t);const R=this.applyRedirectCommands(y,i.redirectTo,S);return i.redirectTo.startsWith("/")?Uw(R):this.lineralizeSegments(i,R).pipe((0,dr.z)(L=>this.expandSegment(e,t,r,L.concat(I),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){return"**"===r.path?(e=st(r,e),r.loadChildren?(r._loadedRoutes?rt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,Ct.U)(f=>(r._loadedRoutes=f.routes,r._loadedInjector=f.injector,new Ut(i,{})))):rt(new Ut(i,{}))):Fw(t,r,i,e).pipe(Dr(({matched:l,consumedSegments:f,remainingSegments:y})=>l?this.getChildConfig(e=r._injector??e,r,i).pipe((0,dr.z)(S=>{const R=S.injector??e,L=S.routes,{segmentGroup:U,slicedSegments:W}=zm(t,f,y,L),oe=new Ut(U.segments,U.children);if(0===W.length&&oe.hasChildren())return this.expandChildren(R,L,oe).pipe((0,Ct.U)(ot=>new Ut(f,ot)));if(0===L.length&&0===W.length)return rt(new Ut(f,{}));const ce=Pi(r)===a;return this.expandSegment(R,oe,L,W,ce?Vt:a,!0).pipe((0,Ct.U)(it=>new Ut(f.concat(it.segments),it.children)))})):Du(t)))}getChildConfig(e,t,r){return t.children?rt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?rt({routes:t._loadedRoutes,injector:t._loadedInjector}):function $C(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?rt(!0):rt(i.map(l=>{const f=Dl(l,n);return M(function Rw(n){return n&&Lp(n.canLoad)}(f)?f.canLoad(e,t):n.runInContext(()=>f(e,t)))})).pipe(Mh(),Ow())}(e,t,r).pipe((0,dr.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,Cr.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function qC(n){return du(h(bl,3))}())):rt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return rt(r);if(i.numberOfChildren>1||!i.children[Vt])return e.redirectTo,du(new m.vHH(4e3,bl));i=i.children[Vt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new In(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return C(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[a]=t[f]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return C(t.children,(f,y)=>{l[y]=this.createSegmentGroup(e,f,r,i)}),new Ut(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new m.vHH(4001,bl);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class Qv{}class Xv{constructor(e,t,r,i,a,l,f){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=a,this.paramsInheritanceStrategy=l,this.urlSerializer=f}recognize(){const e=zm(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Vt).pipe((0,Ct.U)(t=>{if(null===t)return null;const r=new Qc([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Vt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Wr(r,t),a=new io(this.url,i);return this.inheritParamsAndData(a._root),a}))}inheritParamsAndData(e){const t=e.value,r=Ap(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,Jt.D)(Object.keys(r.children)).pipe(hs(i=>{const a=r.children[i],l=Th(t,i);return this.processSegmentGroup(e,l,a,i)}),Fc((i,a)=>i&&a?(i.push(...a),i):null),function fs(n,e=!1){return(0,Nr.e)((t,r)=>{let i=0;t.subscribe((0,cr.x)(r,a=>{const l=n(a,i++);(l||e)&&r.next(a),!l&&r.complete()}))})}(i=>null!==i),ds(null),Vc(),(0,Ct.U)(i=>{if(null===i)return null;const a=$w(i);return function Up(n){n.sort((e,t)=>e.value.outlet===Vt?-1:t.value.outlet===Vt?1:e.value.outlet.localeCompare(t.value.outlet))}(a),a}))}processSegment(e,t,r,i,a){return(0,Jt.D)(t).pipe(hs(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,i,a)),ii(l=>!!l),Po(l=>{if(jm(l))return Vw(r,i,a)?rt([]):rt(null);throw l}))}processSegmentAgainstRoute(e,t,r,i,a){if(t.redirectTo||!GC(t,r,i,a))return rt(null);let l;if("**"===t.path){const f=i.length>0?hp(i).parameters:{},y=zw(r)+i.length;l=rt({snapshot:new Qc(i,f,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,rd(t),Pi(t),t.component??t._loadedComponent??null,t,Hw(r),y,pa(t)),consumedSegments:[],remainingSegments:[]})}else l=Fw(r,t,i,e).pipe((0,Ct.U)(({matched:f,consumedSegments:y,remainingSegments:I,parameters:S})=>{if(!f)return null;const R=zw(r)+y.length;return{snapshot:new Qc(y,S,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,rd(t),Pi(t),t.component??t._loadedComponent??null,t,Hw(r),R,pa(t)),consumedSegments:y,remainingSegments:I}}));return l.pipe(Dr(f=>{if(null===f)return rt(null);const{snapshot:y,consumedSegments:I,remainingSegments:S}=f;e=t._injector??e;const R=t._loadedInjector??e,L=function YC(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:U,slicedSegments:W}=zm(r,I,S,L.filter(ce=>void 0===ce.redirectTo));if(0===W.length&&U.hasChildren())return this.processChildren(R,L,U).pipe((0,Ct.U)(ce=>null===ce?null:[new Wr(y,ce)]));if(0===L.length&&0===W.length)return rt([new Wr(y,[])]);const oe=Pi(t)===a;return this.processSegment(R,L,U,W,oe?Vt:a).pipe((0,Ct.U)(ce=>null===ce?null:[new Wr(y,ce)]))}))}}function QC(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function $w(n){const e=[],t=new Set;for(const r of n){if(!QC(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=$w(r.children);e.push(new Wr(r.value,i))}return e.filter(r=>!t.has(r))}function Hw(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function zw(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function rd(n){return n.data||{}}function pa(n){return n.resolve||{}}function e_(n){return"string"==typeof n.title||null===n.title}function qm(n){return Dr(e=>{const t=n(e);return t?(0,Jt.D)(t).pipe((0,Ct.U)(()=>e)):rt(e)})}const id=new m.OlP("ROUTES");let t_=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,m.f3M)(m.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return rt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=M(t.loadComponent()).pipe((0,Ct.U)(so),(0,Cr.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),pl(()=>{this.componentLoaders.delete(t)})),i=new hu(r,()=>new pi.x).pipe(fh());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return rt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,Ct.U)(f=>{this.onLoadEndListener&&this.onLoadEndListener(r);let y,I,S=!1;Array.isArray(f)?I=f:(y=f.create(t).injector,I=gh(y.get(id,[],m.XFs.Self|m.XFs.Optional)));return{routes:I.map(ed),injector:y}}),pl(()=>{this.childrenLoaders.delete(r)})),l=new hu(a,()=>new pi.x).pipe(fh());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return M(t()).pipe((0,Ct.U)(so),(0,dr.z)(r=>r instanceof m.YKP||Array.isArray(r)?rt(r):(0,Jt.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function so(n){return function tb(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Bp=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new pi.x,this.configLoader=(0,m.f3M)(t_),this.environmentInjector=(0,m.f3M)(m.lqb),this.urlSerializer=(0,m.f3M)(Js),this.rootContexts=(0,m.f3M)(x),this.navigationId=0,this.afterPreactivation=()=>rt(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new wh(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new Dp(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new Nn({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:vl,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ri(r=>0!==r.id),(0,Ct.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),Dr(r=>{let i=!1,a=!1;return rt(r).pipe((0,Cr.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Dr(l=>{const f=t.browserUrlTree.toString(),y=!t.navigated||l.extractedUrl.toString()!==f||f!==t.currentUrlTree.toString();if(!y&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const S="";return this.events.next(new _l(l.id,t.serializeUrl(r.rawUrl),S,0)),t.rawUrlTree=l.rawUrl,l.resolve(null),Ys.E}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Ww(l.source)&&(t.browserUrlTree=l.extractedUrl),rt(l).pipe(Dr(S=>{const R=this.transitions?.getValue();return this.events.next(new wp(S.id,this.urlSerializer.serialize(S.extractedUrl),S.source,S.restoredState)),R!==this.transitions?.getValue()?Ys.E:Promise.resolve(S)}),function jw(n,e,t,r){return Dr(i=>function WC(n,e,t,r,i){return new KC(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,Ct.U)(a=>({...i,urlAfterRedirects:a}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,Cr.b)(S=>{this.currentNavigation={...this.currentNavigation,finalUrl:S.urlAfterRedirects},r.urlAfterRedirects=S.urlAfterRedirects}),function XC(n,e,t,r,i){return(0,dr.z)(a=>function ZC(n,e,t,r,i,a,l="emptyOnly"){return new Xv(n,e,t,r,i,l,a).recognize().pipe(Dr(f=>null===f?function Jv(n){return new gi.y(e=>e.error(n))}(new Qv):rt(f)))}(n,e,t,a.urlAfterRedirects,r.serialize(a.urlAfterRedirects),r,i).pipe((0,Ct.U)(l=>({...a,targetSnapshot:l}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,Cr.b)(S=>{if(r.targetSnapshot=S.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!S.extras.skipLocationChange){const L=t.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);t.setBrowserUrl(L,S)}t.browserUrlTree=S.urlAfterRedirects}const R=new Ip(S.id,this.urlSerializer.serialize(S.extractedUrl),this.urlSerializer.serialize(S.urlAfterRedirects),S.targetSnapshot);this.events.next(R)}));if(y&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:S,extractedUrl:R,source:L,restoredState:U,extras:W}=l,oe=new wp(S,this.urlSerializer.serialize(R),L,U);this.events.next(oe);const ce=Uv(R,this.rootComponentType).snapshot;return rt(r={...l,targetSnapshot:ce,urlAfterRedirects:R,extras:{...W,skipLocationChange:!1,replaceUrl:!1}})}{const S="";return this.events.next(new _l(l.id,t.serializeUrl(r.extractedUrl),S,1)),t.rawUrlTree=l.rawUrl,l.resolve(null),Ys.E}}),(0,Cr.b)(l=>{const f=new wl(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(f)}),(0,Ct.U)(l=>r={...l,guards:jM(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function Gv(n,e){return(0,dr.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?rt({...t,guardsResult:!0}):function $m(n,e,t,r){return(0,Jt.D)(n).pipe((0,dr.z)(i=>function Wv(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?rt(a.map(f=>{const y=Il(e)??i,I=Dl(f,y);return M(function zv(n){return n&&Lp(n.canDeactivate)}(I)?I.canDeactivate(n,e,t,r):y.runInContext(()=>I(n,e,t,r))).pipe(ii())})).pipe(Mh()):rt(!0)}(i.component,i.route,t,e,r)),ii(i=>!0!==i,!0))}(l,r,i,n).pipe((0,dr.z)(f=>f&&function Mw(n){return"boolean"==typeof n}(f)?function jC(n,e,t,r){return(0,Jt.D)(e).pipe(hs(i=>hh(function Hm(n,e){return null!==n&&e&&e(new Lv(n)),rt(!0)}(i.route.parent,r),function qv(n,e){return null!==n&&e&&e(new Dh(n)),rt(!0)}(i.route,r),function Pw(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function kp(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>Pc(()=>rt(l.guards.map(y=>{const I=Il(l.node)??t,S=Dl(y,I);return M(function $M(n){return n&&Lp(n.canActivateChild)}(S)?S.canActivateChild(r,n):I.runInContext(()=>S(r,n))).pipe(ii())})).pipe(Mh())));return rt(a).pipe(Mh())}(n,i.path,t),function td(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return rt(!0);const i=r.map(a=>Pc(()=>{const l=Il(e)??t,f=Dl(a,l);return M(function Hv(n){return n&&Lp(n.canActivate)}(f)?f.canActivate(e,n):l.runInContext(()=>f(e,n))).pipe(ii())}));return rt(i).pipe(Mh())}(n,i.route,t))),ii(i=>!0!==i,!0))}(r,a,n,e):rt(f)),(0,Ct.U)(f=>({...t,guardsResult:f})))})}(this.environmentInjector,l=>this.events.next(l)),(0,Cr.b)(l=>{if(r.guardsResult=l.guardsResult,vu(l.guardsResult))throw v(0,l.guardsResult);const f=new Fv(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(f)}),ri(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),qm(l=>{if(l.guards.canActivateChecks.length)return rt(l).pipe((0,Cr.b)(f=>{const y=new Pm(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(y)}),Dr(f=>{let y=!1;return rt(f).pipe(function eb(n,e){return(0,dr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return rt(t);let a=0;return(0,Jt.D)(i).pipe(hs(l=>function zM(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!e_(i)&&(a[Zn]=i.title),function GM(n,e,t,r){const i=function Gw(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return rt({});const a={};return(0,Jt.D)(i).pipe((0,dr.z)(l=>function qM(n,e,t,r){const i=Il(e)??r,a=Dl(n,i);return M(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[l],e,t,r).pipe(ii(),(0,Cr.b)(f=>{a[l]=f}))),Lc(1),function Uc(n){return(0,Ct.U)(()=>n)}(a),Po(l=>jm(l)?Ys.E:du(l)))}(a,n,e,r).pipe((0,Ct.U)(l=>(n._resolvedData=l,n.data=Ap(n,t).resolve,i&&e_(i)&&(n.data[Zn]=i.title),null)))}(l.route,r,n,e)),(0,Cr.b)(()=>a++),Lc(1),(0,dr.z)(l=>a===i.length?rt(t):Ys.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,Cr.b)({next:()=>y=!0,complete:()=>{y||(t.restoreHistory(f),this.cancelNavigationTransition(f,"",2))}}))}),(0,Cr.b)(f=>{const y=new Om(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(y)}))}),qm(l=>{const f=y=>{const I=[];y.routeConfig?.loadComponent&&!y.routeConfig._loadedComponent&&I.push(this.configLoader.loadComponent(y.routeConfig).pipe((0,Cr.b)(S=>{y.component=S}),(0,Ct.U)(()=>{})));for(const S of y.children)I.push(...f(S));return I};return xc(f(l.targetSnapshot.root)).pipe(ds(),Cs(1))}),qm(()=>this.afterPreactivation()),(0,Ct.U)(l=>{const f=function Ts(n,e,t){const r=Lo(n,e._root,t?t._root:void 0);return new Fm(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:f}}),(0,Cr.b)(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t)=>(0,Ct.U)(r=>(new Pp(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l)),Cs(1),(0,Cr.b)({next:l=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new Ss(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{i=!0}}),pl(()=>{i||a||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Po(l=>{if(a=!0,E(l)){p(l)||(t.navigated=!0,t.restoreHistory(r,!0));const f=new Yc(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode);if(this.events.next(f),p(l)){const y=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),I={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||Ww(r.source)};t.scheduleNavigation(y,vl,null,I,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const f=new El(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);this.events.next(f);try{r.resolve(t.errorHandler(l))}catch(y){r.reject(y)}}return Ys.E}))}))}cancelNavigationTransition(t,r,i){const a=new Yc(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(a),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ww(n){return n!==vl}let Kw=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===Vt);return r}getResolvedTitleForRoute(t){return t.data[Zn]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return(0,m.f3M)(nb)},providedIn:"root"}),n})(),nb=(()=>{class n extends Kw{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Ao))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),rb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return(0,m.f3M)(ib)},providedIn:"root"}),n})();class Zw{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let ib=(()=>{class n extends Zw{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=m.n5z(n)))(r||n)}}(),n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Km=new m.OlP("",{providedIn:"root",factory:()=>({})});let Wt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return(0,m.f3M)(Yw)},providedIn:"root"}),n})(),Yw=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Qw(n){throw n}function ob(n,e,t){return e.parse("/")}const ab={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Jw={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let As=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,m.f3M)(m.c2e),this.isNgZoneEnabled=!1,this.options=(0,m.f3M)(Km,{optional:!0})||{},this.errorHandler=this.options.errorHandler||Qw,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||ob,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,m.f3M)(Wt),this.routeReuseStrategy=(0,m.f3M)(rb),this.urlCreationStrategy=(0,m.f3M)(Vv),this.titleStrategy=(0,m.f3M)(Kw),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=gh((0,m.f3M)(id,{optional:!0})??[]),this.navigationTransitions=(0,m.f3M)(Bp),this.urlSerializer=(0,m.f3M)(Js),this.location=(0,m.f3M)(Be),this.isNgZoneEnabled=(0,m.f3M)(m.R0b)instanceof m.R0b&&m.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new In,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Uv(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),vl,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const a={replaceUrl:!0},l=i?.navigationId?i:null;if(i){const y={...i};delete y.navigationId,delete y.\u0275routerPageId,0!==Object.keys(y).length&&(a.state=y)}const f=this.parseUrl(t);this.scheduleNavigation(f,r,l,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(ed),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:f,preserveFragment:y}=r,I=y?this.currentUrlTree.fragment:l;let S=null;switch(f){case"merge":S={...this.currentUrlTree.queryParams,...a};break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=a||null}return null!==S&&(S=this.removeEmptyProps(S)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,t,S,I??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=vu(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,vl,null,r)}navigate(t,r={skipLocationChange:!1}){return function Xw(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new m.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...ab}:!1===r?{...Jw}:r,vu(t))return ue(this.currentUrlTree,t,i);const a=this.parseUrl(t);return ue(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}scheduleNavigation(t,r,i,a,l){if(this.disposed)return Promise.resolve(!1);let f,y,I,S;return l?(f=l.resolve,y=l.reject,I=l.promise):I=new Promise((R,L)=>{f=R,y=L}),S="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:S,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:a,resolve:f,reject:y,promise:I,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),I.catch(R=>Promise.reject(R))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===i?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class r_{}let cb=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(ri(t=>t instanceof Ss),hs(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,m.MMx)(a.providers,t,`Route: ${a.path}`));const l=a._injector??t,f=a._loadedInjector??l;(a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent)&&i.push(this.preloadConfig(l,a)),(a.children||a._loadedRoutes)&&i.push(this.processRoutes(f,a.children??a._loadedRoutes))}return(0,Jt.D)(i).pipe((0,Zs.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):rt(null);const a=i.pipe((0,dr.z)(l=>null===l?rt(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,Jt.D)([a,l]).pipe((0,Zs.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(As),m.LFG(m.Sil),m.LFG(m.lqb),m.LFG(r_),m.LFG(t_))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const jp=new m.OlP("");let Ym=(()=>{class n{constructor(t,r,i,a,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=a,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof wp?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ss&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof wu&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new wu(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){m.$Z()},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();var Ms=(()=>((Ms=Ms||{})[Ms.COMPLETE=0]="COMPLETE",Ms[Ms.FAILED=1]="FAILED",Ms[Ms.REDIRECTING=2]="REDIRECTING",Ms))();const $p=!1;function Cu(n,e){return{\u0275kind:n,\u0275providers:e}}const t0=new m.OlP("",{providedIn:"root",factory:()=>!1});function i_(){const n=(0,m.f3M)(m.zs3);return e=>{const t=n.get(m.z2F);if(e!==t.components[0])return;const r=n.get(As),i=n.get(zp);1===n.get(s_)&&r.initialNavigation(),n.get(r0,null,m.XFs.Optional)?.setUpPreloading(),n.get(jp,null,m.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const zp=new m.OlP($p?"bootstrap done indicator":"",{factory:()=>new pi.x}),s_=new m.OlP($p?"initial navigation":"",{providedIn:"root",factory:()=>1});function fb(){let n=[];return n=$p?[{provide:m.Xts,multi:!0,useFactory:()=>{const e=(0,m.f3M)(As);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function Cp(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],Cu(1,n)}const r0=new m.OlP($p?"router preloader":"");function pb(n){return Cu(0,[{provide:r0,useExisting:cb},{provide:r_,useExisting:n}])}const xh=!1,Qm=new m.OlP(xh?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),JM=[Be,{provide:Js,useClass:fu},As,x,{provide:Or,useFactory:function e0(n){return n.routerState.root},deps:[As]},t_,xh?{provide:t0,useValue:!0}:[]];function o_(){return new m.PXZ("Router",As)}let s0=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[JM,xh&&r?.enableTracing?fb().\u0275providers:[],{provide:id,multi:!0,useValue:t},{provide:Qm,useFactory:yb,deps:[[As,new m.FiY,new m.tp0]]},{provide:Km,useValue:r||{}},r?.useHash?{provide:pt,useClass:Ne}:{provide:pt,useClass:xe},{provide:jp,useFactory:()=>{const n=(0,m.f3M)(Jo),e=(0,m.f3M)(m.R0b),t=(0,m.f3M)(Km),r=(0,m.f3M)(Bp),i=(0,m.f3M)(Js);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Ym(i,r,n,e,t)}},r?.preloadingStrategy?pb(r.preloadingStrategy).\u0275providers:[],{provide:m.PXZ,multi:!0,useFactory:o_},r?.initialNavigation?a0(r):[],[{provide:u0,useFactory:i_},{provide:m.tb,multi:!0,useExisting:u0}]]}}static forChild(t){return{ngModule:n,providers:[{provide:id,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Qm,8))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[tt]}),n})();function yb(n){if(xh&&n)throw new m.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function a0(n){return["disabled"===n.initialNavigation?Cu(3,[{provide:m.ip1,multi:!0,useFactory:()=>{const e=(0,m.f3M)(As);return()=>{e.setUpLocationChangeListener()}}},{provide:s_,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Cu(2,[{provide:s_,useValue:0},{provide:m.ip1,multi:!0,deps:[m.zs3],useFactory:e=>{const t=e.get(de,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(As),a=e.get(zp);(function KM(n,e){n.events.pipe(ri(t=>t instanceof Ss||t instanceof Yc||t instanceof El||t instanceof _l),(0,Ct.U)(t=>t instanceof Ss||t instanceof _l?Ms.COMPLETE:t instanceof Yc&&(0===t.code||1===t.code)?Ms.REDIRECTING:Ms.FAILED),ri(t=>t!==Ms.REDIRECTING),Cs(1)).subscribe(()=>{e()})})(i,()=>{r(!0)}),e.get(Bp).afterPreactivation=()=>(r(!0),a.closed?rt(void 0):a),i.initialNavigation()}))}}]).\u0275providers:[]]}const u0=new m.OlP(xh?"Router Initializer":""),Ph=[];let u_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[s0.forRoot(Ph),s0]}),n})();var Gp=k(4986),Kr=k(4976);function Oh(){return(0,Nr.e)((n,e)=>{let t,r=!1;n.subscribe((0,cr.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function l_(n,e){return n===e}var et,Rs=k(2011),d0=(k(2644),k(3942)),ve=k(5861),sd=k(6881),Jm=k(4859),bu=k(1877),pn=k(2090),h0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},oo={},c_=c_||{},Dt=h0||self;function qp(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Wp(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Kp="closure_uid_"+(1e9*Math.random()>>>0),f0=0;function _b(n,e,t){return n.call.apply(n.bind,arguments)}function Eb(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Oi(n,e,t){return(Oi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?_b:Eb).apply(null,arguments)}function Zp(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function si(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,a){for(var l=Array(arguments.length-2),f=2;f<arguments.length;f++)l[f-2]=arguments[f];return e.prototype[i].apply(r,l)}}function Sl(){this.s=this.s,this.o=this.o}Sl.prototype.s=!1,Sl.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function eR(n){Object.prototype.hasOwnProperty.call(n,Kp)&&n[Kp]||(n[Kp]=++f0)}(this)},Sl.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const p0=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function h_(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function g0(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(qp(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let l=0;l<a;l++)n[i+l]=r[l]}else n.push(r)}}function ki(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}ki.prototype.h=function(){this.defaultPrevented=!0};var wb=function(){if(!Dt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Dt.addEventListener("test",()=>{},e),Dt.removeEventListener("test",()=>{},e)}catch{}return n}();function ps(n){return/^[\s\xa0]*$/.test(n)}function kh(){var n=Dt.navigator;return n&&(n=n.userAgent)?n:""}function ga(n){return-1!=kh().indexOf(n)}function f_(n){return f_[" "](n),n}f_[" "]=function(){};var Jp,n,Ib=ga("Opera"),Fh=ga("Trident")||ga("MSIE"),y0=ga("Edge"),Yp=y0||Fh,v0=ga("Gecko")&&!(-1!=kh().toLowerCase().indexOf("webkit")&&!ga("Edge"))&&!(ga("Trident")||ga("MSIE"))&&!ga("Edge"),Db=-1!=kh().toLowerCase().indexOf("webkit")&&!ga("Edge");function Qp(){var n=Dt.document;return n?n.documentMode:void 0}e:{var Lh="",_0=(n=kh(),v0?/rv:([^\);]+)(\)|;)/.exec(n):y0?/Edge\/([\d\.]+)/.exec(n):Fh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Db?/WebKit\/(\S+)/.exec(n):Ib?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(_0&&(Lh=_0?_0[1]:""),Fh){var Xp=Qp();if(null!=Xp&&Xp>parseFloat(Lh)){Jp=String(Xp);break e}}Jp=Lh}var w0=Dt.document&&Fh&&(Qp()||parseInt(Jp,10))||void 0;function Vh(n,e){if(ki.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(v0){e:{try{f_(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:I0[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Vh.$.h.call(this)}}si(Vh,ki);var I0={2:"touch",3:"pen",4:"mouse"};Vh.prototype.h=function(){Vh.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var od="closure_listenable_"+(1e6*Math.random()|0),Su=0;function Xm(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++Su,this.fa=this.ia=!1}function ad(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function ud(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function g_(n){const e={};for(const t in n)e[t]=n[t];return e}const m_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D0(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<m_.length;a++)t=m_[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function ey(n){this.src=n,this.g={},this.h=0}function ld(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=p0(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(ad(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function y_(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.fa&&a.listener==e&&a.capture==!!t&&a.la==r)return i}return-1}ey.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=y_(n,e,r,i);return-1<l?(e=n[l],t||(e.ia=!1)):((e=new Xm(e,this.src,a,!!r,i)).ia=t,n.push(e)),e};var C0="closure_lm_"+(1e6*Math.random()|0),v_={};function b0(n,e,t,r,i){if(r&&r.once)return T0(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)b0(n,e[a],t,r,i);return null}return t=D_(t),n&&n[od]?n.O(e,t,Wp(r)?!!r.capture:!!r,i):S0(n,e,t,!1,r,i)}function S0(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=Wp(i)?!!i.capture:!!i,f=I_(n);if(f||(n[C0]=f=new ey(n)),(t=f.add(e,t,r,l,a)).proxy)return t;if(r=function bb(){const e=w_;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)wb||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(E_(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function T0(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)T0(n,e[a],t,r,i);return null}return t=D_(t),n&&n[od]?n.P(e,t,Wp(r)?!!r.capture:!!r,i):S0(n,e,t,!0,r,i)}function A0(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)A0(n,e[a],t,r,i);else r=Wp(r)?!!r.capture:!!r,t=D_(t),n&&n[od]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=y_(a=n.g[e],t,r,i))&&(ad(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=I_(n))&&(e=n.g[e.toString()],n=-1,e&&(n=y_(e,t,r,i)),(t=-1<n?e[n]:null)&&__(t))}function __(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[od])ld(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(E_(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=I_(e))?(ld(t,n),0==t.h&&(t.src=null,e[C0]=null)):ad(n)}}}function E_(n){return n in v_?v_[n]:v_[n]="on"+n}function w_(n,e){if(n.fa)n=!0;else{e=new Vh(e,this);var t=n.listener,r=n.la||n.src;n.ia&&__(n),n=t.call(r,e)}return n}function I_(n){return(n=n[C0])instanceof ey?n:null}var eg="__closure_events_fn_"+(1e9*Math.random()>>>0);function D_(n){return"function"==typeof n?n:(n[eg]||(n[eg]=function(e){return n.handleEvent(e)}),n[eg])}function oi(){Sl.call(this),this.i=new ey(this),this.S=this,this.J=null}function vi(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new ki(e,n);else if(e instanceof ki)e.target=e.target||n;else{var i=e;D0(e=new ki(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=ty(l,r,!0,e)&&i}if(i=ty(l=e.g=n,r,!0,e)&&i,i=ty(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=ty(l=e.g=t[a],r,!1,e)&&i}function ty(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.fa&&l.capture==t){var f=l.listener,y=l.la||l.src;l.ia&&ld(n.i,l),i=!1!==f.call(y,r)&&i}}return i&&!r.defaultPrevented}si(oi,Sl),oi.prototype[od]=!0,oi.prototype.removeEventListener=function(n,e,t,r){A0(this,n,e,t,r)},oi.prototype.N=function(){if(oi.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)ad(t[r]);delete n.g[e],n.h--}}this.J=null},oi.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},oi.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var C_=Dt.JSON.stringify;function Tb(){var n=S_;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var b_=new class Sb{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Ab,n=>n.reset());class Ab{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function tR(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function R0(n){Dt.setTimeout(()=>{throw n},0)}let ny,Tl=!1,S_=new class M0{constructor(){this.h=this.g=null}add(e,t){const r=b_.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},x0=()=>{const n=Dt.Promise.resolve(void 0);ny=()=>{n.then(T_)}};var T_=()=>{for(var n;n=Tb();){try{n.h.call(n.g)}catch(t){R0(t)}var e=b_;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Tl=!1};function ry(n,e){oi.call(this),this.h=n||1,this.g=e||Dt,this.j=Oi(this.qb,this),this.l=Date.now()}function ao(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function cd(n,e,t){if("function"==typeof n)t&&(n=Oi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Oi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Dt.setTimeout(n,e||0)}function _i(n){n.g=cd(()=>{n.g=null,n.i&&(n.i=!1,_i(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}si(ry,oi),(et=ry.prototype).ga=!1,et.T=null,et.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),vi(this,"tick"),this.ga&&(ao(this),this.start()))}},et.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},et.N=function(){ry.$.N.call(this),ao(this),delete this.g};class dd extends Sl{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:_i(this)}N(){super.N(),this.g&&(Dt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Al(n){Sl.call(this),this.h=n,this.g={}}si(Al,Sl);var xs=[];function iy(n,e,t,r){Array.isArray(t)||(t&&(xs[0]=t.toString()),t=xs);for(var i=0;i<t.length;i++){var a=b0(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function hd(n){ud(n.g,function(e,t){this.g.hasOwnProperty(t)&&__(e)},n),n.g={}}function Tu(){this.g=!0}function Vo(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function $h(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return C_(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Al.prototype.N=function(){Al.$.N.call(this),hd(this)},Al.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Tu.prototype.Ea=function(){this.g=!1},Tu.prototype.info=function(){};var uo={},fd=null;function tg(){return fd=fd||new oi}function A_(n){ki.call(this,uo.Ta,n)}function Hh(n){const e=tg();vi(e,new A_(e))}function M_(n,e){ki.call(this,uo.STAT_EVENT,n),this.stat=e}function Fi(n){const e=tg();vi(e,new M_(e,n))}function R_(n,e){ki.call(this,uo.Ua,n),this.size=e}function zh(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Dt.setTimeout(function(){n()},e)}uo.Ta="serverreachability",si(A_,ki),uo.STAT_EVENT="statevent",si(M_,ki),uo.Ua="timingevent",si(R_,ki);var ng={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},x_={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function N_(){}function P_(){}N_.prototype.h=null;var sg,rg={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function sy(){ki.call(this,"d")}function ig(){ki.call(this,"c")}function oy(){}function Ml(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Al(this),this.P=O_,this.V=new ry(n=Yp?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new og}function og(){this.i=null,this.g="",this.h=!1}si(sy,ki),si(ig,ki),si(oy,N_),oy.prototype.g=function(){return new XMLHttpRequest},oy.prototype.i=function(){return{}},sg=new oy;var O_=45e3,k_={},Gh={};function ag(n,e,t){n.L=1,n.v=hg(Uo(e)),n.s=t,n.S=!0,F_(n,null)}function F_(n,e){n.G=Date.now(),qh(n),n.A=Uo(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),Nb(t.i,"t",r),n.C=0,t=n.l.J,n.h=new og,n.g=Q0(n.l,t?e:null,!n.s),0<n.O&&(n.M=new dd(Oi(n.Pa,n,n.g),n.O)),iy(n.U,n.g,"readystatechange",n.nb),e=n.I?g_(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Hh(),function Uh(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",f=a.split("&"),y=0;y<f.length;y++){var I=f[y].split("=");if(1<I.length){var S=I[0];I=I[1];var R=S.split("_");l=2<=R.length&&"type"==R[1]?l+(S+"=")+I+"&":l+(S+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.W,n.s)}function L_(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function ay(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=P0(n,t),i==Gh){4==e&&(n.o=4,Fi(14),r=!1),Vo(n.j,n.m,null,"[Incomplete Response]");break}if(i==k_){n.o=4,Fi(15),Vo(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Vo(n.j,n.m,i,null),ly(n,i)}L_(n)&&i!=Gh&&i!=k_&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Fi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),_y(e),e.M=!0,Fi(11))):(Vo(n.j,n.m,t,"[Invalid Chunked Response]"),Rl(n),lg(n))}function P0(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Gh:(t=Number(e.substring(t,r)),isNaN(t)?k_:(r+=1)+t>e.length?Gh:(e=e.slice(r,r+t),n.C=r+t,e))}function qh(n){n.Y=Date.now()+n.P,uy(n,n.P)}function uy(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=zh(Oi(n.lb,n),e)}function ug(n){n.B&&(Dt.clearTimeout(n.B),n.B=null)}function lg(n){0==n.l.H||n.J||J_(n.l,n)}function Rl(n){ug(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,ao(n.V),hd(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function ly(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||$_(t.i,n)))if(!n.K&&$_(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;vg(t),gd(t)}vy(t),Fi(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=zh(Oi(t.ib,t),6e3));if(1>=j_(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else md(t,11)}else if((n.K||t.g==n)&&vg(t),!ps(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let I=i[e];if(t.V=I[0],I=I[1],2==t.H)if("c"==I[0]){t.K=I[1],t.pa=I[2];const S=I[3];null!=S&&(t.ra=S,t.l.info("VER="+t.ra));const R=I[4];null!=R&&(t.Ga=R,t.l.info("SVER="+t.Ga));const L=I[5];null!=L&&"number"==typeof L&&0<L&&(t.L=r=1.5*L,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const U=n.g;if(U){const W=U.g?U.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(W){var a=r.i;a.g||-1==W.indexOf("spdy")&&-1==W.indexOf("quic")&&-1==W.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(H_(a,a.h),a.h=null))}if(r.F){const oe=U.g?U.g.getResponseHeader("X-HTTP-Session-Id"):null;oe&&(r.Da=oe,Bn(r.I,r.F,oe))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var l=n;if((r=t).wa=Y0(r,r.J?r.pa:null,r.Y),l.K){z_(r.i,l);var f=l,y=r.L;y&&f.setTimeout(y),f.B&&(ug(f),qh(f)),r.g=l}else Y_(r);0<t.j.length&&yg(t)}else"stop"!=I[0]&&"close"!=I[0]||md(t,7);else 3==t.H&&("stop"==I[0]||"close"==I[0]?"stop"==I[0]?md(t,7):yy(t):"noop"!=I[0]&&t.h&&t.h.Aa(I),t.A=0)}Hh()}catch{}}function F0(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(qp(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function k0(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(qp(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function O0(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(qp(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(et=Ml.prototype).setTimeout=function(n){this.P=n},et.nb=function(n){n=n.target;const e=this.M;e&&3==_a(n)?e.l():this.Pa(n)},et.Pa=function(n){try{if(n==this.g)e:{const S=_a(this.g);var e=this.g.Ia();if(this.g.da(),!(3>S)&&(3!=S||Yp||this.g&&(this.h.h||this.g.ja()||gy(this.g)))){this.J||4!=S||7==e||Hh(),ug(this);var t=this.g.da();this.ca=t;t:if(L_(this)){var r=gy(this.g);n="";var i=r.length,a=4==_a(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Rl(this),lg(this);var l="";break t}this.h.i=new Dt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=200==t,function Bh(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.W,S,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var f,y=this.g;if((f=y.g?y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ps(f)){var I=f;break t}}I=null}if(!(t=I)){this.i=!1,this.o=3,Fi(12),Rl(this),lg(this);break e}Vo(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ly(this,t)}this.S?(ay(this,S,l),Yp&&this.i&&3==S&&(iy(this.U,this.V,"tick",this.mb),this.V.start())):(Vo(this.j,this.m,l,null),ly(this,l)),4==S&&Rl(this),this.i&&!this.J&&(4==S?J_(this.l,this):(this.i=!1,qh(this)))}else(function gg(n){const e={};n=(n.g&&2<=_a(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(ps(n[r]))continue;var t=tR(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const a=e[i]||[];e[i]=a,a.push(t)}!function Cb(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Fi(12)):(this.o=0,Fi(13)),Rl(this),lg(this)}}}catch{}},et.mb=function(){if(this.g){var n=_a(this.g),e=this.g.ja();this.C<e.length&&(ug(this),ay(this,n,e),this.i&&4!=n&&qh(this))}},et.cancel=function(){this.J=!0,Rl(this)},et.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function jh(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Hh(),Fi(17)),Rl(this),this.o=2,lg(this)):uy(this,this.Y-n)};var L0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xl(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof xl){this.h=n.h,cg(this,n.j),this.s=n.s,this.g=n.g,dg(this,n.m),this.l=n.l;var e=n.i,t=new Bo;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),V_(this,t),this.o=n.o}else n&&(e=String(n).match(L0))?(this.h=!1,cg(this,e[1]||"",!0),this.s=Wh(e[2]||""),this.g=Wh(e[3]||"",!0),dg(this,e[4]),this.l=Wh(e[5]||"",!0),V_(this,e[6]||"",!0),this.o=Wh(e[7]||"")):(this.h=!1,this.i=new Bo(null,this.h))}function Uo(n){return new xl(n)}function cg(n,e,t){n.j=t?Wh(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function dg(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function V_(n,e,t){e instanceof Bo?(n.i=e,function Pb(n,e){e&&!n.j&&(ma(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(U0(this,r),Nb(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Kh(e,xb)),n.i=new Bo(e,n.h))}function Bn(n,e,t){n.i.set(e,t)}function hg(n){return Bn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Wh(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Kh(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,V0),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function V0(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}xl.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Kh(e,fg,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Kh(e,fg,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Kh(t,"/"==t.charAt(0)?Rb:Nl,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Kh(t,U_)),n.join("")};var fg=/[#\/\?@]/g,Nl=/[#\?:]/g,Rb=/[#\?]/g,xb=/[#\?@]/g,U_=/#/g;function Bo(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function ma(n){n.g||(n.g=new Map,n.h=0,n.i&&function Mb(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function U0(n,e){ma(n),e=pg(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function cy(n,e){return ma(n),e=pg(n,e),n.g.has(e)}function Nb(n,e,t){U0(n,e),0<t.length&&(n.i=null,n.g.set(pg(n,e),h_(t)),n.h+=t.length)}function pg(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function B_(n){this.l=n||kb,n=Dt.PerformanceNavigationTiming?0<(n=Dt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Dt.g&&Dt.g.Ka&&Dt.g.Ka()&&Dt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(et=Bo.prototype).add=function(n,e){ma(this),this.i=null,n=pg(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},et.forEach=function(n,e){ma(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},et.ta=function(){ma(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},et.Z=function(n){ma(this);let e=[];if("string"==typeof n)cy(this,n)&&(e=e.concat(this.g.get(pg(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},et.set=function(n,e){return ma(this),this.i=null,cy(this,n=pg(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},et.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},et.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),l=this.Z(r);for(r=0;r<l.length;r++){var i=a;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var kb=10;function kr(n){return!!n.h||!!n.g&&n.g.size>=n.j}function j_(n){return n.h?1:n.g?n.g.size:0}function $_(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function H_(n,e){n.g?n.g.add(e):n.h=e}function z_(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function B0(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return h_(n.i)}B_.prototype.cancel=function(){if(this.i=B0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var j0=class{stringify(n){return Dt.JSON.stringify(n,void 0)}parse(n){return Dt.JSON.parse(n,void 0)}};function $0(){this.g=new j0}function Zh(n,e,t){const r=t||"";try{F0(n,function(i,a){let l=i;Wp(i)&&(l=C_(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function dy(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Yh(n){this.l=n.fc||null,this.j=n.ob||!1}function hy(n,e){oi.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=fy,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}si(Yh,N_),Yh.prototype.g=function(){return new hy(this.l,this.j)},Yh.prototype.i=function(n){return function(){return n}}({}),si(hy,oi);var fy=0;function Lb(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Qh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,pd(n)}function pd(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(et=hy.prototype).open=function(n,e){if(this.readyState!=fy)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,pd(this)},et.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Dt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},et.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Qh(this)),this.readyState=fy},et.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,pd(this)),this.g&&(this.readyState=3,pd(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Dt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Lb(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},et.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Qh(this):pd(this),3==this.readyState&&Lb(this)}},et.Za=function(n){this.g&&(this.response=this.responseText=n,Qh(this))},et.Ya=function(n){this.g&&(this.response=n,Qh(this))},et.ka=function(){this.g&&Qh(this)},et.setRequestHeader=function(n,e){this.v.append(n,e)},et.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},et.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(hy.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var ya=Dt.JSON.parse;function hr(n){oi.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=H0,this.L=this.M=!1}si(hr,oi);var H0="",va=/^https?$/i,jo=["POST","PUT"];function G_(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,q_(n),py(n)}function q_(n){n.F||(n.F=!0,vi(n,"complete"),vi(n,"error"))}function z0(n){if(n.h&&typeof c_<"u"&&(!n.C[1]||4!=_a(n)||2!=n.da()))if(n.v&&4==_a(n))cd(n.La,0,n);else if(vi(n,"readystatechange"),4==_a(n)){n.h=!1;try{const l=n.da();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===l){var i=String(n.I).match(L0)[1]||null;!i&&Dt.self&&Dt.self.location&&(i=Dt.self.location.protocol.slice(0,-1)),r=!va.test(i?i.toLowerCase():"")}t=r}if(t)vi(n,"complete"),vi(n,"success");else{n.m=6;try{var a=2<_a(n)?n.g.statusText:""}catch{a=""}n.j=a+" ["+n.da()+"]",q_(n)}}finally{py(n)}}}function py(n,e){if(n.g){G0(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||vi(n,"ready");try{t.onreadystatechange=r}catch{}}}function G0(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Dt.clearTimeout(n.A),n.A=null)}function _a(n){return n.g?n.g.readyState:0}function gy(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case H0:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function q0(n){let e="";return ud(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function my(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=q0(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Bn(n,e,t))}function mg(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function W_(n){this.Ga=0,this.j=[],this.l=new Tu,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=mg("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=mg("baseRetryDelayMs",5e3,n),this.hb=mg("retryDelaySeedMs",1e4,n),this.eb=mg("forwardChannelMaxRetries",2,n),this.xa=mg("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new B_(n&&n.concurrentRequestLimit),this.Ja=new $0,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function yy(n){if(W0(n),3==n.H){var e=n.W++,t=Uo(n.I);if(Bn(t,"SID",n.K),Bn(t,"RID",e),Bn(t,"TYPE","terminate"),Pl(n,t),(e=new Ml(n,n.l,e)).L=2,e.v=hg(Uo(t)),t=!1,Dt.navigator&&Dt.navigator.sendBeacon)try{t=Dt.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Dt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Q0(e.l,null),e.g.ha(e.v)),e.G=Date.now(),qh(e)}Z0(n)}function gd(n){n.g&&(_y(n),n.g.cancel(),n.g=null)}function W0(n){gd(n),n.u&&(Dt.clearTimeout(n.u),n.u=null),vg(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Dt.clearTimeout(n.m),n.m=null)}function yg(n){if(!kr(n.i)&&!n.m){n.m=!0;var e=n.Na;ny||x0(),Tl||(ny(),Tl=!0),S_.add(e,n),n.C=0}}function K_(n,e){var t;t=e?e.m:n.W++;const r=Uo(n.I);Bn(r,"SID",n.K),Bn(r,"RID",t),Bn(r,"AID",n.V),Pl(n,r),n.o&&n.s&&my(r,n.o,n.s),t=new Ml(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=Z_(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),H_(n.i,t),ag(t,r,e)}function Pl(n,e){n.na&&ud(n.na,function(t,r){Bn(e,r,t)}),n.h&&F0({},function(t,r){Bn(e,r,t)})}function Z_(n,e,t){t=Math.min(n.j.length,t);var r=n.h?Oi(n.h.Va,n.h,n):null;e:{var i=n.j;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].g,l.push("ofs="+a)):a=0:l.push("ofs="+a);let f=!0;for(let y=0;y<t;y++){let I=i[y].g;const S=i[y].map;if(I-=a,0>I)a=Math.max(0,i[y].g-100),f=!1;else try{Zh(S,l,"req"+I+"_")}catch{r&&r(S)}}if(f){r=l.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function Y_(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;ny||x0(),Tl||(ny(),Tl=!0),S_.add(e,n),n.A=0}}function vy(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=zh(Oi(n.Ma,n),X_(n,n.A)),n.A++,0))}function _y(n){null!=n.B&&(Dt.clearTimeout(n.B),n.B=null)}function Q_(n){n.g=new Ml(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Uo(n.wa);Bn(e,"RID","rpc"),Bn(e,"SID",n.K),Bn(e,"AID",n.V),Bn(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Bn(e,"TO",n.qa),Bn(e,"TYPE","xmlhttp"),Pl(n,e),n.o&&n.s&&my(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=hg(Uo(e)),t.s=null,t.S=!0,F_(t,n)}function vg(n){null!=n.v&&(Dt.clearTimeout(n.v),n.v=null)}function J_(n,e){var t=null;if(n.g==e){vg(n),_y(n),n.g=null;var r=2}else{if(!$_(n.i,e))return;t=e.F,z_(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;vi(r=tg(),new R_(r,t)),yg(n)}else Y_(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function K0(n,e){return!(j_(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=zh(Oi(n.Na,n,e),X_(n,n.C)),n.C++,0)))}(n,e)||2==r&&vy(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:md(n,5);break;case 4:md(n,10);break;case 3:md(n,6);break;default:md(n,2)}}function X_(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function md(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=Oi(n.pb,n);t||(t=new xl("//www.google.com/images/cleardot.gif"),Dt.location&&"http"==Dt.location.protocol||cg(t,"https"),hg(t)),function Fb(n,e){const t=new Tu;if(Dt.Image){const r=new Image;r.onload=Zp(dy,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Zp(dy,t,r,"TestLoadImage: error",!1,e),r.onabort=Zp(dy,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Zp(dy,t,r,"TestLoadImage: timeout",!1,e),Dt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Fi(2);n.H=0,n.h&&n.h.za(e),Z0(n),W0(n)}function Z0(n){if(n.H=0,n.ma=[],n.h){const e=B0(n.i);(0!=e.length||0!=n.j.length)&&(g0(n.ma,e),g0(n.ma,n.j),n.i.i.length=0,h_(n.j),n.j.length=0),n.h.ya()}}function Y0(n,e,t){var r=t instanceof xl?Uo(t):new xl(t);if(""!=r.g)e&&(r.g=e+"."+r.g),dg(r,r.m);else{var i=Dt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new xl(null);r&&cg(a,r),e&&(a.g=e),i&&dg(a,i),t&&(a.l=t),r=a}return e=n.Da,(t=n.F)&&e&&Bn(r,t,e),Bn(r,"VER",n.ra),Pl(n,r),r}function Q0(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new hr(t&&n.Ha&&!n.va?new Yh({ob:!0}):n.va)).Oa(n.J),e}function J0(){}function Ey(){if(Fh&&!(10<=Number(w0)))throw Error("Environmental error: no available transport.")}function Ns(n,e){oi.call(this),this.g=new W_(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!ps(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ps(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Jh(this)}function X0(n){sy.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function eI(){ig.call(this),this.status=1}function Jh(n){this.g=n}function Ho(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function eE(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var a=n.g[3],l=(e=n.g[0])+(a^(t=n.g[1])&((i=n.g[2])^a))+r[0]+3614090360&4294967295;l=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=t+(l<<7&4294967295|l>>>25))+((l=a+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^a&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(a^e))+r[3]+3250441966&4294967295)<<22&4294967295|l>>>10))+((l=e+(a^t&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|l>>>25))+((l=a+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^a&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(a^e))+r[7]+4249261313&4294967295)<<22&4294967295|l>>>10))+((l=e+(a^t&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|l>>>25))+((l=a+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^a&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(a^e))+r[11]+2304563134&4294967295)<<22&4294967295|l>>>10))+((l=e+(a^t&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|l>>>25))+((l=a+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^a&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(a^e))+r[15]+1236535329&4294967295)<<22&4294967295|l>>>10))+((l=e+(i^a&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|l>>>27))+((l=a+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(a^e))+r[11]+643717713&4294967295)<<14&4294967295|l>>>18))+((l=t+(a^e&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^a&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|l>>>27))+((l=a+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(a^e))+r[15]+3634488961&4294967295)<<14&4294967295|l>>>18))+((l=t+(a^e&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^a&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|l>>>27))+((l=a+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(a^e))+r[3]+4107603335&4294967295)<<14&4294967295|l>>>18))+((l=t+(a^e&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^a&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|l>>>27))+((l=a+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(a^e))+r[7]+1735328473&4294967295)<<14&4294967295|l>>>18))+((l=t+(a^e&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|l>>>12))+((l=e+(t^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|l>>>28))+((l=a+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|l>>>21))+((l=i+(a^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^a^e)+r[14]+4259657740&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|l>>>28))+((l=a+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|l>>>21))+((l=i+(a^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^a^e)+r[10]+3200236656&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^a)+r[13]+681279174&4294967295)<<4&4294967295|l>>>28))+((l=a+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|l>>>21))+((l=i+(a^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^a^e)+r[6]+76029189&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|l>>>28))+((l=a+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|l>>>21))+((l=i+(a^e^t)+r[15]+530742520&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^a^e)+r[2]+3299628645&4294967295)<<23&4294967295|l>>>9))+((l=e+(i^(t|~a))+r[0]+4096336452&4294967295)<<6&4294967295|l>>>26))+((l=a+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(a|~t))+r[14]+2878612391&4294967295)<<15&4294967295|l>>>17))+((l=t+(a^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|l>>>11))+((l=e+(i^(t|~a))+r[12]+1700485571&4294967295)<<6&4294967295|l>>>26))+((l=a+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(a|~t))+r[10]+4293915773&4294967295)<<15&4294967295|l>>>17))+((l=t+(a^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|l>>>11))+((l=e+(i^(t|~a))+r[8]+1873313359&4294967295)<<6&4294967295|l>>>26))+((l=a+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(a|~t))+r[6]+2734768916&4294967295)<<15&4294967295|l>>>17))+((l=t+(a^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|l>>>11))+((a=(e=t+((l=e+(i^(t|~a))+r[4]+4149444226&4294967295)<<6&4294967295|l>>>26))+((l=a+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|l>>>22))^((i=a+((l=i+(e^(a|~t))+r[2]+718787259&4294967295)<<15&4294967295|l>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(l<<21&4294967295|l>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+a&4294967295}function Sn(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var a=0|n[i];r&&a==e||(t[i]=a,r=!1)}this.g=t}(et=hr.prototype).Oa=function(n){this.M=n},et.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():sg.g(),this.C=function N0(n){return n.h||(n.h=n.i())}(this.u?this.u:sg),this.g.onreadystatechange=Oi(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(a){return void G_(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=Dt.FormData&&n instanceof Dt.FormData,!(0<=p0(jo,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,l]of t)this.g.setRequestHeader(a,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{G0(this),0<this.B&&((this.L=function $o(n){return Fh&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Oi(this.ua,this)):this.A=cd(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){G_(this,a)}},et.ua=function(){typeof c_<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,vi(this,"timeout"),this.abort(8))},et.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,vi(this,"complete"),vi(this,"abort"),py(this))},et.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),py(this,!0)),hr.$.N.call(this)},et.La=function(){this.s||(this.G||this.v||this.l?z0(this):this.kb())},et.kb=function(){z0(this)},et.isActive=function(){return!!this.g},et.da=function(){try{return 2<_a(this)?this.g.status:-1}catch{return-1}},et.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},et.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),ya(e)}},et.Ia=function(){return this.m},et.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(et=W_.prototype).ra=8,et.H=1,et.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new Ml(this,this.l,n);let a=this.s;if(this.U&&(a?(a=g_(a),D0(a,this.U)):a=this.U),null!==this.o||this.O||(i.I=a,a=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Z_(this,i,e),Bn(t=Uo(this.I),"RID",n),Bn(t,"CVER",22),this.F&&Bn(t,"X-HTTP-Session-Id",this.F),Pl(this,t),a&&(this.O?e="headers="+encodeURIComponent(String(q0(a)))+"&"+e:this.o&&my(t,this.o,a)),H_(this.i,i),this.bb&&Bn(t,"TYPE","init"),this.P?(Bn(t,"$req",e),Bn(t,"SID","null"),i.aa=!0,ag(i,t,null)):ag(i,t,e),this.H=2}}else 3==this.H&&(n?K_(this,n):0==this.j.length||kr(this.i)||K_(this))},et.Ma=function(){if(this.u=null,Q_(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=zh(Oi(this.jb,this),n)}},et.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Fi(10),gd(this),Q_(this))},et.ib=function(){null!=this.v&&(this.v=null,gd(this),vy(this),Fi(19))},et.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Fi(2)):(this.l.info("Failed to ping google.com"),Fi(1))},et.isActive=function(){return!!this.h&&this.h.isActive(this)},(et=J0.prototype).Ba=function(){},et.Aa=function(){},et.za=function(){},et.ya=function(){},et.isActive=function(){return!0},et.Va=function(){},Ey.prototype.g=function(n,e){return new Ns(n,e)},si(Ns,oi),Ns.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Fi(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=Y0(n,null,n.Y),yg(n)},Ns.prototype.close=function(){yy(this.g)},Ns.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=C_(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&yg(e)},Ns.prototype.N=function(){this.g.h=null,delete this.j,yy(this.g),delete this.g,Ns.$.N.call(this)},si(X0,sy),si(eI,ig),si(Jh,J0),Jh.prototype.Ba=function(){vi(this.g,"a")},Jh.prototype.Aa=function(n){vi(this.g,new X0(n))},Jh.prototype.za=function(n){vi(this.g,new eI)},Jh.prototype.ya=function(){vi(this.g,"b")},si(Ho,function Vb(){this.blockSize=-1}),Ho.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Ho.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,a=0;a<e;){if(0==i)for(;a<=t;)eE(this,n,a),a+=this.blockSize;if("string"==typeof n){for(;a<e;)if(r[i++]=n.charCodeAt(a++),i==this.blockSize){eE(this,r),i=0;break}}else for(;a<e;)if(r[i++]=n[a++],i==this.blockSize){eE(this,r),i=0;break}}this.h=i,this.i+=e},Ho.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var Ub={};function tE(n){return-128<=n&&128>n?function m0(n,e){var t=Ub;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new Sn([0|e],0>e?-1:0)}):new Sn([0|n],0>n?-1:0)}function Ea(n){if(isNaN(n)||!isFinite(n))return yd;if(0>n)return ai(Ea(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=wy;return new Sn(e,0)}var wy=4294967296,yd=tE(0),Iy=tE(1),nE=tE(16777216);function wa(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Ps(n){return-1==n.h}function ai(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new Sn(t,~n.h).add(Iy)}function _g(n,e){return n.add(ai(e))}function Eg(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Xh(n,e){this.g=n,this.h=e}function wg(n,e){if(wa(e))throw Error("division by zero");if(wa(n))return new Xh(yd,yd);if(Ps(n))return e=wg(ai(n),e),new Xh(ai(e.g),ai(e.h));if(Ps(e))return e=wg(n,ai(e)),new Xh(ai(e.g),e.h);if(30<n.g.length){if(Ps(n)||Ps(e))throw Error("slowDivide_ only works with positive integers.");for(var t=Iy,r=e;0>=r.X(n);)t=Ol(t),r=Ol(r);var i=ef(t,1),a=ef(r,1);for(r=ef(r,2),t=ef(t,2);!wa(r);){var l=a.add(r);0>=l.X(n)&&(i=i.add(t),a=l),r=ef(r,1),t=ef(t,1)}return e=_g(n,i.R(e)),new Xh(i,e)}for(i=yd;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),l=(a=Ea(t)).R(e);Ps(l)||0<l.X(n);)l=(a=Ea(t-=r)).R(e);wa(a)&&(a=Iy),i=i.add(a),n=_g(n,l)}return new Xh(i,n)}function Ol(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new Sn(t,n.h)}function ef(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],a=0;a<r;a++)i[a]=0<e?n.D(a+t)>>>e|n.D(a+t+1)<<32-e:n.D(a+t);return new Sn(i,n.h)}(et=Sn.prototype).ea=function(){if(Ps(this))return-ai(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:wy+r)*e,e*=wy}return n},et.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(wa(this))return"0";if(Ps(this))return"-"+ai(this).toString(n);for(var e=Ea(Math.pow(n,6)),t=this,r="";;){var i=wg(t,e).g,a=((0<(t=_g(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(wa(t=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},et.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},et.X=function(n){return Ps(n=_g(this,n))?-1:wa(n)?0:1},et.abs=function(){return Ps(this)?ai(this):this},et.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var a=r+(65535&this.D(i))+(65535&n.D(i)),l=(a>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=l>>>16,t[i]=(l&=65535)<<16|(a&=65535)}return new Sn(t,-2147483648&t[t.length-1]?-1:0)},et.R=function(n){if(wa(this)||wa(n))return yd;if(Ps(this))return Ps(n)?ai(this).R(ai(n)):ai(ai(this).R(n));if(Ps(n))return ai(this.R(ai(n)));if(0>this.X(nE)&&0>n.X(nE))return Ea(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var a=this.D(r)>>>16,l=65535&this.D(r),f=n.D(i)>>>16,y=65535&n.D(i);t[2*r+2*i]+=l*y,Eg(t,2*r+2*i),t[2*r+2*i+1]+=a*y,Eg(t,2*r+2*i+1),t[2*r+2*i+1]+=l*f,Eg(t,2*r+2*i+1),t[2*r+2*i+2]+=a*f,Eg(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new Sn(t,0)},et.gb=function(n){return wg(this,n).h},et.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new Sn(t,this.h&n.h)},et.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new Sn(t,this.h|n.h)},et.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new Sn(t,this.h^n.h)},Ey.prototype.createWebChannel=Ey.prototype.g,Ns.prototype.send=Ns.prototype.u,Ns.prototype.open=Ns.prototype.m,Ns.prototype.close=Ns.prototype.close,ng.NO_ERROR=0,ng.TIMEOUT=8,ng.HTTP_ERROR=6,x_.COMPLETE="complete",P_.EventType=rg,rg.OPEN="a",rg.CLOSE="b",rg.ERROR="c",rg.MESSAGE="d",oi.prototype.listen=oi.prototype.O,hr.prototype.listenOnce=hr.prototype.P,hr.prototype.getLastError=hr.prototype.Sa,hr.prototype.getLastErrorCode=hr.prototype.Ia,hr.prototype.getStatus=hr.prototype.da,hr.prototype.getResponseJson=hr.prototype.Wa,hr.prototype.getResponseText=hr.prototype.ja,hr.prototype.send=hr.prototype.ha,hr.prototype.setWithCredentials=hr.prototype.Oa,Ho.prototype.digest=Ho.prototype.l,Ho.prototype.reset=Ho.prototype.reset,Ho.prototype.update=Ho.prototype.j,Sn.prototype.add=Sn.prototype.add,Sn.prototype.multiply=Sn.prototype.R,Sn.prototype.modulo=Sn.prototype.gb,Sn.prototype.compare=Sn.prototype.X,Sn.prototype.toNumber=Sn.prototype.ea,Sn.prototype.toString=Sn.prototype.toString,Sn.prototype.getBits=Sn.prototype.D,Sn.fromNumber=Ea,Sn.fromString=function tI(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return ai(tI(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Ea(Math.pow(e,8)),r=yd,i=0;i<n.length;i+=8){var a=Math.min(8,n.length-i),l=parseInt(n.substring(i,i+a),e);8>a?(a=Ea(Math.pow(e,a)),r=r.R(a).add(Ea(l))):r=(r=r.R(t)).add(Ea(l))}return r};var Bb=oo.createWebChannelTransport=function(){return new Ey},tf=oo.getStatEventTarget=function(){return tg()},nI=oo.ErrorCode=ng,rE=oo.EventType=x_,nR=oo.Event=uo,iE=oo.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},rI=oo.FetchXmlHttpFactory=Yh,sE=oo.WebChannel=P_,Rt=oo.XhrIo=hr,jb=oo.Md5=Ho,nf=oo.Integer=Sn;const iI="@firebase/firestore";class rr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}rr.UNAUTHENTICATED=new rr(null),rr.GOOGLE_CREDENTIALS=new rr("google-credentials-uid"),rr.FIRST_PARTY=new rr("first-party-uid"),rr.MOCK_USER=new rr("mock-user");let rf="9.23.0";const zo=new bu.Yd("@firebase/firestore");function sf(){return zo.logLevel}function ke(n,...e){if(zo.logLevel<=bu.in.DEBUG){const t=e.map(oE);zo.debug(`Firestore (${rf}): ${n}`,...t)}}function pr(n,...e){if(zo.logLevel<=bu.in.ERROR){const t=e.map(oE);zo.error(`Firestore (${rf}): ${n}`,...t)}}function Os(n,...e){if(zo.logLevel<=bu.in.WARN){const t=e.map(oE);zo.warn(`Firestore (${rf}): ${n}`,...t)}}function oE(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function lt(n="Unexpected state"){const e=`FIRESTORE (${rf}) INTERNAL ASSERTION FAILED: `+n;throw pr(e),new Error(e)}function _t(n,e){n||lt()}function Qe(n,e){return n}const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class be extends pn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Zr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class af{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $b{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(rr.UNAUTHENTICATED))}shutdown(){}}class Hb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class zb{constructor(e){this.t=e,this.currentUser=rr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=I=>this.i!==i?(i=this.i,t(I)):Promise.resolve();let l=new Zr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Zr,e.enqueueRetryable(()=>a(this.currentUser))};const f=()=>{const I=l;e.enqueueRetryable((0,ve.Z)(function*(){yield I.promise,yield a(r.currentUser)}))},y=I=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=I,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(I=>y(I)),setTimeout(()=>{if(!this.auth){const I=this.t.getImmediate({optional:!0});I?y(I):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Zr)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_t("string"==typeof r.accessToken),new af(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return _t(null===e||"string"==typeof e),new rr(e)}}class Dy{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=rr.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class oI{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new Dy(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(rr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class aE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class aI{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=a=>{null!=a.error&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.T;return this.T=a.token,ke("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.I.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.I.getImmediate({optional:!0});a?i(a):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(_t("string"==typeof t.token),this.T=t.token,new aE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Ig(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class uf{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Ig(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Ht(n,e){return n<e?-1:n>e?1:0}function lf(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function uI(n){return n+"\0"}class Gn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new be(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new be(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new be(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new be(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Gn.fromMillis(Date.now())}static fromDate(e){return Gn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Gn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ht(this.nanoseconds,e.nanoseconds):Ht(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Et{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Et(e)}static min(){return new Et(new Gn(0,0))}static max(){return new Et(new Gn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class cf{constructor(e,t,r){void 0===t?t=0:t>e.length&&lt(),void 0===r?r=e.length-t:r>e.length-t&&lt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===cf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof cf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class dn extends cf{construct(e,t,r){return new dn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new be(ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new dn(t)}static emptyPath(){return new dn([])}}const lI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gr extends cf{construct(e,t,r){return new gr(e,t,r)}static isValidIdentifier(e){return lI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new gr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new be(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new be(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[i+1];if("\\"!==y&&"."!==y&&"`"!==y)throw new be(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,i+=2}else"`"===f?(l=!l,i++):"."!==f||l?(r+=f,i++):(a(),i++)}if(a(),l)throw new be(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new gr(t)}static emptyPath(){return new gr([])}}class Ke{constructor(e){this.path=e}static fromPath(e){return new Ke(dn.fromString(e))}static fromName(e){return new Ke(dn.fromString(e).popFirst(5))}static empty(){return new Ke(dn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===dn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return dn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ke(new dn(e.slice()))}}class uE{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function cI(n){return n.fields.find(e=>2===e.kind)}function df(n){return n.fields.filter(e=>2!==e.kind)}uE.UNKNOWN_ID=-1;class Dg{constructor(e,t){this.fieldPath=e,this.kind=t}}class Cg{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Cg(0,Ei.min())}}function dI(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Et.fromTimestamp(1e9===r?new Gn(t+1,0):new Gn(t,r));return new Ei(i,Ke.empty(),e)}function lE(n){return new Ei(n.readTime,n.key,-1)}class Ei{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ei(Et.min(),Ke.empty(),-1)}static max(){return new Ei(Et.max(),Ke.empty(),-1)}}function cE(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ke.comparator(n.documentKey,e.documentKey),0!==t?t:Ht(n.largestBatchId,e.largestBatchId))}const hI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function kl(n){return pI.apply(this,arguments)}function pI(){return pI=(0,ve.Z)(function*(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==hI)throw n;ke("LocalStore","Unexpectedly lost primary lease")}),pI.apply(this,arguments)}class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&lt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new te((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof te?t:te.resolve(t)}catch(t){return te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):te.reject(t)}static resolve(e){return new te((t,r)=>{t(e)})}static reject(e){return new te((t,r)=>{r(e)})}static waitFor(e){return new te((t,r)=>{let i=0,a=0,l=!1;e.forEach(f=>{++i,f.next(()=>{++a,l&&a===i&&t()},y=>r(y))}),l=!0,a===i&&t()})}static or(e){let t=te.resolve(!1);for(const r of e)t=t.next(i=>i?te.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new te((r,i)=>{const a=e.length,l=new Array(a);let f=0;for(let y=0;y<a;y++){const I=y;t(e[I]).next(S=>{l[I]=S,++f,f===a&&r(l)},S=>i(S))}})}static doWhile(e,t){return new te((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class bg{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Zr,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Au(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=hE(r.target.error);this.v.reject(new Au(e,i))}}static open(e,t,r,i){try{return new bg(t,e.transaction(i,r))}catch(a){throw new Au(t,a)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(ke("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new gI(t)}}class Go{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===Go.S((0,pn.z$)())&&pr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ke("SimpleDb","Removing database:",e),vd(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,pn.hl)())return!1;if(Go.C())return!0;const e=(0,pn.z$)(),t=Go.S(e),r=0<t&&t<10,i=Go.N(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,ve.Z)(function*(){return t.db||(ke("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new Au(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const f=l.target.error;i("VersionError"===f.name?new be(ae.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new be(ae.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new Au(e,f))},a.onupgradeneeded=l=>{ke("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.V.O(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{ke("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,ve.Z)(function*(){const l="readonly"===t;let f=0;for(;;){++f;try{a.db=yield a.$(e);const y=bg.open(a.db,e,l?"readonly":"readwrite",r),I=i(y).next(S=>(y.P(),S)).catch(S=>(y.abort(S),te.reject(S))).toPromise();return I.catch(()=>{}),yield y.R,I}catch(y){const I=y,S="FirebaseError"!==I.name&&f<3;if(ke("SimpleDb","Transaction failed with error:",I.message,"Retrying:",S),a.close(),!S)return Promise.reject(I)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Gb{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return vd(this.L.delete())}}class Au extends be{constructor(e,t){super(ae.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Fl(n){return"IndexedDbTransactionError"===n.name}class gI{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ke("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ke("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),vd(r)}add(e){return ke("SimpleDb","ADD",this.store.name,e,e),vd(this.store.add(e))}get(e){return vd(this.store.get(e)).next(t=>(void 0===t&&(t=null),ke("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ke("SimpleDb","DELETE",this.store.name,e),vd(this.store.delete(e))}count(){return ke("SimpleDb","COUNT",this.store.name),vd(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.W(i,(l,f)=>{a.push(f)}).next(()=>a)}{const i=this.store.getAll(r.range);return new te((a,l)=>{i.onerror=f=>{l(f.target.error)},i.onsuccess=f=>{a(f.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new te((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}J(e,t){ke("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(a,l,f)=>f.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new te((r,i)=>{t.onerror=a=>{const l=hE(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(f=>{f?l.continue():r()}):r()}})}W(e,t){const r=[];return new te((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const f=l.target.result;if(!f)return void i();const y=new Gb(f),I=t(f.primaryKey,f.value,y);if(I instanceof te){const S=I.catch(R=>(y.done(),te.reject(R)));r.push(S)}y.isDone?i():null===y.K?f.continue():f.continue(y.K)}}).next(()=>te.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function vd(n){return new te((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=hE(r.target.error);t(i)}})}let dE=!1;function hE(n){const e=Go.S((0,pn.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new be("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return dE||(dE=!0,setTimeout(()=>{throw r},0)),r}}return n}class mI{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;ke("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ve.Z)(function*(){t.task=null;try{ke("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){Fl(r)?ke("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield kl(r)}yield t.et(6e4)}))}}class qb{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,ve.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,a=!0;return te.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return ke("IndexBackiller",`Processing collection: ${l}`),this.it(e,l,i).next(f=>{i-=f,r.add(l)});a=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.rt(i,a)).next(f=>(ke("IndexBackiller",`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f))).next(()=>l.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,a)=>{const l=lE(a);cE(l,r)>0&&(r=l)}),new Ei(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Ki=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function Sg(n){return null==n}function hf(n){return 0===n&&1/n==-1/0}function fE(n){return"number"==typeof n&&Number.isInteger(n)&&!hf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Li(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=yI(e)),e=Wb(n.get(t),e);return yI(e)}function Wb(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function yI(n){return n+"\x01\x01"}function lo(n){const e=n.length;if(_t(e>=2),2===e)return _t("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),dn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&lt(),n.charAt(l+1)){case"\x01":const f=n.substring(a,l);let y;0===i.length?y=f:(i+=f,y=i,i=""),r.push(y);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:lt()}a=l+2}return new dn(r)}const vI=["userId","batchId"];function Tg(n,e){return[n,Li(e)]}function _I(n,e,t){return[n,Li(e),t]}const Kb={},Zb=["prefixPath","collectionGroup","readTime","documentId"],Yb=["prefixPath","collectionGroup","documentId"],Qb=["collectionGroup","readTime","prefixPath","documentId"],Jb=["canonicalId","targetId"],Xb=["targetId","path"],eS=["path","targetId"],EI=["collectionId","parent"],wI=["indexId","uid"],tS=["uid","sequenceNumber"],nS=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],II=["indexId","uid","orderedDocumentKey"],rS=["userId","collectionPath","documentId"],iS=["userId","collectionPath","largestBatchId"],sS=["userId","collectionGroup","largestBatchId"],by=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],pE=[...by,"documentOverlays"],gE=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Sy=gE,oS=[...Sy,"indexConfiguration","indexState","indexEntries"];class mE extends fI{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Fr(n,e){const t=Qe(n);return Go.M(t.ht,e)}function DI(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Mu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function _d(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Pn{constructor(e,t){this.comparator=e,this.root=t||Vi.EMPTY}insert(e,t){return new Pn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Vi.BLACK,null,null))}remove(e){return new Pn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ty(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ty(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ty(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ty(this.root,e,this.comparator,!0)}}class Ty{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vi{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Vi.RED,this.left=i??Vi.EMPTY,this.right=a??Vi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Vi(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Vi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Vi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw lt();const e=this.left.check();if(e!==this.right.check())throw lt();return e+(this.isRed()?0:1)}}Vi.EMPTY=null,Vi.RED=!0,Vi.BLACK=!1,Vi.EMPTY=new class{constructor(){this.size=0}get key(){throw lt()}get value(){throw lt()}get color(){throw lt()}get left(){throw lt()}get right(){throw lt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Vi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class jn{constructor(e){this.comparator=e,this.data=new Pn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ay(this.data.getIterator())}getIteratorFrom(e){return new Ay(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof jn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new jn(this.comparator);return t.data=e,t}}class Ay{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ff(n){return n.hasNext()?n.getNext():void 0}class Ui{constructor(e){this.fields=e,e.sort(gr.comparator)}static empty(){return new Ui([])}unionWith(e){let t=new jn(gr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ui(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return lf(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class CI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Sr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new CI("Invalid base64 string: "+i):i}}(e);return new Sr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new Sr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ht(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Sr.EMPTY_BYTE_STRING=new Sr("");const SI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ru(n){if(_t(!!n),"string"==typeof n){let e=0;const t=SI.exec(n);if(_t(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ir(n.seconds),nanos:ir(n.nanos)}}function ir(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ia(n){return"string"==typeof n?Sr.fromBase64String(n):Sr.fromUint8Array(n)}function My(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Ry(n){const e=n.mapValue.fields.__previous_value__;return My(e)?Ry(e):e}function Ag(n){const e=Ru(n.mapValue.fields.__local_write_time__.timestampValue);return new Gn(e.seconds,e.nanos)}class aS{constructor(e,t,r,i,a,l,f,y,I){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=f,this.longPollingOptions=y,this.useFetchStreams=I}}class xu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new xu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof xu&&e.projectId===this.projectId&&e.database===this.database}}const Ed={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Mg={nullValue:"NULL_VALUE"};function Ll(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?My(n)?4:gf(n)?9007199254740991:10:lt()}function Da(n,e){if(n===e)return!0;const t=Ll(n);if(t!==Ll(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ag(n).isEqual(Ag(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=Ru(r.timestampValue),l=Ru(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Ia(n.bytesValue).isEqual(Ia(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return ir(r.geoPointValue.latitude)===ir(i.geoPointValue.latitude)&&ir(r.geoPointValue.longitude)===ir(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return ir(r.integerValue)===ir(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=ir(r.doubleValue),l=ir(i.doubleValue);return a===l?hf(a)===hf(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return lf(n.arrayValue.values||[],e.arrayValue.values||[],Da);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(DI(a)!==DI(l))return!1;for(const f in a)if(a.hasOwnProperty(f)&&(void 0===l[f]||!Da(a[f],l[f])))return!1;return!0}(n,e);default:return lt()}var i}function xy(n,e){return void 0!==(n.values||[]).find(t=>Da(t,e))}function Vl(n,e){if(n===e)return 0;const t=Ll(n),r=Ll(e);if(t!==r)return Ht(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ht(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=ir(i.integerValue||i.doubleValue),f=ir(a.integerValue||a.doubleValue);return l<f?-1:l>f?1:l===f?0:isNaN(l)?isNaN(f)?0:-1:1}(n,e);case 3:return TI(n.timestampValue,e.timestampValue);case 4:return TI(Ag(n),Ag(e));case 5:return Ht(n.stringValue,e.stringValue);case 6:return function(i,a){const l=Ia(i),f=Ia(a);return l.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),f=a.split("/");for(let y=0;y<l.length&&y<f.length;y++){const I=Ht(l[y],f[y]);if(0!==I)return I}return Ht(l.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=Ht(ir(i.latitude),ir(a.latitude));return 0!==l?l:Ht(ir(i.longitude),ir(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],f=a.values||[];for(let y=0;y<l.length&&y<f.length;++y){const I=Vl(l[y],f[y]);if(I)return I}return Ht(l.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===Ed.mapValue&&a===Ed.mapValue)return 0;if(i===Ed.mapValue)return 1;if(a===Ed.mapValue)return-1;const l=i.fields||{},f=Object.keys(l),y=a.fields||{},I=Object.keys(y);f.sort(),I.sort();for(let S=0;S<f.length&&S<I.length;++S){const R=Ht(f[S],I[S]);if(0!==R)return R;const L=Vl(l[f[S]],y[I[S]]);if(0!==L)return L}return Ht(f.length,I.length)}(n.mapValue,e.mapValue);default:throw lt()}}function TI(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ht(n,e);const t=Ru(n),r=Ru(e),i=Ht(t.seconds,r.seconds);return 0!==i?i:Ht(t.nanos,r.nanos)}function pf(n){return yE(n)}function yE(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Ru(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ia(n.bytesValue).toBase64():"referenceValue"in n?Ke.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=yE(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const f of i)l?l=!1:a+=",",a+=`${f}:${yE(r.fields[f])}`;return a+"}"}(n.mapValue):lt();var e}function wd(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function vE(n){return!!n&&"integerValue"in n}function Rg(n){return!!n&&"arrayValue"in n}function AI(n){return!!n&&"nullValue"in n}function MI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Py(n){return!!n&&"mapValue"in n}function xg(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Mu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=xg(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=xg(n.arrayValue.values[t]);return e}return Object.assign({},n)}function gf(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function RI(n){return"nullValue"in n?Mg:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?wd(xu.empty(),Ke.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:lt()}function xI(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?wd(xu.empty(),Ke.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Ed:lt()}function _E(n,e){const t=Vl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function EE(n,e){const t=Vl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class ui{constructor(e){this.value=e}static empty(){return new ui({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Py(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=xg(t)}setAll(e){let t=gr.emptyPath(),r={},i=[];e.forEach((l,f)=>{if(!t.isImmediateParentOf(f)){const y=this.getFieldsMap(t);this.applyChanges(y,r,i),r={},i=[],t=f.popLast()}l?r[f.lastSegment()]=xg(l):i.push(f.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Py(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Da(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Py(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Mu(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new ui(xg(this.value))}}function NI(n){const e=[];return Mu(n.fields,(t,r)=>{const i=new gr([t]);if(Py(r)){const a=NI(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new Ui(e)}class qn{constructor(e,t,r,i,a,l,f){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=l,this.documentState=f}static newInvalidDocument(e){return new qn(e,0,Et.min(),Et.min(),Et.min(),ui.empty(),0)}static newFoundDocument(e,t,r,i){return new qn(e,1,t,Et.min(),r,i,0)}static newNoDocument(e,t){return new qn(e,2,t,Et.min(),Et.min(),ui.empty(),0)}static newUnknownDocument(e,t){return new qn(e,3,t,Et.min(),Et.min(),ui.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Et.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ui.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ui.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Et.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof qn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Id{constructor(e,t){this.position=e,this.inclusive=t}}function PI(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?Ke.comparator(Ke.fromName(l.referenceValue),t.key):Vl(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function OI(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Da(n.position[t],e.position[t]))return!1;return!0}class mf{constructor(e,t="asc"){this.field=e,this.dir=t}}function uS(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class kI{}class rn extends kI{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new ky(e,t,r):"array-contains"===t?new BI(e,r):"in"===t?new IE(e,r):"not-in"===t?new DE(e,r):"array-contains-any"===t?new jI(e,r):new rn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new Fy(e,r):new lS(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Vl(t,this.value)):null!==t&&Ll(this.value)===Ll(t)&&this.matchesComparison(Vl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return lt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Tn extends kI{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Tn(e,t)}matches(e){return Ul(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Ul(n){return"and"===n.op}function co(n){return"or"===n.op}function wE(n){return Oy(n)&&Ul(n)}function Oy(n){for(const e of n.filters)if(e instanceof Tn)return!1;return!0}function Dd(n){if(n instanceof rn)return n.field.canonicalString()+n.op.toString()+pf(n.value);if(wE(n))return n.filters.map(e=>Dd(e)).join(",");{const e=n.filters.map(t=>Dd(t)).join(",");return`${n.op}(${e})`}}function FI(n,e){return n instanceof rn?(t=n,(r=e)instanceof rn&&t.op===r.op&&t.field.isEqual(r.field)&&Da(t.value,r.value)):n instanceof Tn?function(t,r){return r instanceof Tn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,a,l)=>i&&FI(a,r.filters[l]),!0)}(n,e):void lt();var t,r}function LI(n,e){const t=n.filters.concat(e);return Tn.create(t,n.op)}function VI(n){return n instanceof rn?`${(e=n).field.canonicalString()} ${e.op} ${pf(e.value)}`:n instanceof Tn?function(e){return e.op.toString()+" {"+e.getFilters().map(VI).join(" ,")+"}"}(n):"Filter";var e}class ky extends rn{constructor(e,t,r){super(e,t,r),this.key=Ke.fromName(r.referenceValue)}matches(e){const t=Ke.comparator(e.key,this.key);return this.matchesComparison(t)}}class Fy extends rn{constructor(e,t){super(e,"in",t),this.keys=UI(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class lS extends rn{constructor(e,t){super(e,"not-in",t),this.keys=UI(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function UI(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ke.fromName(r.referenceValue))}class BI extends rn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Rg(t)&&xy(t.arrayValue,this.value)}}class IE extends rn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&xy(this.value.arrayValue,t)}}class DE extends rn{constructor(e,t){super(e,"not-in",t)}matches(e){if(xy(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!xy(this.value.arrayValue,t)}}class jI extends rn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Rg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>xy(this.value.arrayValue,r))}}class CE{constructor(e,t=null,r=[],i=[],a=null,l=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=f,this.dt=null}}function Ng(n,e=null,t=[],r=[],i=null,a=null,l=null){return new CE(n,e,t,r,i,a,l)}function Bl(n){const e=Qe(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Dd(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Sg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>pf(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>pf(r)).join(",")),e.dt=t}return e.dt}function Cd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!uS(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!FI(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!OI(n.startAt,e.startAt)&&OI(n.endAt,e.endAt)}function yf(n){return Ke.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Ly(n,e){return n.filters.filter(t=>t instanceof rn&&t.field.isEqual(e))}function $I(n,e,t){let r=Mg,i=!0;for(const a of Ly(n,e)){let l=Mg,f=!0;switch(a.op){case"<":case"<=":l=RI(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,f=!1;break;case"!=":case"not-in":l=Mg}_E({value:r,inclusive:i},{value:l,inclusive:f})<0&&(r=l,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];_E({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function HI(n,e,t){let r=Ed,i=!0;for(const a of Ly(n,e)){let l=Ed,f=!0;switch(a.op){case">=":case">":l=xI(a.value),f=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,f=!1;break;case"!=":case"not-in":l=Ed}EE({value:r,inclusive:i},{value:l,inclusive:f})>0&&(r=l,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];EE({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class Nu{constructor(e,t=null,r=[],i=[],a=null,l="F",f=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=f,this.endAt=y,this.wt=null,this._t=null}}function bE(n,e,t,r,i,a,l,f){return new Nu(n,e,t,r,i,a,l,f)}function jl(n){return new Nu(n)}function SE(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function TE(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Pg(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Vy(n){return null!==n.collectionGroup}function bd(n){const e=Qe(n);if(null===e.wt){e.wt=[];const t=Pg(e),r=TE(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new mf(t)),e.wt.push(new mf(gr.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.wt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new mf(gr.keyField(),a))}}}return e.wt}function Bi(n){const e=Qe(n);if(!e._t)if("F"===e.limitType)e._t=Ng(e.path,e.collectionGroup,bd(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of bd(e))t.push(new mf(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Id(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Id(e.startAt.position,e.startAt.inclusive):null;e._t=Ng(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function Uy(n,e){e.getFirstInequalityField(),Pg(n);const t=n.filters.concat([e]);return new Nu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function By(n,e,t){return new Nu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function vf(n,e){return Cd(Bi(n),Bi(e))&&n.limitType===e.limitType}function zI(n){return`${Bl(Bi(n))}|lt:${n.limitType}`}function wi(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>VI(r)).join(", ")}]`),Sg(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>pf(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>pf(r)).join(",")),`Target(${t})`}(Bi(n))}; limitType=${n.limitType})`}function Ca(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ke.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of bd(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const f=PI(i,a,l);return i.inclusive?f<=0:f<0}(t.startAt,bd(t),r)||t.endAt&&!function(i,a,l){const f=PI(i,a,l);return i.inclusive?f>=0:f>0}(t.endAt,bd(t),r)));var t,r}function GI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function qI(n){return(e,t)=>{let r=!1;for(const i of bd(n)){const a=sR(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function sR(n,e,t){const r=n.field.isKeyField()?Ke.comparator(e.key,t.key):function(i,a,l){const f=a.data.field(i),y=l.data.field(i);return null!==f&&null!==y?Vl(f,y):lt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return lt()}}class $l{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Mu(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return _d(this.inner)}size(){return this.innerSize}}const WI=new Pn(Ke.comparator);function ji(){return WI}const _f=new Pn(Ke.comparator);function Og(...n){let e=_f;for(const t of n)e=e.insert(t.key,t);return e}function jy(n){let e=_f;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ba(){return kg()}function AE(){return kg()}function kg(){return new $l(n=>n.toString(),(n,e)=>n.isEqual(e))}const cS=new Pn(Ke.comparator),dS=new jn(Ke.comparator);function Kt(...n){let e=dS;for(const t of n)e=e.add(t);return e}const KI=new jn(Ht);function $y(){return KI}function Fg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hf(e)?"-0":e}}function Hy(n){return{integerValue:""+n}}function hS(n,e){return fE(e)?Hy(e):Fg(n,e)}class Lg{constructor(){this._=void 0}}function fS(n,e,t){return n instanceof Ef?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&My(i)&&(i=Ry(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Hl?zy(n,e):n instanceof wf?YI(n,e):function(r,i){const a=Sd(r,i),l=QI(a)+QI(r.gt);return vE(a)&&vE(r.gt)?Hy(l):Fg(r.serializer,l)}(n,e)}function ZI(n,e,t){return n instanceof Hl?zy(n,e):n instanceof wf?YI(n,e):t}function Sd(n,e){return n instanceof Vg?vE(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Ef extends Lg{}class Hl extends Lg{constructor(e){super(),this.elements=e}}function zy(n,e){const t=JI(e);for(const r of n.elements)t.some(i=>Da(i,r))||t.push(r);return{arrayValue:{values:t}}}class wf extends Lg{constructor(e){super(),this.elements=e}}function YI(n,e){let t=JI(e);for(const r of n.elements)t=t.filter(i=>!Da(i,r));return{arrayValue:{values:t}}}class Vg extends Lg{constructor(e,t){super(),this.serializer=e,this.gt=t}}function QI(n){return ir(n.integerValue||n.doubleValue)}function JI(n){return Rg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Ug{constructor(e,t){this.field=e,this.transform=t}}class eD{constructor(e,t){this.version=e,this.transformResults=t}}class Yn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Yn}static exists(e){return new Yn(void 0,e)}static updateTime(e){return new Yn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Bg(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class jg{}function tD(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new $g(n.key,Yn.none()):new Td(n.key,n.data,Yn.none());{const t=n.data,r=ui.empty();let i=new jn(gr.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);null===l&&a.length>1&&(a=a.popLast(),l=t.field(a)),null===l?r.delete(a):r.set(a,l),i=i.add(a)}return new Sa(n.key,r,new Ui(i.toArray()),Yn.none())}}function pS(n,e,t){n instanceof Td?function(r,i,a){const l=r.value.clone(),f=nD(r.fieldTransforms,i,a.transformResults);l.setAll(f),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Sa?function(r,i,a){if(!Bg(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=nD(r.fieldTransforms,i,a.transformResults),f=i.data;f.setAll(RE(r)),f.setAll(l),i.convertToFoundDocument(a.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function If(n,e,t,r){return n instanceof Td?function(i,a,l,f){if(!Bg(i.precondition,a))return l;const y=i.value.clone(),I=rD(i.fieldTransforms,f,a);return y.setAll(I),a.convertToFoundDocument(a.version,y).setHasLocalMutations(),null}(n,e,t,r):n instanceof Sa?function(i,a,l,f){if(!Bg(i.precondition,a))return l;const y=rD(i.fieldTransforms,f,a),I=a.data;return I.setAll(RE(i)),I.setAll(y),a.convertToFoundDocument(a.version,I).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(S=>S.field))}(n,e,t,r):(l=t,Bg(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l);var a,l}function gS(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=Sd(r.transform,i||null);null!=a&&(null===t&&(t=ui.empty()),t.set(r.field,a))}return t||null}function ME(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&lf(t,r,(i,a)=>function XI(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Hl&&r instanceof Hl||t instanceof wf&&r instanceof wf?lf(t.elements,r.elements,Da):t instanceof Vg&&r instanceof Vg?Da(t.gt,r.gt):t instanceof Ef&&r instanceof Ef);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Td extends jg{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Sa extends jg{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function RE(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function nD(n,e,t){const r=new Map;_t(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,f=e.data.field(a.field);r.set(a.field,ZI(l,f,t[i]))}return r}function rD(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,fS(a,l,e))}return r}class $g extends jg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Gy extends jg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class iD{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&pS(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=If(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=If(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=AE();return this.mutations.forEach(i=>{const a=e.get(i.key),l=a.overlayedDocument;let f=this.applyToLocalView(l,a.mutatedFields);f=t.has(i.key)?null:f;const y=tD(l,f);null!==y&&r.set(i.key,y),l.isValidDocument()||l.convertToNoDocument(Et.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Kt())}isEqual(e){return this.batchId===e.batchId&&lf(this.mutations,e.mutations,(t,r)=>ME(t,r))&&lf(this.baseMutations,e.baseMutations,(t,r)=>ME(t,r))}}class sD{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){_t(e.mutations.length===r.length);let i=cS;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new sD(e,t,r,i)}}class oD{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class aR{constructor(e,t){this.count=e,this.unchangedNames=t}}var Yr,fn;function mS(n){switch(n){default:return lt();case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0}}function Hg(n){if(void 0===n)return pr("GRPC error has no .code"),ae.UNKNOWN;switch(n){case Yr.OK:return ae.OK;case Yr.CANCELLED:return ae.CANCELLED;case Yr.UNKNOWN:return ae.UNKNOWN;case Yr.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case Yr.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case Yr.INTERNAL:return ae.INTERNAL;case Yr.UNAVAILABLE:return ae.UNAVAILABLE;case Yr.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case Yr.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case Yr.NOT_FOUND:return ae.NOT_FOUND;case Yr.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case Yr.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case Yr.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case Yr.ABORTED:return ae.ABORTED;case Yr.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case Yr.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case Yr.DATA_LOSS:return ae.DATA_LOSS;default:return lt()}}(fn=Yr||(Yr={}))[fn.OK=0]="OK",fn[fn.CANCELLED=1]="CANCELLED",fn[fn.UNKNOWN=2]="UNKNOWN",fn[fn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fn[fn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fn[fn.NOT_FOUND=5]="NOT_FOUND",fn[fn.ALREADY_EXISTS=6]="ALREADY_EXISTS",fn[fn.PERMISSION_DENIED=7]="PERMISSION_DENIED",fn[fn.UNAUTHENTICATED=16]="UNAUTHENTICATED",fn[fn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fn[fn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fn[fn.ABORTED=10]="ABORTED",fn[fn.OUT_OF_RANGE=11]="OUT_OF_RANGE",fn[fn.UNIMPLEMENTED=12]="UNIMPLEMENTED",fn[fn.INTERNAL=13]="INTERNAL",fn[fn.UNAVAILABLE=14]="UNAVAILABLE",fn[fn.DATA_LOSS=15]="DATA_LOSS";class aD{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return zg}static getOrCreateInstance(){return null===zg&&(zg=new aD),zg}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let zg=null;function Gg(){return new TextEncoder}const uD=new nf([4294967295,4294967295],0);function xE(n){const e=Gg().encode(n),t=new jb;return t.update(e),new Uint8Array(t.digest())}function yS(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new nf([t,r],0),new nf([i,a],0)]}class qg{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Df(`Invalid padding: ${t}`);if(r<0)throw new Df(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Df(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Df(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=nf.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(nf.fromNumber(r)));return 1===i.compare(uD)&&(i=new nf([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=xE(e),[r,i]=yS(t);for(let a=0;a<this.hashCount;a++){const l=this.Et(r,i,a);if(!this.At(l))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new qg(a,i,t);return r.forEach(f=>l.insert(f)),l}insert(e){if(0===this.It)return;const t=xE(e),[r,i]=yS(t);for(let a=0;a<this.hashCount;a++){const l=this.Et(r,i,a);this.Rt(l)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Df extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Wg{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,qy.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Wg(Et.min(),i,new Pn(Ht),ji(),Kt())}}class qy{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new qy(r,t,Kt(),Kt(),Kt())}}class Wy{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class lD{constructor(e,t){this.targetId=e,this.Vt=t}}class cD{constructor(e,t,r=Sr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Kg{constructor(){this.St=0,this.Dt=ES(),this.Ct=Sr.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Kt(),t=Kt(),r=Kt();return this.Dt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:lt()}}),new qy(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=ES()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class vS{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=ji(),this.zt=_S(),this.Wt=new Pn(Ht)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:lt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,a=this.se(r);if(a){const l=a.target;if(yf(l))if(0===i){const f=new Ke(l.path);this.Yt(r,f,qn.newNoDocument(f,Et.min()))}else _t(1===i);else{const f=this.ie(r);if(f!==i){const y=this.re(e,f);0!==y&&(this.ee(r),this.Wt=this.Wt.insert(r,2===y?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=aD.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(I,S,R){var L,U,W,oe,ce,Le;const it={localCacheCount:S,existenceFilterCount:R.count},ot=R.unchangedNames;return ot&&(it.bloomFilter={applied:0===I,hashCount:null!==(L=ot?.hashCount)&&void 0!==L?L:0,bitmapLength:null!==(oe=null===(W=null===(U=ot?.bits)||void 0===U?void 0:U.bitmap)||void 0===W?void 0:W.length)&&void 0!==oe?oe:0,padding:null!==(Le=null===(ce=ot?.bits)||void 0===ce?void 0:ce.padding)&&void 0!==Le?Le:0}),it}(y,f,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:a="",padding:l=0},hashCount:f=0}=r;let y,I;try{y=Ia(a).toUint8Array()}catch(S){if(S instanceof CI)return Os("Decoding the base64 bloom filter in existence filter failed ("+S.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw S}try{I=new qg(y,l,f)}catch(S){return Os(S instanceof Df?"BloomFilter error: ":"Applying bloom filter failed: ",S),1}return 0===I.It?1:i!==t-this.oe(e.targetId,I)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(a=>{const l=this.Gt.ue(),f=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;t.vt(f)||(this.Yt(e,a,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((a,l)=>{const f=this.se(l);if(f){if(a.current&&yf(f.target)){const y=new Ke(f.target.path);null!==this.jt.get(y)||this.ae(l,y)||this.Yt(l,y,qn.newNoDocument(y,e))}a.Mt&&(t.set(l,a.Ot()),a.Ft())}});let r=Kt();this.zt.forEach((a,l)=>{let f=!0;l.forEachWhile(y=>{const I=this.se(y);return!I||"TargetPurposeLimboResolution"===I.purpose||(f=!1,!1)}),f&&(r=r.add(a))}),this.jt.forEach((a,l)=>l.setReadTime(e));const i=new Wg(e,t,this.Wt,this.jt,r);return this.jt=ji(),this.zt=_S(),this.Wt=new Pn(Ht),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new Kg,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new jn(Ht),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||ke("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Kg),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function _S(){return new Pn(Ke.comparator)}function ES(){return new Pn(Ke.comparator)}const uR={asc:"ASCENDING",desc:"DESCENDING"},wS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},IS={and:"AND",or:"OR"};class DS{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function dD(n,e){return n.useProto3Json||Sg(e)?e:{value:e}}function Cf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function NE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function hD(n,e){return Cf(n,e.toTimestamp())}function Lr(n){return _t(!!n),Et.fromTimestamp(function(e){const t=Ru(e);return new Gn(t.seconds,t.nanos)}(n))}function ks(n,e){return(t=n,new dn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function fD(n){const e=dn.fromString(n);return _t(wD(e)),e}function Ad(n,e){return ks(n.databaseId,e.path)}function Ta(n,e){const t=fD(e);if(t.get(1)!==n.databaseId.projectId)throw new be(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new be(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ke(Ky(t))}function pD(n,e){return ks(n.databaseId,e)}function Fs(n){const e=fD(n);return 4===e.length?dn.emptyPath():Ky(e)}function Zg(n){return new dn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Ky(n){return _t(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function gD(n,e,t){return{name:Ad(n,e),fields:t.value.mapValue.fields}}function mD(n,e,t){const r=Ta(n,e.name),i=Lr(e.updateTime),a=e.createTime?Lr(e.createTime):Et.min(),l=new ui({mapValue:{fields:e.fields}}),f=qn.newFoundDocument(r,i,a,l);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function bf(n,e){let t;if(e instanceof Td)t={update:gD(n,e.key,e.value)};else if(e instanceof $g)t={delete:Ad(n,e.key)};else if(e instanceof Sa)t={update:gD(n,e.key,e.data),updateMask:lR(e.fieldMask)};else{if(!(e instanceof Gy))return lt();t={verify:Ad(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof Ef)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Hl)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof wf)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Vg)return{fieldPath:a.field.canonicalString(),increment:l.gt};throw lt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:hD(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:lt()),t;var i}function OE(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Yn.updateTime(Lr(i.updateTime)):void 0!==i.exists?Yn.exists(i.exists):Yn.none():Yn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let f=null;"setToServerValue"in l?(_t("REQUEST_TIME"===l.setToServerValue),f=new Ef):"appendMissingElements"in l?f=new Hl(l.appendMissingElements.values||[]):"removeAllFromArray"in l?f=new wf(l.removeAllFromArray.values||[]):"increment"in l?f=new Vg(a,l.increment):lt();const y=gr.fromServerFormat(l.fieldPath);return new Ug(y,f)}(n,i)):[];var i;if(e.update){const i=Ta(n,e.update.name),a=new ui({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Ui((e.updateMask.fieldPaths||[]).map(I=>gr.fromServerFormat(I)));return new Sa(i,a,l,t,r)}return new Td(i,a,t,r)}if(e.delete){const i=Ta(n,e.delete);return new $g(i,t)}if(e.verify){const i=Ta(n,e.verify);return new Gy(i,t)}return lt()}function kE(n,e){return{documents:[pD(n,e.path)]}}function FE(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=pD(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=pD(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(y){if(0!==y.length)return ED(Tn.create(y,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const a=function(y){if(0!==y.length)return y.map(I=>{return{field:Aa((S=I).field),direction:Pu(S.dir)};var S})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=dD(n,e.limit);var f,y;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(y=e.endAt).inclusive,values:y.position}),t}function LE(n){let e=Fs(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){_t(1===r);const S=t.from[0];S.allDescendants?i=S.collectionId:e=e.child(S.collectionId)}let a=[];t.where&&(a=function(S){const R=Zy(S);return R instanceof Tn&&wE(R)?R.getFilters():[R]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(S=>{return new mf(Md((R=S).field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction));var R}));let f=null;t.limit&&(f=function(S){let R;return R="object"==typeof S?S.value:S,Sg(R)?null:R}(t.limit));let y=null;var S;t.startAt&&(y=new Id((S=t.startAt).values||[],!!S.before));let I=null;return t.endAt&&(I=function(S){return new Id(S.values||[],!S.before)}(t.endAt)),bE(e,i,l,a,f,"F",y,I)}function Zy(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Md(e.unaryFilter.field);return rn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Md(e.unaryFilter.field);return rn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Md(e.unaryFilter.field);return rn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Md(e.unaryFilter.field);return rn.create(a,"!=",{nullValue:"NULL_VALUE"});default:return lt()}}(n):void 0!==n.fieldFilter?rn.create(Md((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return lt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Tn.create(e.compositeFilter.filters.map(t=>Zy(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return lt()}}(e.compositeFilter.op))}(n):lt();var e}function Pu(n){return uR[n]}function zl(n){return wS[n]}function _D(n){return IS[n]}function Aa(n){return{fieldPath:n.canonicalString()}}function Md(n){return gr.fromServerFormat(n.fieldPath)}function ED(n){return n instanceof rn?function(e){if("=="===e.op){if(MI(e.value))return{unaryFilter:{field:Aa(e.field),op:"IS_NAN"}};if(AI(e.value))return{unaryFilter:{field:Aa(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(MI(e.value))return{unaryFilter:{field:Aa(e.field),op:"IS_NOT_NAN"}};if(AI(e.value))return{unaryFilter:{field:Aa(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Aa(e.field),op:zl(e.op),value:e.value}}}(n):n instanceof Tn?function(e){const t=e.getFilters().map(r=>ED(r));return 1===t.length?t[0]:{compositeFilter:{op:_D(e.op),filters:t}}}(n):lt()}function lR(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function wD(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Ou{constructor(e,t,r,i,a=Et.min(),l=Et.min(),f=Sr.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=f,this.expectedCount=y}withSequenceNumber(e){return new Ou(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ou(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ou(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ou(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class ID{constructor(e){this.fe=e}}function VE(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:UE(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Ad(i=n.fe,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:Cf(i,a.version.toTimestamp()),createTime:Cf(i,a.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Gl(e.version)};else{if(!e.isUnknownDocument())return lt();r.unknownDocument={path:t.path.toArray(),version:Gl(e.version)}}var i,a;return r}function UE(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Gl(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Rd(n){const e=new Gn(n.seconds,n.nanoseconds);return Et.fromTimestamp(e)}function ql(n,e){const t=(e.baseMutations||[]).map(a=>OE(n.fe,a));for(let a=0;a<e.mutations.length-1;++a)a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(e.mutations[a].updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a);const r=e.mutations.map(a=>OE(n.fe,a)),i=Gn.fromMillis(e.localWriteTimeMs);return new iD(e.batchId,i,t,r)}function Yy(n){const e=Rd(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Rd(n.lastLimboFreeSnapshotVersion):Et.min();let r;var i;return void 0!==n.query.documents?(_t(1===(i=n.query).documents.length),r=Bi(jl(Fs(i.documents[0])))):r=Bi(LE(n.query)),new Ou(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Sr.fromBase64String(n.resumeToken))}function Qy(n,e){const t=Gl(e.snapshotVersion),r=Gl(e.lastLimboFreeSnapshotVersion);let i;i=yf(e.target)?kE(n.fe,e.target):FE(n.fe,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Bl(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Jy(n){const e=LE({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?By(e,e.limit,"L"):e}function Xy(n,e){return new oD(e.largestBatchId,OE(n.fe,e.overlayMutation))}function BE(n,e){const t=e.path.lastSegment();return[n,Li(e.path.popLast()),t]}function jE(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Gl(r.readTime),documentKey:Li(r.documentKey.path),largestBatchId:r.largestBatchId}}class DD{getBundleMetadata(e,t){return Yg(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Rd(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return Yg(e).put({bundleId:(r=t).id,createTime:Gl(Lr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Qg(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:Jy(i.bundledQuery),readTime:Rd(i.readTime)};var i})}saveNamedQuery(e,t){return Qg(e).put({name:(r=t).name,readTime:Gl(Lr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Yg(n){return Fr(n,"bundles")}function Qg(n){return Fr(n,"namedQueries")}class Jg{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new Jg(e,t.uid||"")}getOverlay(e,t){return Xg(e).get(BE(this.userId,t)).next(r=>r?Xy(this.serializer,r):null)}getOverlays(e,t){const r=ba();return te.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,l)=>{const f=new oD(t,l);i.push(this.we(e,f))}),te.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Li(l.getCollectionPath())));const a=[];return i.forEach(l=>{const f=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(Xg(e).J("collectionPathOverlayIndex",f))}),te.waitFor(a)}getOverlaysForCollection(e,t,r){const i=ba(),a=Li(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Xg(e).j("collectionPathOverlayIndex",l).next(f=>{for(const y of f){const I=Xy(this.serializer,y);i.set(I.getKey(),I)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=ba();let l;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Xg(e).X({index:"collectionGroupOverlayIndex",range:f},(y,I,S)=>{const R=Xy(this.serializer,I);a.size()<i||R.largestBatchId===l?(a.set(R.getKey(),R),l=R.largestBatchId):S.done()}).next(()=>a)}we(e,t){return Xg(e).put(function(r,i,a){const[l,f,y]=BE(i,a.mutation.key);return{userId:i,collectionPath:f,documentId:y,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:bf(r.fe,a.mutation)}}(this.serializer,this.userId,t))}}function Xg(n){return Fr(n,"documentOverlays")}class xd{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(ir(e.integerValue));else if("doubleValue"in e){const r=ir(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),hf(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Ia(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?gf(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):lt()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),Ke.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function cR(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function SS(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=cR(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}xd.Ve=new xd;class dR{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=t.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=t.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const t=this.Fe(e),r=SS(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Le(e){const t=this.Fe(e),r=SS(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class CD{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class TS{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class em{constructor(){this.je=new dR,this.ze=new CD(this.je),this.We=new TS(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Nd{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Nd(this.indexId,this.documentKey,this.arrayValue,r)}}function Pd(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=AS(n.arrayValue,e.arrayValue),0!==t?t:(t=AS(n.directionalValue,e.directionalValue),0!==t?t:Ke.comparator(n.documentKey,e.documentKey)))}function AS(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class hR{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){_t(e.collectionGroup===this.collectionId);const t=cI(e);if(void 0!==t&&!this.en(t))return!1;const r=df(e);let i=new Set,a=0,l=0;for(;a<r.length&&this.en(r[a]);++a)i=i.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(void 0!==this.Ze){if(!i.has(this.Ze.field.canonicalString())){const f=r[a];if(!this.nn(this.Ze,f)||!this.sn(this.Ye[l++],f))return!1}++a}for(;a<r.length;++a)if(l>=this.Ye.length||!this.sn(this.Ye[l++],r[a]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function MS(n){var e,t;if(_t(n instanceof rn||n instanceof Tn),n instanceof rn){if(n instanceof IE){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(a=>rn.create(n.field,"==",a)))||[];return Tn.create(i,"or")}return n}const r=n.filters.map(i=>MS(i));return Tn.create(r,n.op)}function fR(n){if(0===n.getFilters().length)return[];const e=HE(MS(n));return _t(bD(e)),$E(e)||Sf(e)?[e]:e.getFilters()}function $E(n){return n instanceof rn}function Sf(n){return n instanceof Tn&&wE(n)}function bD(n){return $E(n)||Sf(n)||function(e){if(e instanceof Tn&&co(e)){for(const t of e.getFilters())if(!$E(t)&&!Sf(t))return!1;return!0}return!1}(n)}function HE(n){if(_t(n instanceof rn||n instanceof Tn),n instanceof rn)return n;if(1===n.filters.length)return HE(n.filters[0]);const e=n.filters.map(r=>HE(r));let t=Tn.create(e,n.op);return t=tm(t),bD(t)?t:(_t(t instanceof Tn),_t(Ul(t)),_t(t.filters.length>1),t.filters.reduce((r,i)=>ev(r,i)))}function ev(n,e){let t;return _t(n instanceof rn||n instanceof Tn),_t(e instanceof rn||e instanceof Tn),t=n instanceof rn?e instanceof rn?Tn.create([n,e],"and"):Wl(n,e):e instanceof rn?Wl(e,n):function(r,i){if(_t(r.filters.length>0&&i.filters.length>0),Ul(r)&&Ul(i))return LI(r,i.getFilters());const a=co(r)?r:i,l=co(r)?i:r,f=a.filters.map(y=>ev(y,l));return Tn.create(f,"or")}(n,e),tm(t)}function Wl(n,e){if(Ul(e))return LI(e,n.getFilters());{const t=e.filters.map(r=>ev(n,r));return Tn.create(t,"or")}}function tm(n){if(_t(n instanceof rn||n instanceof Tn),n instanceof rn)return n;const e=n.getFilters();if(1===e.length)return tm(e[0]);if(Oy(n))return n;const t=e.map(i=>tm(i)),r=[];return t.forEach(i=>{i instanceof rn?r.push(i):i instanceof Tn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Tn.create(r,n.op)}class zE{constructor(){this.rn=new nm}addToCollectionParentIndex(e,t){return this.rn.add(t),te.resolve()}getCollectionParents(e,t){return te.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return te.resolve()}deleteFieldIndex(e,t){return te.resolve()}getDocumentsMatchingTarget(e,t){return te.resolve(null)}getIndexType(e,t){return te.resolve(0)}getFieldIndexes(e,t){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,t){return te.resolve(Ei.min())}getMinOffsetFromCollectionGroup(e,t){return te.resolve(Ei.min())}updateCollectionGroup(e,t,r){return te.resolve()}updateIndexEntries(e,t){return te.resolve()}}class nm{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new jn(dn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new jn(dn.comparator)).toArray()}}const tv=new Uint8Array(0);class GE{constructor(e,t){this.user=e,this.databaseId=t,this.on=new nm,this.un=new $l(r=>Bl(r),(r,i)=>Cd(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const a={collectionId:r,parent:Li(i)};return nv(e).put(a)}return te.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[uI(t),""],!1,!0);return nv(e).j(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(lo(l.parent))}return r})}addFieldIndex(e,t){const r=qE(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])};var l;delete i.indexId;const a=r.add(i);if(t.indexState){const l=rv(e);return a.next(f=>{l.put(jE(f,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=qE(e),i=rv(e),a=Kl(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Kl(e);let i=!0;const a=new Map;return te.forEach(this.cn(t),l=>this.an(e,l).next(f=>{i&&(i=!!f),a.set(l,f)})).next(()=>{if(i){let l=Kt();const f=[];return te.forEach(a,(y,I)=>{var S;ke("IndexedDbIndexManager",`Using index ${S=y,`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(ot=>`${ot.fieldPath}:${ot.kind}`).join(",")}`} to execute ${Bl(t)}`);const R=function(ot,mt){const Zt=cI(mt);if(void 0===Zt)return null;for(const Yt of Ly(ot,Zt.fieldPath))switch(Yt.op){case"array-contains-any":return Yt.value.arrayValue.values||[];case"array-contains":return[Yt.value]}return null}(I,y),L=function(ot,mt){const Zt=new Map;for(const Yt of df(mt))for(const Dn of Ly(ot,Yt.fieldPath))switch(Dn.op){case"==":case"in":Zt.set(Yt.fieldPath.canonicalString(),Dn.value);break;case"not-in":case"!=":return Zt.set(Yt.fieldPath.canonicalString(),Dn.value),Array.from(Zt.values())}return null}(I,y),U=function(ot,mt){const Zt=[];let Yt=!0;for(const Dn of df(mt)){const Qi=0===Dn.kind?$I(ot,Dn.fieldPath,ot.startAt):HI(ot,Dn.fieldPath,ot.startAt);Zt.push(Qi.value),Yt&&(Yt=Qi.inclusive)}return new Id(Zt,Yt)}(I,y),W=function(ot,mt){const Zt=[];let Yt=!0;for(const Dn of df(mt)){const Qi=0===Dn.kind?HI(ot,Dn.fieldPath,ot.endAt):$I(ot,Dn.fieldPath,ot.endAt);Zt.push(Qi.value),Yt&&(Yt=Qi.inclusive)}return new Id(Zt,Yt)}(I,y),oe=this.hn(y,I,U),ce=this.hn(y,I,W),Le=this.ln(y,I,L),it=this.fn(y.indexId,R,oe,U.inclusive,ce,W.inclusive,Le);return te.forEach(it,ot=>r.H(ot,t.limit).next(mt=>{mt.forEach(Zt=>{const Yt=Ke.fromSegments(Zt.documentKey);l.has(Yt)||(l=l.add(Yt),f.push(Yt))})}))}).next(()=>f)}return te.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:fR(Tn.create(e.filters,"and")).map(r=>Ng(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,i,a,l,f){const y=(null!=t?t.length:1)*Math.max(r.length,a.length),I=y/(null!=t?t.length:1),S=[];for(let R=0;R<y;++R){const L=t?this.dn(t[R/I]):tv,U=this.wn(e,L,r[R%I],i),W=this._n(e,L,a[R%I],l),oe=f.map(ce=>this.wn(e,L,ce,!0));S.push(...this.createRange(U,W,oe))}return S}wn(e,t,r,i){const a=new Nd(e,Ke.empty(),t,r);return i?a:a.Je()}_n(e,t,r,i){const a=new Nd(e,Ke.empty(),t,r);return i?a.Je():a}an(e,t){const r=new hR(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let l=null;for(const f of a)r.tn(f)&&(!l||f.fields.length>l.fields.length)&&(l=f);return l})}getIndexType(e,t){let r=2;const i=this.cn(t);return te.forEach(i,a=>this.an(e,a).next(l=>{l?0!==r&&l.fields.length<function(f){let y=new jn(gr.comparator),I=!1;for(const S of f.filters)for(const R of S.getFlattenedFilters())R.field.isKeyField()||("array-contains"===R.op||"array-contains-any"===R.op?I=!0:y=y.add(R.field));for(const S of f.orderBy)S.field.isKeyField()||(y=y.add(S.field));return y.size+(I?1:0)}(a)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}mn(e,t){const r=new em;for(const i of df(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.He(i.kind);xd.Ve._e(a,l)}return r.Qe()}dn(e){const t=new em;return xd.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new em;return xd.Ve._e(wd(this.databaseId,t),r.He(function(i){const a=df(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let i=[];i.push(new em);let a=0;for(const l of df(e)){const f=r[a++];for(const y of i)if(this.yn(t,l.fieldPath)&&Rg(f))i=this.pn(i,l,f);else{const I=y.He(l.kind);xd.Ve._e(f,I)}}return this.In(i)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const f of i){const y=new em;y.seed(f.Qe()),xd.Ve._e(l,y.He(t.kind)),a.push(y)}return a}yn(e,t){return!!e.filters.find(r=>r instanceof rn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=qE(e),i=rv(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(a=>{const l=[];return te.forEach(a,f=>i.get([f.indexId,this.uid]).next(y=>{l.push(function(I,S){const R=S?new Cg(S.sequenceNumber,new Ei(Rd(S.readTime),new Ke(lo(S.documentKey)),S.largestBatchId)):Cg.empty(),L=I.fields.map(([U,W])=>new Dg(gr.fromServerFormat(U),W));return new uE(I.indexId,I.collectionGroup,L,R)}(f,y))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Ht(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=qE(e),a=rv(e);return this.Tn(e).next(l=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>te.forEach(f,y=>a.put(jE(y.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return te.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?te.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),te.forEach(f,y=>this.En(e,i,y).next(I=>{const S=this.An(a,y);return I.isEqual(S)?te.resolve():this.vn(e,a,y,I,S)}))))})}Rn(e,t,r,i){return Kl(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,i){return Kl(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const i=Kl(e);let a=new jn(Pd);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(l,f)=>{a=a.add(new Nd(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>a)}An(e,t){let r=new jn(Pd);const i=this.mn(t,e);if(null==i)return r;const a=cI(t);if(null!=a){const l=e.data.field(a.fieldPath);if(Rg(l))for(const f of l.arrayValue.values||[])r=r.add(new Nd(t.indexId,e.key,this.dn(f),i))}else r=r.add(new Nd(t.indexId,e.key,tv,i));return r}vn(e,t,r,i,a){ke("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(f,y,I,S,R){const L=f.getIterator(),U=y.getIterator();let W=ff(L),oe=ff(U);for(;W||oe;){let ce=!1,Le=!1;if(W&&oe){const it=I(W,oe);it<0?Le=!0:it>0&&(ce=!0)}else null!=W?Le=!0:ce=!0;ce?(S(oe),oe=ff(U)):Le?(R(W),W=ff(L)):(W=ff(L),oe=ff(U))}}(i,a,Pd,f=>{l.push(this.Rn(e,t,r,f))},f=>{l.push(this.Pn(e,t,r,f))}),te.waitFor(l)}Tn(e){let t=1;return rv(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,f)=>Pd(l,f)).filter((l,f,y)=>!f||0!==Pd(l,y[f-1]));const i=[];i.push(e);for(const l of r){const f=Pd(l,e),y=Pd(l,t);if(0===f)i[0]=e.Je();else if(f>0&&y<0)i.push(l),i.push(l.Je());else if(y>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2){if(this.bn(i[l],i[l+1]))return[];a.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,tv,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,tv,[]]))}return a}bn(e,t){return Pd(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(RS)}getMinOffset(e,t){return te.mapArray(this.cn(t),r=>this.an(e,r).next(i=>i||lt())).next(RS)}}function nv(n){return Fr(n,"collectionParents")}function Kl(n){return Fr(n,"indexEntries")}function qE(n){return Fr(n,"indexConfiguration")}function rv(n){return Fr(n,"indexState")}function RS(n){_t(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;cE(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Ei(e.readTime,e.documentKey,t)}const xS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ii{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ii(e,Ii.DEFAULT_COLLECTION_PERCENTILE,Ii.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function SD(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let f=0;const y=r.X({range:l},(S,R,L)=>(f++,L.delete()));a.push(y.next(()=>{_t(1===f)}));const I=[];for(const S of t.mutations){const R=_I(e,S.key.path,t.batchId);a.push(i.delete(R)),I.push(S.key)}return te.waitFor(a).next(()=>I)}function iv(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw lt();e=n.noDocument}return JSON.stringify(e).length}Ii.DEFAULT_COLLECTION_PERCENTILE=10,Ii.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ii.DEFAULT=new Ii(41943040,Ii.DEFAULT_COLLECTION_PERCENTILE,Ii.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ii.DISABLED=new Ii(-1,0,0);class sv{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,t,r,i){_t(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new sv(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ku(e).X({index:"userMutationsIndex",range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=Od(e),l=ku(e);return l.add({}).next(f=>{_t("number"==typeof f);const y=new iD(f,t,r,i),I=function(L,U,W){const oe=W.baseMutations.map(Le=>bf(L.fe,Le)),ce=W.mutations.map(Le=>bf(L.fe,Le));return{userId:U,batchId:W.batchId,localWriteTimeMs:W.localWriteTime.toMillis(),baseMutations:oe,mutations:ce}}(this.serializer,this.userId,y),S=[];let R=new jn((L,U)=>Ht(L.canonicalString(),U.canonicalString()));for(const L of i){const U=_I(this.userId,L.key.path,f);R=R.add(L.key.path.popLast()),S.push(l.put(I)),S.push(a.put(U,Kb))}return R.forEach(L=>{S.push(this.indexManager.addToCollectionParentIndex(e,L))}),e.addOnCommittedListener(()=>{this.Vn[f]=y.keys()}),te.waitFor(S).next(()=>y)})}lookupMutationBatch(e,t){return ku(e).get(t).next(r=>r?(_t(r.userId===this.userId),ql(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?te.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return ku(e).X({index:"userMutationsIndex",range:i},(l,f,y)=>{f.userId===this.userId&&(_t(f.batchId>=r),a=ql(this.serializer,f)),y.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ku(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ku(e).j("userMutationsIndex",t).next(r=>r.map(i=>ql(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Tg(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Od(e).X({range:i},(l,f,y)=>{const[I,S,R]=l,L=lo(S);if(I===this.userId&&t.path.isEqual(L))return ku(e).get(R).next(U=>{if(!U)throw lt();_t(U.userId===this.userId),a.push(ql(this.serializer,U))});y.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new jn(Ht);const i=[];return t.forEach(a=>{const l=Tg(this.userId,a.path),f=IDBKeyRange.lowerBound(l),y=Od(e).X({range:f},(I,S,R)=>{const[L,U,W]=I,oe=lo(U);L===this.userId&&a.path.isEqual(oe)?r=r.add(W):R.done()});i.push(y)}),te.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=Tg(this.userId,r),l=IDBKeyRange.lowerBound(a);let f=new jn(Ht);return Od(e).X({range:l},(y,I,S)=>{const[R,L,U]=y,W=lo(L);R===this.userId&&r.isPrefixOf(W)?W.length===i&&(f=f.add(U)):S.done()}).next(()=>this.Dn(e,f))}Dn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(ku(e).get(a).next(l=>{if(null===l)throw lt();_t(l.userId===this.userId),r.push(ql(this.serializer,l))}))}),te.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return SD(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),te.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return te.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Od(e).X({range:r},(a,l,f)=>{if(a[0]===this.userId){const y=lo(a[1]);i.push(y)}else f.done()}).next(()=>{_t(0===i.length)})})}containsKey(e,t){return TD(e,this.userId,t)}xn(e){return WE(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function TD(n,e,t){const r=Tg(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return Od(n).X({range:a,Y:!0},(f,y,I)=>{const[S,R,L]=f;S===e&&R===i&&(l=!0),I.done()}).next(()=>l)}function ku(n){return Fr(n,"mutations")}function Od(n){return Fr(n,"documentMutations")}function WE(n){return Fr(n,"mutationQueues")}class kd{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new kd(0)}static Mn(){return new kd(-1)}}class NS{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new kd(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>Et.fromTimestamp(new Gn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Fd(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(_t(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return Fd(e).X((l,f)=>{const y=Yy(f);y.sequenceNumber<=t&&null===r.get(y.targetId)&&(i++,a.push(this.removeTargetData(e,y)))}).next(()=>te.waitFor(a)).next(()=>i)}forEachTarget(e,t){return Fd(e).X((r,i)=>{const a=Yy(i);t(a)})}$n(e){return ov(e).get("targetGlobalKey").next(t=>(_t(null!==t),t))}On(e,t){return ov(e).put("targetGlobalKey",t)}Fn(e,t){return Fd(e).put(Qy(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Bl(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return Fd(e).X({range:i,index:"queryTargetsIndex"},(l,f,y)=>{const I=Yy(f);Cd(t,I.target)&&(a=I,y.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=Ld(e);return t.forEach(l=>{const f=Li(l.path);i.push(a.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,l))}),te.waitFor(i)}removeMatchingKeys(e,t,r){const i=Ld(e);return te.forEach(t,a=>{const l=Li(a.path);return te.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=Ld(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Ld(e);let a=Kt();return i.X({range:r,Y:!0},(l,f,y)=>{const I=lo(l[1]),S=new Ke(I);a=a.add(S)}).next(()=>a)}containsKey(e,t){const r=Li(t.path),i=IDBKeyRange.bound([r],[uI(r)],!1,!0);let a=0;return Ld(e).X({index:"documentTargetsIndex",Y:!0,range:i},([l,f],y,I)=>{0!==l&&(a++,I.done())}).next(()=>a>0)}le(e,t){return Fd(e).get(t).next(r=>r?Yy(r):null)}}function Fd(n){return Fr(n,"targets")}function ov(n){return Fr(n,"targetGlobal")}function Ld(n){return Fr(n,"targetDocuments")}function KE([n,e],[t,r]){const i=Ht(n,t);return 0===i?Ht(e,r):i}class ZE{constructor(e){this.Ln=e,this.buffer=new jn(KE),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();KE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class AD{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;ke("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ve.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Fl(r)?ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield kl(r)}yield t.Qn(3e5)}))}}class PS{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return te.resolve(Ki.ct);const r=new ZE(t);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(xS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xS):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,i,a,l,f,y,I;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(R=>(R>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${R}`),i=this.params.maximumSequenceNumbersToCollect):i=R,l=Date.now(),this.nthSequenceNumber(e,i))).next(R=>(r=R,f=Date.now(),this.removeTargets(e,r,t))).next(R=>(a=R,y=Date.now(),this.removeOrphanedDocuments(e,r))).next(R=>(I=Date.now(),sf()<=bu.in.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-S}ms\n\tDetermined least recently used ${i} in `+(f-l)+`ms\n\tRemoved ${a} targets in `+(y-f)+`ms\n\tRemoved ${R} documents in `+(I-y)+`ms\nTotal Duration: ${I-S}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:R})))}}class pR{constructor(e,t){this.db=e,this.garbageCollector=function OS(n,e){return new PS(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,i)=>t(i))}addReference(e,t,r){return av(e,r)}removeReference(e,t,r){return av(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return av(e,t)}Xn(e,t){return function(r,i){let a=!1;return WE(r).Z(l=>TD(r,l,i).next(f=>(f&&(a=!0),te.resolve(!f)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Yn(e,(l,f)=>{if(f<=t){const y=this.Xn(e,l).next(I=>{if(!I)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,Et.min()),Ld(e).delete([0,Li(l.path)])))});i.push(y)}}).next(()=>te.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return av(e,t)}Yn(e,t){const r=Ld(e);let i,a=Ki.ct;return r.X({index:"documentTargetsIndex"},([l,f],{path:y,sequenceNumber:I})=>{0===l?(a!==Ki.ct&&t(new Ke(lo(i)),a),a=I,i=y):a=Ki.ct}).next(()=>{a!==Ki.ct&&t(new Ke(lo(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function av(n,e){return Ld(n).put((r=n.currentSequenceNumber,{targetId:0,path:Li(e.path),sequenceNumber:r}));var r}class MD{constructor(){this.changes=new $l(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,qn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?te.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class kS{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Tf(e).put(r)}removeEntry(e,t,r){return Tf(e).delete(function(i,a){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],UE(a),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=qn.newInvalidDocument(t);return Tf(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(rm(t))},(i,a)=>{r=this.ts(t,a)}).next(()=>r)}es(e,t){let r={size:0,document:qn.newInvalidDocument(t)};return Tf(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(rm(t))},(i,a)=>{r={document:this.ts(t,a),size:iv(a)}}).next(()=>r)}getEntries(e,t){let r=ji();return this.ns(e,t,(i,a)=>{const l=this.ts(i,a);r=r.insert(i,l)}).next(()=>r)}ss(e,t){let r=ji(),i=new Pn(Ke.comparator);return this.ns(e,t,(a,l)=>{const f=this.ts(a,l);r=r.insert(a,f),i=i.insert(a,iv(l))}).next(()=>({documents:r,rs:i}))}ns(e,t,r){if(t.isEmpty())return te.resolve();let i=new jn(US);t.forEach(y=>i=i.add(y));const a=IDBKeyRange.bound(rm(i.first()),rm(i.last())),l=i.getIterator();let f=l.getNext();return Tf(e).X({index:"documentKeyIndex",range:a},(y,I,S)=>{const R=Ke.fromSegments([...I.prefixPath,I.collectionGroup,I.documentId]);for(;f&&US(f,R)<0;)r(f,null),f=l.getNext();f&&f.isEqual(R)&&(r(f,I),f=l.hasNext()?l.getNext():null),f?S.G(rm(f)):S.done()}).next(()=>{for(;f;)r(f,null),f=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const a=t.path,l=[a.popLast().toArray(),a.lastSegment(),UE(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Tf(e).j(IDBKeyRange.bound(l,f,!0)).next(y=>{let I=ji();for(const S of y){const R=this.ts(Ke.fromSegments(S.prefixPath.concat(S.collectionGroup,S.documentId)),S);R.isFoundDocument()&&(Ca(t,R)||i.has(R.key))&&(I=I.insert(R.key,R))}return I})}getAllFromCollectionGroup(e,t,r,i){let a=ji();const l=VS(t,r),f=VS(t,Ei.max());return Tf(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,f,!0)},(y,I,S)=>{const R=this.ts(Ke.fromSegments(I.prefixPath.concat(I.collectionGroup,I.documentId)),I);a=a.insert(R.key,R),a.size===i&&S.done()}).next(()=>a)}newChangeBuffer(e){return new gR(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return LS(e).get("remoteDocumentGlobalKey").next(t=>(_t(!!t),t))}Zn(e,t){return LS(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function bS(n,e){let t;if(e.document)t=mD(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ke.fromSegments(e.noDocument.path),i=Rd(e.noDocument.readTime);t=qn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return lt();{const r=Ke.fromSegments(e.unknownDocument.path),i=Rd(e.unknownDocument.version);t=qn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Gn(r[0],r[1]);return Et.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Et.min()))return r}return qn.newInvalidDocument(e)}}function FS(n){return new kS(n)}class gR extends MD{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new $l(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new jn((a,l)=>Ht(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const f=this.us.get(a);if(t.push(this.os.removeEntry(e,a,f.readTime)),l.isValidDocument()){const y=VE(this.os.serializer,l);i=i.add(a.path.popLast());const I=iv(y);r+=I-f.size,t.push(this.os.addEntry(e,a,y))}else if(r-=f.size,this.trackRemovals){const y=VE(this.os.serializer,l.convertToNoDocument(Et.min()));t.push(this.os.addEntry(e,a,y))}}),i.forEach(a=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.os.updateMetadata(e,r)),te.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:i})=>(i.forEach((a,l)=>{this.us.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function LS(n){return Fr(n,"remoteDocumentGlobal")}function Tf(n){return Fr(n,"remoteDocumentsV14")}function rm(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function VS(n,e){const t=e.documentKey.path.toArray();return[n,UE(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function US(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Ht(t[a],r[a]),i)return i;return i=Ht(t.length,r.length),i||(i=Ht(t[t.length-2],r[r.length-2]),i||Ht(t[t.length-1],r[r.length-1]))}class mR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class BS{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&If(r.mutation,i,Ui.empty(),Gn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Kt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Kt()){const i=ba();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let l=Og();return a.forEach((f,y)=>{l=l.insert(f,y.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=ba();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Kt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((l,f)=>{t.set(l,f)})})}computeViews(e,t,r,i){let a=ji();const l=kg(),f=kg();return t.forEach((y,I)=>{const S=r.get(I.key);i.has(I.key)&&(void 0===S||S.mutation instanceof Sa)?a=a.insert(I.key,I):void 0!==S?(l.set(I.key,S.mutation.getFieldMask()),If(S.mutation,I,S.mutation.getFieldMask(),Gn.now())):l.set(I.key,Ui.empty())}),this.recalculateAndSaveOverlays(e,a).next(y=>(y.forEach((I,S)=>l.set(I,S)),t.forEach((I,S)=>{var R;return f.set(I,new mR(S,null!==(R=l.get(I))&&void 0!==R?R:null))}),f))}recalculateAndSaveOverlays(e,t){const r=kg();let i=new Pn((l,f)=>l-f),a=Kt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const f of l)f.keys().forEach(y=>{const I=t.get(y);if(null===I)return;let S=r.get(y)||Ui.empty();S=f.applyToLocalView(I,S),r.set(y,S);const R=(i.get(f.batchId)||Kt()).add(y);i=i.insert(f.batchId,R)})}).next(()=>{const l=[],f=i.getReverseIterator();for(;f.hasNext();){const y=f.getNext(),I=y.key,S=y.value,R=AE();S.forEach(L=>{if(!a.has(L)){const U=tD(t.get(L),r.get(L));null!==U&&R.set(L,U),a=a.add(L)}}),l.push(this.documentOverlayCache.saveOverlays(e,I,R))}return te.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ke.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Vy(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):te.resolve(ba());let f=-1,y=a;return l.next(I=>te.forEach(I,(S,R)=>(f<R.largestBatchId&&(f=R.largestBatchId),a.get(S)?te.resolve():this.remoteDocumentCache.getEntry(e,S).next(L=>{y=y.insert(S,L)}))).next(()=>this.populateOverlays(e,I,a)).next(()=>this.computeViews(e,y,I,Kt())).next(S=>({batchId:f,changes:jy(S)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ke(t)).next(r=>{let i=Og();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=Og();return this.indexManager.getCollectionParents(e,i).next(l=>te.forEach(l,f=>{const y=(I=t,S=f.child(i),new Nu(S,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt));var I,S;return this.getDocumentsMatchingCollectionQuery(e,y,r).next(I=>{I.forEach((S,R)=>{a=a.insert(S,R)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(a=>{i.forEach((f,y)=>{const I=y.getKey();null===a.get(I)&&(a=a.insert(I,qn.newInvalidDocument(I)))});let l=Og();return a.forEach((f,y)=>{const I=i.get(f);void 0!==I&&If(I.mutation,y,Ui.empty(),Gn.now()),Ca(t,y)&&(l=l.insert(f,y))}),l})}}class yR{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return te.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:Lr(r.createTime)}),te.resolve()}getNamedQuery(e,t){return te.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:Jy(r.bundledQuery),readTime:Lr(r.readTime)}),te.resolve();var r}}class vR{constructor(){this.overlays=new Pn(Ke.comparator),this.ls=new Map}getOverlay(e,t){return te.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ba();return te.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.we(e,t,a)}),te.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.ls.delete(r)),te.resolve()}getOverlaysForCollection(e,t,r){const i=ba(),a=t.length+1,l=new Ke(t.child("")),f=this.overlays.getIteratorFrom(l);for(;f.hasNext();){const y=f.getNext().value,I=y.getKey();if(!t.isPrefixOf(I.path))break;I.path.length===a&&y.largestBatchId>r&&i.set(y.getKey(),y)}return te.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Pn((I,S)=>I-S);const l=this.overlays.getIterator();for(;l.hasNext();){const I=l.getNext().value;if(I.getKey().getCollectionGroup()===t&&I.largestBatchId>r){let S=a.get(I.largestBatchId);null===S&&(S=ba(),a=a.insert(I.largestBatchId,S)),S.set(I.getKey(),I)}}const f=ba(),y=a.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((I,S)=>f.set(I,S)),!(f.size()>=i)););return te.resolve(f)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new oD(t,r));let a=this.ls.get(t);void 0===a&&(a=Kt(),this.ls.set(t,a)),this.ls.set(t,a.add(r.key))}}class s{constructor(){this.fs=new jn(o.ds),this.ws=new jn(o._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new o(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new o(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new Ke(new dn([])),r=new o(t,e),i=new o(t,e+1),a=[];return this.ws.forEachInRange([r,i],l=>{this.ys(l),a.push(l.key)}),a}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Ke(new dn([])),r=new o(t,e),i=new o(t,e+1);let a=Kt();return this.ws.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new o(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class o{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Ke.comparator(e.key,t.key)||Ht(e.As,t.As)}static _s(e,t){return Ht(e.As,t.As)||Ke.comparator(e.key,t.key)}}class u{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new jn(o.ds)}checkEmpty(e){return te.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.vs;this.vs++;const l=new iD(a,t,r,i);this.mutationQueue.push(l);for(const f of i)this.Rs=this.Rs.add(new o(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return te.resolve(l)}lookupMutationBatch(e,t){return te.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),a=i<0?0:i;return te.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new o(t,0),i=new o(t,Number.POSITIVE_INFINITY),a=[];return this.Rs.forEachInRange([r,i],l=>{const f=this.Ps(l.As);a.push(f)}),te.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new jn(Ht);return t.forEach(i=>{const a=new o(i,0),l=new o(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([a,l],f=>{r=r.add(f.As)})}),te.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Ke.isDocumentKey(a)||(a=a.child(""));const l=new o(new Ke(a),0);let f=new jn(Ht);return this.Rs.forEachWhile(y=>{const I=y.key.path;return!!r.isPrefixOf(I)&&(I.length===i&&(f=f.add(y.As)),!0)},l),te.resolve(this.Vs(f))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){_t(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return te.forEach(t.mutations,i=>{const a=new o(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new o(t,0),i=this.Rs.firstAfterOrEqual(r);return te.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return te.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class c{constructor(e){this.Ds=e,this.docs=new Pn(Ke.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return te.resolve(r?r.document.mutableCopy():qn.newInvalidDocument(t))}getEntries(e,t){let r=ji();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():qn.newInvalidDocument(i))}),te.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=ji();const l=t.path,f=new Ke(l.child("")),y=this.docs.getIteratorFrom(f);for(;y.hasNext();){const{key:I,value:{document:S}}=y.getNext();if(!l.isPrefixOf(I.path))break;I.path.length>l.length+1||cE(lE(S),r)<=0||(i.has(S.key)||Ca(t,S))&&(a=a.insert(S.key,S.mutableCopy()))}return te.resolve(a)}getAllFromCollectionGroup(e,t,r,i){lt()}Cs(e,t){return te.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new d(this)}getSize(e){return te.resolve(this.size)}}class d extends MD{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),te.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class g{constructor(e){this.persistence=e,this.xs=new $l(t=>Bl(t),Cd),this.lastRemoteSnapshotVersion=Et.min(),this.highestTargetId=0,this.Ns=0,this.ks=new s,this.targetCount=0,this.Ms=kd.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),te.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new kd(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,te.resolve()}updateTargetData(e,t){return this.Fn(t),te.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.xs.forEach((l,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.xs.delete(l),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),te.waitFor(a).next(()=>i)}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return te.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),te.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),te.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),te.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return te.resolve(r)}containsKey(e,t){return te.resolve(this.ks.containsKey(t))}}class _{constructor(e,t){this.$s={},this.overlays={},this.Os=new Ki(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new g(this),this.indexManager=new zE,this.remoteDocumentCache=new c(r=>this.referenceDelegate.Ls(r)),this.serializer=new ID(t),this.qs=new yR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new vR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new u(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){ke("MemoryPersistence","Starting transaction:",e);const i=new D(this.Os.next());return this.referenceDelegate.Us(),r(i).next(a=>this.referenceDelegate.Ks(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Gs(e,t){return te.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class D extends fI{constructor(e){super(),this.currentSequenceNumber=e}}class b{constructor(e){this.persistence=e,this.Qs=new s,this.js=null}static zs(e){return new b(e)}get Ws(){if(this.js)return this.js;throw lt()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),te.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),te.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),te.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Ws.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.Ws,r=>{const i=Ke.fromPath(r);return this.Hs(e,i).next(a=>{a||t.removeEntry(i,Et.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return te.or([()=>te.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class N{constructor(e){this.serializer=e}O(e,t,r,i){const a=new bg("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",vI,{unique:!0}),f.createObjectStore("documentMutations"),F(e),function(f){f.createObjectStore("remoteDocuments")}(e));let l=te.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),F(e)),l=l.next(()=>function(f){const y=f.store("targetGlobal"),I={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Et.min().toTimestamp(),targetCount:0};return y.put("targetGlobalKey",I)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(f,y){return y.store("mutations").j().next(I=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",vI,{unique:!0});const S=y.store("mutations"),R=I.map(L=>S.put(L));return te.waitFor(R)})}(e,a))),l=l.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Ys(a))),r<6&&i>=6&&(l=l.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(a)))),r<7&&i>=7&&(l=l.next(()=>this.Zs(a))),r<8&&i>=8&&(l=l.next(()=>this.ti(e,a))),r<9&&i>=9&&(l=l.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.ei(a))),r<11&&i>=11&&(l=l.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(f){const y=f.createObjectStore("documentOverlays",{keyPath:rS});y.createIndex("collectionPathOverlayIndex",iS,{unique:!1}),y.createIndex("collectionGroupOverlayIndex",sS,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(f){const y=f.createObjectStore("remoteDocumentsV14",{keyPath:Zb});y.createIndex("documentKeyIndex",Yb),y.createIndex("collectionGroupIndex",Qb)}(e)).next(()=>this.ni(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.si(e,a))),r<15&&i>=15&&(l=l.next(()=>function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:wI}).createIndex("sequenceNumberIndex",tS,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:nS}).createIndex("documentKeyIndex",II,{unique:!1})}(e))),l}Xs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=iv(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>te.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",l).next(f=>te.forEach(f,y=>{_t(y.userId===a.userId);const I=ql(this.serializer,y);return SD(e,a.userId,I).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.X((l,f)=>{const y=new dn(l),I=[0,Li(y)];a.push(t.get(I).next(S=>S?te.resolve():t.put({targetId:0,path:Li(y),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>te.waitFor(a))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:EI});const r=t.store("collectionParents"),i=new nm,a=l=>{if(i.add(l)){const f=l.lastSegment(),y=l.popLast();return r.put({collectionId:f,parent:Li(y)})}};return t.store("remoteDocuments").X({Y:!0},(l,f)=>{const y=new dn(l);return a(y.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([l,f,y],I)=>{const S=lo(f);return a(S.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,i)=>{const a=Yy(i),l=Qy(this.serializer,a);return t.put(l)})}ni(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((a,l)=>{const f=t.store("remoteDocumentsV14"),y=(I=l,I.document?new Ke(dn.fromString(I.document.name).popFirst(5)):I.noDocument?Ke.fromSegments(I.noDocument.path):I.unknownDocument?Ke.fromSegments(I.unknownDocument.path):lt()).path.toArray();var I;const S={prefixPath:y.slice(0,y.length-2),collectionGroup:y[y.length-2],documentId:y[y.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(f.put(S))}).next(()=>te.waitFor(i))}si(e,t){const r=t.store("mutations"),i=FS(this.serializer),a=new _(b.zs,this.serializer.fe);return r.j().next(l=>{const f=new Map;return l.forEach(y=>{var I;let S=null!==(I=f.get(y.userId))&&void 0!==I?I:Kt();ql(this.serializer,y).keys().forEach(R=>S=S.add(R)),f.set(y.userId,S)}),te.forEach(f,(y,I)=>{const S=new rr(I),R=Jg.de(this.serializer,S),L=a.getIndexManager(S),U=sv.de(S,this.serializer,L,a.referenceDelegate);return new BS(i,U,R,L).recalculateAndSaveOverlaysForDocumentKeys(new mE(t,Ki.ct),y).next()})})}}function F(n){n.createObjectStore("targetDocuments",{keyPath:Xb}).createIndex("documentTargetsIndex",eS,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Jb,{unique:!0}),n.createObjectStore("targetGlobal")}const G="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Q{constructor(e,t,r,i,a,l,f,y,I,S,R=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=a,this.window=l,this.document=f,this.ri=I,this.oi=S,this.ui=R,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=L=>Promise.resolve(),!Q.D())throw new be(ae.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new pR(this,i),this.di=t+"main",this.serializer=new ID(y),this.wi=new Go(this.di,this.ui,new N(this.serializer)),this.Bs=new NS(this.referenceDelegate,this.serializer),this.remoteDocumentCache=FS(this.serializer),this.qs=new DD,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===S&&pr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new be(ae.FAILED_PRECONDITION,G);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Ki(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,ve.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,ve.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,ve.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ve(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Fl(e))return ke("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return ye(e).get("owner").next(t=>te.resolve(this.Ri(t)))}Pi(e){return Ve(e).delete(this.clientId)}bi(){var e=this;return(0,ve.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Fr(r,"clientMetadata");return i.j().next(a=>{const l=e.Si(a,18e5),f=a.filter(y=>-1===l.indexOf(y));return te.forEach(f,y=>i.delete(y.clientId)).next(()=>f)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?te.resolve(!0):ye(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new be(ae.FAILED_PRECONDITION,G);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ve(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&ke("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ve.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new mE(t,Ki.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>Ve(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return sv.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new GE(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return Jg.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){ke("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(l=this.ui)?oS:14===l?Sy:13===l?gE:12===l?pE:11===l?by:void lt();var l;let f;return this.wi.runTransaction(e,i,a,y=>(f=new mE(y,this.Os?this.Os.next():Ki.ct),"readwrite-primary"===t?this.Ti(f).next(I=>!!I||this.Ei(f)).next(I=>{if(!I)throw pr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new be(ae.FAILED_PRECONDITION,hI);return r(f)}).next(I=>this.vi(f).next(()=>I)):this.Oi(f).next(()=>r(f)))).then(y=>(f.raiseOnCommittedEvent(),y))}Oi(e){return ye(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new be(ae.FAILED_PRECONDITION,G)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ye(e).put("owner",t)}static D(){return Go.D()}Ai(e){const t=ye(e);return t.get("owner").next(r=>this.Ri(r)?(ke("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):te.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(pr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,pn.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return ke("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return pr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){pr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ye(n){return Fr(n,"owner")}function Ve(n){return Fr(n,"clientMetadata")}function Ze(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class dt{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=Kt(),i=Kt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new dt(e,t.fromCache,r,i)}}class xt{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(a=>a||this.Gi(e,t,i,r)).next(a=>a||this.Qi(e,t))}Ki(e,t){if(SE(t))return te.resolve(null);let r=Bi(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=By(t,null,"F"),r=Bi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const l=Kt(...a);return this.Ui.getDocuments(e,l).next(f=>this.indexManager.getMinOffset(e,r).next(y=>{const I=this.ji(t,f);return this.zi(t,I,l,y.readTime)?this.Ki(e,By(t,null,"F")):this.Wi(e,I,t,y)}))})))}Gi(e,t,r,i){return SE(t)||i.isEqual(Et.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(a=>{const l=this.ji(t,a);return this.zi(t,l,r,i)?this.Qi(e,t):(sf()<=bu.in.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),wi(t)),this.Wi(e,l,t,dI(i,-1)))})}ji(e,t){let r=new jn(qI(e));return t.forEach((i,a)=>{Ca(e,a)&&(r=r.add(a))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Qi(e,t){return sf()<=bu.in.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",wi(t)),this.Ui.getDocumentsMatchingQuery(e,t,Ei.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}class Re{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new Pn(Ht),this.Yi=new $l(a=>Bl(a),Cd),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new BS(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function zt(n,e,t,r){return new Re(n,e,t,r)}function Wn(n,e){return sr.apply(this,arguments)}function sr(){return sr=(0,ve.Z)(function*(n,e){const t=Qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const l=[],f=[];let y=Kt();for(const I of i){l.push(I.batchId);for(const S of I.mutations)y=y.add(S.key)}for(const I of a){f.push(I.batchId);for(const S of I.mutations)y=y.add(S.key)}return t.localDocuments.getDocuments(r,y).next(I=>({er:I,removedBatchIds:l,addedBatchIds:f}))})})}),sr.apply(this,arguments)}function ER(n){const e=Qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function wR(n,e,t){let r=Kt(),i=Kt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let l=ji();return t.forEach((f,y)=>{const I=a.get(f);y.isFoundDocument()!==I.isFoundDocument()&&(i=i.add(f)),y.isNoDocument()&&y.version.isEqual(Et.min())?(e.removeEntry(f,y.readTime),l=l.insert(f,y)):!I.isValidDocument()||y.version.compareTo(I.version)>0||0===y.version.compareTo(I.version)&&I.hasPendingWrites?(e.addEntry(y),l=l.insert(f,y)):ke("LocalStore","Ignoring outdated watch update for ",f,". Current version:",I.version," Watch version:",y.version)}),{nr:l,sr:i}})}function BO(n,e){const t=Qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function uv(n,e){const t=Qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(a=>a?(i=a,te.resolve(i)):t.Bs.allocateTargetId(r).next(l=>(i=new Ou(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function lv(n,e,t){return jS.apply(this,arguments)}function jS(){return jS=(0,ve.Z)(function*(n,e,t){const r=Qe(n),i=r.Ji.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Fl(l))throw l;ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),jS.apply(this,arguments)}function RD(n,e,t){const r=Qe(n);let i=Et.min(),a=Kt();return r.persistence.runTransaction("Execute query","readonly",l=>function(f,y,I){const S=Qe(f),R=S.Yi.get(I);return void 0!==R?te.resolve(S.Ji.get(R)):S.Bs.getTargetData(y,I)}(r,l,Bi(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(l,f.targetId).next(y=>{a=y})}).next(()=>r.Hi.getDocumentsMatchingQuery(l,e,t?i:Et.min(),t?a:Kt())).next(f=>(CR(r,GI(e),f),{documents:f,ir:a})))}function IR(n,e){const t=Qe(n),r=Qe(t.Bs),i=t.Ji.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.le(a,e).next(l=>l?l.target:null))}function DR(n,e){const t=Qe(n),r=t.Xi.get(e)||Et.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Zi.getAllFromCollectionGroup(i,e,dI(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(CR(t,e,i),i))}function CR(n,e,t){let r=n.Xi.get(e)||Et.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Xi.set(e,r)}function $S(){return $S=(0,ve.Z)(function*(n,e,t,r){const i=Qe(n);let a=Kt(),l=ji();for(const I of t){const S=e.rr(I.metadata.name);I.document&&(a=a.add(S));const R=e.ur(I);R.setReadTime(e.cr(I.metadata.readTime)),l=l.insert(S,R)}const f=i.Zi.newChangeBuffer({trackRemovals:!0}),y=yield uv(i,(I=r,Bi(jl(dn.fromString(`__bundle__/docs/${I}`)))));var I;return i.persistence.runTransaction("Apply bundle documents","readwrite",I=>wR(I,f,l).next(S=>(f.apply(I),S)).next(S=>i.Bs.removeMatchingKeysForTargetId(I,y.targetId).next(()=>i.Bs.addMatchingKeys(I,a,y.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(I,S.nr,S.sr)).next(()=>S.nr)))}),$S.apply(this,arguments)}function $O(n,e){return HS.apply(this,arguments)}function HS(){return HS=(0,ve.Z)(function*(n,e,t=Kt()){const r=yield uv(n,Bi(Jy(e.bundledQuery))),i=Qe(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=Lr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.qs.saveNamedQuery(a,e);const f=r.withResumeToken(Sr.EMPTY_BYTE_STRING,l);return i.Ji=i.Ji.insert(f.targetId,f),i.Bs.updateTargetData(a,f).next(()=>i.Bs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Bs.addMatchingKeys(a,t,r.targetId)).next(()=>i.qs.saveNamedQuery(a,e))})}),HS.apply(this,arguments)}function bR(n,e){return`firestore_clients_${n}_${e}`}function SR(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function zS(n,e){return`firestore_targets_${n}_${e}`}class xD{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static ar(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new be(i.error.code,i.error.message))),l?new xD(e,t,i.state,a):(pr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class YE{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new be(r.error.code,r.error.message))),a?new YE(e,r.state,i):(pr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ND{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=$y();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=fE(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new ND(e,a):(pr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class GS{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new GS(t.clientId,t.onlineState):(pr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class qS{constructor(){this.activeTargetIds=$y()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class WS{constructor(e,t,r,i,a){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Pn(Ht),this.started=!1,this.yr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.pr=bR(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new qS),this.Tr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ve.Z)(function*(){const t=yield e.syncEngine.$i();for(const i of t){if(i===e.wr)continue;const a=e.getItem(bR(e.persistenceKey,i));if(a){const l=ND.ar(i,a);l&&(e.gr=e.gr.insert(l.clientId,l))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const i=e.br(r);i&&e.Vr(i)}for(const i of e.yr)e.mr(i);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(zS(this.persistenceKey,e));if(r){const i=YE.ar(e,r);i&&(t=i.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(zS(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ke("SharedClientState","READ",e,t),t}setItem(e,t){ke("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ke("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ke("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void pr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,ve.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.Fr(i,null)}{const i=t.Br(r.key,r.newValue);if(i)return t.Fr(i.clientId,i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.Lr(r.key,r.newValue);if(i)return t.qr(i)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const i=t.Ur(r.key,r.newValue);if(i)return t.Kr(i)}}else if(r.key===t.vr){if(null!==r.newValue){const i=t.br(r.newValue);if(i)return t.Vr(i)}}else if(r.key===t.Ir){const i=function(a){let l=Ki.ct;if(null!=a)try{const f=JSON.parse(a);_t("number"==typeof f),l=f}catch(f){pr("SharedClientState","Failed to read sequence number from WebStorage",f)}return l}(r.newValue);i!==Ki.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Gr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Qr(a)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const i=new xD(this.currentUser,e,t,r),a=SR(this.persistenceKey,this.currentUser,e);this.setItem(a,i.hr())}Cr(e){const t=SR(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const i=zS(this.persistenceKey,e),a=new YE(e,t,r);this.setItem(i,a.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return ND.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return xD.ar(new rr(void 0!==r[2]?r[2]:null),i,t)}Ur(e,t){const r=this.Ar.exec(e),i=Number(r[1]);return YE.ar(i,t)}br(e){return GS.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,ve.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);ke("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),a=this.Sr(r),l=[],f=[];return a.forEach(y=>{i.has(y)||l.push(y)}),i.forEach(y=>{a.has(y)||f.push(y)}),this.syncEngine.Wr(l,f).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=$y();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class TR{constructor(){this.Hr=new qS,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new qS,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class HO{Yr(e){}shutdown(){}}class AR{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let PD=null;function KS(){return null===PD?PD=268435456+Math.round(2147483648*Math.random()):PD++,"0x"+PD.toString(16)}const zO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class GO{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const gs="WebChannelConnection";class qO extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,a){const l=KS(),f=this.To(e,t);ke("RestConnection",`Sending RPC '${e}' ${l}:`,f,r);const y={};return this.Eo(y,i,a),this.Ao(e,f,y,r).then(I=>(ke("RestConnection",`Received RPC '${e}' ${l}: `,I),I),I=>{throw Os("RestConnection",`RPC '${e}' ${l} failed with error: `,I,"url: ",f,"request:",r),I})}vo(e,t,r,i,a,l){return this.Io(e,t,r,i,a)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+rf,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}To(e,t){return`${this.mo}/v1/${t}:${zO[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const a=KS();return new Promise((l,f)=>{const y=new Rt;y.setWithCredentials(!0),y.listenOnce(rE.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case nI.NO_ERROR:const S=y.getResponseJson();ke(gs,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(S)),l(S);break;case nI.TIMEOUT:ke(gs,`RPC '${e}' ${a} timed out`),f(new be(ae.DEADLINE_EXCEEDED,"Request time out"));break;case nI.HTTP_ERROR:const R=y.getStatus();if(ke(gs,`RPC '${e}' ${a} failed with status:`,R,"response text:",y.getResponseText()),R>0){let L=y.getResponseJson();Array.isArray(L)&&(L=L[0]);const U=L?.error;if(U&&U.status&&U.message){const W=function(oe){const ce=oe.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(ce)>=0?ce:ae.UNKNOWN}(U.status);f(new be(W,U.message))}else f(new be(ae.UNKNOWN,"Server responded with status "+y.getStatus()))}else f(new be(ae.UNAVAILABLE,"Connection failed."));break;default:lt()}}finally{ke(gs,`RPC '${e}' ${a} completed.`)}});const I=JSON.stringify(i);ke(gs,`RPC '${e}' ${a} sending request:`,i),y.send(t,"POST",I,r,15)})}Ro(e,t,r){const i=KS(),a=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=Bb(),f=tf(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},I=this.longPollingOptions.timeoutSeconds;void 0!==I&&(y.longPollingTimeout=Math.round(1e3*I)),this.useFetchStreams&&(y.xmlHttpFactory=new rI({})),this.Eo(y.initMessageHeaders,t,r),y.encodeInitMessageHeaders=!0;const S=a.join("");ke(gs,`Creating RPC '${e}' stream ${i}: ${S}`,y);const R=l.createWebChannel(S,y);let L=!1,U=!1;const W=new GO({ro:ce=>{U?ke(gs,`Not sending because RPC '${e}' stream ${i} is closed:`,ce):(L||(ke(gs,`Opening RPC '${e}' stream ${i} transport.`),R.open(),L=!0),ke(gs,`RPC '${e}' stream ${i} sending:`,ce),R.send(ce))},oo:()=>R.close()}),oe=(ce,Le,it)=>{ce.listen(Le,ot=>{try{it(ot)}catch(mt){setTimeout(()=>{throw mt},0)}})};return oe(R,sE.EventType.OPEN,()=>{U||ke(gs,`RPC '${e}' stream ${i} transport opened.`)}),oe(R,sE.EventType.CLOSE,()=>{U||(U=!0,ke(gs,`RPC '${e}' stream ${i} transport closed`),W.wo())}),oe(R,sE.EventType.ERROR,ce=>{U||(U=!0,Os(gs,`RPC '${e}' stream ${i} transport errored:`,ce),W.wo(new be(ae.UNAVAILABLE,"The operation could not be completed")))}),oe(R,sE.EventType.MESSAGE,ce=>{var Le;if(!U){const it=ce.data[0];_t(!!it);const mt=it.error||(null===(Le=it[0])||void 0===Le?void 0:Le.error);if(mt){ke(gs,`RPC '${e}' stream ${i} received error:`,mt);const Zt=mt.status;let Yt=function(Qi){const Na=Yr[Qi];if(void 0!==Na)return Hg(Na)}(Zt),Dn=mt.message;void 0===Yt&&(Yt=ae.INTERNAL,Dn="Unknown error status: "+Zt+" with message "+mt.message),U=!0,W.wo(new be(Yt,Dn)),R.close()}else ke(gs,`RPC '${e}' stream ${i} received:`,it),W._o(it)}}),oe(f,nR.STAT_EVENT,ce=>{ce.stat===iE.PROXY?ke(gs,`RPC '${e}' stream ${i} detected buffering proxy`):ce.stat===iE.NOPROXY&&ke(gs,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{W.fo()},0),W}}function MR(){return typeof window<"u"?window:null}function OD(){return typeof document<"u"?document:null}function QE(n){return new DS(n,!0)}class ZS{constructor(e,t,r=1e3,i=1.5,a=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=a,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&ke("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class RR{constructor(e,t,r,i,a,l,f,y){this.ii=e,this.$o=r,this.Oo=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=f,this.listener=y,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new ZS(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,ve.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,ve.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,ve.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(pr(t.toString()),pr("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===ae.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new be(ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,ve.Z)(function*(){e.state=0,e.start()}))}tu(e){return ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class WO extends RR{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.serializer=a}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function yD(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(y=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===y?1:"REMOVE"===y?2:"CURRENT"===y?3:"RESET"===y?4:lt(),i=e.targetChange.targetIds||[],a=function(y,I){return y.useProto3Json?(_t(void 0===I||"string"==typeof I),Sr.fromBase64String(I||"")):(_t(void 0===I||I instanceof Uint8Array),Sr.fromUint8Array(I||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,f=l&&function(y){const I=void 0===y.code?ae.UNKNOWN:Hg(y.code);return new be(I,y.message||"")}(l);t=new cD(r,i,a,f||null)}else if("documentChange"in e){const r=e.documentChange,i=Ta(n,r.document.name),a=Lr(r.document.updateTime),l=r.document.createTime?Lr(r.document.createTime):Et.min(),f=new ui({mapValue:{fields:r.document.fields}}),y=qn.newFoundDocument(i,a,l,f);t=new Wy(r.targetIds||[],r.removedTargetIds||[],y.key,y)}else if("documentDelete"in e){const r=e.documentDelete,i=Ta(n,r.document),a=r.readTime?Lr(r.readTime):Et.min(),l=qn.newNoDocument(i,a);t=new Wy([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=Ta(n,r.document);t=new Wy([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return lt();{const r=e.filter,{count:i=0,unchangedNames:a}=r,l=new aR(i,a);t=new lD(r.targetId,l)}}var y;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return Et.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Et.min():a.readTime?Lr(a.readTime):Et.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=Zg(this.serializer),t.addTarget=function(i,a){let l;const f=a.target;if(l=yf(f)?{documents:kE(i,f)}:{query:FE(i,f)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=NE(i,a.resumeToken);const y=dD(i,a.expectedCount);null!==y&&(l.expectedCount=y)}else if(a.snapshotVersion.compareTo(Et.min())>0){l.readTime=Cf(i,a.snapshotVersion.toTimestamp());const y=dD(i,a.expectedCount);null!==y&&(l.expectedCount=y)}return l}(this.serializer,e);const r=function CS(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return lt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=Zg(this.serializer),t.removeTarget=e,this.Wo(t)}}class KO extends RR{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.serializer=a,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(_t(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function vD(n,e){return n&&n.length>0?(_t(void 0!==e),n.map(t=>function(r,i){let a=Lr(r.updateTime?r.updateTime:i);return a.isEqual(Et.min())&&(a=Lr(i)),new eD(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Lr(e.commitTime);return this.listener.cu(r,t)}return _t(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Zg(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>bf(this.serializer,r))};this.Wo(t)}}class ZO extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new be(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Io(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new be(ae.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.vo(e,t,r,a,l,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new be(ae.UNKNOWN,a.toString())})}terminate(){this.lu=!0}}class QO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(pr(t),this.mu=!1):ke("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class JO{constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=a,this.Pu.Yr(f=>{r.enqueueAndForget((0,ve.Z)(function*(){var y;Af(l)&&(ke("RemoteStore","Restarting streams for network reachability change."),yield(y=(0,ve.Z)(function*(I){const S=Qe(I);S.vu.add(4),yield cv(S),S.bu.set("Unknown"),S.vu.delete(4),yield JE(S)}),function(I){return y.apply(this,arguments)})(l))}))}),this.bu=new QO(r,i)}}function JE(n){return QS.apply(this,arguments)}function QS(){return QS=(0,ve.Z)(function*(n){if(Af(n))for(const e of n.Ru)yield e(!0)}),QS.apply(this,arguments)}function cv(n){return JS.apply(this,arguments)}function JS(){return JS=(0,ve.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),JS.apply(this,arguments)}function kD(n,e){const t=Qe(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),tT(t)?eT(t):hv(t).Ko()&&XS(t,e))}function XE(n,e){const t=Qe(n),r=hv(t);t.Au.delete(e),r.Ko()&&xR(t,e),0===t.Au.size&&(r.Ko()?r.jo():Af(t)&&t.bu.set("Unknown"))}function XS(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Et.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}hv(n).su(e)}function xR(n,e){n.Vu.qt(e),hv(n).iu(e)}function eT(n){n.Vu=new vS({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),hv(n).start(),n.bu.gu()}function tT(n){return Af(n)&&!hv(n).Uo()&&n.Au.size>0}function Af(n){return 0===Qe(n).vu.size}function NR(n){n.Vu=void 0}function XO(n){return nT.apply(this,arguments)}function nT(){return nT=(0,ve.Z)(function*(n){n.Au.forEach((e,t)=>{XS(n,e)})}),nT.apply(this,arguments)}function ek(n,e){return rT.apply(this,arguments)}function rT(){return rT=(0,ve.Z)(function*(n,e){NR(n),tT(n)?(n.bu.Iu(e),eT(n)):n.bu.set("Unknown")}),rT.apply(this,arguments)}function tk(n,e,t){return iT.apply(this,arguments)}function iT(){return iT=(0,ve.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof cD&&2===e.state&&e.cause)try{yield(r=(0,ve.Z)(function*(i,a){const l=a.cause;for(const f of a.targetIds)i.Au.has(f)&&(yield i.remoteSyncer.rejectListen(f,l),i.Au.delete(f),i.Vu.removeTarget(f))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield FD(n,r)}else if(e instanceof Wy?n.Vu.Ht(e):e instanceof lD?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(Et.min()))try{const r=yield ER(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.Vu.ce(a);return l.targetChanges.forEach((f,y)=>{if(f.resumeToken.approximateByteSize()>0){const I=i.Au.get(y);I&&i.Au.set(y,I.withResumeToken(f.resumeToken,a))}}),l.targetMismatches.forEach((f,y)=>{const I=i.Au.get(f);if(!I)return;i.Au.set(f,I.withResumeToken(Sr.EMPTY_BYTE_STRING,I.snapshotVersion)),xR(i,f);const S=new Ou(I.target,f,y,I.sequenceNumber);XS(i,S)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){ke("RemoteStore","Failed to raise snapshot:",r),yield FD(n,r)}var r}),iT.apply(this,arguments)}function FD(n,e,t){return sT.apply(this,arguments)}function sT(){return sT=(0,ve.Z)(function*(n,e,t){if(!Fl(e))throw e;n.vu.add(1),yield cv(n),n.bu.set("Offline"),t||(t=()=>ER(n.localStore)),n.asyncQueue.enqueueRetryable((0,ve.Z)(function*(){ke("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield JE(n)}))}),sT.apply(this,arguments)}function PR(n,e){return e().catch(t=>FD(n,t,e))}function dv(n){return oT.apply(this,arguments)}function oT(){return oT=(0,ve.Z)(function*(n){const e=Qe(n),t=Mf(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;nk(e);)try{const i=yield BO(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,rk(e,i)}catch(i){yield FD(e,i)}OR(e)&&kR(e)}),oT.apply(this,arguments)}function nk(n){return Af(n)&&n.Eu.length<10}function rk(n,e){n.Eu.push(e);const t=Mf(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function OR(n){return Af(n)&&!Mf(n).Uo()&&n.Eu.length>0}function kR(n){Mf(n).start()}function ik(n){return aT.apply(this,arguments)}function aT(){return aT=(0,ve.Z)(function*(n){Mf(n).hu()}),aT.apply(this,arguments)}function sk(n){return uT.apply(this,arguments)}function uT(){return uT=(0,ve.Z)(function*(n){const e=Mf(n);for(const t of n.Eu)e.uu(t.mutations)}),uT.apply(this,arguments)}function ok(n,e,t){return lT.apply(this,arguments)}function lT(){return lT=(0,ve.Z)(function*(n,e,t){const r=n.Eu.shift(),i=sD.from(r,e,t);yield PR(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield dv(n)}),lT.apply(this,arguments)}function ak(n,e){return cT.apply(this,arguments)}function cT(){return cT=(0,ve.Z)(function*(n,e){var t;e&&Mf(n).ou&&(yield(t=(0,ve.Z)(function*(r,i){if(mS(a=i.code)&&a!==ae.ABORTED){const l=r.Eu.shift();Mf(r).Qo(),yield PR(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield dv(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),OR(n)&&kR(n)}),cT.apply(this,arguments)}function FR(n,e){return dT.apply(this,arguments)}function dT(){return dT=(0,ve.Z)(function*(n,e){const t=Qe(n);t.asyncQueue.verifyOperationInProgress(),ke("RemoteStore","RemoteStore received new credentials");const r=Af(t);t.vu.add(3),yield cv(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield JE(t)}),dT.apply(this,arguments)}function hT(n,e){return fT.apply(this,arguments)}function fT(){return fT=(0,ve.Z)(function*(n,e){const t=Qe(n);e?(t.vu.delete(2),yield JE(t)):e||(t.vu.add(2),yield cv(t),t.bu.set("Unknown"))}),fT.apply(this,arguments)}function hv(n){return n.Su||(n.Su=function(e,t,r){const i=Qe(e);return i.fu(),new WO(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:XO.bind(null,n),ao:ek.bind(null,n),nu:tk.bind(null,n)}),n.Ru.push(function(){var e=(0,ve.Z)(function*(t){t?(n.Su.Qo(),tT(n)?eT(n):n.bu.set("Unknown")):(yield n.Su.stop(),NR(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function Mf(n){return n.Du||(n.Du=function(e,t,r){const i=Qe(e);return i.fu(),new KO(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:ik.bind(null,n),ao:ak.bind(null,n),au:sk.bind(null,n),cu:ok.bind(null,n)}),n.Ru.push(function(){var e=(0,ve.Z)(function*(t){t?(n.Du.Qo(),yield dv(n)):(yield n.Du.stop(),n.Eu.length>0&&(ke("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class pT{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Zr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,f=new pT(e,t,l,i,a);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new be(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fv(n,e){if(pr("AsyncQueue",`${e}: ${n}`),Fl(n))return new be(ae.UNAVAILABLE,`${e}: ${n}`);throw n}class pv{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ke.comparator(t.key,r.key):(t,r)=>Ke.comparator(t.key,r.key),this.keyedMap=Og(),this.sortedSet=new Pn(this.comparator)}static emptySet(e){return new pv(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof pv)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new pv;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class LR{constructor(){this.Cu=new Pn(Ke.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):lt():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class gv{constructor(e,t,r,i,a,l,f,y,I){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=f,this.excludesMetadataChanges=y,this.hasCachedResults=I}static fromInitialDocuments(e,t,r,i,a){const l=[];return t.forEach(f=>{l.push({type:0,doc:f})}),new gv(e,t,pv.emptySet(t),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class uk{constructor(){this.Nu=void 0,this.listeners=[]}}class lk{constructor(){this.queries=new $l(e=>zI(e),vf),this.onlineState="Unknown",this.ku=new Set}}function gT(n,e){return mT.apply(this,arguments)}function mT(){return mT=(0,ve.Z)(function*(n,e){const t=Qe(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new uk),i)try{a.Nu=yield t.onListen(r)}catch(l){const f=fv(l,`Initialization of query '${wi(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,a),a.listeners.push(e),e.Mu(t.onlineState),a.Nu&&e.$u(a.Nu)&&_T(t)}),mT.apply(this,arguments)}function yT(n,e){return vT.apply(this,arguments)}function vT(){return vT=(0,ve.Z)(function*(n,e){const t=Qe(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),vT.apply(this,arguments)}function ck(n,e){const t=Qe(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const f of l.listeners)f.$u(i)&&(r=!0);l.Nu=i}}r&&_T(t)}function dk(n,e,t){const r=Qe(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function _T(n){n.ku.forEach(e=>{e.next()})}class ET{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new gv(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=gv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class hk{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class VR{constructor(e){this.serializer=e}rr(e){return Ta(this.serializer,e)}ur(e){return e.metadata.exists?mD(this.serializer,e.document,!1):qn.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Lr(e)}}class fk{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=UR(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=dn.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new VR(this.serializer);for(const i of e)if(i.metadata.queries){const a=r.rr(i.metadata.name);for(const l of i.metadata.queries){const f=(t.get(l)||Kt()).add(a);t.set(l,f)}}return t}complete(){var e=this;return(0,ve.Z)(function*(){const t=yield function jO(n,e,t,r){return $S.apply(this,arguments)}(e.localStore,new VR(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const i of e.queries)yield $O(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function UR(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class BR{constructor(e){this.key=e}}class jR{constructor(e){this.key=e}}class $R{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Kt(),this.mutatedKeys=Kt(),this.tc=qI(e),this.ec=new pv(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new LR,i=t?t.ec:this.ec;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,f=!1;const y="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,I="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((S,R)=>{const L=i.get(S),U=Ca(this.query,R)?R:null,W=!!L&&this.mutatedKeys.has(L.key),oe=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let ce=!1;L&&U?L.data.isEqual(U.data)?W!==oe&&(r.track({type:3,doc:U}),ce=!0):this.rc(L,U)||(r.track({type:2,doc:U}),ce=!0,(y&&this.tc(U,y)>0||I&&this.tc(U,I)<0)&&(f=!0)):!L&&U?(r.track({type:0,doc:U}),ce=!0):L&&!U&&(r.track({type:1,doc:L}),ce=!0,(y||I)&&(f=!0)),ce&&(U?(l=l.add(U),a=oe?a.add(S):a.delete(S)):(l=l.delete(S),a=a.delete(S)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const S="F"===this.query.limitType?l.last():l.first();l=l.delete(S.key),a=a.delete(S.key),r.track({type:1,doc:S})}return{ec:l,ic:r,zi:f,mutatedKeys:a}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const a=e.ic.xu();a.sort((I,S)=>function(R,L){const U=W=>{switch(W){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lt()}};return U(R)-U(L)}(I.type,S.type)||this.tc(I.doc,S.doc)),this.oc(r);const l=t?this.uc():[],f=0===this.Zu.size&&this.current?1:0,y=f!==this.Xu;return this.Xu=f,0!==a.length||y?{snapshot:new gv(this.query,e.ec,i,a,e.mutatedKeys,0===f,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:l}:{cc:l}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new LR,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Kt(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new jR(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new BR(r))}),t}hc(e){this.Yu=e.ir,this.Zu=Kt();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return gv.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class pk{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class gk{constructor(e){this.key=e,this.fc=!1}}class mk{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.dc={},this.wc=new $l(f=>zI(f),vf),this._c=new Map,this.mc=new Set,this.gc=new Pn(Ke.comparator),this.yc=new Map,this.Ic=new s,this.Tc={},this.Ec=new Map,this.Ac=kd.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function yk(n,e){return wT.apply(this,arguments)}function wT(){return wT=(0,ve.Z)(function*(n,e){const t=zT(n);let r,i;const a=t.wc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.lc();else{const l=yield uv(t.localStore,Bi(e)),f=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield IT(t,e,r,"current"===f,l.resumeToken),t.isPrimaryClient&&kD(t.remoteStore,l)}return i}),wT.apply(this,arguments)}function IT(n,e,t,r,i){return DT.apply(this,arguments)}function DT(){return DT=(0,ve.Z)(function*(n,e,t,r,i){n.Rc=(R,L,U)=>{return(W=(0,ve.Z)(function*(oe,ce,Le,it){let ot=ce.view.sc(Le);ot.zi&&(ot=yield RD(oe.localStore,ce.query,!1).then(({documents:Yt})=>ce.view.sc(Yt,ot)));const mt=it&&it.targetChanges.get(ce.targetId),Zt=ce.view.applyChanges(ot,oe.isPrimaryClient,mt);return PT(oe,ce.targetId,Zt.cc),Zt.snapshot}),function(oe,ce,Le,it){return W.apply(this,arguments)})(n,R,L,U);var W};const a=yield RD(n.localStore,e,!0),l=new $R(e,a.ir),f=l.sc(a.documents),y=qy.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),I=l.applyChanges(f,n.isPrimaryClient,y);PT(n,t,I.cc);const S=new pk(e,t,l);return n.wc.set(e,S),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),I.snapshot}),DT.apply(this,arguments)}function vk(n,e){return CT.apply(this,arguments)}function CT(){return CT=(0,ve.Z)(function*(n,e){const t=Qe(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(a=>!vf(a,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield lv(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),XE(t.remoteStore,r.targetId),mv(t,r.targetId)}).catch(kl))):(mv(t,r.targetId),yield lv(t.localStore,r.targetId,!0))}),CT.apply(this,arguments)}function bT(){return bT=(0,ve.Z)(function*(n,e,t){const r=GT(n);try{const i=yield function(a,l){const f=Qe(a),y=Gn.now(),I=l.reduce((L,U)=>L.add(U.key),Kt());let S,R;return f.persistence.runTransaction("Locally write mutations","readwrite",L=>{let U=ji(),W=Kt();return f.Zi.getEntries(L,I).next(oe=>{U=oe,U.forEach((ce,Le)=>{Le.isValidDocument()||(W=W.add(ce))})}).next(()=>f.localDocuments.getOverlayedDocuments(L,U)).next(oe=>{S=oe;const ce=[];for(const Le of l){const it=gS(Le,S.get(Le.key).overlayedDocument);null!=it&&ce.push(new Sa(Le.key,it,NI(it.value.mapValue),Yn.exists(!0)))}return f.mutationQueue.addMutationBatch(L,y,ce,l)}).next(oe=>{R=oe;const ce=oe.applyToLocalDocumentSet(S,W);return f.documentOverlayCache.saveOverlays(L,oe.batchId,ce)})}).then(()=>({batchId:R.batchId,changes:jy(S)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,f){let y=a.Tc[a.currentUser.toKey()];y||(y=new Pn(Ht)),y=y.insert(l,f),a.Tc[a.currentUser.toKey()]=y}(r,i.batchId,t),yield Vd(r,i.changes),yield dv(r.remoteStore)}catch(i){const a=fv(i,"Failed to persist write");t.reject(a)}}),bT.apply(this,arguments)}function HR(n,e){return ST.apply(this,arguments)}function ST(){return ST=(0,ve.Z)(function*(n,e){const t=Qe(n);try{const r=yield function UO(n,e){const t=Qe(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const f=[];e.targetChanges.forEach((S,R)=>{const L=i.get(R);if(!L)return;f.push(t.Bs.removeMatchingKeys(a,S.removedDocuments,R).next(()=>t.Bs.addMatchingKeys(a,S.addedDocuments,R)));let U=L.withSequenceNumber(a.currentSequenceNumber);var W,oe,ce;null!==e.targetMismatches.get(R)?U=U.withResumeToken(Sr.EMPTY_BYTE_STRING,Et.min()).withLastLimboFreeSnapshotVersion(Et.min()):S.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(S.resumeToken,r)),i=i.insert(R,U),oe=U,ce=S,(0===(W=L).resumeToken.approximateByteSize()||oe.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=3e8||ce.addedDocuments.size+ce.modifiedDocuments.size+ce.removedDocuments.size>0)&&f.push(t.Bs.updateTargetData(a,U))});let y=ji(),I=Kt();if(e.documentUpdates.forEach(S=>{e.resolvedLimboDocuments.has(S)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(a,S))}),f.push(wR(a,l,e.documentUpdates).next(S=>{y=S.nr,I=S.sr})),!r.isEqual(Et.min())){const S=t.Bs.getLastRemoteSnapshotVersion(a).next(R=>t.Bs.setTargetsMetadata(a,a.currentSequenceNumber,r));f.push(S)}return te.waitFor(f).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,y,I)).next(()=>y)}).then(a=>(t.Ji=i,a))}(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.yc.get(a);l&&(_t(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.fc=!0:i.modifiedDocuments.size>0?_t(l.fc):i.removedDocuments.size>0&&(_t(l.fc),l.fc=!1))}),yield Vd(t,r,e)}catch(r){yield kl(r)}}),ST.apply(this,arguments)}function zR(n,e,t){const r=Qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((a,l)=>{const f=l.view.Mu(e);f.snapshot&&i.push(f.snapshot)}),function(a,l){const f=Qe(a);f.onlineState=l;let y=!1;f.queries.forEach((I,S)=>{for(const R of S.listeners)R.Mu(l)&&(y=!0)}),y&&_T(f)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Ek(n,e,t){return TT.apply(this,arguments)}function TT(){return TT=(0,ve.Z)(function*(n,e,t){const r=Qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),a=i&&i.key;if(a){let l=new Pn(Ke.comparator);l=l.insert(a,qn.newNoDocument(a,Et.min()));const f=Kt().add(a),y=new Wg(Et.min(),new Map,new Pn(Ht),l,f);yield HR(r,y),r.gc=r.gc.remove(a),r.yc.delete(e),OT(r)}else yield lv(r.localStore,e,!1).then(()=>mv(r,e,t)).catch(kl)}),TT.apply(this,arguments)}function wk(n,e){return AT.apply(this,arguments)}function AT(){return AT=(0,ve.Z)(function*(n,e){const t=Qe(n),r=e.batch.batchId;try{const i=yield function _R(n,e){const t=Qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Zi.newChangeBuffer({trackRemovals:!0});return function(l,f,y,I){const S=y.batch,R=S.keys();let L=te.resolve();return R.forEach(U=>{L=L.next(()=>I.getEntry(f,U)).next(W=>{const oe=y.docVersions.get(U);_t(null!==oe),W.version.compareTo(oe)<0&&(S.applyToRemoteDocument(W,y),W.isValidDocument()&&(W.setReadTime(y.commitVersion),I.addEntry(W)))})}),L.next(()=>l.mutationQueue.removeMutationBatch(f,S))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let f=Kt();for(let y=0;y<l.mutationResults.length;++y)l.mutationResults[y].transformResults.length>0&&(f=f.add(l.batch.mutations[y].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);NT(t,r,null),xT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Vd(t,i)}catch(i){yield kl(i)}}),AT.apply(this,arguments)}function Ik(n,e,t){return MT.apply(this,arguments)}function MT(){return MT=(0,ve.Z)(function*(n,e,t){const r=Qe(n);try{const i=yield function(a,l){const f=Qe(a);return f.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let I;return f.mutationQueue.lookupMutationBatch(y,l).next(S=>(_t(null!==S),I=S.keys(),f.mutationQueue.removeMutationBatch(y,S))).next(()=>f.mutationQueue.performConsistencyCheck(y)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(y,I,l)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,I)).next(()=>f.localDocuments.getDocuments(y,I))})}(r.localStore,e);NT(r,e,t),xT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Vd(r,i)}catch(i){yield kl(i)}}),MT.apply(this,arguments)}function RT(){return RT=(0,ve.Z)(function*(n,e){const t=Qe(n);Af(t.remoteStore)||ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=Qe(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>l.mutationQueue.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ec.get(r)||[];i.push(e),t.Ec.set(r,i)}catch(r){const i=fv(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),RT.apply(this,arguments)}function xT(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function NT(n,e,t){const r=Qe(n);let i=r.Tc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function mv(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||GR(n,r)})}function GR(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(XE(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),OT(n))}function PT(n,e,t){for(const r of t)r instanceof BR?(n.Ic.addReference(r.key,e),Ck(n,r)):r instanceof jR?(ke("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||GR(n,r.key)):lt()}function Ck(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(ke("SyncEngine","New document in limbo: "+t),n.mc.add(r),OT(n))}function OT(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new Ke(dn.fromString(e)),r=n.Ac.next();n.yc.set(r,new gk(t)),n.gc=n.gc.insert(t,r),kD(n.remoteStore,new Ou(Bi(jl(t.path)),r,"TargetPurposeLimboResolution",Ki.ct))}}function Vd(n,e,t){return kT.apply(this,arguments)}function kT(){return kT=(0,ve.Z)(function*(n,e,t){const r=Qe(n),i=[],a=[],l=[];var f;r.wc.isEmpty()||(r.wc.forEach((f,y)=>{l.push(r.Rc(y,e,t).then(I=>{if((I||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(y.targetId,I?.fromCache?"not-current":"current"),I){i.push(I);const S=dt.Li(y.targetId,I);a.push(S)}}))}),yield Promise.all(l),r.dc.nu(i),yield(f=(0,ve.Z)(function*(y,I){const S=Qe(y);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",R=>te.forEach(I,L=>te.forEach(L.Fi,U=>S.persistence.referenceDelegate.addReference(R,L.targetId,U)).next(()=>te.forEach(L.Bi,U=>S.persistence.referenceDelegate.removeReference(R,L.targetId,U)))))}catch(R){if(!Fl(R))throw R;ke("LocalStore","Failed to update sequence numbers: "+R)}for(const R of I){const L=R.targetId;if(!R.fromCache){const U=S.Ji.get(L),oe=U.withLastLimboFreeSnapshotVersion(U.snapshotVersion);S.Ji=S.Ji.insert(L,oe)}}}),function(y,I){return f.apply(this,arguments)})(r.localStore,a))}),kT.apply(this,arguments)}function bk(n,e){return FT.apply(this,arguments)}function FT(){return FT=(0,ve.Z)(function*(n,e){const t=Qe(n);if(!t.currentUser.isEqual(e)){ke("SyncEngine","User change. New user:",e.toKey());const r=yield Wn(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(l=>{l.forEach(f=>{f.reject(new be(ae.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Vd(t,r.er)}var i}),FT.apply(this,arguments)}function Sk(n,e){const t=Qe(n),r=t.yc.get(e);if(r&&r.fc)return Kt().add(r.key);{let i=Kt();const a=t._c.get(e);if(!a)return i;for(const l of a){const f=t.wc.get(l);i=i.unionWith(f.view.nc)}return i}}function Tk(n,e){return LT.apply(this,arguments)}function LT(){return LT=(0,ve.Z)(function*(n,e){const t=Qe(n),r=yield RD(t.localStore,e.query,!0),i=e.view.hc(r);return t.isPrimaryClient&&PT(t,e.targetId,i.cc),i}),LT.apply(this,arguments)}function Ak(n,e){return VT.apply(this,arguments)}function VT(){return VT=(0,ve.Z)(function*(n,e){const t=Qe(n);return DR(t.localStore,e).then(r=>Vd(t,r))}),VT.apply(this,arguments)}function Mk(n,e,t,r){return UT.apply(this,arguments)}function UT(){return UT=(0,ve.Z)(function*(n,e,t,r){const i=Qe(n),a=yield function(l,f){const y=Qe(l),I=Qe(y.mutationQueue);return y.persistence.runTransaction("Lookup mutation documents","readonly",S=>I.Sn(S,f).next(R=>R?y.localDocuments.getDocuments(S,R):te.resolve(null)))}(i.localStore,e);var f;null!==a?("pending"===t?yield dv(i.remoteStore):"acknowledged"===t||"rejected"===t?(NT(i,e,r||null),xT(i,e),f=e,Qe(Qe(i.localStore).mutationQueue).Cn(f)):lt(),yield Vd(i,a)):ke("SyncEngine","Cannot apply mutation batch with id: "+e)}),UT.apply(this,arguments)}function BT(){return BT=(0,ve.Z)(function*(n,e){const t=Qe(n);if(zT(t),GT(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield qR(t,r.toArray());t.vc=!0,yield hT(t.remoteStore,!0);for(const a of i)kD(t.remoteStore,a)}else if(!1===e&&!1!==t.vc){const r=[];let i=Promise.resolve();t._c.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(mv(t,l),lv(t.localStore,l,!0))),XE(t.remoteStore,l)}),yield i,yield qR(t,r),function(a){const l=Qe(a);l.yc.forEach((f,y)=>{XE(l.remoteStore,y)}),l.Ic.Ts(),l.yc=new Map,l.gc=new Pn(Ke.comparator)}(t),t.vc=!1,yield hT(t.remoteStore,!1)}}),BT.apply(this,arguments)}function qR(n,e,t){return jT.apply(this,arguments)}function jT(){return jT=(0,ve.Z)(function*(n,e,t){const r=Qe(n),i=[],a=[];for(const l of e){let f;const y=r._c.get(l);if(y&&0!==y.length){f=yield uv(r.localStore,Bi(y[0]));for(const I of y){const S=r.wc.get(I),R=yield Tk(r,S);R.snapshot&&a.push(R.snapshot)}}else{const I=yield IR(r.localStore,l);f=yield uv(r.localStore,I),yield IT(r,WR(I),l,!1,f.resumeToken)}i.push(f)}return r.dc.nu(a),i}),jT.apply(this,arguments)}function WR(n){return bE(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function xk(n){const e=Qe(n);return Qe(Qe(e.localStore).persistence).$i()}function Nk(n,e,t,r){return $T.apply(this,arguments)}function $T(){return $T=(0,ve.Z)(function*(n,e,t,r){const i=Qe(n);if(i.vc)return void ke("SyncEngine","Ignoring unexpected query state notification.");const a=i._c.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=yield DR(i.localStore,GI(a[0])),f=Wg.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Sr.EMPTY_BYTE_STRING);yield Vd(i,l,f);break}case"rejected":yield lv(i.localStore,e,!0),mv(i,e,r);break;default:lt()}}),$T.apply(this,arguments)}function Pk(n,e,t){return HT.apply(this,arguments)}function HT(){return HT=(0,ve.Z)(function*(n,e,t){const r=zT(n);if(r.vc){for(const i of e){if(r._c.has(i)){ke("SyncEngine","Adding an already active target "+i);continue}const a=yield IR(r.localStore,i),l=yield uv(r.localStore,a);yield IT(r,WR(a),l.targetId,!1,l.resumeToken),kD(r.remoteStore,l)}for(const i of t)r._c.has(i)&&(yield lv(r.localStore,i,!1).then(()=>{XE(r.remoteStore,i),mv(r,i)}).catch(kl))}}),HT.apply(this,arguments)}function zT(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=HR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Sk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ek.bind(null,e),e.dc.nu=ck.bind(null,e.eventManager),e.dc.Pc=dk.bind(null,e.eventManager),e}function GT(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=wk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ik.bind(null,e),e}class ew{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ve.Z)(function*(){t.serializer=QE(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return zt(this.persistence,new xt,e.initialUser,this.serializer)}createPersistence(e){return new _(b.zs,this.serializer)}createSharedClientState(e){return new TR}terminate(){var e=this;return(0,ve.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class qT extends ew{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield GT(r.Vc.syncEngine),yield dv(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return zt(this.persistence,new xt,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new AD(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new qb(t,this.persistence);return new mI(e.asyncQueue,r)}createPersistence(e){const t=Ze(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ii.withCacheSize(this.cacheSizeBytes):Ii.DEFAULT;return new Q(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,MR(),OD(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new TR}}class KR extends qT{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e);const i=r.Vc.syncEngine;r.sharedClientState instanceof WS&&(r.sharedClientState.syncEngine={jr:Mk.bind(null,i),zr:Nk.bind(null,i),Wr:Pk.bind(null,i),$i:xk.bind(null,i),Qr:Ak.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var a=(0,ve.Z)(function*(l){yield function Rk(n,e){return BT.apply(this,arguments)}(r.Vc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}createSharedClientState(e){const t=MR();if(!WS.D(t))throw new be(ae.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Ze(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new WS(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class yv{initialize(e,t){var r=this;return(0,ve.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>zR(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=bk.bind(null,r.syncEngine),yield hT(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new lk}createDatastore(e){const t=QE(e.databaseInfo.databaseId),r=new qO(e.databaseInfo);return new ZO(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=f=>zR(this.syncEngine,f,0),l=AR.D()?new AR:new HO,new JO(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,f,y,I){const S=new mk(r,i,a,l,f,y);return I&&(S.vc=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ve.Z)(function*(t){const r=Qe(t);ke("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield cv(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function ZR(n,e=10240){let t=0;return{read:()=>(0,ve.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ve.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class LD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):pr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Fk{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Zr,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,ve.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,ve.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,ve.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),i=Number(r);isNaN(i)&&e.Mc(`length string (${r}) is not valid number`);const a=yield e.$c(i);return new hk(JSON.parse(a),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,ve.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,ve.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,ve.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Lk{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ve.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new be(ae.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ve.Z)(function*(a,l){const f=Qe(a),y=Zg(f.serializer)+"/documents",I={documents:l.map(U=>Ad(f.serializer,U))},S=yield f.vo("BatchGetDocuments",y,I,l.length),R=new Map;S.forEach(U=>{const W=function PE(n,e){return"found"in e?function(t,r){_t(!!r.found);const i=Ta(t,r.found.name),a=Lr(r.found.updateTime),l=r.found.createTime?Lr(r.found.createTime):Et.min(),f=new ui({mapValue:{fields:r.found.fields}});return qn.newFoundDocument(i,a,l,f)}(n,e):"missing"in e?function(t,r){_t(!!r.missing),_t(!!r.readTime);const i=Ta(t,r.missing),a=Lr(r.readTime);return qn.newNoDocument(i,a)}(n,e):lt()}(f.serializer,U);R.set(W.key.toString(),W)});const L=[];return l.forEach(U=>{const W=R.get(U.toString());_t(!!W),L.push(W)}),L}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new $g(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ve.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=Ke.fromPath(i);e.mutations.push(new Gy(a,e.precondition(a)))}),yield(r=(0,ve.Z)(function*(i,a){const l=Qe(i),f=Zg(l.serializer)+"/documents",y={writes:a.map(I=>bf(l.serializer,I))};yield l.Io("Commit",f,y)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw lt();t=Et.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new be(ae.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Et.min())?Yn.exists(!1):Yn.updateTime(t):Yn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Et.min()))throw new be(ae.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Yn.updateTime(t)}return Yn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Vk{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.Bc=r.maxAttempts,this.qo=new ZS(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,ve.Z)(function*(){const t=new Lk(e.datastore),r=e.qc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Uc(a)}))}).catch(i=>{e.Uc(i)})}))}qc(e){try{const t=this.updateFunction(e);return!Sg(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!mS(t)}return!1}}class Uk{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=rr.UNAUTHENTICATED,this.clientId=uf.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,ve.Z)(function*(f){ke("FirestoreClient","Received user=",f.uid),yield a.authCredentialListener(f),a.user=f});return function(f){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(ke("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,ve.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new be(ae.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Zr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=fv(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function VD(n,e){return WT.apply(this,arguments)}function WT(){return WT=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ke("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ve.Z)(function*(a){r.isEqual(a)||(yield Wn(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),WT.apply(this,arguments)}function KT(n,e){return ZT.apply(this,arguments)}function ZT(){return ZT=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield YT(n);ke("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>FR(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>FR(e.remoteStore,a)),n._onlineComponents=e}),ZT.apply(this,arguments)}function YR(n){return"FirebaseError"===n.name?n.code===ae.FAILED_PRECONDITION||n.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function YT(n){return QT.apply(this,arguments)}function QT(){return QT=(0,ve.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ke("FirestoreClient","Using user provided OfflineComponentProvider");try{yield VD(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!YR(t))throw t;Os("Error using user provided cache. Falling back to memory cache: "+t),yield VD(n,new ew)}}else ke("FirestoreClient","Using default OfflineComponentProvider"),yield VD(n,new ew);return n._offlineComponents}),QT.apply(this,arguments)}function UD(n){return JT.apply(this,arguments)}function JT(){return JT=(0,ve.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ke("FirestoreClient","Using user provided OnlineComponentProvider"),yield KT(n,n._uninitializedComponentsProvider._online)):(ke("FirestoreClient","Using default OnlineComponentProvider"),yield KT(n,new yv))),n._onlineComponents}),JT.apply(this,arguments)}function QR(n){return YT(n).then(e=>e.persistence)}function BD(n){return YT(n).then(e=>e.localStore)}function JR(n){return UD(n).then(e=>e.remoteStore)}function XT(n){return UD(n).then(e=>e.syncEngine)}function vv(n){return eA.apply(this,arguments)}function eA(){return eA=(0,ve.Z)(function*(n){const e=yield UD(n),t=e.eventManager;return t.onListen=yk.bind(null,e.syncEngine),t.onUnlisten=vk.bind(null,e.syncEngine),t}),eA.apply(this,arguments)}function ex(n,e,t={}){const r=new Zr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(i,a,l,f,y){const I=new LD({next:R=>{a.enqueueAndForget(()=>yT(i,S));const L=R.docs.has(l);!L&&R.fromCache?y.reject(new be(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&R.fromCache&&f&&"server"===f.source?y.reject(new be(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(R)},error:R=>y.reject(R)}),S=new ET(jl(l.path),I,{includeMetadataChanges:!0,Ku:!0});return gT(i,S)}(yield vv(n),n.asyncQueue,e,t,r)})),r.promise}function tx(n,e,t={}){const r=new Zr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(i,a,l,f,y){const I=new LD({next:R=>{a.enqueueAndForget(()=>yT(i,S)),R.fromCache&&"server"===f.source?y.reject(new be(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(R)},error:R=>y.reject(R)}),S=new ET(l,I,{includeMetadataChanges:!0,Ku:!0});return gT(i,S)}(yield vv(n),n.asyncQueue,e,t,r)})),r.promise}function nx(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const rx=new Map;function tA(n,e,t){if(!t)throw new be(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function ix(n,e,t,r){if(!0===e&&!0===r)throw new be(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function sx(n){if(!Ke.isDocumentKey(n))throw new be(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function ox(n){if(Ke.isDocumentKey(n))throw new be(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function jD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":lt()}function hn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new be(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=jD(n);throw new be(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function ax(n,e){if(e<=0)throw new be(ae.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class ux{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new be(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new be(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ix("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=nx(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new be(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new be(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new be(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class tw{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ux({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new be(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new be(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ux(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new $b;switch(t.type){case"firstParty":return new oI(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new be(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=rx.get(e);t&&(ke("ComponentProvider","Removing Datastore"),rx.delete(e),t.terminate())}(this),Promise.resolve()}}class or{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new or(this.firestore,e,this._key)}}class Zi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Zi(this.firestore,e,this._query)}}class Zl extends Zi{constructor(e,t,r){super(e,t,jl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new or(this.firestore,null,new Ke(e))}withConverter(e){return new Zl(this.firestore,e,this._path)}}function cx(n,e,...t){if(n=(0,pn.m9)(n),tA("collection","path",e),n instanceof tw){const r=dn.fromString(e,...t);return ox(r),new Zl(n,null,r)}{if(!(n instanceof or||n instanceof Zl))throw new be(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(dn.fromString(e,...t));return ox(r),new Zl(n.firestore,null,r)}}function $D(n,e,...t){if(n=(0,pn.m9)(n),1===arguments.length&&(e=uf.A()),tA("doc","path",e),n instanceof tw){const r=dn.fromString(e,...t);return sx(r),new or(n,null,new Ke(r))}{if(!(n instanceof or||n instanceof Zl))throw new be(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(dn.fromString(e,...t));return sx(r),new or(n.firestore,n instanceof Zl?n.converter:null,new Ke(r))}}function dx(n,e){return n=(0,pn.m9)(n),e=(0,pn.m9)(e),(n instanceof or||n instanceof Zl)&&(e instanceof or||e instanceof Zl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function nA(n,e){return n=(0,pn.m9)(n),e=(0,pn.m9)(e),n instanceof Zi&&e instanceof Zi&&n.firestore===e.firestore&&vf(n._query,e._query)&&n.converter===e.converter}class Zk{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new ZS(this,"async_queue_retry"),this.Xc=()=>{const t=OD();t&&ke("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=OD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=OD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Zr;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,ve.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Fl(t))throw t;ke("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,pr("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=pT.createAndSchedule(this,e,t,r,a=>this.na(a));return this.zc.push(i),i}Zc(){this.Wc&&lt()}verifyOperationInProgress(){}sa(){var e=this;return(0,ve.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function rA(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class Yk{constructor(){this._progressObserver={},this._taskCompletionResolver=new Zr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ar extends tw{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Zk,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||hx(this),this._firestoreClient.terminate()}}function Qr(n){return n._firestoreClient||hx(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function hx(n){var e,t,r;const i=n._freezeSettings(),a=(f=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new aS(n._databaseId,f,n._persistenceKey,(I=i).host,I.ssl,I.experimentalForceLongPolling,I.experimentalAutoDetectLongPolling,nx(I.experimentalLongPollingOptions),I.useFetchStreams));var f,I;n._firestoreClient=new Uk(n._authCredentials,n._appCheckCredentials,n._queue,a),null!==(t=i.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function fx(n,e,t){const r=new Zr;return n.asyncQueue.enqueue((0,ve.Z)(function*(){try{yield VD(n,t),yield KT(n,e),r.resolve()}catch(i){const a=i;if(!YR(a))throw a;Os("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a)}})).then(()=>r.promise)}function px(n){if(n._initialized||n._terminated)throw new be(ae.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Yl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yl(Sr.fromBase64String(e))}catch(t){throw new be(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Yl(Sr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ud{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new be(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class im{constructor(e){this._methodName=e}}class HD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new be(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new be(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ht(this._lat,e._lat)||Ht(this._long,e._long)}}const a1=/^__.*__$/;class u1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Sa(e,this.data,this.fieldMask,t,this.fieldTransforms):new Td(e,this.data,t,this.fieldTransforms)}}class gx{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Sa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function mx(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lt()}}class zD{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ua(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new zD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return WD(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(mx(this.ca)&&a1.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class l1{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||QE(e)}ya(e,t,r,i=!1){return new zD({ca:e,methodName:t,ga:r,path:gr.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sm(n){const e=n._freezeSettings(),t=QE(n._databaseId);return new l1(n._databaseId,!!e.ignoreUndefinedProperties,t)}function GD(n,e,t,r,i,a={}){const l=n.ya(a.merge||a.mergeFields?2:0,e,t,i);aA("Data must be an object, but it was:",l,r);const f=_x(r,l);let y,I;if(a.merge)y=new Ui(l.fieldMask),I=l.fieldTransforms;else if(a.mergeFields){const S=[];for(const R of a.mergeFields){const L=iw(e,R,t);if(!l.contains(L))throw new be(ae.INVALID_ARGUMENT,`Field '${L}' is specified in your field mask but missing from your input data.`);wx(S,L)||S.push(L)}y=new Ui(S),I=l.fieldTransforms.filter(R=>y.covers(R.field))}else y=null,I=l.fieldTransforms;return new u1(new ui(f),y,I)}class rw extends im{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof rw}}function yx(n,e,t){return new zD({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class iA extends im{_toFieldTransform(e){return new Ug(e.path,new Ef)}isEqual(e){return e instanceof iA}}class c1 extends im{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=yx(this,e,!0),r=this.pa.map(a=>om(a,t)),i=new Hl(r);return new Ug(e.path,i)}isEqual(e){return this===e}}class d1 extends im{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=yx(this,e,!0),r=this.pa.map(a=>om(a,t)),i=new wf(r);return new Ug(e.path,i)}isEqual(e){return this===e}}class h1 extends im{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new Vg(e.serializer,hS(e.serializer,this.Ia));return new Ug(e.path,t)}isEqual(e){return this===e}}function sA(n,e,t,r){const i=n.ya(1,e,t);aA("Data must be an object, but it was:",i,r);const a=[],l=ui.empty();Mu(r,(y,I)=>{const S=qD(e,y,t);I=(0,pn.m9)(I);const R=i.da(S);if(I instanceof rw)a.push(S);else{const L=om(I,R);null!=L&&(a.push(S),l.set(S,L))}});const f=new Ui(a);return new gx(l,f,i.fieldTransforms)}function oA(n,e,t,r,i,a){const l=n.ya(1,e,t),f=[iw(e,r,t)],y=[i];if(a.length%2!=0)throw new be(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let L=0;L<a.length;L+=2)f.push(iw(e,a[L])),y.push(a[L+1]);const I=[],S=ui.empty();for(let L=f.length-1;L>=0;--L)if(!wx(I,f[L])){const U=f[L];let W=y[L];W=(0,pn.m9)(W);const oe=l.da(U);if(W instanceof rw)I.push(U);else{const ce=om(W,oe);null!=ce&&(I.push(U),S.set(U,ce))}}const R=new Ui(I);return new gx(S,R,l.fieldTransforms)}function vx(n,e,t,r=!1){return om(t,n.ya(r?4:3,e))}function om(n,e){if(Ex(n=(0,pn.m9)(n)))return aA("Unsupported field value:",e,n),_x(n,e);if(n instanceof im)return function(t,r){if(!mx(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let f=om(l,r.wa(a));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,pn.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return hS(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Gn.fromDate(t);return{timestampValue:Cf(r.serializer,i)}}if(t instanceof Gn){const i=new Gn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Cf(r.serializer,i)}}if(t instanceof HD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Yl)return{bytesValue:NE(r.serializer,t._byteString)};if(t instanceof or){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r._a(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:ks(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${jD(t)}`)}(n,e)}function _x(n,e){const t={};return _d(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Mu(n,(r,i)=>{const a=om(i,e.ha(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function Ex(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Gn||n instanceof HD||n instanceof Yl||n instanceof or||n instanceof im)}function aA(n,e,t){if(!Ex(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=jD(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function iw(n,e,t){if((e=(0,pn.m9)(e))instanceof Ud)return e._internalPath;if("string"==typeof e)return qD(n,e);throw WD("Field path arguments must be of type string or ",n,!1,void 0,t)}const f1=new RegExp("[~\\*/\\[\\]]");function qD(n,e,t){if(e.search(f1)>=0)throw WD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ud(...e.split("."))._internalPath}catch{throw WD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function WD(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let y="";return(a||l)&&(y+=" (found",a&&(y+=` in field ${r}`),l&&(y+=` in document ${i}`),y+=")"),new be(ae.INVALID_ARGUMENT,f+n+y)}function wx(n,e){return n.some(t=>t.isEqual(e))}class sw{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new or(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new p1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(KD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class p1 extends sw{data(){return super.data()}}function KD(n,e){return"string"==typeof e?qD(n,e):e instanceof Ud?e._internalPath:e._delegate._internalPath}function Ix(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new be(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class uA{}class ow extends uA{}function Rf(n,e,...t){let r=[];e instanceof uA&&r.push(e),r=r.concat(t),function(i){const a=i.filter(f=>f instanceof _v).length,l=i.filter(f=>f instanceof aw).length;if(a>1||a>0&&l>0)throw new be(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class aw extends ow{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new aw(e,t,r)}_apply(e){const t=this._parse(e);return Sx(e._query,t),new Zi(e.firestore,e.converter,Uy(e._query,t))}_parse(e){const t=sm(e.firestore);return function(i,a,l,f,y,I,S){let R;if(y.isKeyField()){if("array-contains"===I||"array-contains-any"===I)throw new be(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${I}' queries on documentId().`);if("in"===I||"not-in"===I){bx(S,I);const L=[];for(const U of S)L.push(Cx(f,i,U));R={arrayValue:{values:L}}}else R=Cx(f,i,S)}else"in"!==I&&"not-in"!==I&&"array-contains-any"!==I||bx(S,I),R=vx(l,"where",S,"in"===I||"not-in"===I);return rn.create(y,I,R)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class _v extends uA{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new _v(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Tn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let a=r;const l=i.getFlattenedFilters();for(const f of l)Sx(a,f),a=Uy(a,f)}(e._query,t),new Zi(e.firestore,e.converter,Uy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class lA extends ow{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new lA(e,t)}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new be(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new be(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new mf(i,a);return function(f,y){if(null===TE(f)){const I=Pg(f);null!==I&&Tx(0,I,y.field)}}(r,l),l}(e._query,this._field,this._direction);return new Zi(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new Nu(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class ZD extends ow{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new ZD(e,t,r)}_apply(e){return new Zi(e.firestore,e.converter,By(e._query,this._limit,this._limitType))}}class YD extends ow{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new YD(e,t,r)}_apply(e){const t=Dx(e,this.type,this._docOrFields,this._inclusive);return new Zi(e.firestore,e.converter,(i=t,new Nu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class QD extends ow{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new QD(e,t,r)}_apply(e){const t=Dx(e,this.type,this._docOrFields,this._inclusive);return new Zi(e.firestore,e.converter,(i=t,new Nu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function Dx(n,e,t,r){if(t[0]=(0,pn.m9)(t[0]),t[0]instanceof sw)return function(i,a,l,f,y){if(!f)throw new be(ae.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const I=[];for(const S of bd(i))if(S.field.isKeyField())I.push(wd(a,f.key));else{const R=f.data.field(S.field);if(My(R))throw new be(ae.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===R){const L=S.field.canonicalString();throw new be(ae.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${L}' (used as the orderBy) does not exist.`)}I.push(R)}return new Id(I,y)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=sm(n.firestore);return function(a,l,f,y,I,S){const R=a.explicitOrderBy;if(I.length>R.length)throw new be(ae.INVALID_ARGUMENT,`Too many arguments provided to ${y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const L=[];for(let U=0;U<I.length;U++){const W=I[U];if(R[U].field.isKeyField()){if("string"!=typeof W)throw new be(ae.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${y}(), but got a ${typeof W}`);if(!Vy(a)&&-1!==W.indexOf("/"))throw new be(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${y}() must be a plain document ID, but '${W}' contains a slash.`);const oe=a.path.child(dn.fromString(W));if(!Ke.isDocumentKey(oe))throw new be(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${y}() must result in a valid document path, but '${oe}' is not because it contains an odd number of segments.`);const ce=new Ke(oe);L.push(wd(l,ce))}else{const oe=vx(f,y,W);L.push(oe)}}return new Id(L,S)}(n._query,n.firestore._databaseId,i,e,t,r)}}function Cx(n,e,t){if("string"==typeof(t=(0,pn.m9)(t))){if(""===t)throw new be(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Vy(e)&&-1!==t.indexOf("/"))throw new be(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(dn.fromString(t));if(!Ke.isDocumentKey(r))throw new be(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return wd(n,new Ke(r))}if(t instanceof or)return wd(n,t._key);throw new be(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jD(t)}.`)}function bx(n,e){if(!Array.isArray(n)||0===n.length)throw new be(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Sx(n,e){if(e.isInequality()){const r=Pg(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new be(ae.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const a=TE(n);null!==a&&Tx(0,i,a)}const t=function(r,i){for(const a of r)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new be(ae.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Tx(n,e,t){if(!t.isEqual(e))throw new be(ae.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class cA{convertValue(e,t="none"){switch(Ll(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ir(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ia(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw lt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Mu(e,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new HD(ir(e.latitude),ir(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Ry(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ag(e));default:return null}}convertTimestamp(e){const t=Ru(e);return new Gn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=dn.fromString(e);_t(wD(r));const i=new xu(r.get(1),r.get(3)),a=new Ke(r.popFirst(5));return i.isEqual(t)||pr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function JD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class D1 extends cA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new or(this.firestore,null,t)}}class am{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Bd extends sw{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new uw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(KD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class uw extends Bd{data(e={}){return super.data(e)}}class xf{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new am(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new uw(this._firestore,this._userDataWriter,r.key,r,new am(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new be(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new uw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new am(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const f=new uw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new am(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let y=-1,I=-1;return 0!==l.type&&(y=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),I=a.indexOf(l.doc.key)),{type:b1(l.type),doc:f,oldIndex:y,newIndex:I}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function b1(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lt()}}function Mx(n,e){return n instanceof Bd&&e instanceof Bd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof xf&&e instanceof xf&&n._firestore===e._firestore&&nA(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Nf extends cA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new or(this.firestore,null,t)}}function Rx(n,e,t){n=hn(n,or);const r=hn(n.firestore,ar),i=JD(n.converter,e,t);return Ev(r,[GD(sm(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Yn.none())])}function xx(n,e,t,...r){n=hn(n,or);const i=hn(n.firestore,ar),a=sm(i);let l;return l="string"==typeof(e=(0,pn.m9)(e))||e instanceof Ud?oA(a,"updateDoc",n._key,e,t,r):sA(a,"updateDoc",n._key,e),Ev(i,[l.toMutation(n._key,Yn.exists(!0))])}function Nx(n,...e){var t,r,i;n=(0,pn.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||rA(e[l])||(a=e[l],l++);const f={includeMetadataChanges:a.includeMetadataChanges};if(rA(e[l])){const R=e[l];e[l]=null===(t=R.next)||void 0===t?void 0:t.bind(R),e[l+1]=null===(r=R.error)||void 0===r?void 0:r.bind(R),e[l+2]=null===(i=R.complete)||void 0===i?void 0:i.bind(R)}let y,I,S;if(n instanceof or)I=hn(n.firestore,ar),S=jl(n._key.path),y={next:R=>{e[l]&&e[l](dA(I,n,R))},error:e[l+1],complete:e[l+2]};else{const R=hn(n,Zi);I=hn(R.firestore,ar),S=R._query;const L=new Nf(I);y={next:U=>{e[l]&&e[l](new xf(I,L,R,U))},error:e[l+1],complete:e[l+2]},Ix(n._query)}return function(R,L,U,W){const oe=new LD(W),ce=new ET(L,oe,U);return R.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return gT(yield vv(R),ce)})),()=>{oe.Dc(),R.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return yT(yield vv(R),ce)}))}}(Qr(I),S,f,y)}function Ev(n,e){return function(t,r){const i=new Zr;return t.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function _k(n,e,t){return bT.apply(this,arguments)}(yield XT(t),r,i)})),i.promise}(Qr(n),e)}function dA(n,e,t){const r=t.docs.get(e._key),i=new Nf(n);return new Bd(n,i,e._key,r,new am(t.hasPendingWrites,t.fromCache),e.converter)}const H1={maxAttempts:5};class Px{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=sm(e)}set(e,t,r){this._verifyNotCommitted();const i=Pf(e,this._firestore),a=JD(i.converter,t,r),l=GD(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,Yn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Pf(e,this._firestore);let l;return l="string"==typeof(t=(0,pn.m9)(t))||t instanceof Ud?oA(this._dataReader,"WriteBatch.update",a._key,t,r,i):sA(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,Yn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Pf(e,this._firestore);return this._mutations=this._mutations.concat(new $g(t._key,Yn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new be(ae.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Pf(n,e){if((n=(0,pn.m9)(n)).firestore!==e)throw new be(ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class z1 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=sm(e)}get(e){const t=Pf(e,this._firestore),r=new D1(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return lt();const a=i[0];if(a.isFoundDocument())return new sw(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new sw(this._firestore,r,t._key,null,t.converter);throw lt()})}set(e,t,r){const i=Pf(e,this._firestore),a=JD(i.converter,t,r),l=GD(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=Pf(e,this._firestore);let l;return l="string"==typeof(t=(0,pn.m9)(t))||t instanceof Ud?oA(this._dataReader,"Transaction.update",a._key,t,r,i):sA(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=Pf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Pf(e,this._firestore),r=new Nf(this._firestore);return super.get(e).then(i=>new Bd(this._firestore,r,t._key,i._document,new am(!1,!1),t.converter))}}!function(n,e=!0){rf=sd.SDK_VERSION,(0,sd._registerComponent)(new Jm.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),l=new ar(new zb(t.getProvider("auth-internal")),new aI(t.getProvider("app-check-internal")),function(f,y){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new be(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xu(f.options.projectId,y)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,sd.registerVersion)(iI,"3.13.0",n),(0,sd.registerVersion)(iI,"3.13.0","esm2017")}();function hA(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new be("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function kx(){if(typeof Uint8Array>"u")throw new be("unimplemented","Uint8Arrays are not available in this environment.")}function Fx(){if(!function bI(){return typeof atob<"u"}())throw new be("unimplemented","Blobs are unavailable in Firestore in this environment.")}class lw{constructor(e){this._delegate=e}static fromBase64String(e){return Fx(),new lw(Yl.fromBase64String(e))}static fromUint8Array(e){return kx(),new lw(Yl.fromUint8Array(e))}toBase64(){return Fx(),this._delegate.toBase64()}toUint8Array(){return kx(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function fA(n){return function X1(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class eF{enableIndexedDbPersistence(e,t){return function Jk(n,e){px(n=hn(n,ar));const t=Qr(n);if(t._uninitializedComponentsProvider)throw new be(ae.FAILED_PRECONDITION,"SDK cache is already specified.");Os("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new yv;return fx(t,i,new qT(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Xk(n){px(n=hn(n,ar));const e=Qr(n);if(e._uninitializedComponentsProvider)throw new be(ae.FAILED_PRECONDITION,"SDK cache is already specified.");Os("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new yv;return fx(e,r,new KR(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function e1(n){if(n._initialized&&!n._terminated)throw new be(ae.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Zr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{yield(t=(0,ve.Z)(function*(r){if(!Go.D())return Promise.resolve();const i=r+"main";yield Go.delete(i)}),function(r){return t.apply(this,arguments)})(Ze(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Lx{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof xu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Os("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function lx(n,e,t,r={}){var i;const a=(n=hn(n,tw))._getSettings(),l=`${e}:${t}`;if("firestore.googleapis.com"!==a.host&&a.host!==l&&Os("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},a),{host:l,ssl:!1})),r.mockUserToken){let f,y;if("string"==typeof r.mockUserToken)f=r.mockUserToken,y=rr.MOCK_USER;else{f=(0,pn.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const I=r.mockUserToken.sub||r.mockUserToken.user_id;if(!I)throw new be(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new rr(I)}n._authCredentials=new Hb(new af(f,y))}}(this._delegate,e,t,r)}enableNetwork(){return function n1(n){return function Bk(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield QR(n),t=yield JR(n);return e.setNetworkEnabled(!0),function(r){const i=Qe(r);return i.vu.delete(0),JE(i)}(t)}))}(Qr(n=hn(n,ar)))}(this._delegate)}disableNetwork(){return function r1(n){return function jk(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield QR(n),t=yield JR(n);return e.setNetworkEnabled(!1),(r=(0,ve.Z)(function*(i){const a=Qe(i);a.vu.add(0),yield cv(a),a.bu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Qr(n=hn(n,ar)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,ix("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function t1(n){return function(e){const t=new Zr;return e.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function Dk(n,e){return RT.apply(this,arguments)}(yield XT(e),t)})),t.promise}(Qr(n=hn(n,ar)))}(this._delegate)}onSnapshotsInSync(e){return function O1(n,e){return function zk(n,e){const t=new LD(e);return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield vv(n),i=t,Qe(r).ku.add(i),void i.next();var r,i})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield vv(n),i=t,void Qe(r).ku.delete(i);var r,i}))}}(Qr(n=hn(n,ar)),rA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new be("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new wv(this,cx(this._delegate,e))}catch(t){throw Ls(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ma(this,$D(this._delegate,e))}catch(t){throw Ls(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Vs(this,function Kk(n,e){if(n=hn(n,tw),tA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new be(ae.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Zi(n,null,(t=e,new Nu(dn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ls(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function G1(n,e,t){n=hn(n,ar);const r=Object.assign(Object.assign({},H1),t);return function(i){if(i.maxAttempts<1)throw new be(ae.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,l){const f=new Zr;return i.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){const y=yield function XR(n){return UD(n).then(e=>e.datastore)}(i);new Vk(i.asyncQueue,y,l,a,f).run()})),f.promise}(Qr(n),i=>e(new z1(n,i)),r)}(this._delegate,t=>e(new Vx(this,t)))}batch(){return Qr(this._delegate),new Ux(new Px(this._delegate,e=>Ev(this._delegate,e)))}loadBundle(e){return function i1(n,e){const t=Qr(n=hn(n,ar)),r=new Yk;return function Gk(n,e,t,r){const i=function(a,l){let f;return f="string"==typeof a?Gg().encode(a):a,y=function(y,I){if(y instanceof Uint8Array)return ZR(y,I);if(y instanceof ArrayBuffer)return ZR(new Uint8Array(y),I);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new Fk(y,l);var y}(t,QE(e));n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){!function Ok(n,e,t){const r=Qe(n);var i;(i=(0,ve.Z)(function*(a,l,f){try{const y=yield l.getMetadata();if(yield function(L,U){const W=Qe(L),oe=Lr(U.createTime);return W.persistence.runTransaction("hasNewerBundle","readonly",ce=>W.qs.getBundleMetadata(ce,U.id)).then(ce=>!!ce&&ce.createTime.compareTo(oe)>=0)}(a.localStore,y))return yield l.close(),f._completeWith({taskState:"Success",documentsLoaded:(L=y).totalDocuments,bytesLoaded:L.totalBytes,totalDocuments:L.totalDocuments,totalBytes:L.totalBytes}),Promise.resolve(new Set);f._updateProgress(UR(y));const I=new fk(y,a.localStore,l.serializer);let S=yield l.bc();for(;S;){const L=yield I.zu(S);L&&f._updateProgress(L),S=yield l.bc()}const R=yield I.complete();return yield Vd(a,R.Ju,void 0),yield function(L,U){const W=Qe(L);return W.persistence.runTransaction("Save bundle","readwrite",oe=>W.qs.saveBundleMetadata(oe,U))}(a.localStore,y),f._completeWith(R.progress),Promise.resolve(R.Hu)}catch(y){return Os("SyncEngine",`Loading bundle failed with ${y}`),f._failWith(y),Promise.resolve(new Set)}var L}),function(a,l,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield XT(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function s1(n,e){return function qk(n,e){return n.asyncQueue.enqueue((0,ve.Z)(function*(){return function(t,r){const i=Qe(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.qs.getNamedQuery(a,r))}(yield BD(n),e)}))}(Qr(n=hn(n,ar)),e).then(t=>t?new Zi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Vs(this,t):null)}}class XD extends cA{constructor(e){super(),this.firestore=e}convertBytes(e){return new lw(new Yl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ma.forKey(t,this.firestore,null)}}class Vx{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new XD(e)}get(e){const t=lm(e);return this._delegate.get(t).then(r=>new cw(this._firestore,new Bd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=lm(e);return r?(hA("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=lm(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=lm(e);return this._delegate.delete(t),this}}class Ux{constructor(e){this._delegate=e}set(e,t,r){const i=lm(e);return r?(hA("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=lm(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=lm(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class um{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new uw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new dw(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=um.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new um(e,new XD(e),t),i.set(t,a)),a}}um.INSTANCES=new WeakMap;class Ma{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new XD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new be("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ma(t,new or(t._delegate,r,new Ke(e)))}static forKey(e,t,r){return new Ma(t,new or(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new wv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new wv(this.firestore,cx(this._delegate,e))}catch(t){throw Ls(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,pn.m9)(e))instanceof or&&dx(this._delegate,e)}set(e,t){t=hA("DocumentReference.set",t);try{return t?Rx(this._delegate,e,t):Rx(this._delegate,e)}catch(r){throw Ls(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?xx(this._delegate,e):xx(this._delegate,e,t,...r)}catch(i){throw Ls(i,"updateDoc()","DocumentReference.update()")}}delete(){return function N1(n){return Ev(hn(n.firestore,ar),[new $g(n._key,Yn.none())])}(this._delegate)}onSnapshot(...e){const t=Bx(e),r=jx(e,i=>new cw(this.firestore,new Bd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return Nx(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function T1(n){n=hn(n,or);const e=hn(n.firestore,ar),t=Qr(e),r=new Nf(e);return function $k(n,e){const t=new Zr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(i,a,l){try{const f=yield function(y,I){const S=Qe(y);return S.persistence.runTransaction("read document","readonly",R=>S.localDocuments.getDocument(R,I))}(i,a);f.isFoundDocument()?l.resolve(f):f.isNoDocument()?l.resolve(null):l.reject(new be(ae.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const y=fv(f,`Failed to get document '${a} from cache`);l.reject(y)}}),function(i,a,l){return r.apply(this,arguments)})(yield BD(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Bd(e,r,n._key,i,new am(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function A1(n){n=hn(n,or);const e=hn(n.firestore,ar);return ex(Qr(e),n._key,{source:"server"}).then(t=>dA(e,n,t))}(this._delegate):function S1(n){n=hn(n,or);const e=hn(n.firestore,ar);return ex(Qr(e),n._key).then(t=>dA(e,n,t))}(this._delegate),t.then(r=>new cw(this.firestore,new Bd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ma(this.firestore,this._delegate.withConverter(e?um.getInstance(this.firestore,e):null))}}function Ls(n,e,t){return n.message=n.message.replace(e,t),n}function Bx(n){for(const e of n)if("object"==typeof e&&!fA(e))return e;return{}}function jx(n,e){var t,r;let i;return i=fA(n[0])?n[0]:fA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class cw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ma(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Mx(this._delegate,e._delegate)}}class dw extends cw{data(e){const t=this._delegate.data(e);return function sI(n,e){n||lt()}(void 0!==t),t}}class Vs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new XD(e)}where(e,t,r){try{return new Vs(this.firestore,Rf(this._delegate,function g1(n,e,t){const r=e,i=KD("where",n);return aw._create(i,r,t)}(e,t,r)))}catch(i){throw Ls(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Vs(this.firestore,Rf(this._delegate,function m1(n,e="asc"){const t=e,r=KD("orderBy",n);return lA._create(r,t)}(e,t)))}catch(r){throw Ls(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Vs(this.firestore,Rf(this._delegate,function y1(n){return ax("limit",n),ZD._create("limit",n,"F")}(e)))}catch(t){throw Ls(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Vs(this.firestore,Rf(this._delegate,function v1(n){return ax("limitToLast",n),ZD._create("limitToLast",n,"L")}(e)))}catch(t){throw Ls(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Vs(this.firestore,Rf(this._delegate,function _1(...n){return YD._create("startAt",n,!0)}(...e)))}catch(t){throw Ls(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Vs(this.firestore,Rf(this._delegate,function E1(...n){return YD._create("startAfter",n,!1)}(...e)))}catch(t){throw Ls(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Vs(this.firestore,Rf(this._delegate,function w1(...n){return QD._create("endBefore",n,!1)}(...e)))}catch(t){throw Ls(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Vs(this.firestore,Rf(this._delegate,function I1(...n){return QD._create("endAt",n,!0)}(...e)))}catch(t){throw Ls(t,"endAt()","Query.endAt()")}}isEqual(e){return nA(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function R1(n){n=hn(n,Zi);const e=hn(n.firestore,ar),t=Qr(e),r=new Nf(e);return function Hk(n,e){const t=new Zr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(i,a,l){try{const f=yield RD(i,a,!0),y=new $R(a,f.ir),I=y.sc(f.documents),S=y.applyChanges(I,!1);l.resolve(S.snapshot)}catch(f){const y=fv(f,`Failed to execute query '${a} against cache`);l.reject(y)}}),function(i,a,l){return r.apply(this,arguments)})(yield BD(n),e,t);var r})),t.promise}(t,n._query).then(i=>new xf(e,r,n,i))}(this._delegate):"server"===e?.source?function x1(n){n=hn(n,Zi);const e=hn(n.firestore,ar),t=Qr(e),r=new Nf(e);return tx(t,n._query,{source:"server"}).then(i=>new xf(e,r,n,i))}(this._delegate):function M1(n){n=hn(n,Zi);const e=hn(n.firestore,ar),t=Qr(e),r=new Nf(e);return Ix(n._query),tx(t,n._query).then(i=>new xf(e,r,n,i))}(this._delegate),t.then(r=>new pA(this.firestore,new xf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Bx(e),r=jx(e,i=>new pA(this.firestore,new xf(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return Nx(this._delegate,t,r)}withConverter(e){return new Vs(this.firestore,this._delegate.withConverter(e?um.getInstance(this.firestore,e):null))}}class nF{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new dw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class pA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Vs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new dw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new nF(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new dw(this._firestore,r))})}isEqual(e){return Mx(this._delegate,e._delegate)}}class wv extends Vs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ma(this.firestore,e):null}doc(e){try{return new Ma(this.firestore,void 0===e?$D(this._delegate):$D(this._delegate,e))}catch(t){throw Ls(t,"doc()","CollectionReference.doc()")}}add(e){return function P1(n,e){const t=hn(n.firestore,ar),r=$D(n),i=JD(n.converter,e);return Ev(t,[GD(sm(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Yn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ma(this.firestore,t))}isEqual(e){return dx(this._delegate,e._delegate)}withConverter(e){return new wv(this.firestore,this._delegate.withConverter(e?um.getInstance(this.firestore,e):null))}}function lm(n){return hn(n,or)}class gA{constructor(...e){this._delegate=new Ud(...e)}static documentId(){return new gA(gr.keyField().canonicalString())}isEqual(e){return(e=(0,pn.m9)(e))instanceof Ud&&this._delegate._internalPath.isEqual(e._internalPath)}}class cm{constructor(e){this._delegate=e}static serverTimestamp(){const e=function W1(){return new iA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new cm(e)}static delete(){const e=function q1(){return new rw("deleteField")}();return e._methodName="FieldValue.delete",new cm(e)}static arrayUnion(...e){const t=function K1(...n){return new c1("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new cm(t)}static arrayRemove(...e){const t=function Z1(...n){return new d1("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new cm(t)}static increment(e){const t=function Y1(n){return new h1("increment",n)}(e);return t._methodName="FieldValue.increment",new cm(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const rF={Firestore:Lx,GeoPoint:HD,Timestamp:Gn,Blob:lw,Transaction:Vx,WriteBatch:Ux,DocumentReference:Ma,DocumentSnapshot:cw,Query:Vs,QueryDocumentSnapshot:dw,QuerySnapshot:pA,CollectionReference:wv,FieldPath:gA,FieldValue:cm,setLogLevel:function tF(n){!function fr(n){zo.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function sF(n){(function iF(n,e){n.INTERNAL.registerComponent(new Jm.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},rF)))})(n,(e,t)=>new Lx(e,t,new eF)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(d0.Z);var oF=k(6451),eC=k(5363),aF=k(6063);class uF extends pi.x{constructor(e=1/0,t=1/0,r=aF.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let f=0;for(let y=1;y<r.length&&r[y]<=l;y+=2)f=y;f&&r.splice(0,f+1)}}}var lF=k(3099);function $x(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,lF.B)({connector:()=>new uF(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Hx(n,e){return(0,cu.m)(e)?Dr(()=>n,e):Dr(()=>n)}var mA=k(9468);k(259);const vA=new Map,Gx={activated:!1,tokenObservers:[]},pF={initialized:!1,enabled:!1};function Vr(n){return vA.get(n)||Object.assign({},Gx)}function nC(){return pF}const _A="https://content-firebaseappcheck.googleapis.com/v1",vF="exchangeDebugToken",qx={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class EF{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ve.Z)(function*(){t.stop();try{t.pending=new pn.BH,yield function wF(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new pn.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Yi=new pn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function EA(n){if(!Vr(n).activated)throw Yi.create("use-before-activation",{appName:n.name})}function sC(n,e){return IA.apply(this,arguments)}function IA(){return IA=(0,ve.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const R=yield i.getHeartbeatsHeader();R&&(r["X-Firebase-Client"]=R)}const a={method:"POST",body:JSON.stringify(e),headers:r};let l,f;try{l=yield fetch(n,a)}catch(R){throw Yi.create("fetch-network-error",{originalErrorMessage:R?.message})}if(200!==l.status)throw Yi.create("fetch-status-error",{httpStatus:l.status});try{f=yield l.json()}catch(R){throw Yi.create("fetch-parse-error",{originalErrorMessage:R?.message})}const y=f.ttl.match(/^([\d.]+)(s)$/);if(!y||!y[2]||isNaN(Number(y[1])))throw Yi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const I=1e3*Number(y[1]),S=Date.now();return{token:f.token,expireTimeMillis:S+I,issuedAtTimeMillis:S}}),IA.apply(this,arguments)}function Wx(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${_A}/projects/${t}/apps/${r}:${vF}?key=${i}`,body:{debug_token:e}}}const bF="firebase-app-check-database",SF=1,hw="firebase-app-check-store";let oC=null;function DA(){return DA=(0,ve.Z)(function*(n,e){const r=(yield function Zx(){return oC||(oC=new Promise((n,e)=>{try{const t=indexedDB.open(bF,SF);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Yi.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(hw,{keyPath:"compositeKey"})}}catch(t){e(Yi.create("storage-open",{originalErrorMessage:t?.message}))}}),oC)}()).transaction(hw,"readwrite"),a=r.objectStore(hw).put({compositeKey:n,value:e});return new Promise((l,f)=>{a.onsuccess=y=>{l()},r.onerror=y=>{var I;f(Yi.create("storage-set",{originalErrorMessage:null===(I=y.target.error)||void 0===I?void 0:I.message}))}})}),DA.apply(this,arguments)}const fw=new bu.Yd("@firebase/app-check");function SA(n,e){return(0,pn.hl)()?function AF(n,e){return function Yx(n,e){return DA.apply(this,arguments)}(function Jx(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{fw.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function AA(){return nC().enabled}function MA(){return RA.apply(this,arguments)}function RA(){return RA=(0,ve.Z)(function*(){const n=nC();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),RA.apply(this,arguments)}const OF={error:"UNKNOWN_ERROR"};function kF(n){return pn.US.encodeString(JSON.stringify(n),!1)}function aC(n){return xA.apply(this,arguments)}function xA(){return xA=(0,ve.Z)(function*(n,e=!1){const t=n.app;EA(t);const r=Vr(t);let a,i=r.token;if(i&&!Iv(i)&&(r.token=void 0,i=void 0),!i){const y=yield r.cachedTokenPromise;y&&(Iv(y)?i=y:yield SA(t,void 0))}if(!e&&i&&Iv(i))return{token:i.token};let f,l=!1;if(AA()){r.exchangeTokenPromise||(r.exchangeTokenPromise=sC(Wx(t,yield MA()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const y=yield r.exchangeTokenPromise;return yield SA(t,y),r.token=y,{token:y.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield Vr(t).exchangeTokenPromise}catch(y){"appCheck/throttled"===y.code?fw.warn(y.message):fw.error(y),a=y}return i?a?f=Iv(i)?{token:i.token,internalError:a}:nN(a):(f={token:i.token},r.token=i,yield SA(t,i)):f=nN(a),l&&function tN(n,e){const t=Vr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,f),f}),xA.apply(this,arguments)}function NA(){return NA=(0,ve.Z)(function*(n){const e=n.app;EA(e);const{provider:t}=Vr(e);if(AA()){const r=yield MA(),{token:i}=yield sC(Wx(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}}),NA.apply(this,arguments)}function OA(n,e){const t=Vr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function eN(n){const{app:e}=n,t=Vr(e);let r=t.tokenRefresher;r||(r=function FF(n){const{app:e}=n;return new EF((0,ve.Z)(function*(){let r;if(r=Vr(e).token?yield aC(n,!0):yield aC(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Vr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},qx.RETRIAL_MIN_WAIT,qx.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Iv(n){return n.expireTimeMillis-Date.now()>0}function nN(n){return{token:kF(OF),error:n}}class LF{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Vr(this.app);for(const t of e)OA(this.app,t.next);return Promise.resolve()}}const cN="app-check-internal";!function QF(){(0,sd._registerComponent)(new Jm.wA("app-check",n=>function VF(n,e){return new LF(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(cN).initialize()})),(0,sd._registerComponent)(new Jm.wA(cN,n=>function UF(n){return{getToken:e=>aC(n,e),getLimitedUseToken:()=>function Xx(n){return NA.apply(this,arguments)}(n),addTokenListener:e=>function PA(n,e,t,r){const{app:i}=n,a=Vr(i);if(a.tokenObservers=[...a.tokenObservers,{next:t,error:r,type:e}],a.token&&Iv(a.token)){const f=a.token;Promise.resolve().then(()=>{t({token:f.token}),eN(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>eN(n))}(n,"INTERNAL",e),removeTokenListener:e=>OA(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,sd.registerVersion)("@firebase/app-check","0.8.0")}();class VA{constructor(){return(0,Kr.vb)("app-check")}}typeof window<"u"&&window;var nL=k(9260);const hN=new m.OlP("angularfire2.auth.use-emulator"),fN=new m.OlP("angularfire2.auth.settings"),pN=new m.OlP("angularfire2.auth.tenant-id"),gN=new m.OlP("angularfire2.auth.langugage-code"),mN=new m.OlP("angularfire2.auth.use-device-language"),yN=new m.OlP("angularfire.auth.persistence"),vN=(n,e,t,r,i,a,l,f)=>(0,Rs.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const y=e.runOutsideAngular(()=>n.auth());if(t&&y.useEmulator(...t),r&&(y.tenantId=r),y.languageCode=i,a&&y.useDeviceLanguage(),l)for(const[I,S]of Object.entries(l))y.settings[I]=S;return f&&y.setPersistence(f),y},[t,r,i,a,l,f]);let _N=(()=>{class n{constructor(t,r,i,a,l,f,y,I,S,R,L,U){const W=new pi.x,oe=rt(void 0).pipe((0,eC.Q)(l.outsideAngular),Dr(()=>a.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,2644)))),(0,Ct.U)(()=>(0,Rs.on)(t,a,r)),(0,Ct.U)(ce=>vN(ce,a,f,I,S,R,y,L)),$x({bufferSize:1,refCount:!1}));if(vs(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=rt(null);else{oe.pipe(ii()).subscribe();const Le=oe.pipe(Dr(mt=>mt.getRedirectResult().then(Zt=>Zt,()=>null)),Kr.iC,$x({bufferSize:1,refCount:!1})),it=oe.pipe(Dr(mt=>new gi.y(Zt=>({unsubscribe:a.runOutsideAngular(()=>mt.onAuthStateChanged(Yt=>Zt.next(Yt),Yt=>Zt.error(Yt),()=>Zt.complete()))})))),ot=oe.pipe(Dr(mt=>new gi.y(Zt=>({unsubscribe:a.runOutsideAngular(()=>mt.onIdTokenChanged(Yt=>Zt.next(Yt),Yt=>Zt.error(Yt),()=>Zt.complete()))}))));this.authState=Le.pipe(Hx(it),(0,mA.R)(l.outsideAngular),(0,eC.Q)(l.insideAngular)),this.user=Le.pipe(Hx(ot),(0,mA.R)(l.outsideAngular),(0,eC.Q)(l.insideAngular)),this.idToken=this.user.pipe(Dr(mt=>mt?(0,Jt.D)(mt.getIdToken()):rt(null))),this.idTokenResult=this.user.pipe(Dr(mt=>mt?(0,Jt.D)(mt.getIdTokenResult()):rt(null))),this.credential=(0,oF.T)(Le,W,this.authState.pipe(ri(mt=>!mt))).pipe((0,Ct.U)(mt=>mt?.user?mt:null),(0,mA.R)(l.outsideAngular),(0,eC.Q)(l.insideAngular))}return(0,Rs.pX)(this,oe,a,{spy:{apply:(ce,Le,it)=>{(ce.startsWith("signIn")||ce.startsWith("createUser"))&&it.then(ot=>W.next(ot))}}})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Rs.Dh),m.LFG(Rs.xv,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(Kr.HU),m.LFG(hN,8),m.LFG(fN,8),m.LFG(pN,8),m.LFG(gN,8),m.LFG(mN,8),m.LFG(yN,8),m.LFG(VA,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function EN(n,e){return function iL(n,e=Gp.z){return new gi.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function BA(n,e){return EN(n,e).pipe((0,Ct.U)(t=>({payload:t,type:"query"})))}function lC(n,e){return BA(n,e).pipe(ha(void 0),Oh(),(0,Ct.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,f)=>{const y=i.find(S=>S.doc.ref.isEqual(l.ref)),I=t?.payload.docs.find(S=>S.ref.isEqual(l.ref));y&&JSON.stringify(y.doc.metadata)===JSON.stringify(l.metadata)||!y&&I&&JSON.stringify(I.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:l}})}),a}))}function wN(n,e,t){return lC(n,t).pipe(Fc((r,i)=>function oL(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function aL(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return jA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return jA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return jA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),function l0(n,e=qi.y){return n=n??l_,(0,Nr.e)((t,r)=>{let i,a=!0;t.subscribe((0,cr.x)(r,l=>{const f=e(l);(a||!n(i,f))&&(a=!1,i=f,r.next(l))}))})}(),(0,Ct.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function jA(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function IN(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class DN{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=lC(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Ct.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(ha(void 0),Oh(),ri(([r,i])=>i.length>0||!r),(0,Ct.U)(([r,i])=>i),Kr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Fc((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=IN(e);return wN(this.query,t,this.afs.schedulers.outsideAngular).pipe(Kr.iC)}valueChanges(e={}){return BA(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ct.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Kr.iC)}get(e){return(0,Jt.D)(this.query.get(e)).pipe(Kr.iC)}add(e){return this.ref.add(e)}doc(e){return new CN(this.ref.doc(e),this.afs)}}class CN{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=TN(r,t);return new DN(i,a,this.afs)}snapshotChanges(){return function sL(n,e){return EN(n,e).pipe(ha(void 0),Oh(),(0,Ct.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Kr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Ct.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Jt.D)(this.ref.get(e)).pipe(Kr.iC)}}class uL{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?lC(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ct.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ri(t=>t.length>0),Kr.iC):lC(this.query,this.afs.schedulers.outsideAngular).pipe(Kr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Fc((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=IN(e);return wN(this.query,t,this.afs.schedulers.outsideAngular).pipe(Kr.iC)}valueChanges(e={}){return BA(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ct.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Kr.iC)}get(e){return(0,Jt.D)(this.query.get(e)).pipe(Kr.iC)}}const bN=new m.OlP("angularfire2.enableFirestorePersistence"),SN=new m.OlP("angularfire2.firestore.persistenceSettings"),lL=new m.OlP("angularfire2.firestore.settings"),cL=new m.OlP("angularfire2.firestore.use-emulator");function TN(n,e=(t=>t)){return{query:e(n),ref:n}}let AN=(()=>{class n{constructor(t,r,i,a,l,f,y,I,S,R,L,U,W,oe,ce,Le,it){this.schedulers=y;const ot=(0,Rs.on)(t,f,r),mt=S;R&&vN(ot,f,L,W,oe,ce,U,Le),[this.firestore,this.persistenceEnabled$]=(0,Rs.cc)(`${ot.name}.firestore`,"AngularFirestore",ot.name,()=>{const Zt=f.runOutsideAngular(()=>ot.firestore());if(a&&Zt.settings(a),mt&&Zt.useEmulator(...mt),i&&!vs(l)){const Yt=()=>{try{return(0,Jt.D)(Zt.enablePersistence(I||void 0).then(()=>!0,()=>!1))}catch(Dn){return typeof console<"u"&&console.warn(Dn),rt(!1)}};return[Zt,f.runOutsideAngular(Yt)]}return[Zt,rt(!1)]},[a,mt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=TN(i,r),f=this.schedulers.ngZone.run(()=>a);return new DN(f,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new uL(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new CN(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Rs.Dh),m.LFG(Rs.xv,8),m.LFG(bN,8),m.LFG(lL,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(Kr.HU),m.LFG(SN,8),m.LFG(cL,8),m.LFG(_N,8),m.LFG(hN,8),m.LFG(fN,8),m.LFG(pN,8),m.LFG(gN,8),m.LFG(mN,8),m.LFG(yN,8),m.LFG(VA,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),dL=(()=>{class n{constructor(){nL.Z.registerVersion("angularfire",Kr.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:bN,useValue:!0},{provide:SN,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[AN]}),n})(),hL=(()=>{class n{constructor(t){this.firestore=t,this.firestoreCollection=t.collection("todos")}addTodo(t){this.firestoreCollection.add({title:t,isDone:!1})}updateTodoStatus(t,r){this.firestoreCollection.doc(t).update({isDone:r})}deleteTodo(t){this.firestoreCollection.doc(t).delete()}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(AN))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function fL(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"li",12)(1,"span")(2,"i",13),m.NdJ("click",function(){const a=m.CHM(t).$implicit,l=m.oxw();return m.KtG(l.onStatusChange(a.id,!a.isDone))}),m.qZA(),m._uU(3),m.TgZ(4,"span",14),m.NdJ("click",function(){const a=m.CHM(t).$implicit,l=m.oxw();return m.KtG(l.onDelete(a.id))}),m._UZ(5,"i",15),m.qZA()()()}if(2&n){const t=e.$implicit;m.xp6(2),m.Q6J("ngClass",t.isDone?"fa-solid fa-circle-check":"fa-regular fa-circle"),m.xp6(1),m.hij(" ",t.title," ")}}let pL=(()=>{class n{constructor(t){this.todoService=t,this.todos=[]}ngOnInit(){this.todoService.firestoreCollection.valueChanges({idField:"id"}).subscribe(t=>{this.todos=t.sort((r,i)=>r.isDone-i.isDone)})}onClick(t){t.value&&(this.todoService.addTodo(t.value),t.value=" ")}onStatusChange(t,r){this.todoService.updateTodoStatus(t,r)}onDelete(t){this.todoService.deleteTodo(t)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(hL))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-todo"]],decls:13,vars:1,consts:[[1,"card","shadow-lg","mt-5"],[1,"card-header","text-center","py-4","border-0"],[1,"display-6","fw-bold"],[1,"card-body","p-4"],[1,"list-group"],[1,"list-group-item","mb-2","border","py-0","rounder-3"],[1,"input-group"],["type","text","placeholder","Title goes here",1,"form-control","border-0","py-3","shadow-none"],["titleInput",""],[1,"btn","text-success","border-0",3,"click"],[1,"fa-solid","fa-circle-plus","fa-xl"],["class","list-group-item mb-2 border py-3 rounded-3",4,"ngFor","ngForOf"],[1,"list-group-item","mb-2","border","py-3","rounded-3"],[1,"text-success",3,"ngClass","click"],[1,"float-end","text-secondary",3,"click"],[1,"fa-solid","fa-trash-can"]],template:function(t,r){if(1&t){const i=m.EpF();m.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),m._uU(3," To Do List "),m.qZA()(),m.TgZ(4,"div",3)(5,"ul",4)(6,"li",5)(7,"div",6),m._UZ(8,"input",7,8),m.TgZ(10,"button",9),m.NdJ("click",function(){m.CHM(i);const l=m.MAs(9);return m.KtG(r.onClick(l))}),m._UZ(11,"i",10),m.qZA()()(),m.YNc(12,fL,6,2,"li",11),m.qZA()()()}2&t&&(m.xp6(12),m.Q6J("ngForOf",r.todos))},dependencies:[Xe,Rr],encapsulation:2}),n})(),gL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"container"],[1,"row","justify-content-center"],[1,"col-md-5"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2),m._UZ(3,"app-todo"),m.qZA()()())},dependencies:[pL]}),n})();class cC{}class $A{}class jd{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),a=i.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(i,a),this.headers.has(a)?this.headers.get(a).push(l):this.headers.set(a,[l])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof jd?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new jd;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof jd?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const a=e.value;if(a){let l=this.headers.get(t);if(!l)return;l=l.filter(f=>-1===a.indexOf(f)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class mL{encodeKey(e){return MN(e)}encodeValue(e){return MN(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const vL=/%(\d[a-f0-9])/gi,_L={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function MN(n){return encodeURIComponent(n).replace(vL,(e,t)=>_L[t]??e)}function dC(n){return`${n}`}class Of{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new mL,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function yL(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const a=i.indexOf("="),[l,f]=-1==a?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,a)),e.decodeValue(i.slice(a+1))],y=t.get(l)||[];y.push(f),t.set(l,y)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(dC):[dC(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(a=>{t.push({param:r,value:a,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Of({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(dC(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(dC(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class EL{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function RN(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function xN(n){return typeof Blob<"u"&&n instanceof Blob}function NN(n){return typeof FormData<"u"&&n instanceof FormData}class pw{constructor(e,t,r,i){let a;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function wL(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new jd),this.context||(this.context=new EL),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const f=t.indexOf("?");this.urlWithParams=t+(-1===f?"?":f<t.length-1?"&":"")+l}}else this.params=new Of,this.urlWithParams=t}serializeBody(){return null===this.body?null:RN(this.body)||xN(this.body)||NN(this.body)||function IL(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Of?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||NN(this.body)?null:xN(this.body)?this.body.type||null:RN(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Of?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,a=void 0!==e.body?e.body:this.body,l=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,f=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let y=e.headers||this.headers,I=e.params||this.params;const S=e.context??this.context;return void 0!==e.setHeaders&&(y=Object.keys(e.setHeaders).reduce((R,L)=>R.set(L,e.setHeaders[L]),y)),e.setParams&&(I=Object.keys(e.setParams).reduce((R,L)=>R.set(L,e.setParams[L]),I)),new pw(t,r,a,{params:I,headers:y,context:S,reportProgress:f,responseType:i,withCredentials:l})}}var li=(()=>((li=li||{})[li.Sent=0]="Sent",li[li.UploadProgress=1]="UploadProgress",li[li.ResponseHeader=2]="ResponseHeader",li[li.DownloadProgress=3]="DownloadProgress",li[li.Response=4]="Response",li[li.User=5]="User",li))();class HA{constructor(e,t=200,r="OK"){this.headers=e.headers||new jd,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class zA extends HA{constructor(e={}){super(e),this.type=li.ResponseHeader}clone(e={}){return new zA({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class hC extends HA{constructor(e={}){super(e),this.type=li.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new hC({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class PN extends HA{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function GA(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let DL=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let a;if(t instanceof pw)a=t;else{let y,I;y=i.headers instanceof jd?i.headers:new jd(i.headers),i.params&&(I=i.params instanceof Of?i.params:new Of({fromObject:i.params})),a=new pw(t,r,void 0!==i.body?i.body:null,{headers:y,context:i.context,params:I,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const l=rt(a).pipe(hs(y=>this.handler.handle(y)));if(t instanceof pw||"events"===i.observe)return l;const f=l.pipe(ri(y=>y instanceof hC));switch(i.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return f.pipe((0,Ct.U)(y=>{if(null!==y.body&&!(y.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return y.body}));case"blob":return f.pipe((0,Ct.U)(y=>{if(null!==y.body&&!(y.body instanceof Blob))throw new Error("Response is not a Blob.");return y.body}));case"text":return f.pipe((0,Ct.U)(y=>{if(null!==y.body&&"string"!=typeof y.body)throw new Error("Response is not a string.");return y.body}));default:return f.pipe((0,Ct.U)(y=>y.body))}case"response":return f;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Of).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,GA(i,r))}post(t,r,i={}){return this.request("POST",t,GA(i,r))}put(t,r,i={}){return this.request("PUT",t,GA(i,r))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(cC))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function ON(n,e){return e(n)}function CL(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const SL=new m.OlP("HTTP_INTERCEPTORS"),gw=new m.OlP("HTTP_INTERCEPTOR_FNS");function TL(){let n=null;return(e,t)=>(null===n&&(n=((0,m.f3M)(SL,{optional:!0})??[]).reduceRight(CL,ON)),n(e,t))}let kN=(()=>{class n extends cC{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=Array.from(new Set(this.injector.get(gw)));this.chain=r.reduceRight((i,a)=>function bL(n,e,t){return(r,i)=>t.runInContext(()=>e(r,a=>n(a,i)))}(i,a,this.injector),ON)}return this.chain(t,r=>this.backend.handle(r))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG($A),m.LFG(m.lqb))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const xL=/^\)\]\}',?\n/;let LN=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new gi.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((U,W)=>i.setRequestHeader(U,W.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const U=t.detectContentTypeHeader();null!==U&&i.setRequestHeader("Content-Type",U)}if(t.responseType){const U=t.responseType.toLowerCase();i.responseType="json"!==U?U:"text"}const a=t.serializeBody();let l=null;const f=()=>{if(null!==l)return l;const U=i.statusText||"OK",W=new jd(i.getAllResponseHeaders()),oe=function NL(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return l=new zA({headers:W,status:i.status,statusText:U,url:oe}),l},y=()=>{let{headers:U,status:W,statusText:oe,url:ce}=f(),Le=null;204!==W&&(Le=typeof i.response>"u"?i.responseText:i.response),0===W&&(W=Le?200:0);let it=W>=200&&W<300;if("json"===t.responseType&&"string"==typeof Le){const ot=Le;Le=Le.replace(xL,"");try{Le=""!==Le?JSON.parse(Le):null}catch(mt){Le=ot,it&&(it=!1,Le={error:mt,text:Le})}}it?(r.next(new hC({body:Le,headers:U,status:W,statusText:oe,url:ce||void 0})),r.complete()):r.error(new PN({error:Le,headers:U,status:W,statusText:oe,url:ce||void 0}))},I=U=>{const{url:W}=f(),oe=new PN({error:U,status:i.status||0,statusText:i.statusText||"Unknown Error",url:W||void 0});r.error(oe)};let S=!1;const R=U=>{S||(r.next(f()),S=!0);let W={type:li.DownloadProgress,loaded:U.loaded};U.lengthComputable&&(W.total=U.total),"text"===t.responseType&&i.responseText&&(W.partialText=i.responseText),r.next(W)},L=U=>{let W={type:li.UploadProgress,loaded:U.loaded};U.lengthComputable&&(W.total=U.total),r.next(W)};return i.addEventListener("load",y),i.addEventListener("error",I),i.addEventListener("timeout",I),i.addEventListener("abort",I),t.reportProgress&&(i.addEventListener("progress",R),null!==a&&i.upload&&i.upload.addEventListener("progress",L)),i.send(a),r.next({type:li.Sent}),()=>{i.removeEventListener("error",I),i.removeEventListener("abort",I),i.removeEventListener("load",y),i.removeEventListener("timeout",I),t.reportProgress&&(i.removeEventListener("progress",R),null!==a&&i.upload&&i.upload.removeEventListener("progress",L)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Xo))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const qA=new m.OlP("XSRF_ENABLED"),VN=new m.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),UN=new m.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class BN{}let kL=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Va(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ne),m.LFG(m.Lbi),m.LFG(VN))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function FL(n,e){const t=n.url.toLowerCase();if(!(0,m.f3M)(qA)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=(0,m.f3M)(BN).getToken(),i=(0,m.f3M)(UN);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var Jr=(()=>((Jr=Jr||{})[Jr.Interceptors=0]="Interceptors",Jr[Jr.LegacyInterceptors=1]="LegacyInterceptors",Jr[Jr.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",Jr[Jr.NoXsrfProtection=3]="NoXsrfProtection",Jr[Jr.JsonpSupport=4]="JsonpSupport",Jr[Jr.RequestsMadeViaParent=5]="RequestsMadeViaParent",Jr))();function Dv(n,e){return{\u0275kind:n,\u0275providers:e}}function LL(...n){const e=[DL,LN,kN,{provide:cC,useExisting:kN},{provide:$A,useExisting:LN},{provide:gw,useValue:FL,multi:!0},{provide:qA,useValue:!0},{provide:BN,useClass:kL}];for(const t of n)e.push(...t.\u0275providers);return(0,m.MR2)(e)}const jN=new m.OlP("LEGACY_INTERCEPTOR_FN");let UL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[LL(Dv(Jr.LegacyInterceptors,[{provide:jN,useFactory:TL},{provide:gw,useExisting:jN,multi:!0}]))]}),n})();class $N{}class BL{}const $d="*";function HN(n,e=null){return{type:2,steps:n,options:e}}function zN(n){return{type:6,styles:n,offset:null}}function GN(n){Promise.resolve().then(n)}class mw{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){GN(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class qN{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const a=this.players.length;0==a?GN(()=>this._onFinish()):this.players.forEach(l=>{l.onDone(()=>{++t==a&&this._onFinish()}),l.onDestroy(()=>{++r==a&&this._onDestroy()}),l.onStart(()=>{++i==a&&this._onStart()})}),this.totalTime=this.players.reduce((l,f)=>Math.max(l,f.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const WA="!";function WN(n){return new m.vHH(3e3,!1)}function wV(){return typeof window<"u"&&typeof window.document<"u"}function KA(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function kf(n){switch(n.length){case 0:return new mw;case 1:return n[0];default:return new qN(n)}}function KN(n,e,t,r,i=new Map,a=new Map){const l=[],f=[];let y=-1,I=null;if(r.forEach(S=>{const R=S.get("offset"),L=R==y,U=L&&I||new Map;S.forEach((W,oe)=>{let ce=oe,Le=W;if("offset"!==oe)switch(ce=e.normalizePropertyName(ce,l),Le){case WA:Le=i.get(oe);break;case $d:Le=a.get(oe);break;default:Le=e.normalizeStyleValue(oe,ce,Le,l)}U.set(ce,Le)}),L||f.push(U),I=U,y=R}),l.length)throw function lV(n){return new m.vHH(3502,!1)}();return f}function ZA(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&YA(t,"start",n)));break;case"done":n.onDone(()=>r(t&&YA(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&YA(t,"destroy",n)))}}function YA(n,e,t){const a=QA(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),l=n._data;return null!=l&&(a._data=l),a}function QA(n,e,t,r,i="",a=0,l){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:a,disabled:!!l}}function qo(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function ZN(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let JA=(n,e)=>!1,YN=(n,e,t)=>[],QN=null;function XA(n){const e=n.parentNode||n.host;return e===QN?null:e}(KA()||typeof Element<"u")&&(wV()?(QN=(()=>document.documentElement)(),JA=(n,e)=>{for(;e;){if(e===n)return!0;e=XA(e)}return!1}):JA=(n,e)=>n.contains(e),YN=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let dm=null,JN=!1;const XN=JA,eP=YN;let tP=(()=>{class n{validateStyleProperty(t){return function DV(n){dm||(dm=function CV(){return typeof document<"u"?document.body:null}()||{},JN=!!dm.style&&"WebkitAppearance"in dm.style);let e=!0;return dm.style&&!function IV(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in dm.style,!e&&JN&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in dm.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return XN(t,r)}getParentElement(t){return XA(t)}query(t,r,i){return eP(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,a,l,f=[],y){return new mw(i,a)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),eM=(()=>{class n{}return n.NOOP=new tP,n})();const bV=1e3,tM="ng-enter",fC="ng-leave",pC="ng-trigger",gC=".ng-trigger",rP="ng-animating",nM=".ng-animating";function Hd(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:rM(parseFloat(e[1]),e[2])}function rM(n,e){return"s"===e?n*bV:n}function mC(n,e,t){return n.hasOwnProperty("duration")?n:function TV(n,e,t){let i,a=0,l="";if("string"==typeof n){const f=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===f)return e.push(WN()),{duration:0,delay:0,easing:""};i=rM(parseFloat(f[1]),f[2]);const y=f[3];null!=y&&(a=rM(parseFloat(y),f[4]));const I=f[5];I&&(l=I)}else i=n;if(!t){let f=!1,y=e.length;i<0&&(e.push(function jL(){return new m.vHH(3100,!1)}()),f=!0),a<0&&(e.push(function $L(){return new m.vHH(3101,!1)}()),f=!0),f&&e.splice(y,0,WN())}return{duration:i,delay:a,easing:l}}(n,e,t)}function yw(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function iP(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function Ff(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function oP(n,e,t){return t?e+":"+t+";":""}function aP(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=oP(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=oP(0,xV(t),n.style[t]));n.setAttribute("style",e)}function Ql(n,e,t){n.style&&(e.forEach((r,i)=>{const a=sM(i);t&&!t.has(i)&&t.set(i,n.style[a]),n.style[a]=r}),KA()&&aP(n))}function hm(n,e){n.style&&(e.forEach((t,r)=>{const i=sM(r);n.style[i]=""}),KA()&&aP(n))}function vw(n){return Array.isArray(n)?1==n.length?n[0]:HN(n):n}const iM=new RegExp("{{\\s*(.+?)\\s*}}","g");function uP(n){let e=[];if("string"==typeof n){let t;for(;t=iM.exec(n);)e.push(t[1]);iM.lastIndex=0}return e}function _w(n,e,t){const r=n.toString(),i=r.replace(iM,(a,l)=>{let f=e[l];return null==f&&(t.push(function zL(n){return new m.vHH(3003,!1)}()),f=""),f.toString()});return i==r?n:i}function yC(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const RV=/-+([a-z0-9])/g;function sM(n){return n.replace(RV,(...e)=>e[1].toUpperCase())}function xV(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Wo(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function GL(n){return new m.vHH(3004,!1)}()}}function lP(n,e){return window.getComputedStyle(n)[e]}const EC="*";function LV(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function VV(n,e,t){if(":"==n[0]){const y=function UV(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function sV(n){return new m.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof y)return void e.push(y);n=y}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function iV(n){return new m.vHH(3015,!1)}()),e;const i=r[1],a=r[2],l=r[3];e.push(cP(i,l));"<"==a[0]&&!(i==EC&&l==EC)&&e.push(cP(l,i))}(r,t,e)):t.push(n),t}const wC=new Set(["true","1"]),IC=new Set(["false","0"]);function cP(n,e){const t=wC.has(n)||IC.has(n),r=wC.has(e)||IC.has(e);return(i,a)=>{let l=n==EC||n==i,f=e==EC||e==a;return!l&&t&&"boolean"==typeof i&&(l=i?wC.has(n):IC.has(n)),!f&&r&&"boolean"==typeof a&&(f=a?wC.has(e):IC.has(e)),l&&f}}const BV=new RegExp("s*:selfs*,?","g");function oM(n,e,t,r){return new jV(n).build(e,t,r)}class jV{constructor(e){this._driver=e}build(e,t,r){const i=new zV(t);return this._resetContextStyleTimingState(i),Wo(this,vw(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const a=[],l=[];return"@"==e.name.charAt(0)&&t.errors.push(function WL(){return new m.vHH(3006,!1)}()),e.definitions.forEach(f=>{if(this._resetContextStyleTimingState(t),0==f.type){const y=f,I=y.name;I.toString().split(/\s*,\s*/).forEach(S=>{y.name=S,a.push(this.visitState(y,t))}),y.name=I}else if(1==f.type){const y=this.visitTransition(f,t);r+=y.queryCount,i+=y.depCount,l.push(y)}else t.errors.push(function KL(){return new m.vHH(3007,!1)}())}),{type:7,name:e.name,states:a,transitions:l,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const a=new Set,l=i||{};r.styles.forEach(f=>{f instanceof Map&&f.forEach(y=>{uP(y).forEach(I=>{l.hasOwnProperty(I)||a.add(I)})})}),a.size&&(yC(a.values()),t.errors.push(function ZL(n,e){return new m.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Wo(this,vw(e.animation),t);return{type:1,matchers:LV(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:fm(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Wo(this,r,t)),options:fm(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const a=e.steps.map(l=>{t.currentTime=r;const f=Wo(this,l,t);return i=Math.max(i,t.currentTime),f});return t.currentTime=i,{type:3,steps:a,options:fm(e.options)}}visitAnimate(e,t){const r=function qV(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return aM(mC(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(a=>"{"==a.charAt(0)&&"{"==a.charAt(1))){const a=aM(0,0,"");return a.dynamic=!0,a.strValue=t,a}const i=mC(t,e);return aM(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,a=e.styles?e.styles:zN({});if(5==a.type)i=this.visitKeyframes(a,t);else{let l=e.styles,f=!1;if(!l){f=!0;const I={};r.easing&&(I.easing=r.easing),l=zN(I)}t.currentTime+=r.duration+r.delay;const y=this.visitStyle(l,t);y.isEmptyStep=f,i=y}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let f of i)"string"==typeof f?f===$d?r.push(f):t.errors.push(new m.vHH(3002,!1)):r.push(iP(f));let a=!1,l=null;return r.forEach(f=>{if(f instanceof Map&&(f.has("easing")&&(l=f.get("easing"),f.delete("easing")),!a))for(let y of f.values())if(y.toString().indexOf("{{")>=0){a=!0;break}}),{type:6,styles:r,easing:l,offset:e.offset,containsDynamicStyles:a,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,a=t.currentTime;r&&a>0&&(a-=r.duration+r.delay),e.styles.forEach(l=>{"string"!=typeof l&&l.forEach((f,y)=>{const I=t.collectedStyles.get(t.currentQuerySelector),S=I.get(y);let R=!0;S&&(a!=i&&a>=S.startTime&&i<=S.endTime&&(t.errors.push(function QL(n,e,t,r,i){return new m.vHH(3010,!1)}()),R=!1),a=S.startTime),R&&I.set(y,{startTime:a,endTime:i}),t.options&&function MV(n,e,t){const r=e.params||{},i=uP(n);i.length&&i.forEach(a=>{r.hasOwnProperty(a)||t.push(function HL(n){return new m.vHH(3001,!1)}())})}(f,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function JL(){return new m.vHH(3011,!1)}()),r;let a=0;const l=[];let f=!1,y=!1,I=0;const S=e.steps.map(Le=>{const it=this._makeStyleAst(Le,t);let ot=null!=it.offset?it.offset:function GV(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(it.styles),mt=0;return null!=ot&&(a++,mt=it.offset=ot),y=y||mt<0||mt>1,f=f||mt<I,I=mt,l.push(mt),it});y&&t.errors.push(function XL(){return new m.vHH(3012,!1)}()),f&&t.errors.push(function eV(){return new m.vHH(3200,!1)}());const R=e.steps.length;let L=0;a>0&&a<R?t.errors.push(function tV(){return new m.vHH(3202,!1)}()):0==a&&(L=1/(R-1));const U=R-1,W=t.currentTime,oe=t.currentAnimateTimings,ce=oe.duration;return S.forEach((Le,it)=>{const ot=L>0?it==U?1:L*it:l[it],mt=ot*ce;t.currentTime=W+oe.delay+mt,oe.duration=mt,this._validateStyleAst(Le,t),Le.offset=ot,r.styles.push(Le)}),r}visitReference(e,t){return{type:8,animation:Wo(this,vw(e.animation),t),options:fm(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:fm(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:fm(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[a,l]=function $V(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(BV,"")),n=n.replace(/@\*/g,gC).replace(/@\w+/g,t=>gC+"-"+t.slice(1)).replace(/:animating/g,nM),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+a:a,qo(t.collectedStyles,t.currentQuerySelector,new Map);const f=Wo(this,vw(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:a,limit:i.limit||0,optional:!!i.optional,includeSelf:l,animation:f,originalSelector:e.selector,options:fm(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function nV(){return new m.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:mC(e.timings,t.errors,!0);return{type:12,animation:Wo(this,vw(e.animation),t),timings:r,options:null}}}class zV{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function fm(n){return n?(n=yw(n)).params&&(n.params=function HV(n){return n?yw(n):null}(n.params)):n={},n}function aM(n,e,t){return{duration:n,delay:e,easing:t}}function uM(n,e,t,r,i,a,l=null,f=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:a,totalTime:i+a,easing:l,subTimeline:f}}class DC{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const ZV=new RegExp(":enter","g"),QV=new RegExp(":leave","g");function lM(n,e,t,r,i,a=new Map,l=new Map,f,y,I=[]){return(new JV).buildKeyframes(n,e,t,r,i,a,l,f,y,I)}class JV{buildKeyframes(e,t,r,i,a,l,f,y,I,S=[]){I=I||new DC;const R=new cM(e,t,I,i,a,S,[]);R.options=y;const L=y.delay?Hd(y.delay):0;R.currentTimeline.delayNextStep(L),R.currentTimeline.setStyles([l],null,R.errors,y),Wo(this,r,R);const U=R.timelines.filter(W=>W.containsAnimation());if(U.length&&f.size){let W;for(let oe=U.length-1;oe>=0;oe--){const ce=U[oe];if(ce.element===t){W=ce;break}}W&&!W.allowOnlyTimelineStyles()&&W.setStyles([f],null,R.errors,y)}return U.length?U.map(W=>W.buildKeyframes()):[uM(t,[],[],[],0,L,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),a=t.currentTimeline.currentTime,l=this._visitSubInstructions(r,i,i.options);a!=l&&t.transformIntoNewTimeline(l)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const a=i?.delay;if(a){const l="number"==typeof a?a:Hd(_w(a,i?.params??{},t.errors));r.delayNextStep(l)}}}_visitSubInstructions(e,t,r){let a=t.currentTimeline.currentTime;const l=null!=r.duration?Hd(r.duration):null,f=null!=r.delay?Hd(r.delay):null;return 0!==l&&e.forEach(y=>{const I=t.appendInstructionToTimeline(y,l,f);a=Math.max(a,I.duration+I.delay)}),a}visitReference(e,t){t.updateOptions(e.options,!0),Wo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const a=e.options;if(a&&(a.params||a.delay)&&(i=t.createSubContext(a),i.transformIntoNewTimeline(),null!=a.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=CC);const l=Hd(a.delay);i.delayNextStep(l)}e.steps.length&&(e.steps.forEach(l=>Wo(this,l,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const a=e.options&&e.options.delay?Hd(e.options.delay):0;e.steps.forEach(l=>{const f=t.createSubContext(e.options);a&&f.delayNextStep(a),Wo(this,l,f),i=Math.max(i,f.currentTimeline.currentTime),r.push(f.currentTimeline)}),r.forEach(l=>t.currentTimeline.mergeTimelineCollectedStyles(l)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return mC(t.params?_w(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const a=e.style;5==a.type?this.visitKeyframes(a,t):(t.incrementTime(r.duration),this.visitStyle(a,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const a=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(a):r.setStyles(e.styles,a,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,a=r.duration,f=t.createSubContext().currentTimeline;f.easing=r.easing,e.styles.forEach(y=>{f.forwardTime((y.offset||0)*a),f.setStyles(y.styles,y.easing,t.errors,t.options),f.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(f),t.transformIntoNewTimeline(i+a),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},a=i.delay?Hd(i.delay):0;a&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=CC);let l=r;const f=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=f.length;let y=null;f.forEach((I,S)=>{t.currentQueryIndex=S;const R=t.createSubContext(e.options,I);a&&R.delayNextStep(a),I===t.element&&(y=R.currentTimeline),Wo(this,e.animation,R),R.currentTimeline.applyStylesToKeyframe(),l=Math.max(l,R.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(l),y&&(t.currentTimeline.mergeTimelineCollectedStyles(y),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,a=e.timings,l=Math.abs(a.duration),f=l*(t.currentQueryTotal-1);let y=l*t.currentQueryIndex;switch(a.duration<0?"reverse":a.easing){case"reverse":y=f-y;break;case"full":y=r.currentStaggerTime}const S=t.currentTimeline;y&&S.delayNextStep(y);const R=S.currentTime;Wo(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-R+(i.startTime-r.currentTimeline.startTime)}}const CC={};class cM{constructor(e,t,r,i,a,l,f,y){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=a,this.errors=l,this.timelines=f,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=CC,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=y||new bC(this._driver,t,0),f.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Hd(r.duration)),null!=r.delay&&(i.delay=Hd(r.delay));const a=r.params;if(a){let l=i.params;l||(l=this.options.params={}),Object.keys(a).forEach(f=>{(!t||!l.hasOwnProperty(f))&&(l[f]=_w(a[f],l,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,a=new cM(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return a.previousNode=this.previousNode,a.currentAnimateTimings=this.currentAnimateTimings,a.options=this._copyOptions(),a.updateOptions(e),a.currentQueryIndex=this.currentQueryIndex,a.currentQueryTotal=this.currentQueryTotal,a.parentContext=this,this.subContextCount++,a}transformIntoNewTimeline(e){return this.previousNode=CC,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},a=new XV(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(a),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,a,l){let f=[];if(i&&f.push(this.element),e.length>0){e=(e=e.replace(ZV,"."+this._enterClassName)).replace(QV,"."+this._leaveClassName);let I=this._driver.query(this.element,e,1!=r);0!==r&&(I=r<0?I.slice(I.length+r,I.length):I.slice(0,r)),f.push(...I)}return!a&&0==f.length&&l.push(function rV(n){return new m.vHH(3014,!1)}()),f}}class bC{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new bC(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||$d),this._currentKeyframe.set(t,$d);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const a=i&&i.params||{},l=function e2(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let a of r)t.set(a,$d)}else Ff(i,t)}),t}(e,this._globalTimelineStyles);for(let[f,y]of l){const I=_w(y,a,r);this._pendingStyles.set(f,I),this._localTimelineStyles.has(f)||this._backFill.set(f,this._globalTimelineStyles.get(f)??$d),this._updateStyle(f,I)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((f,y)=>{const I=Ff(f,new Map,this._backFill);I.forEach((S,R)=>{S===WA?e.add(R):S===$d&&t.add(R)}),r||I.set("offset",y/this.duration),i.push(I)});const a=e.size?yC(e.values()):[],l=t.size?yC(t.values()):[];if(r){const f=i[0],y=new Map(f);f.set("offset",0),y.set("offset",1),i=[f,y]}return uM(this.element,i,a,l,this.duration,this.startTime,this.easing,!1)}}class XV extends bC{constructor(e,t,r,i,a,l,f=!1){super(e,t,l.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=a,this._stretchStartingKeyframe=f,this.timings={duration:l.duration,delay:l.delay,easing:l.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const a=[],l=r+t,f=t/l,y=Ff(e[0]);y.set("offset",0),a.push(y);const I=Ff(e[0]);I.set("offset",fP(f)),a.push(I);const S=e.length-1;for(let R=1;R<=S;R++){let L=Ff(e[R]);const U=L.get("offset");L.set("offset",fP((t+U*r)/l)),a.push(L)}r=l,t=0,i="",e=a}return uM(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function fP(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class dM{}const t2=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class n2 extends dM{normalizePropertyName(e,t){return sM(e)}normalizeStyleValue(e,t,r,i){let a="";const l=r.toString().trim();if(t2.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)a="px";else{const f=r.match(/^[+-]?[\d\.]+([a-z]*)$/);f&&0==f[1].length&&i.push(function qL(n,e){return new m.vHH(3005,!1)}())}return l+a}}function pP(n,e,t,r,i,a,l,f,y,I,S,R,L){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:a,toState:r,toStyles:l,timelines:f,queriedElements:y,preStyleProps:I,postStyleProps:S,totalTime:R,errors:L}}const hM={};class gP{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function r2(n,e,t,r,i){return n.some(a=>a(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,a,l,f,y,I,S){const R=[],L=this.ast.options&&this.ast.options.params||hM,W=this.buildStyles(r,f&&f.params||hM,R),oe=y&&y.params||hM,ce=this.buildStyles(i,oe,R),Le=new Set,it=new Map,ot=new Map,mt="void"===i,Zt={params:i2(oe,L),delay:this.ast.options?.delay},Yt=S?[]:lM(e,t,this.ast.animation,a,l,W,ce,Zt,I,R);let Dn=0;if(Yt.forEach(Na=>{Dn=Math.max(Na.duration+Na.delay,Dn)}),R.length)return pP(t,this._triggerName,r,i,mt,W,ce,[],[],it,ot,Dn,R);Yt.forEach(Na=>{const zd=Na.element,OO=qo(it,zd,new Set);Na.preStyleProps.forEach(mm=>OO.add(mm));const bw=qo(ot,zd,new Set);Na.postStyleProps.forEach(mm=>bw.add(mm)),zd!==t&&Le.add(zd)});const Qi=yC(Le.values());return pP(t,this._triggerName,r,i,mt,W,ce,Yt,Qi,it,ot,Dn)}}function i2(n,e){const t=yw(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class s2{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=yw(this.defaultParams);return Object.keys(e).forEach(a=>{const l=e[a];null!==l&&(i[a]=l)}),this.styles.styles.forEach(a=>{"string"!=typeof a&&a.forEach((l,f)=>{l&&(l=_w(l,i,t));const y=this.normalizer.normalizePropertyName(f,t);l=this.normalizer.normalizeStyleValue(f,y,l,t),r.set(f,l)})}),r}}class a2{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new s2(i.style,i.options&&i.options.params||{},r))}),mP(this.states,"true","1"),mP(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new gP(e,i,this.states))}),this.fallbackTransition=function u2(n,e,t){return new gP(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(l,f)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(l=>l.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function mP(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const l2=new DC;class c2{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],i=[],a=oM(this._driver,t,r,i);if(r.length)throw function cV(n){return new m.vHH(3503,!1)}();this._animations.set(e,a)}_buildPlayer(e,t,r){const i=e.element,a=KN(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,a,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],a=this._animations.get(e);let l;const f=new Map;if(a?(l=lM(this._driver,t,a,tM,fC,new Map,new Map,r,l2,i),l.forEach(S=>{const R=qo(f,S.element,new Map);S.postStyleProps.forEach(L=>R.set(L,null))})):(i.push(function dV(){return new m.vHH(3300,!1)}()),l=[]),i.length)throw function hV(n){return new m.vHH(3504,!1)}();f.forEach((S,R)=>{S.forEach((L,U)=>{S.set(U,this._driver.computeStyle(R,U,$d))})});const I=kf(l.map(S=>{const R=f.get(S.element);return this._buildPlayer(S,new Map,R)}));return this._playersById.set(e,I),I.onDestroy(()=>this.destroy(e)),this.players.push(I),I}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function fV(n){return new m.vHH(3301,!1)}();return t}listen(e,t,r,i){const a=QA(t,"","","");return ZA(this._getPlayer(e),r,a,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const a=this._getPlayer(e);switch(r){case"play":a.play();break;case"pause":a.pause();break;case"reset":a.reset();break;case"restart":a.restart();break;case"finish":a.finish();break;case"init":a.init();break;case"setPosition":a.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const yP="ng-animate-queued",fM="ng-animate-disabled",g2=[],vP={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},m2={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ra="__ng_removed";class pM{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function E2(n){return n??null}(r?e.value:e),r){const a=yw(e);delete a.value,this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const Ew="void",gM=new pM(Ew);class y2{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,xa(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function pV(n,e){return new m.vHH(3302,!1)}();if(null==r||0==r.length)throw function gV(n){return new m.vHH(3303,!1)}();if(!function w2(n){return"start"==n||"done"==n}(r))throw function mV(n,e){return new m.vHH(3400,!1)}();const a=qo(this._elementListeners,e,[]),l={name:t,phase:r,callback:i};a.push(l);const f=qo(this._engine.statesByElement,e,new Map);return f.has(t)||(xa(e,pC),xa(e,pC+"-"+t),f.set(t,gM)),()=>{this._engine.afterFlush(()=>{const y=a.indexOf(l);y>=0&&a.splice(y,1),this._triggers.has(t)||f.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function yV(n){return new m.vHH(3401,!1)}();return t}trigger(e,t,r,i=!0){const a=this._getTrigger(t),l=new mM(this.id,t,e);let f=this._engine.statesByElement.get(e);f||(xa(e,pC),xa(e,pC+"-"+t),this._engine.statesByElement.set(e,f=new Map));let y=f.get(t);const I=new pM(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&y&&I.absorbOptions(y.options),f.set(t,I),y||(y=gM),I.value!==Ew&&y.value===I.value){if(!function C2(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const a=t[i];if(!e.hasOwnProperty(a)||n[a]!==e[a])return!1}return!0}(y.params,I.params)){const oe=[],ce=a.matchStyles(y.value,y.params,oe),Le=a.matchStyles(I.value,I.params,oe);oe.length?this._engine.reportError(oe):this._engine.afterFlush(()=>{hm(e,ce),Ql(e,Le)})}return}const L=qo(this._engine.playersByElement,e,[]);L.forEach(oe=>{oe.namespaceId==this.id&&oe.triggerName==t&&oe.queued&&oe.destroy()});let U=a.matchTransition(y.value,I.value,e,I.params),W=!1;if(!U){if(!i)return;U=a.fallbackTransition,W=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:U,fromState:y,toState:I,player:l,isFallbackTransition:W}),W||(xa(e,yP),l.onStart(()=>{Cv(e,yP)})),l.onDone(()=>{let oe=this.players.indexOf(l);oe>=0&&this.players.splice(oe,1);const ce=this._engine.playersByElement.get(e);if(ce){let Le=ce.indexOf(l);Le>=0&&ce.splice(Le,1)}}),this.players.push(l),L.push(l),l}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,gC,!0);r.forEach(i=>{if(i[Ra])return;const a=this._engine.fetchNamespacesByElement(i);a.size?a.forEach(l=>l.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const a=this._engine.statesByElement.get(e),l=new Map;if(a){const f=[];if(a.forEach((y,I)=>{if(l.set(I,y.value),this._triggers.has(I)){const S=this.trigger(e,I,Ew,i);S&&f.push(S)}}),f.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,l),r&&kf(f).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(a=>{const l=a.name;if(i.has(l))return;i.add(l);const y=this._triggers.get(l).fallbackTransition,I=r.get(l)||gM,S=new pM(Ew),R=new mM(this.id,l,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:l,transition:y,fromState:I,toState:S,player:R,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const a=r.players.length?r.playersByQueriedElement.get(e):[];if(a&&a.length)i=!0;else{let l=e;for(;l=l.parentNode;)if(r.statesByElement.get(l)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const a=e[Ra];(!a||a===vP)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){xa(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const a=r.element,l=this._elementListeners.get(a);l&&l.forEach(f=>{if(f.name==r.triggerName){const y=QA(a,r.triggerName,r.fromState.value,r.toState.value);y._data=e,ZA(r.player,f.phase,y,f.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const a=r.transition.ast.depCount,l=i.transition.ast.depCount;return 0==a||0==l?a-l:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class v2{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,a)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new y2(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let l=!1,f=this.driver.getParentElement(t);for(;f;){const y=i.get(f);if(y){const I=r.indexOf(y);r.splice(I+1,0,e),l=!0;break}f=this.driver.getParentElement(f)}l||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const a=this._fetchNamespace(i.namespaceId);a&&t.add(a)}return t}trigger(e,t,r,i){if(SC(t)){const a=this._fetchNamespace(e);if(a)return a.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!SC(t))return;const a=t[Ra];if(a&&a.setForRemoval){a.setForRemoval=!1,a.setForMove=!0;const l=this.collectedLeaveElements.indexOf(t);l>=0&&this.collectedLeaveElements.splice(l,1)}if(e){const l=this._fetchNamespace(e);l&&l.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),xa(e,fM)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Cv(e,fM))}removeNode(e,t,r,i){if(SC(t)){const a=e?this._fetchNamespace(e):null;if(a?a.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const l=this.namespacesByHostElement.get(t);l&&l.id!==e&&l.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,a){this.collectedLeaveElements.push(t),t[Ra]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:a}}listen(e,t,r,i,a){return SC(t)?this._fetchNamespace(e).listen(t,r,i,a):()=>{}}_buildInstruction(e,t,r,i,a){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,a)}destroyInnerAnimations(e){let t=this.driver.query(e,gC,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,nM,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return kf(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Ra];if(t&&t.setForRemoval){if(e[Ra]=vP,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(fM)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)xa(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?kf(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function vV(n){return new m.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new DC,i=[],a=new Map,l=[],f=new Map,y=new Map,I=new Map,S=new Set;this.disabledNodes.forEach(wt=>{S.add(wt);const Pt=this.driver.query(wt,".ng-animate-queued",!0);for(let jt=0;jt<Pt.length;jt++)S.add(Pt[jt])});const R=this.bodyNode,L=Array.from(this.statesByElement.keys()),U=wP(L,this.collectedEnterElements),W=new Map;let oe=0;U.forEach((wt,Pt)=>{const jt=tM+oe++;W.set(Pt,jt),wt.forEach(mn=>xa(mn,jt))});const ce=[],Le=new Set,it=new Set;for(let wt=0;wt<this.collectedLeaveElements.length;wt++){const Pt=this.collectedLeaveElements[wt],jt=Pt[Ra];jt&&jt.setForRemoval&&(ce.push(Pt),Le.add(Pt),jt.hasAnimation?this.driver.query(Pt,".ng-star-inserted",!0).forEach(mn=>Le.add(mn)):it.add(Pt))}const ot=new Map,mt=wP(L,Array.from(Le));mt.forEach((wt,Pt)=>{const jt=fC+oe++;ot.set(Pt,jt),wt.forEach(mn=>xa(mn,jt))}),e.push(()=>{U.forEach((wt,Pt)=>{const jt=W.get(Pt);wt.forEach(mn=>Cv(mn,jt))}),mt.forEach((wt,Pt)=>{const jt=ot.get(Pt);wt.forEach(mn=>Cv(mn,jt))}),ce.forEach(wt=>{this.processLeaveNode(wt)})});const Zt=[],Yt=[];for(let wt=this._namespaceList.length-1;wt>=0;wt--)this._namespaceList[wt].drainQueuedTransitions(t).forEach(jt=>{const mn=jt.player,$i=jt.element;if(Zt.push(mn),this.collectedEnterElements.length){const ys=$i[Ra];if(ys&&ys.setForMove){if(ys.previousTriggersValues&&ys.previousTriggersValues.has(jt.triggerName)){const ym=ys.previousTriggersValues.get(jt.triggerName),Pa=this.statesByElement.get(jt.element);if(Pa&&Pa.has(jt.triggerName)){const UC=Pa.get(jt.triggerName);UC.value=ym,Pa.set(jt.triggerName,UC)}}return void mn.destroy()}}const Xl=!R||!this.driver.containsElement(R,$i),Ko=ot.get($i),Bf=W.get($i),Tr=this._buildInstruction(jt,r,Bf,Ko,Xl);if(Tr.errors&&Tr.errors.length)return void Yt.push(Tr);if(Xl)return mn.onStart(()=>hm($i,Tr.fromStyles)),mn.onDestroy(()=>Ql($i,Tr.toStyles)),void i.push(mn);if(jt.isFallbackTransition)return mn.onStart(()=>hm($i,Tr.fromStyles)),mn.onDestroy(()=>Ql($i,Tr.toStyles)),void i.push(mn);const LO=[];Tr.timelines.forEach(ys=>{ys.stretchStartingKeyframe=!0,this.disabledNodes.has(ys.element)||LO.push(ys)}),Tr.timelines=LO,r.append($i,Tr.timelines),l.push({instruction:Tr,player:mn,element:$i}),Tr.queriedElements.forEach(ys=>qo(f,ys,[]).push(mn)),Tr.preStyleProps.forEach((ys,ym)=>{if(ys.size){let Pa=y.get(ym);Pa||y.set(ym,Pa=new Set),ys.forEach((UC,BM)=>Pa.add(BM))}}),Tr.postStyleProps.forEach((ys,ym)=>{let Pa=I.get(ym);Pa||I.set(ym,Pa=new Set),ys.forEach((UC,BM)=>Pa.add(BM))})});if(Yt.length){const wt=[];Yt.forEach(Pt=>{wt.push(function _V(n,e){return new m.vHH(3505,!1)}())}),Zt.forEach(Pt=>Pt.destroy()),this.reportError(wt)}const Dn=new Map,Qi=new Map;l.forEach(wt=>{const Pt=wt.element;r.has(Pt)&&(Qi.set(Pt,Pt),this._beforeAnimationBuild(wt.player.namespaceId,wt.instruction,Dn))}),i.forEach(wt=>{const Pt=wt.element;this._getPreviousPlayers(Pt,!1,wt.namespaceId,wt.triggerName,null).forEach(mn=>{qo(Dn,Pt,[]).push(mn),mn.destroy()})});const Na=ce.filter(wt=>DP(wt,y,I)),zd=new Map;EP(zd,this.driver,it,I,$d).forEach(wt=>{DP(wt,y,I)&&Na.push(wt)});const bw=new Map;U.forEach((wt,Pt)=>{EP(bw,this.driver,new Set(wt),y,WA)}),Na.forEach(wt=>{const Pt=zd.get(wt),jt=bw.get(wt);zd.set(wt,new Map([...Array.from(Pt?.entries()??[]),...Array.from(jt?.entries()??[])]))});const mm=[],kO=[],FO={};l.forEach(wt=>{const{element:Pt,player:jt,instruction:mn}=wt;if(r.has(Pt)){if(S.has(Pt))return jt.onDestroy(()=>Ql(Pt,mn.toStyles)),jt.disabled=!0,jt.overrideTotalTime(mn.totalTime),void i.push(jt);let $i=FO;if(Qi.size>1){let Ko=Pt;const Bf=[];for(;Ko=Ko.parentNode;){const Tr=Qi.get(Ko);if(Tr){$i=Tr;break}Bf.push(Ko)}Bf.forEach(Tr=>Qi.set(Tr,$i))}const Xl=this._buildAnimation(jt.namespaceId,mn,Dn,a,bw,zd);if(jt.setRealPlayer(Xl),$i===FO)mm.push(jt);else{const Ko=this.playersByElement.get($i);Ko&&Ko.length&&(jt.parentPlayer=kf(Ko)),i.push(jt)}}else hm(Pt,mn.fromStyles),jt.onDestroy(()=>Ql(Pt,mn.toStyles)),kO.push(jt),S.has(Pt)&&i.push(jt)}),kO.forEach(wt=>{const Pt=a.get(wt.element);if(Pt&&Pt.length){const jt=kf(Pt);wt.setRealPlayer(jt)}}),i.forEach(wt=>{wt.parentPlayer?wt.syncPlayerEvents(wt.parentPlayer):wt.destroy()});for(let wt=0;wt<ce.length;wt++){const Pt=ce[wt],jt=Pt[Ra];if(Cv(Pt,fC),jt&&jt.hasAnimation)continue;let mn=[];if(f.size){let Xl=f.get(Pt);Xl&&Xl.length&&mn.push(...Xl);let Ko=this.driver.query(Pt,nM,!0);for(let Bf=0;Bf<Ko.length;Bf++){let Tr=f.get(Ko[Bf]);Tr&&Tr.length&&mn.push(...Tr)}}const $i=mn.filter(Xl=>!Xl.destroyed);$i.length?I2(this,Pt,$i):this.processLeaveNode(Pt)}return ce.length=0,mm.forEach(wt=>{this.players.push(wt),wt.onDone(()=>{wt.destroy();const Pt=this.players.indexOf(wt);this.players.splice(Pt,1)}),wt.play()}),mm}elementContainsData(e,t){let r=!1;const i=t[Ra];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,a){let l=[];if(t){const f=this.playersByQueriedElement.get(e);f&&(l=f)}else{const f=this.playersByElement.get(e);if(f){const y=!a||a==Ew;f.forEach(I=>{I.queued||!y&&I.triggerName!=i||l.push(I)})}}return(r||i)&&(l=l.filter(f=>!(r&&r!=f.namespaceId||i&&i!=f.triggerName))),l}_beforeAnimationBuild(e,t,r){const a=t.element,l=t.isRemovalTransition?void 0:e,f=t.isRemovalTransition?void 0:t.triggerName;for(const y of t.timelines){const I=y.element,S=I!==a,R=qo(r,I,[]);this._getPreviousPlayers(I,S,l,f,t.toState).forEach(U=>{const W=U.getRealPlayer();W.beforeDestroy&&W.beforeDestroy(),U.destroy(),R.push(U)})}hm(a,t.fromStyles)}_buildAnimation(e,t,r,i,a,l){const f=t.triggerName,y=t.element,I=[],S=new Set,R=new Set,L=t.timelines.map(W=>{const oe=W.element;S.add(oe);const ce=oe[Ra];if(ce&&ce.removedBeforeQueried)return new mw(W.duration,W.delay);const Le=oe!==y,it=function D2(n){const e=[];return IP(n,e),e}((r.get(oe)||g2).map(Dn=>Dn.getRealPlayer())).filter(Dn=>!!Dn.element&&Dn.element===oe),ot=a.get(oe),mt=l.get(oe),Zt=KN(0,this._normalizer,0,W.keyframes,ot,mt),Yt=this._buildPlayer(W,Zt,it);if(W.subTimeline&&i&&R.add(oe),Le){const Dn=new mM(e,f,oe);Dn.setRealPlayer(Yt),I.push(Dn)}return Yt});I.forEach(W=>{qo(this.playersByQueriedElement,W.element,[]).push(W),W.onDone(()=>function _2(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,W.element,W))}),S.forEach(W=>xa(W,rP));const U=kf(L);return U.onDestroy(()=>{S.forEach(W=>Cv(W,rP)),Ql(y,t.toStyles)}),R.forEach(W=>{qo(i,W,[]).push(U)}),U}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new mw(e.duration,e.delay)}}class mM{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new mw,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>ZA(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){qo(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function SC(n){return n&&1===n.nodeType}function _P(n,e){const t=n.style.display;return n.style.display=e??"none",t}function EP(n,e,t,r,i){const a=[];t.forEach(y=>a.push(_P(y)));const l=[];r.forEach((y,I)=>{const S=new Map;y.forEach(R=>{const L=e.computeStyle(I,R,i);S.set(R,L),(!L||0==L.length)&&(I[Ra]=m2,l.push(I))}),n.set(I,S)});let f=0;return t.forEach(y=>_P(y,a[f++])),l}function wP(n,e){const t=new Map;if(n.forEach(f=>t.set(f,[])),0==e.length)return t;const r=1,i=new Set(e),a=new Map;function l(f){if(!f)return r;let y=a.get(f);if(y)return y;const I=f.parentNode;return y=t.has(I)?I:i.has(I)?r:l(I),a.set(f,y),y}return e.forEach(f=>{const y=l(f);y!==r&&t.get(y).push(f)}),t}function xa(n,e){n.classList?.add(e)}function Cv(n,e){n.classList?.remove(e)}function I2(n,e,t){kf(t).onDone(()=>n.processLeaveNode(e))}function IP(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof qN?IP(r.players,e):e.push(r)}}function DP(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(a=>i.add(a)):e.set(n,r),t.delete(n),!0}class TC{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,a)=>{},this._transitionEngine=new v2(e,t,r),this._timelineEngine=new c2(e,t,r),this._transitionEngine.onRemovalComplete=(i,a)=>this.onRemovalComplete(i,a)}registerTrigger(e,t,r,i,a){const l=e+"-"+i;let f=this._triggerCache[l];if(!f){const y=[],I=[],S=oM(this._driver,a,y,I);if(y.length)throw function uV(n,e){return new m.vHH(3404,!1)}();f=function o2(n,e,t){return new a2(n,e,t)}(i,S,this._normalizer),this._triggerCache[l]=f}this._transitionEngine.registerTrigger(t,i,f)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[a,l]=ZN(r);this._timelineEngine.command(a,t,l,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,a){if("@"==r.charAt(0)){const[l,f]=ZN(r);return this._timelineEngine.listen(l,t,f,a)}return this._transitionEngine.listen(e,t,r,i,a)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let S2=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let a=n.initialStylesByElement.get(t);a||n.initialStylesByElement.set(t,a=new Map),this._initialStyles=a}start(){this._state<1&&(this._startStyles&&Ql(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ql(this._element,this._initialStyles),this._endStyles&&(Ql(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(hm(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(hm(this._element,this._endStyles),this._endStyles=null),Ql(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function yM(n){let e=null;return n.forEach((t,r)=>{(function T2(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class CP{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:lP(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class A2{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return XN(e,t)}getParentElement(e){return XA(e)}query(e,t,r){return eP(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,a,l=[]){const y={duration:r,delay:i,fill:0==i?"both":"forwards"};a&&(y.easing=a);const I=new Map,S=l.filter(U=>U instanceof CP);(function NV(n,e){return 0===n||0===e})(r,i)&&S.forEach(U=>{U.currentSnapshot.forEach((W,oe)=>I.set(oe,W))});let R=function AV(n){return n.length?n[0]instanceof Map?n:n.map(e=>iP(e)):[]}(t).map(U=>Ff(U));R=function PV(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((a,l)=>{r.has(l)||i.push(l),r.set(l,a)}),i.length)for(let a=1;a<e.length;a++){let l=e[a];i.forEach(f=>l.set(f,lP(n,f)))}}return e}(e,R,I);const L=function b2(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=yM(e[0]),e.length>1&&(r=yM(e[e.length-1]))):e instanceof Map&&(t=yM(e)),t||r?new S2(n,t,r):null}(e,R);return new CP(e,R,y,L)}}let M2=(()=>{class n extends $N{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:m.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?HN(t):t;return bP(this._renderer,null,r,"register",[i]),new R2(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.FYo),m.LFG(ne))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class R2 extends BL{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new x2(this._id,e,t||{},this._renderer)}}class x2{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return bP(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function bP(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const SP="@.disabled";let N2=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(a,l)=>{const f=l?.parentNode(a);f&&l.removeChild(f,a)}}createRenderer(t,r){const a=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let S=this._rendererCache.get(a);return S||(S=new TP("",a,this.engine,()=>this._rendererCache.delete(a)),this._rendererCache.set(a,S)),S}const l=r.id,f=r.id+"-"+this._currentId;this._currentId++,this.engine.register(f,t);const y=S=>{Array.isArray(S)?S.forEach(y):this.engine.registerTrigger(l,f,t,S.name,S)};return r.data.animation.forEach(y),new P2(this,f,a,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(a=>{const[l,f]=a;l(f)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.FYo),m.LFG(TC),m.LFG(m.R0b))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class TP{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.destroyNode=this.delegate.destroyNode?a=>t.destroyNode(a):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==SP?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class P2 extends TP{constructor(e,t,r,i,a){super(t,r,i,a),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==SP?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function O2(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let a=t.slice(1),l="";return"@"!=a.charAt(0)&&([a,l]=function k2(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(a)),this.engine.listen(this.namespaceId,i,a,l,f=>{this.factory.scheduleListenerCallback(f._data||-1,r,f)})}return this.delegate.listen(e,t,r)}}let F2=(()=>{class n extends TC{constructor(t,r,i,a){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ne),m.LFG(eM),m.LFG(dM),m.LFG(m.z2F))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const AP=[{provide:$N,useClass:M2},{provide:dM,useFactory:function L2(){return new n2}},{provide:TC,useClass:F2},{provide:m.FYo,useFactory:function V2(n,e,t){return new N2(n,e,t)},deps:[wc,TC,m.R0b]}],vM=[{provide:eM,useFactory:()=>new A2},{provide:m.QbO,useValue:"BrowserAnimations"},...AP],MP=[{provide:eM,useClass:tP},{provide:m.QbO,useValue:"NoopAnimations"},...AP];let U2=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?MP:vM}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:vM,imports:[To]}),n})();const Sv=new m.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>OC}),OC="always";let mO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})(),jU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[mO]}),n})(),HU=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Sv,useValue:t.callSetDisabledState??OC}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[jU]}),n})();const zU_firebaseConfig={apiKey:"AIzaSyCJSPXAQ__ObcdmqMBBP8x18-Uh04CoyHw",authDomain:"notes-a310c.firebaseapp.com",projectId:"notes-a310c",storageBucket:"notes-a310c.appspot.com",messagingSenderId:"575926519578",appId:"1:575926519578:web:6055e5ae8d0f411a0bcea3"};let GU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n,bootstrap:[gL]}),n.\u0275inj=m.cJS({imports:[To,u_,UL,U2,HU,Rs.hO.initializeApp(zU_firebaseConfig),dL]}),n})();Xa().bootstrapModule(GU).catch(n=>console.error(n))},9751:(It,Se,k)=>{k.d(Se,{y:()=>_e});var m=k(2961),J=k(727),O=k(8822),ie=k(9635),se=k(2416),ne=k(576),ge=k(2806);let _e=(()=>{class K{constructor(Ce){Ce&&(this._subscribe=Ce)}lift(Ce){const qe=new K;return qe.source=this,qe.operator=Ce,qe}subscribe(Ce,qe,pt){const fe=function $(K){return K&&K instanceof m.Lv||function z(K){return K&&(0,ne.m)(K.next)&&(0,ne.m)(K.error)&&(0,ne.m)(K.complete)}(K)&&(0,J.Nn)(K)}(Ce)?Ce:new m.Hp(Ce,qe,pt);return(0,ge.x)(()=>{const{operator:xe,source:Ne}=this;fe.add(xe?xe.call(fe,Ne):Ne?this._subscribe(fe):this._trySubscribe(fe))}),fe}_trySubscribe(Ce){try{return this._subscribe(Ce)}catch(qe){Ce.error(qe)}}forEach(Ce,qe){return new(qe=de(qe))((pt,fe)=>{const xe=new m.Hp({next:Ne=>{try{Ce(Ne)}catch(Be){fe(Be),xe.unsubscribe()}},error:fe,complete:pt});this.subscribe(xe)})}_subscribe(Ce){var qe;return null===(qe=this.source)||void 0===qe?void 0:qe.subscribe(Ce)}[O.L](){return this}pipe(...Ce){return(0,ie.U)(Ce)(this)}toPromise(Ce){return new(Ce=de(Ce))((qe,pt)=>{let fe;this.subscribe(xe=>fe=xe,xe=>pt(xe),()=>qe(fe))})}}return K.create=He=>new K(He),K})();function de(K){var He;return null!==(He=K??se.v.Promise)&&void 0!==He?He:Promise}},7579:(It,Se,k)=>{k.d(Se,{x:()=>ge});var m=k(9751),J=k(727);const ie=(0,k(3888).d)(de=>function(){de(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var se=k(8737),ne=k(2806);let ge=(()=>{class de extends m.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift($){const K=new _e(this,this);return K.operator=$,K}_throwIfClosed(){if(this.closed)throw new ie}next($){(0,ne.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const K of this.currentObservers)K.next($)}})}error($){(0,ne.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=$;const{observers:K}=this;for(;K.length;)K.shift().error($)}})}complete(){(0,ne.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:$}=this;for(;$.length;)$.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var $;return(null===($=this.observers)||void 0===$?void 0:$.length)>0}_trySubscribe($){return this._throwIfClosed(),super._trySubscribe($)}_subscribe($){return this._throwIfClosed(),this._checkFinalizedStatuses($),this._innerSubscribe($)}_innerSubscribe($){const{hasError:K,isStopped:He,observers:Ce}=this;return K||He?J.Lc:(this.currentObservers=null,Ce.push($),new J.w0(()=>{this.currentObservers=null,(0,se.P)(Ce,$)}))}_checkFinalizedStatuses($){const{hasError:K,thrownError:He,isStopped:Ce}=this;K?$.error(He):Ce&&$.complete()}asObservable(){const $=new m.y;return $.source=this,$}}return de.create=(z,$)=>new _e(z,$),de})();class _e extends ge{constructor(z,$){super(),this.destination=z,this.source=$}next(z){var $,K;null===(K=null===($=this.destination)||void 0===$?void 0:$.next)||void 0===K||K.call($,z)}error(z){var $,K;null===(K=null===($=this.destination)||void 0===$?void 0:$.error)||void 0===K||K.call($,z)}complete(){var z,$;null===($=null===(z=this.destination)||void 0===z?void 0:z.complete)||void 0===$||$.call(z)}_subscribe(z){var $,K;return null!==(K=null===($=this.source)||void 0===$?void 0:$.subscribe(z))&&void 0!==K?K:J.Lc}}},2961:(It,Se,k)=>{k.d(Se,{Hp:()=>pt,Lv:()=>K});var m=k(576),J=k(727),O=k(2416),ie=k(7849);function se(){}const ne=de("C",void 0,void 0);function de(Pe,Ee,we){return{kind:Pe,value:Ee,error:we}}var z=k(3410),$=k(2806);class K extends J.w0{constructor(Ee){super(),this.isStopped=!1,Ee?(this.destination=Ee,(0,J.Nn)(Ee)&&Ee.add(this)):this.destination=Be}static create(Ee,we,ze){return new pt(Ee,we,ze)}next(Ee){this.isStopped?Ne(function _e(Pe){return de("N",Pe,void 0)}(Ee),this):this._next(Ee)}error(Ee){this.isStopped?Ne(function ge(Pe){return de("E",void 0,Pe)}(Ee),this):(this.isStopped=!0,this._error(Ee))}complete(){this.isStopped?Ne(ne,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ee){this.destination.next(Ee)}_error(Ee){try{this.destination.error(Ee)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const He=Function.prototype.bind;function Ce(Pe,Ee){return He.call(Pe,Ee)}class qe{constructor(Ee){this.partialObserver=Ee}next(Ee){const{partialObserver:we}=this;if(we.next)try{we.next(Ee)}catch(ze){fe(ze)}}error(Ee){const{partialObserver:we}=this;if(we.error)try{we.error(Ee)}catch(ze){fe(ze)}else fe(Ee)}complete(){const{partialObserver:Ee}=this;if(Ee.complete)try{Ee.complete()}catch(we){fe(we)}}}class pt extends K{constructor(Ee,we,ze){let Oe;if(super(),(0,m.m)(Ee)||!Ee)Oe={next:Ee??void 0,error:we??void 0,complete:ze??void 0};else{let at;this&&O.v.useDeprecatedNextContext?(at=Object.create(Ee),at.unsubscribe=()=>this.unsubscribe(),Oe={next:Ee.next&&Ce(Ee.next,at),error:Ee.error&&Ce(Ee.error,at),complete:Ee.complete&&Ce(Ee.complete,at)}):Oe=Ee}this.destination=new qe(Oe)}}function fe(Pe){O.v.useDeprecatedSynchronousErrorHandling?(0,$.O)(Pe):(0,ie.h)(Pe)}function Ne(Pe,Ee){const{onStoppedNotification:we}=O.v;we&&z.z.setTimeout(()=>we(Pe,Ee))}const Be={closed:!0,next:se,error:function xe(Pe){throw Pe},complete:se}},727:(It,Se,k)=>{k.d(Se,{Lc:()=>ne,w0:()=>se,Nn:()=>ge});var m=k(576);const O=(0,k(3888).d)(de=>function($){de(this),this.message=$?`${$.length} errors occurred during unsubscription:\n${$.map((K,He)=>`${He+1}) ${K.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=$});var ie=k(8737);class se{constructor(z){this.initialTeardown=z,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let z;if(!this.closed){this.closed=!0;const{_parentage:$}=this;if($)if(this._parentage=null,Array.isArray($))for(const Ce of $)Ce.remove(this);else $.remove(this);const{initialTeardown:K}=this;if((0,m.m)(K))try{K()}catch(Ce){z=Ce instanceof O?Ce.errors:[Ce]}const{_finalizers:He}=this;if(He){this._finalizers=null;for(const Ce of He)try{_e(Ce)}catch(qe){z=z??[],qe instanceof O?z=[...z,...qe.errors]:z.push(qe)}}if(z)throw new O(z)}}add(z){var $;if(z&&z!==this)if(this.closed)_e(z);else{if(z instanceof se){if(z.closed||z._hasParent(this))return;z._addParent(this)}(this._finalizers=null!==($=this._finalizers)&&void 0!==$?$:[]).push(z)}}_hasParent(z){const{_parentage:$}=this;return $===z||Array.isArray($)&&$.includes(z)}_addParent(z){const{_parentage:$}=this;this._parentage=Array.isArray($)?($.push(z),$):$?[$,z]:z}_removeParent(z){const{_parentage:$}=this;$===z?this._parentage=null:Array.isArray($)&&(0,ie.P)($,z)}remove(z){const{_finalizers:$}=this;$&&(0,ie.P)($,z),z instanceof se&&z._removeParent(this)}}se.EMPTY=(()=>{const de=new se;return de.closed=!0,de})();const ne=se.EMPTY;function ge(de){return de instanceof se||de&&"closed"in de&&(0,m.m)(de.remove)&&(0,m.m)(de.add)&&(0,m.m)(de.unsubscribe)}function _e(de){(0,m.m)(de)?de():de.unsubscribe()}},2416:(It,Se,k)=>{k.d(Se,{v:()=>m});const m={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(It,Se,k)=>{k.d(Se,{E:()=>J});const J=new(k(9751).y)(se=>se.complete())},8996:(It,Se,k)=>{k.d(Se,{D:()=>Ee});var m=k(8421),J=k(5363),O=k(9468),ne=k(9751),_e=k(2202),de=k(576),z=k(9672);function K(we,ze){if(!we)throw new Error("Iterable cannot be null");return new ne.y(Oe=>{(0,z.f)(Oe,ze,()=>{const at=we[Symbol.asyncIterator]();(0,z.f)(Oe,ze,()=>{at.next().then(re=>{re.done?Oe.complete():Oe.next(re.value)})},0,!0)})})}var He=k(3670),Ce=k(8239),qe=k(1144),pt=k(6495),fe=k(2206),xe=k(4532),Ne=k(3260);function Ee(we,ze){return ze?function Pe(we,ze){if(null!=we){if((0,He.c)(we))return function ie(we,ze){return(0,m.Xf)(we).pipe((0,O.R)(ze),(0,J.Q)(ze))}(we,ze);if((0,qe.z)(we))return function ge(we,ze){return new ne.y(Oe=>{let at=0;return ze.schedule(function(){at===we.length?Oe.complete():(Oe.next(we[at++]),Oe.closed||this.schedule())})})}(we,ze);if((0,Ce.t)(we))return function se(we,ze){return(0,m.Xf)(we).pipe((0,O.R)(ze),(0,J.Q)(ze))}(we,ze);if((0,fe.D)(we))return K(we,ze);if((0,pt.T)(we))return function $(we,ze){return new ne.y(Oe=>{let at;return(0,z.f)(Oe,ze,()=>{at=we[_e.h](),(0,z.f)(Oe,ze,()=>{let re,At;try{({value:re,done:At}=at.next())}catch(nt){return void Oe.error(nt)}At?Oe.complete():Oe.next(re)},0,!0)}),()=>(0,de.m)(at?.return)&&at.return()})}(we,ze);if((0,Ne.L)(we))return function Be(we,ze){return K((0,Ne.Q)(we),ze)}(we,ze)}throw(0,xe.z)(we)}(we,ze):(0,m.Xf)(we)}},8421:(It,Se,k)=>{k.d(Se,{Xf:()=>He});var m=k(655),J=k(1144),O=k(8239),ie=k(9751),se=k(3670),ne=k(2206),ge=k(4532),_e=k(6495),de=k(3260),z=k(576),$=k(7849),K=k(8822);function He(Pe){if(Pe instanceof ie.y)return Pe;if(null!=Pe){if((0,se.c)(Pe))return function Ce(Pe){return new ie.y(Ee=>{const we=Pe[K.L]();if((0,z.m)(we.subscribe))return we.subscribe(Ee);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Pe);if((0,J.z)(Pe))return function qe(Pe){return new ie.y(Ee=>{for(let we=0;we<Pe.length&&!Ee.closed;we++)Ee.next(Pe[we]);Ee.complete()})}(Pe);if((0,O.t)(Pe))return function pt(Pe){return new ie.y(Ee=>{Pe.then(we=>{Ee.closed||(Ee.next(we),Ee.complete())},we=>Ee.error(we)).then(null,$.h)})}(Pe);if((0,ne.D)(Pe))return xe(Pe);if((0,_e.T)(Pe))return function fe(Pe){return new ie.y(Ee=>{for(const we of Pe)if(Ee.next(we),Ee.closed)return;Ee.complete()})}(Pe);if((0,de.L)(Pe))return function Ne(Pe){return xe((0,de.Q)(Pe))}(Pe)}throw(0,ge.z)(Pe)}function xe(Pe){return new ie.y(Ee=>{(function Be(Pe,Ee){var we,ze,Oe,at;return(0,m.mG)(this,void 0,void 0,function*(){try{for(we=(0,m.KL)(Pe);!(ze=yield we.next()).done;)if(Ee.next(ze.value),Ee.closed)return}catch(re){Oe={error:re}}finally{try{ze&&!ze.done&&(at=we.return)&&(yield at.call(we))}finally{if(Oe)throw Oe.error}}Ee.complete()})})(Pe,Ee).catch(we=>Ee.error(we))})}},6451:(It,Se,k)=>{k.d(Se,{T:()=>ne});var m=k(8189),J=k(8421),O=k(515),ie=k(7669),se=k(8996);function ne(...ge){const _e=(0,ie.yG)(ge),de=(0,ie._6)(ge,1/0),z=ge;return z.length?1===z.length?(0,J.Xf)(z[0]):(0,m.J)(de)((0,se.D)(z,_e)):O.E}},5403:(It,Se,k)=>{k.d(Se,{x:()=>J});var m=k(2961);function J(ie,se,ne,ge,_e){return new O(ie,se,ne,ge,_e)}class O extends m.Lv{constructor(se,ne,ge,_e,de,z){super(se),this.onFinalize=de,this.shouldUnsubscribe=z,this._next=ne?function($){try{ne($)}catch(K){se.error(K)}}:super._next,this._error=_e?function($){try{_e($)}catch(K){se.error(K)}finally{this.unsubscribe()}}:super._error,this._complete=ge?function(){try{ge()}catch($){se.error($)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var se;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ne}=this;super.unsubscribe(),!ne&&(null===(se=this.onFinalize)||void 0===se||se.call(this))}}}},4004:(It,Se,k)=>{k.d(Se,{U:()=>O});var m=k(4482),J=k(5403);function O(ie,se){return(0,m.e)((ne,ge)=>{let _e=0;ne.subscribe((0,J.x)(ge,de=>{ge.next(ie.call(se,de,_e++))}))})}},8189:(It,Se,k)=>{k.d(Se,{J:()=>O});var m=k(5577),J=k(4671);function O(ie=1/0){return(0,m.z)(J.y,ie)}},5577:(It,Se,k)=>{k.d(Se,{z:()=>_e});var m=k(4004),J=k(8421),O=k(4482),ie=k(9672),se=k(5403),ge=k(576);function _e(de,z,$=1/0){return(0,ge.m)(z)?_e((K,He)=>(0,m.U)((Ce,qe)=>z(K,Ce,He,qe))((0,J.Xf)(de(K,He))),$):("number"==typeof z&&($=z),(0,O.e)((K,He)=>function ne(de,z,$,K,He,Ce,qe,pt){const fe=[];let xe=0,Ne=0,Be=!1;const Pe=()=>{Be&&!fe.length&&!xe&&z.complete()},Ee=ze=>xe<K?we(ze):fe.push(ze),we=ze=>{Ce&&z.next(ze),xe++;let Oe=!1;(0,J.Xf)($(ze,Ne++)).subscribe((0,se.x)(z,at=>{He?.(at),Ce?Ee(at):z.next(at)},()=>{Oe=!0},void 0,()=>{if(Oe)try{for(xe--;fe.length&&xe<K;){const at=fe.shift();qe?(0,ie.f)(z,qe,()=>we(at)):we(at)}Pe()}catch(at){z.error(at)}}))};return de.subscribe((0,se.x)(z,Ee,()=>{Be=!0,Pe()})),()=>{pt?.()}}(K,He,de,$)))}},5363:(It,Se,k)=>{k.d(Se,{Q:()=>ie});var m=k(9672),J=k(4482),O=k(5403);function ie(se,ne=0){return(0,J.e)((ge,_e)=>{ge.subscribe((0,O.x)(_e,de=>(0,m.f)(_e,se,()=>_e.next(de),ne),()=>(0,m.f)(_e,se,()=>_e.complete(),ne),de=>(0,m.f)(_e,se,()=>_e.error(de),ne)))})}},3099:(It,Se,k)=>{k.d(Se,{B:()=>se});var m=k(8421),J=k(7579),O=k(2961),ie=k(4482);function se(ge={}){const{connector:_e=(()=>new J.x),resetOnError:de=!0,resetOnComplete:z=!0,resetOnRefCountZero:$=!0}=ge;return K=>{let He,Ce,qe,pt=0,fe=!1,xe=!1;const Ne=()=>{Ce?.unsubscribe(),Ce=void 0},Be=()=>{Ne(),He=qe=void 0,fe=xe=!1},Pe=()=>{const Ee=He;Be(),Ee?.unsubscribe()};return(0,ie.e)((Ee,we)=>{pt++,!xe&&!fe&&Ne();const ze=qe=qe??_e();we.add(()=>{pt--,0===pt&&!xe&&!fe&&(Ce=ne(Pe,$))}),ze.subscribe(we),!He&&pt>0&&(He=new O.Hp({next:Oe=>ze.next(Oe),error:Oe=>{xe=!0,Ne(),Ce=ne(Be,de,Oe),ze.error(Oe)},complete:()=>{fe=!0,Ne(),Ce=ne(Be,z),ze.complete()}}),(0,m.Xf)(Ee).subscribe(He))})(K)}}function ne(ge,_e,...de){if(!0===_e)return void ge();if(!1===_e)return;const z=new O.Hp({next:()=>{z.unsubscribe(),ge()}});return _e(...de).subscribe(z)}},9468:(It,Se,k)=>{k.d(Se,{R:()=>J});var m=k(4482);function J(O,ie=0){return(0,m.e)((se,ne)=>{ne.add(O.schedule(()=>se.subscribe(ne),ie))})}},8505:(It,Se,k)=>{k.d(Se,{b:()=>se});var m=k(576),J=k(4482),O=k(5403),ie=k(4671);function se(ne,ge,_e){const de=(0,m.m)(ne)||ge||_e?{next:ne,error:ge,complete:_e}:ne;return de?(0,J.e)((z,$)=>{var K;null===(K=de.subscribe)||void 0===K||K.call(de);let He=!0;z.subscribe((0,O.x)($,Ce=>{var qe;null===(qe=de.next)||void 0===qe||qe.call(de,Ce),$.next(Ce)},()=>{var Ce;He=!1,null===(Ce=de.complete)||void 0===Ce||Ce.call(de),$.complete()},Ce=>{var qe;He=!1,null===(qe=de.error)||void 0===qe||qe.call(de,Ce),$.error(Ce)},()=>{var Ce,qe;He&&(null===(Ce=de.unsubscribe)||void 0===Ce||Ce.call(de)),null===(qe=de.finalize)||void 0===qe||qe.call(de)}))}):ie.y}},4408:(It,Se,k)=>{k.d(Se,{o:()=>se});var m=k(727);class J extends m.w0{constructor(ge,_e){super()}schedule(ge,_e=0){return this}}const O={setInterval(ne,ge,..._e){const{delegate:de}=O;return de?.setInterval?de.setInterval(ne,ge,..._e):setInterval(ne,ge,..._e)},clearInterval(ne){const{delegate:ge}=O;return(ge?.clearInterval||clearInterval)(ne)},delegate:void 0};var ie=k(8737);class se extends J{constructor(ge,_e){super(ge,_e),this.scheduler=ge,this.work=_e,this.pending=!1}schedule(ge,_e=0){var de;if(this.closed)return this;this.state=ge;const z=this.id,$=this.scheduler;return null!=z&&(this.id=this.recycleAsyncId($,z,_e)),this.pending=!0,this.delay=_e,this.id=null!==(de=this.id)&&void 0!==de?de:this.requestAsyncId($,this.id,_e),this}requestAsyncId(ge,_e,de=0){return O.setInterval(ge.flush.bind(ge,this),de)}recycleAsyncId(ge,_e,de=0){if(null!=de&&this.delay===de&&!1===this.pending)return _e;null!=_e&&O.clearInterval(_e)}execute(ge,_e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const de=this._execute(ge,_e);if(de)return de;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ge,_e){let z,de=!1;try{this.work(ge)}catch($){de=!0,z=$||new Error("Scheduled action threw falsy error")}if(de)return this.unsubscribe(),z}unsubscribe(){if(!this.closed){const{id:ge,scheduler:_e}=this,{actions:de}=_e;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ie.P)(de,this),null!=ge&&(this.id=this.recycleAsyncId(_e,ge,null)),this.delay=null,super.unsubscribe()}}}},7565:(It,Se,k)=>{k.d(Se,{v:()=>O});var m=k(6063);class J{constructor(se,ne=J.now){this.schedulerActionCtor=se,this.now=ne}schedule(se,ne=0,ge){return new this.schedulerActionCtor(this,se).schedule(ge,ne)}}J.now=m.l.now;class O extends J{constructor(se,ne=J.now){super(se,ne),this.actions=[],this._active=!1}flush(se){const{actions:ne}=this;if(this._active)return void ne.push(se);let ge;this._active=!0;do{if(ge=se.execute(se.state,se.delay))break}while(se=ne.shift());if(this._active=!1,ge){for(;se=ne.shift();)se.unsubscribe();throw ge}}}},4986:(It,Se,k)=>{k.d(Se,{z:()=>O});var m=k(4408);const O=new(k(7565).v)(m.o)},6063:(It,Se,k)=>{k.d(Se,{l:()=>m});const m={now:()=>(m.delegate||Date).now(),delegate:void 0}},3410:(It,Se,k)=>{k.d(Se,{z:()=>m});const m={setTimeout(J,O,...ie){const{delegate:se}=m;return se?.setTimeout?se.setTimeout(J,O,...ie):setTimeout(J,O,...ie)},clearTimeout(J){const{delegate:O}=m;return(O?.clearTimeout||clearTimeout)(J)},delegate:void 0}},2202:(It,Se,k)=>{k.d(Se,{h:()=>J});const J=function m(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(It,Se,k)=>{k.d(Se,{L:()=>m});const m="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(It,Se,k)=>{k.d(Se,{_6:()=>ne,jO:()=>ie,yG:()=>se});var m=k(576);function O(ge){return ge[ge.length-1]}function ie(ge){return(0,m.m)(O(ge))?ge.pop():void 0}function se(ge){return function J(ge){return ge&&(0,m.m)(ge.schedule)}(O(ge))?ge.pop():void 0}function ne(ge,_e){return"number"==typeof O(ge)?ge.pop():_e}},8737:(It,Se,k)=>{function m(J,O){if(J){const ie=J.indexOf(O);0<=ie&&J.splice(ie,1)}}k.d(Se,{P:()=>m})},3888:(It,Se,k)=>{function m(J){const ie=J(se=>{Error.call(se),se.stack=(new Error).stack});return ie.prototype=Object.create(Error.prototype),ie.prototype.constructor=ie,ie}k.d(Se,{d:()=>m})},2806:(It,Se,k)=>{k.d(Se,{O:()=>ie,x:()=>O});var m=k(2416);let J=null;function O(se){if(m.v.useDeprecatedSynchronousErrorHandling){const ne=!J;if(ne&&(J={errorThrown:!1,error:null}),se(),ne){const{errorThrown:ge,error:_e}=J;if(J=null,ge)throw _e}}else se()}function ie(se){m.v.useDeprecatedSynchronousErrorHandling&&J&&(J.errorThrown=!0,J.error=se)}},9672:(It,Se,k)=>{function m(J,O,ie,se=0,ne=!1){const ge=O.schedule(function(){ie(),ne?J.add(this.schedule(null,se)):this.unsubscribe()},se);if(J.add(ge),!ne)return ge}k.d(Se,{f:()=>m})},4671:(It,Se,k)=>{function m(J){return J}k.d(Se,{y:()=>m})},1144:(It,Se,k)=>{k.d(Se,{z:()=>m});const m=J=>J&&"number"==typeof J.length&&"function"!=typeof J},2206:(It,Se,k)=>{k.d(Se,{D:()=>J});var m=k(576);function J(O){return Symbol.asyncIterator&&(0,m.m)(O?.[Symbol.asyncIterator])}},576:(It,Se,k)=>{function m(J){return"function"==typeof J}k.d(Se,{m:()=>m})},3670:(It,Se,k)=>{k.d(Se,{c:()=>O});var m=k(8822),J=k(576);function O(ie){return(0,J.m)(ie[m.L])}},6495:(It,Se,k)=>{k.d(Se,{T:()=>O});var m=k(2202),J=k(576);function O(ie){return(0,J.m)(ie?.[m.h])}},8239:(It,Se,k)=>{k.d(Se,{t:()=>J});var m=k(576);function J(O){return(0,m.m)(O?.then)}},3260:(It,Se,k)=>{k.d(Se,{L:()=>ie,Q:()=>O});var m=k(655),J=k(576);function O(se){return(0,m.FC)(this,arguments,function*(){const ge=se.getReader();try{for(;;){const{value:_e,done:de}=yield(0,m.qq)(ge.read());if(de)return yield(0,m.qq)(void 0);yield yield(0,m.qq)(_e)}}finally{ge.releaseLock()}})}function ie(se){return(0,J.m)(se?.getReader)}},4482:(It,Se,k)=>{k.d(Se,{A:()=>J,e:()=>O});var m=k(576);function J(ie){return(0,m.m)(ie?.lift)}function O(ie){return se=>{if(J(se))return se.lift(function(ne){try{return ie(ne,this)}catch(ge){this.error(ge)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(It,Se,k)=>{k.d(Se,{U:()=>O,z:()=>J});var m=k(4671);function J(...ie){return O(ie)}function O(ie){return 0===ie.length?m.y:1===ie.length?ie[0]:function(ne){return ie.reduce((ge,_e)=>_e(ge),ne)}}},7849:(It,Se,k)=>{k.d(Se,{h:()=>O});var m=k(2416),J=k(3410);function O(ie){J.z.setTimeout(()=>{const{onUnhandledError:se}=m.v;if(!se)throw ie;se(ie)})}},4532:(It,Se,k)=>{function m(J){return new TypeError(`You provided ${null!==J&&"object"==typeof J?"an invalid object":`'${J}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(Se,{z:()=>m})},655:(It,Se,k)=>{function ie(he,pe){var De={};for(var Te in he)Object.prototype.hasOwnProperty.call(he,Te)&&pe.indexOf(Te)<0&&(De[Te]=he[Te]);if(null!=he&&"function"==typeof Object.getOwnPropertySymbols){var Ge=0;for(Te=Object.getOwnPropertySymbols(he);Ge<Te.length;Ge++)pe.indexOf(Te[Ge])<0&&Object.prototype.propertyIsEnumerable.call(he,Te[Ge])&&(De[Te[Ge]]=he[Te[Ge]])}return De}function K(he,pe,De,Te){return new(De||(De=Promise))(function(je,gt){function ft(Qt){try{Je(Te.next(Qt))}catch(St){gt(St)}}function Lt(Qt){try{Je(Te.throw(Qt))}catch(St){gt(St)}}function Je(Qt){Qt.done?je(Qt.value):function Ge(je){return je instanceof De?je:new De(function(gt){gt(je)})}(Qt.value).then(ft,Lt)}Je((Te=Te.apply(he,pe||[])).next())})}function Pe(he){return this instanceof Pe?(this.v=he,this):new Pe(he)}function Ee(he,pe,De){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ge,Te=De.apply(he,pe||[]),je=[];return Ge={},gt("next"),gt("throw"),gt("return"),Ge[Symbol.asyncIterator]=function(){return this},Ge;function gt(un){Te[un]&&(Ge[un]=function(yn){return new Promise(function(Rn,Ur){je.push([un,yn,Rn,Ur])>1||ft(un,yn)})})}function ft(un,yn){try{!function Lt(un){un.value instanceof Pe?Promise.resolve(un.value.v).then(Je,Qt):St(je[0][2],un)}(Te[un](yn))}catch(Rn){St(je[0][3],Rn)}}function Je(un){ft("next",un)}function Qt(un){ft("throw",un)}function St(un,yn){un(yn),je.shift(),je.length&&ft(je[0][0],je[0][1])}}function ze(he){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var De,pe=he[Symbol.asyncIterator];return pe?pe.call(he):(he=function pt(he){var pe="function"==typeof Symbol&&Symbol.iterator,De=pe&&he[pe],Te=0;if(De)return De.call(he);if(he&&"number"==typeof he.length)return{next:function(){return he&&Te>=he.length&&(he=void 0),{value:he&&he[Te++],done:!he}}};throw new TypeError(pe?"Object is not iterable.":"Symbol.iterator is not defined.")}(he),De={},Te("next"),Te("throw"),Te("return"),De[Symbol.asyncIterator]=function(){return this},De);function Te(je){De[je]=he[je]&&function(gt){return new Promise(function(ft,Lt){!function Ge(je,gt,ft,Lt){Promise.resolve(Lt).then(function(Je){je({value:Je,done:ft})},gt)}(ft,Lt,(gt=he[je](gt)).done,gt.value)})}}}k.d(Se,{FC:()=>Ee,KL:()=>ze,_T:()=>ie,mG:()=>K,qq:()=>Pe})},4650:(It,Se,k)=>{k.d(Se,{$8M:()=>tu,$WT:()=>Ti,$Z:()=>o0,AFp:()=>uD,AaK:()=>_e,CHM:()=>Ga,CRH:()=>Vy,CZH:()=>Gg,CqO:()=>qh,D6c:()=>kS,EJc:()=>vS,EpF:()=>L_,F4k:()=>P0,FYo:()=>Bw,FiY:()=>qi,GfV:()=>jw,Gpc:()=>$,JOm:()=>Zn,KtG:()=>uc,LFG:()=>ln,Lbi:()=>Wg,Lck:()=>Ty,MAs:()=>sy,MMx:()=>Ui,MR2:()=>Fp,NdJ:()=>uy,OlP:()=>wn,P3R:()=>Op,PXZ:()=>Ou,Q6J:()=>ig,QGY:()=>ay,QbO:()=>Wy,Qsj:()=>qC,R0b:()=>Fs,RDi:()=>Lv,Rgc:()=>Dd,SBq:()=>Du,Sil:()=>IS,Suo:()=>Pg,TTD:()=>Jo,TgZ:()=>Ml,X6Q:()=>xd,XFs:()=>vt,Xpm:()=>Hi,Xts:()=>Dl,Y36:()=>Nh,YKP:()=>Pn,YNc:()=>P_,Yjl:()=>cn,Yz7:()=>St,Z0I:()=>Ur,ZZ4:()=>ov,_Bn:()=>Mu,_UZ:()=>O_,_Vd:()=>bl,_c5:()=>av,_uU:()=>K0,aQg:()=>ZE,c2e:()=>lD,cJS:()=>yn,cg1:()=>rE,dDg:()=>FE,dqk:()=>Tt,eFA:()=>Gl,eJc:()=>ji,ekj:()=>pd,eoX:()=>LE,f3M:()=>yr,g9A:()=>Df,h0i:()=>_d,hGG:()=>MD,hij:()=>Pl,iGM:()=>SE,ifc:()=>X,ip1:()=>zg,jDz:()=>bI,kL8:()=>iE,lG2:()=>qt,lqb:()=>td,lri:()=>vD,n5z:()=>ua,oAB:()=>Me,oxw:()=>k0,q4F:()=>Yv,qLn:()=>Up,qOj:()=>w_,qZA:()=>og,rWj:()=>kE,sBO:()=>TS,s_b:()=>Fy,soG:()=>Kg,tb:()=>Md,tp0:()=>Ro,uIk:()=>iy,vHH:()=>fe,vpe:()=>co,wAp:()=>Rt,xp6:()=>Yw,z2F:()=>Yg,zSh:()=>Gv,zs3:()=>Rh});var m=k(7579),J=k(727),O=k(9751),ie=k(6451),se=k(3099);function ne(s){for(let o in s)if(s[o]===ne)return o;throw Error("Could not find renamed property on target object.")}function ge(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function _e(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(_e).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function de(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const z=ne({__forward_ref__:ne});function $(s){return s.__forward_ref__=$,s.toString=function(){return _e(this())},s}function K(s){return He(s)?s():s}function He(s){return"function"==typeof s&&s.hasOwnProperty(z)&&s.__forward_ref__===$}function Ce(s){return s&&!!s.\u0275providers}const pt="https://g.co/ng/security#xss";class fe extends Error{constructor(o,u){super(xe(o,u)),this.code=o}}function xe(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}function Ne(s){return"string"==typeof s?s:null==s?"":String(s)}function ze(s,o){throw new fe(-201,!1)}function gt(s,o){null==s&&function ft(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function St(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function yn(s){return{providers:s.providers||[],imports:s.imports||[]}}function Rn(s){return Xr(s,fo)||Xr(s,Ar)}function Ur(s){return null!==Rn(s)}function Xr(s,o){return s.hasOwnProperty(o)?s[o]:null}function Ji(s){return s&&(s.hasOwnProperty(Bs)||s.hasOwnProperty(Di))?s[Bs]:null}const fo=ne({\u0275prov:ne}),Bs=ne({\u0275inj:ne}),Ar=ne({ngInjectableDef:ne}),Di=ne({ngInjectorDef:ne});var vt=(()=>((vt=vt||{})[vt.Default=0]="Default",vt[vt.Host=1]="Host",vt[vt.Self=2]="Self",vt[vt.SkipSelf=4]="SkipSelf",vt[vt.Optional=8]="Optional",vt))();let Oa;function An(s){const o=Oa;return Oa=s,o}function Ci(s,o,u){const c=Rn(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&vt.Optional?null:void 0!==o?o:void ze(_e(s))}const Tt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),jr={},Mr="__NG_DI_FLAG__",mr="ngTempTokenPath",On="ngTokenPath",di=/\n/gm,vn="\u0275",Fa="__source";let on;function $r(s){const o=on;return on=s,o}function bi(s,o=vt.Default){if(void 0===on)throw new fe(-203,!1);return null===on?Ci(s,void 0,o):on.get(s,o&vt.Optional?null:void 0,o)}function ln(s,o=vt.Default){return(function ka(){return Oa}()||bi)(K(s),o)}function yr(s,o=vt.Default){return ln(s,Si(o))}function Si(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function kn(s){const o=[];for(let u=0;u<s.length;u++){const c=K(s[u]);if(Array.isArray(c)){if(0===c.length)throw new fe(900,!1);let d,g=vt.Default;for(let _=0;_<c.length;_++){const D=c[_],b=ei(D);"number"==typeof b?-1===b?d=D.token:g|=b:d=D}o.push(ln(d,g))}else o.push(ln(c))}return o}function Hr(s,o){return s[Mr]=o,s.prototype[Mr]=o,s}function ei(s){return s[Mr]}function q(s){return{toString:s}.toString()}var me=(()=>((me=me||{})[me.OnPush=0]="OnPush",me[me.Default=1]="Default",me))(),X=(()=>{return(s=X||(X={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",X;var s})();const Ye={},We=[],sn=ne({\u0275cmp:ne}),Kn=ne({\u0275dir:ne}),Mn=ne({\u0275pipe:ne}),Fn=ne({\u0275mod:ne}),Gt=ne({\u0275fac:ne}),Qn=ne({__NG_ELEMENT_ID__:ne});let Xi=0;function Hi(s){return q(()=>{const o=jf(s),u={...o,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===me.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&s.dependencies||null,getStandaloneInjector:null,data:s.data||{},encapsulation:s.encapsulation||X.Emulated,id:"c"+Xi++,styles:s.styles||We,_:null,schemas:s.schemas||null,tView:null};Va(u);const c=s.dependencies;return u.directiveDefs=go(c,!1),u.pipeDefs=go(c,!0),u})}function le(s){return kt(s)||nn(s)}function ee(s){return null!==s}function Me(s){return q(()=>({type:s.type,bootstrap:s.bootstrap||We,declarations:s.declarations||We,imports:s.imports||We,exports:s.exports||We,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function bt(s,o){if(null==s)return Ye;const u={};for(const c in s)if(s.hasOwnProperty(c)){let d=s[c],g=d;Array.isArray(d)&&(g=d[1],d=d[0]),u[d]=c,o&&(o[d]=g)}return u}function qt(s){return q(()=>{const o=jf(s);return Va(o),o})}function cn(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function kt(s){return s[sn]||null}function nn(s){return s[Kn]||null}function Cn(s){return s[Mn]||null}function Ti(s){const o=kt(s)||nn(s)||Cn(s);return null!==o&&o.standalone}function zr(s,o){const u=s[Fn]||null;if(!u&&!0===o)throw new Error(`Type ${_e(s)} does not have '\u0275mod' property.`);return u}function jf(s){const o={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:o,exportAs:s.exportAs||null,standalone:!0===s.standalone,selectors:s.selectors||We,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:bt(s.inputs,o),outputs:bt(s.outputs)}}function Va(s){s.features?.forEach(o=>o(s))}function go(s,o){if(!s)return null;const u=o?Cn:le;return()=>("function"==typeof s?s():s).map(c=>u(c)).filter(ee)}const Jn=0,Xe=1,Bt=2,xn=3,an=4,es=5,Rr=6,Zo=7,Ln=8,mo=9,Ua=10,$t=11,Ba=12,Ai=13,ec=14,ts=15,vr=16,js=17,Yo=18,zi=19,Xn=20,tc=21,en=22,Fu=1,Lu=2,$s=7,ja=8,Hs=9,er=10;function Gr(s){return Array.isArray(s)&&"object"==typeof s[Fu]}function hi(s){return Array.isArray(s)&&!0===s[Fu]}function Vu(s){return 0!=(4&s.flags)}function Uu(s){return s.componentOffset>-1}function $a(s){return 1==(1&s.flags)}function ti(s){return!!s.template}function Mi(s){return 0!=(256&s[Bt])}function fi(s,o){return s.hasOwnProperty(Gt)?s[Gt]:null}class Wf{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function Jo(){return ic}function ic(s){return s.type.prototype.ngOnChanges&&(s.setInput=yo),sc}function sc(){const s=Xo(this),o=s?.current;if(o){const u=s.previous;if(u===Ye)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function yo(s,o,u,c){const d=this.declaredInputs[u],g=Xo(s)||function Kd(s,o){return s[Kf]=o}(s,{previous:Ye,current:null}),_=g.current||(g.current={}),D=g.previous,b=D[d];_[d]=new Wf(b&&b.currentValue,o,D===Ye),s[c]=o}Jo.ngInherit=!0;const Kf="__ngSimpleChanges__";function Xo(s){return s[Kf]||null}const bn=function(s,o,u){};function Vn(s){for(;Array.isArray(s);)s=s[Jn];return s}function zs(s,o){return Vn(o[s])}function ni(s,o){return Vn(o[s.index])}function Gi(s,o){return s.data[o]}function xr(s,o){const u=o[s];return Gr(u)?u:u[Jn]}function na(s){return 64==(64&s[Bt])}function xi(s,o){return null==o?null:s[o]}function $u(s){s[Yo]=0}function za(s,o){s[es]+=o;let u=s,c=s[xn];for(;null!==c&&(1===o&&1===u[es]||-1===o&&0===u[es]);)c[es]+=o,u=c,c=c[xn]}const Nt={lFrame:Wa(null),bindingsEnabled:!0};function Jf(){return Nt.bindingsEnabled}function Ie(){return Nt.lFrame.lView}function tn(){return Nt.lFrame.tView}function Ga(s){return Nt.lFrame.contextLView=s,s[Ln]}function uc(s){return Nt.lFrame.contextLView=null,s}function Un(){let s=Xf();for(;null!==s&&64===s.type;)s=s.parent;return s}function Xf(){return Nt.lFrame.currentTNode}function Es(s,o){const u=Nt.lFrame;u.currentTNode=s,u.isParent=o}function Gu(){return Nt.lFrame.isParent}function ws(){return Nt.lFrame.bindingIndex++}function Dm(s,o){const u=Nt.lFrame;u.bindingIndex=u.bindingRootIndex=s,ia(o)}function ia(s){Nt.lFrame.currentDirectiveIndex=s}function dc(){return Nt.lFrame.currentQueryIndex}function Ku(s){Nt.lFrame.currentQueryIndex=s}function hc(s){const o=s[Xe];return 2===o.type?o.declTNode:1===o.type?s[Rr]:null}function fc(s,o,u){if(u&vt.SkipSelf){let d=o,g=s;for(;!(d=d.parent,null!==d||u&vt.Host||(d=hc(g),null===d||(g=g[ts],10&d.type))););if(null===d)return!1;o=d,s=g}const c=Nt.lFrame=pc();return c.currentTNode=o,c.lView=s,!0}function sa(s){const o=pc(),u=s[Xe];Nt.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function pc(){const s=Nt.lFrame,o=null===s?null:s.child;return null===o?Wa(s):o}function Wa(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Xd(){const s=Nt.lFrame;return Nt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const gc=Xd;function mc(){const s=Xd();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function wr(){return Nt.lFrame.selectedIndex}function vo(s){Nt.lFrame.selectedIndex=s}function En(){const s=Nt.lFrame;return Gi(s.tView,s.selectedIndex)}function yc(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const g=s.data[u].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:D,ngAfterViewInit:b,ngAfterViewChecked:A,ngOnDestroy:N}=g;_&&(s.contentHooks??(s.contentHooks=[])).push(-u,_),D&&((s.contentHooks??(s.contentHooks=[])).push(u,D),(s.contentCheckHooks??(s.contentCheckHooks=[])).push(u,D)),b&&(s.viewHooks??(s.viewHooks=[])).push(-u,b),A&&((s.viewHooks??(s.viewHooks=[])).push(u,A),(s.viewCheckHooks??(s.viewCheckHooks=[])).push(u,A)),null!=N&&(s.destroyHooks??(s.destroyHooks=[])).push(u,N)}}function vc(s,o,u){Eo(s,o,3,u)}function _c(s,o,u,c){(3&s[Bt])===u&&Eo(s,o,u,c)}function Yu(s,o){let u=s[Bt];(3&u)===o&&(u&=2047,u+=1,s[Bt]=u)}function Eo(s,o,u,c){const g=c??-1,_=o.length-1;let D=0;for(let b=void 0!==c?65535&s[Yo]:0;b<_;b++)if("number"==typeof o[b+1]){if(D=o[b],null!=c&&D>=c)break}else o[b]<0&&(s[Yo]+=65536),(D<g||-1==g)&&(rp(s,u,o,b),s[Yo]=(4294901760&s[Yo])+b+2),b++}function rp(s,o,u,c){const d=u[c]<0,g=u[c+1],D=s[d?-u[c]:u[c]];if(d){if(s[Bt]>>11<s[Yo]>>16&&(3&s[Bt])===o){s[Bt]+=2048,bn(4,D,g);try{g.call(D)}finally{bn(5,D,g)}}}else{bn(4,D,g);try{g.call(D)}finally{bn(5,D,g)}}}const as=-1;class Qu{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function el(s,o,u){let c=0;for(;c<u.length;){const d=u[c];if("number"==typeof d){if(0!==d)break;c++;const g=u[c++],_=u[c++],D=u[c++];s.setAttribute(o,_,D,g)}else{const g=d,_=u[++c];tl(g)?s.setProperty(o,g,_):s.setAttribute(o,g,_),c++}}return c}function Io(s){return 3===s||4===s||6===s}function tl(s){return 64===s.charCodeAt(0)}function Do(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?u=d:0===u||Co(s,u,d,null,-1===u||2===u?o[++c]:null)}}return s}function Co(s,o,u,c,d){let g=0,_=s.length;if(-1===o)_=-1;else for(;g<s.length;){const D=s[g++];if("number"==typeof D){if(D===o){_=-1;break}if(D>o){_=g-1;break}}}for(;g<s.length;){const D=s[g];if("number"==typeof D)break;if(D===u){if(null===c)return void(null!==d&&(s[g+1]=d));if(c===s[g+1])return void(s[g+2]=d)}g++,null!==c&&g++,null!==d&&g++}-1!==_&&(s.splice(_,0,o),g=_+1),s.splice(g++,0,u),null!==c&&s.splice(g++,0,c),null!==d&&s.splice(g++,0,d)}function oa(s){return s!==as}function Ka(s){return 32767&s}function Za(s,o){let u=function nl(s){return s>>16}(s),c=o;for(;u>0;)c=c[ts],u--;return c}let rl=!0;function Ya(s){const o=rl;return rl=s,o}const sh=255,qs=5;let wc=0;const lr={};function bo(s,o){const u=sp(s,o);if(-1!==u)return u;const c=o[Xe];c.firstCreatePass&&(s.injectorIndex=o.length,So(c.data,s),So(o,null),So(c.blueprint,null));const d=gn(s,o),g=s.injectorIndex;if(oa(d)){const _=Ka(d),D=Za(d,o),b=D[Xe].data;for(let A=0;A<8;A++)o[g+A]=D[_+A]|b[_+A]}return o[g+8]=d,g}function So(s,o){s.push(0,0,0,0,0,0,0,0,o)}function sp(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function gn(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,d=o;for(;null!==d;){if(c=eu(d),null===c)return as;if(u++,d=d[ts],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return as}function il(s,o,u){!function bm(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(Qn)&&(c=u[Qn]),null==c&&(c=u[Qn]=wc++);const d=c&sh;o.data[s+(d>>qs)]|=1<<d}(s,o,u)}function Dc(s,o,u){if(u&vt.Optional||void 0!==s)return s;ze()}function sl(s,o,u,c){if(u&vt.Optional&&void 0===c&&(c=null),!(u&(vt.Self|vt.Host))){const d=s[mo],g=An(void 0);try{return d?d.get(o,c,u&vt.Optional):Ci(o,c,u&vt.Optional)}finally{An(g)}}return Dc(c,0,u)}function ol(s,o,u,c=vt.Default,d){if(null!==s){if(1024&o[Bt]){const _=function ll(s,o,u,c,d){let g=s,_=o;for(;null!==g&&null!==_&&1024&_[Bt]&&!(256&_[Bt]);){const D=tr(g,_,u,c|vt.Self,lr);if(D!==lr)return D;let b=g.parent;if(!b){const A=_[tc];if(A){const N=A.get(u,lr,c);if(N!==lr)return N}b=eu(_),_=_[ts]}g=b}return d}(s,o,u,c,lr);if(_!==lr)return _}const g=tr(s,o,u,c,lr);if(g!==lr)return g}return sl(o,u,c,d)}function tr(s,o,u,c,d){const g=function ul(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Qn)?s[Qn]:void 0;return"number"==typeof o?o>=0?o&sh:Cc:o}(u);if("function"==typeof g){if(!fc(o,s,c))return c&vt.Host?Dc(d,0,c):sl(o,u,c,d);try{const _=g(c);if(null!=_||c&vt.Optional)return _;ze()}finally{gc()}}else if("number"==typeof g){let _=null,D=sp(s,o),b=as,A=c&vt.Host?o[vr][Rr]:null;for((-1===D||c&vt.SkipSelf)&&(b=-1===D?gn(s,o):o[D+8],b!==as&&Ja(c,!1)?(_=o[Xe],D=Ka(b),o=Za(b,o)):D=-1);-1!==D;){const N=o[Xe];if(Qa(g,D,N.data)){const F=al(D,o,u,_,c,A);if(F!==lr)return F}b=o[D+8],b!==as&&Ja(c,o[Xe].data[D+8]===A)&&Qa(g,D,o)?(_=N,D=Ka(b),o=Za(b,o)):D=-1}}return d}function al(s,o,u,c,d,g){const _=o[Xe],D=_.data[s+8],N=Ir(D,_,u,null==c?Uu(D)&&rl:c!=_&&0!=(3&D.type),d&vt.Host&&g===D);return null!==N?Is(o,_,N,D):lr}function Ir(s,o,u,c,d){const g=s.providerIndexes,_=o.data,D=1048575&g,b=s.directiveStart,N=g>>20,G=d?D+N:s.directiveEnd;for(let Q=c?D:D+N;Q<G;Q++){const ye=_[Q];if(Q<b&&u===ye||Q>=b&&ye.type===u)return Q}if(d){const Q=_[b];if(Q&&ti(Q)&&Q.type===u)return b}return null}function Is(s,o,u,c){let d=s[u];const g=o.data;if(function nh(s){return s instanceof Qu}(d)){const _=d;_.resolving&&function Pe(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new fe(-200,`Circular dependency in DI detected for ${s}${u}`)}(function Be(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():Ne(s)}(g[u]));const D=Ya(_.canSeeViewProviders);_.resolving=!0;const b=_.injectImpl?An(_.injectImpl):null;fc(s,c,vt.Default);try{d=s[u]=_.factory(void 0,g,s,c),o.firstCreatePass&&u>=c.directiveStart&&function np(s,o,u){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:g}=o.type.prototype;if(c){const _=ic(o);(u.preOrderHooks??(u.preOrderHooks=[])).push(s,_),(u.preOrderCheckHooks??(u.preOrderCheckHooks=[])).push(s,_)}d&&(u.preOrderHooks??(u.preOrderHooks=[])).push(0-s,d),g&&((u.preOrderHooks??(u.preOrderHooks=[])).push(s,g),(u.preOrderCheckHooks??(u.preOrderCheckHooks=[])).push(s,g))}(u,g[u],o)}finally{null!==b&&An(b),Ya(D),_.resolving=!1,gc()}}return d}function Qa(s,o,u){return!!(u[o+(s>>qs)]&1<<s)}function Ja(s,o){return!(s&vt.Self||s&vt.Host&&o)}class aa{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return ol(this._tNode,this._lView,o,Si(c),u)}}function Cc(){return new aa(Un(),Ie())}function ua(s){return q(()=>{const o=s.prototype.constructor,u=o[Gt]||Xa(o),c=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==c;){const g=d[Gt]||Xa(d);if(g&&g!==u)return g;d=Object.getPrototypeOf(d)}return g=>new g})}function Xa(s){return He(s)?()=>{const o=Xa(K(s));return o&&o()}:fi(s)}function eu(s){const o=s[Xe],u=o.type;return 2===u?o.declTNode:1===u?s[Rr]:null}function tu(s){return function Ic(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let d=0;for(;d<c;){const g=u[d];if(Io(g))break;if(0===g)d+=2;else if("number"==typeof g)for(d++;d<c&&"string"==typeof u[d];)d++;else{if(g===o)return u[d+1];d+=2}}}return null}(Un(),s)}const nu="__parameters__";function Ao(s,o,u){return q(()=>{const c=function cl(s){return function(...u){if(s){const c=s(...u);for(const d in c)this[d]=c[d]}}}(o);function d(...g){if(this instanceof d)return c.apply(this,g),this;const _=new d(...g);return D.annotation=_,D;function D(b,A,N){const F=b.hasOwnProperty(nu)?b[nu]:Object.defineProperty(b,nu,{value:[]})[nu];for(;F.length<=N;)F.push(null);return(F[N]=F[N]||[]).push(_),b}}return u&&(d.prototype=Object.create(u.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class wn{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=St({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function ca(s,o){s.forEach(u=>Array.isArray(u)?ca(u,o):o(u))}function su(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function Tc(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Jt(s,o,u){let c=rt(s,o);return c>=0?s[1|c]=u:(c=~c,function ou(s,o,u,c){let d=s.length;if(d==o)s.push(u,c);else if(1===d)s.push(c,s[0]),s[0]=u;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=u,s[o+1]=c}}(s,c,o,u)),c}function ls(s,o){const u=rt(s,o);if(u>=0)return s[1|u]}function rt(s,o){return function Nn(s,o,u){let c=0,d=s.length>>u;for(;d!==c;){const g=c+(d-c>>1),_=s[g<<u];if(o===_)return g<<u;_>o?d=g:c=g+1}return~(d<<u)}(s,o,1)}const qi=Hr(Ao("Optional"),8),Ro=Hr(Ao("SkipSelf"),4);var Zn=(()=>((Zn=Zn||{})[Zn.Important=1]="Important",Zn[Zn.DashCase=2]="DashCase",Zn))();const mi=new Map;let ph=0;const ue="__ngContext__";function Fe(s,o){Gr(o)?(s[ue]=o[Xn],function hp(s){mi.set(s[Xn],s)}(o)):s[ue]=o}let Js;function fu(s,o){return Js(s,o)}function pu(s){const o=s[xn];return hi(o)?o[xn]:o}function ko(s){return Bc(s[Ai])}function mh(s){return Bc(s[an])}function Bc(s){for(;null!==s&&!hi(s);)s=s[an];return s}function Fo(s,o,u,c,d){if(null!=c){let g,_=!1;hi(c)?g=c:Gr(c)&&(_=!0,c=c[Jn]);const D=Vn(c);0===s&&null!==u?null==d?Rm(o,u,D):Xs(o,u,D,d||null,!0):1===s&&null!==u?Xs(o,u,D,d||null,!0):2===s?function Zc(s,o,u){const c=Gc(s,o);c&&function Hc(s,o,u,c){s.removeChild(o,u,c)}(s,c,o,u)}(o,D,_):3===s&&o.destroyNode(D),null!=g&&function to(s,o,u,c,d){const g=u[$s];g!==Vn(u)&&Fo(o,s,c,g,d);for(let D=er;D<u.length;D++){const b=u[D];Eu(b[Xe],b,s,o,c,g)}}(o,s,g,u,d)}}function gp(s,o,u){return s.createElement(o,u)}function _h(s,o){const u=s[Hs],c=u.indexOf(o),d=o[xn];512&o[Bt]&&(o[Bt]&=-513,za(d,-1)),u.splice(c,1)}function jc(s,o){if(s.length<=er)return;const u=er+o,c=s[u];if(c){const d=c[js];null!==d&&d!==s&&_h(d,c),o>0&&(s[u-1][an]=c[an]);const g=Tc(s,er+o);!function Mm(s,o){Eu(s,o,o[$t],2,null,null),o[Jn]=null,o[Rr]=null}(c[Xe],c);const _=g[zi];null!==_&&_.detachView(g[Xe]),c[xn]=null,c[an]=null,c[Bt]&=-65}return c}function yu(s,o){if(!(128&o[Bt])){const u=o[$t];u.destroyNode&&Eu(s,o,u,3,null,null),function mu(s){let o=s[Ai];if(!o)return mp(s[Xe],s);for(;o;){let u=null;if(Gr(o))u=o[Ai];else{const c=o[er];c&&(u=c)}if(!u){for(;o&&!o[an]&&o!==s;)Gr(o)&&mp(o[Xe],o),o=o[xn];null===o&&(o=s),Gr(o)&&mp(o[Xe],o),u=o&&o[an]}o=u}}(o)}}function mp(s,o){if(!(128&o[Bt])){o[Bt]&=-65,o[Bt]|=128,function $c(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const d=o[u[c]];if(!(d instanceof Qu)){const g=u[c+1];if(Array.isArray(g))for(let _=0;_<g.length;_+=2){const D=d[g[_]],b=g[_+1];bn(4,D,b);try{b.call(D)}finally{bn(5,D,b)}}else{bn(4,d,g);try{g.call(d)}finally{bn(5,d,g)}}}}}(s,o),function vu(s,o){const u=s.cleanup,c=o[Zo];let d=-1;if(null!==u)for(let g=0;g<u.length-1;g+=2)if("string"==typeof u[g]){const _=u[g+3];_>=0?c[d=_]():c[d=-_].unsubscribe(),g+=2}else{const _=c[d=u[g+1]];u[g].call(_)}if(null!==c){for(let g=d+1;g<c.length;g++)(0,c[g])();o[Zo]=null}}(s,o),1===o[Xe].type&&o[$t].destroy();const u=o[js];if(null!==u&&hi(o[xn])){u!==o[xn]&&_h(u,o);const c=o[zi];null!==c&&c.detachView(s)}!function C(s){mi.delete(s[Xn])}(o)}}function kv(s,o,u){return function yp(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[Jn];{const{componentOffset:d}=c;if(d>-1){const{encapsulation:g}=s.data[c.directiveStart+d];if(g===X.None||g===X.Emulated)return null}return ni(c,u)}}(s,o.parent,u)}function Xs(s,o,u,c,d){s.insertBefore(o,u,c,d)}function Rm(s,o,u){s.appendChild(o,u)}function ml(s,o,u,c,d){null!==c?Xs(s,o,u,c,d):Rm(s,o,u)}function Gc(s,o){return s.parentNode(o)}let Wc,wh,Dh,xm=function _u(s,o,u){return 40&s.type?ni(s,u):null};function Eh(s,o,u,c){const d=kv(s,c,o),g=o[$t],D=function qc(s,o,u){return xm(s,o,u)}(c.parent||o[Rr],c,o);if(null!=d)if(Array.isArray(u))for(let b=0;b<u.length;b++)ml(g,d,u[b],D,!1);else ml(g,d,u,D,!1);void 0!==Wc&&Wc(g,c,o,u,d)}function yl(s,o){if(null!==o){const u=o.type;if(3&u)return ni(o,s);if(4&u)return _p(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return yl(s,c);{const d=s[o.index];return hi(d)?_p(-1,d):Vn(d)}}if(32&u)return fu(o,s)()||Vn(s[o.index]);{const c=eo(s,o);return null!==c?Array.isArray(c)?c[0]:yl(pu(s[vr]),c):yl(s,o.next)}}return null}function eo(s,o){return null!==o?s[vr][Rr].projection[o.projection]:null}function _p(s,o){const u=er+s+1;if(u<o.length){const c=o[u],d=c[Xe].firstChild;if(null!==d)return yl(c,d)}return o[$s]}function Ep(s,o,u,c,d,g,_){for(;null!=u;){const D=c[u.index],b=u.type;if(_&&0===o&&(D&&Fe(Vn(D),c),u.flags|=2),32!=(32&u.flags))if(8&b)Ep(s,o,u.child,c,d,g,!1),Fo(o,s,d,D,g);else if(32&b){const A=fu(u,c);let N;for(;N=A();)Fo(o,s,d,N,g);Fo(o,s,d,D,g)}else 16&b?vl(s,o,c,u,d,g):Fo(o,s,d,D,g);u=_?u.projectionNext:u.next}}function Eu(s,o,u,c,d,g){Ep(u,c,s.firstChild,o,d,g,!1)}function vl(s,o,u,c,d,g){const _=u[vr],b=_[Rr].projection[c.projection];if(Array.isArray(b))for(let A=0;A<b.length;A++)Fo(o,s,d,b[A],g);else Ep(s,o,b,_[xn],d,g,!0)}function Yc(s,o,u){""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u)}function _l(s,o,u){const{mergedAttrs:c,classes:d,styles:g}=u;null!==c&&el(s,o,c),null!==d&&Yc(s,o,d),null!==g&&function Ss(s,o,u){s.setAttribute(o,"style",u)}(s,o,g)}function Lv(s){wh=s}function km(s){return function yi(){if(void 0===Dh&&(Dh=null,Tt.trustedTypes))try{Dh=Tt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Dh}()?.createScriptURL(s)||s}class Ch{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${pt})`}}function Wr(s){return s instanceof Ch?s.changingThisBreaksApplicationSecurity:s}function ro(s,o){const u=function Fm(s){return s instanceof Ch&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see ${pt})`)}return u===o}const bh=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var nr=(()=>((nr=nr||{})[nr.NONE=0]="NONE",nr[nr.HTML=1]="HTML",nr[nr.STYLE=2]="STYLE",nr[nr.SCRIPT=3]="SCRIPT",nr[nr.URL=4]="URL",nr[nr.RESOURCE_URL=5]="RESOURCE_URL",nr))();function ed(s){const o=kp();return o?o.sanitize(nr.URL,s)||"":ro(s,"URL")?Wr(s):function Jc(s){return(s=String(s)).match(bh)?s:"unsafe:"+s}(Ne(s))}function Pi(s){const o=kp();if(o)return km(o.sanitize(nr.RESOURCE_URL,s)||"");if(ro(s,"ResourceURL"))return km(Wr(s));throw new fe(904,!1)}function Op(s,o,u){return function Pp(s,o){return"src"===o&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===o&&("base"===s||"link"===s)?Pi:ed}(o,u)(s)}function kp(){const s=Ie();return s&&s[Ba]}const Dl=new wn("ENVIRONMENT_INITIALIZER"),Ah=new wn("INJECTOR",-1),Tw=new wn("INJECTOR_DEF_TYPES");class Aw{get(o,u=jr){if(u===jr){const c=new Error(`NullInjectorError: No provider for ${_e(o)}!`);throw c.name="NullInjectorError",c}return u}}function Fp(s){return{\u0275providers:s}}function Lp(...s){return{\u0275providers:Mw(0,s),\u0275fromNgModule:!0}}function Mw(s,...o){const u=[],c=new Set;let d;return ca(o,g=>{const _=g;Hv(_,u,[],c)&&(d||(d=[]),d.push(_))}),void 0!==d&&Rw(d,u),u}function Rw(s,o){for(let u=0;u<s.length;u++){const{providers:d}=s[u];zv(d,g=>{o.push(g)})}}function Hv(s,o,u,c){if(!(s=K(s)))return!1;let d=null,g=Ji(s);const _=!g&&kt(s);if(g||_){if(_&&!_.standalone)return!1;d=s}else{const b=s.ngModule;if(g=Ji(b),!g)return!1;d=b}const D=c.has(d);if(_){if(D)return!1;if(c.add(d),_.dependencies){const b="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const A of b)Hv(A,o,u,c)}}else{if(!g)return!1;{if(null!=g.imports&&!D){let A;c.add(d);try{ca(g.imports,N=>{Hv(N,o,u,c)&&(A||(A=[]),A.push(N))})}finally{}void 0!==A&&Rw(A,o)}if(!D){const A=fi(d)||(()=>new d);o.push({provide:d,useFactory:A,deps:We},{provide:Tw,useValue:d,multi:!0},{provide:Dl,useValue:()=>ln(d),multi:!0})}const b=g.providers;null==b||D||zv(b,N=>{o.push(N)})}}return d!==s&&void 0!==s.providers}function zv(s,o){for(let u of s)Ce(u)&&(u=u.\u0275providers),Array.isArray(u)?zv(u,o):o(u)}const BC=ne({provide:String,useValue:ne});function xw(s){return null!==s&&"object"==typeof s&&BC in s}function fa(s){return"function"==typeof s}const Gv=new wn("Set Injector scope."),$m={},jC={};let qv;function Hm(){return void 0===qv&&(qv=new Aw),qv}class td{}class Pw extends td{get destroyed(){return this._destroyed}constructor(o,u,c,d){super(),this.parent=u,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Zv(o,_=>this.processProvider(_)),this.records.set(Ah,Cl(void 0,this)),d.has("environment")&&this.records.set(td,Cl(void 0,this));const g=this.records.get(Gv);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(Tw.multi,We,vt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const u=$r(this),c=An(void 0);try{return o()}finally{$r(u),An(c)}}get(o,u=jr,c=vt.Default){this.assertNotDestroyed(),c=Si(c);const d=$r(this),g=An(void 0);try{if(!(c&vt.SkipSelf)){let D=this.records.get(o);if(void 0===D){const b=function zm(s){return"function"==typeof s||"object"==typeof s&&s instanceof wn}(o)&&Rn(o);D=b&&this.injectableDefInScope(b)?Cl(Wv(o),$m):null,this.records.set(o,D)}if(null!=D)return this.hydrate(o,D)}return(c&vt.Self?Hm():this.parent).get(o,u=c&vt.Optional&&u===jr?null:u)}catch(_){if("NullInjectorError"===_.name){if((_[mr]=_[mr]||[]).unshift(_e(o)),d)throw _;return function B(s,o,u,c){const d=s[mr];throw o[Fa]&&d.unshift(o[Fa]),s.message=function V(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&s.charAt(1)==vn?s.slice(2):s;let d=_e(o);if(Array.isArray(o))d=o.map(_e).join(" -> ");else if("object"==typeof o){let g=[];for(let _ in o)if(o.hasOwnProperty(_)){let D=o[_];g.push(_+":"+("string"==typeof D?JSON.stringify(D):_e(D)))}d=`{${g.join(", ")}}`}return`${u}${c?"("+c+")":""}[${d}]: ${s.replace(di,"\n  ")}`}("\n"+s.message,d,u,c),s[On]=d,s[mr]=null,s}(_,o,"R3InjectorError",this.source)}throw _}finally{An(g),$r(d)}}resolveInjectorInitializers(){const o=$r(this),u=An(void 0);try{const c=this.get(Dl.multi,We,vt.Self);for(const d of c)d()}finally{$r(o),An(u)}}toString(){const o=[],u=this.records;for(const c of u.keys())o.push(_e(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new fe(205,!1)}processProvider(o){let u=fa(o=K(o))?o:K(o&&o.provide);const c=function Ow(s){return xw(s)?Cl(void 0,s.useValue):Cl(kw(s),$m)}(o);if(fa(o)||!0!==o.multi)this.records.get(u);else{let d=this.records.get(u);d||(d=Cl(void 0,$m,!0),d.factory=()=>kn(d.multi),this.records.set(u,d)),u=o,d.multi.push(o)}this.records.set(u,c)}hydrate(o,u){return u.value===$m&&(u.value=jC,u.value=u.factory()),"object"==typeof u.value&&u.value&&function Kv(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=K(o.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function Wv(s){const o=Rn(s),u=null!==o?o.factory:fi(s);if(null!==u)return u;if(s instanceof wn)throw new fe(204,!1);if(s instanceof Function)return function $C(s){const o=s.length;if(o>0)throw function Ws(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}(o,"?"),new fe(204,!1);const u=function Br(s){const o=s&&(s[fo]||s[Ar]);return o?(function ho(s){if(s.hasOwnProperty("name"))return s.name;(""+s).match(/^function\s*([^\s(]+)/)}(s),o):null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new fe(204,!1)}function kw(s,o,u){let c;if(fa(s)){const d=K(s);return fi(d)||Wv(d)}if(xw(s))c=()=>K(s.useValue);else if(function jm(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...kn(s.deps||[]));else if(function Nw(s){return!(!s||!s.useExisting)}(s))c=()=>ln(K(s.useExisting));else{const d=K(s&&(s.useClass||s.provide));if(!function Fw(s){return!!s.deps}(s))return fi(d)||Wv(d);c=()=>new d(...kn(s.deps))}return c}function Cl(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function Zv(s,o){for(const u of s)Array.isArray(u)?Zv(u,o):u&&Ce(u)?Zv(u.\u0275providers,o):o(u)}class HC{}class Lw{}class Vw{resolveComponentFactory(o){throw function zC(s){const o=Error(`No component factory found for ${_e(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let bl=(()=>{class s{}return s.NULL=new Vw,s})();function Gm(){return nd(Un(),Ie())}function nd(s,o){return new Du(ni(s,o))}let Du=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=Gm,s})();function Uw(s){return s instanceof Du?s.nativeElement:s}class Bw{}let qC=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function WC(){const s=Ie(),u=xr(Un().index,s);return(Gr(u)?u:s)[$t]}(),s})(),KC=(()=>{class s{}return s.\u0275prov=St({token:s,providedIn:"root",factory:()=>null}),s})();class jw{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Yv=new jw("15.2.6"),Qv={},Jv="ngOriginalError";function Xv(s){return s[Jv]}class Up{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o);this._console.error("ERROR",o),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&Xv(o);for(;u&&Xv(u);)u=Xv(u);return u||null}}function pa(s){return s instanceof Function?s():s}function e_(s,o,u){let c=s.length;for(;;){const d=s.indexOf(o,u);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const g=o.length;if(d+g===c||s.charCodeAt(d+g)<=32)return d}u=d+1}}const qm="ng-template";function qw(s,o,u){let c=0,d=!0;for(;c<s.length;){let g=s[c++];if("string"==typeof g&&d){const _=s[c++];if(u&&"class"===g&&-1!==e_(_.toLowerCase(),o,0))return!0}else{if(1===g){for(;c<s.length&&"string"==typeof(g=s[c++]);)if(g.toLowerCase()===o)return!0;return!1}"number"==typeof g&&(d=!1)}}return!1}function id(s){return 4===s.type&&s.value!==qm}function t_(s,o,u){return o===(4!==s.type||u?s.value:qm)}function tb(s,o,u){let c=4;const d=s.attrs||[],g=function Kw(s){for(let o=0;o<s.length;o++)if(Io(s[o]))return o;return s.length}(d);let _=!1;for(let D=0;D<o.length;D++){const b=o[D];if("number"!=typeof b){if(!_)if(4&c){if(c=2|1&c,""!==b&&!t_(s,b,u)||""===b&&1===o.length){if(so(c))return!1;_=!0}}else{const A=8&c?b:o[++D];if(8&c&&null!==s.attrs){if(!qw(s.attrs,A,u)){if(so(c))return!1;_=!0}continue}const F=Wm(8&c?"class":b,d,id(s),u);if(-1===F){if(so(c))return!1;_=!0;continue}if(""!==A){let G;G=F>g?"":d[F+1].toLowerCase();const Q=8&c?G:null;if(Q&&-1!==e_(Q,A,0)||2&c&&A!==G){if(so(c))return!1;_=!0}}}}else{if(!_&&!so(c)&&!so(b))return!1;if(_&&so(b))continue;_=!1,c=b|1&c}}return so(c)||_}function so(s){return 0==(1&s)}function Wm(s,o,u,c){if(null===o)return-1;let d=0;if(c||!u){let g=!1;for(;d<o.length;){const _=o[d];if(_===s)return d;if(3===_||6===_)g=!0;else{if(1===_||2===_){let D=o[++d];for(;"string"==typeof D;)D=o[++d];continue}if(4===_)break;if(0===_){d+=4;continue}}d+=g?1:2}return-1}return function nb(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function Bp(s,o,u=!1){for(let c=0;c<o.length;c++)if(tb(s,o[c],u))return!0;return!1}function Zw(s,o){return s?":not("+o.trim()+")":o}function ib(s){let o=s[0],u=1,c=2,d="",g=!1;for(;u<s.length;){let _=s[u];if("string"==typeof _)if(2&c){const D=s[++u];d+="["+_+(D.length>0?'="'+D+'"':"")+"]"}else 8&c?d+="."+_:4&c&&(d+=" "+_);else""!==d&&!so(_)&&(o+=Zw(g,d),d=""),c=_,g=g||!so(c);u++}return""!==d&&(o+=Zw(g,d)),o}const Wt={};function Yw(s){Zm(tn(),Ie(),wr()+s,!1)}function Zm(s,o,u,c){if(!c)if(3==(3&o[Bt])){const g=s.preOrderCheckHooks;null!==g&&vc(o,g,u)}else{const g=s.preOrderHooks;null!==g&&_c(o,g,0,u)}vo(u)}function r_(s,o=null,u=null,c){const d=lb(s,o,u,c);return d.resolveInjectorInitializers(),d}function lb(s,o=null,u=null,c,d=new Set){const g=[u||We,Lp(s)];return c=c||("object"==typeof s?void 0:_e(s)),new Pw(g,o||Hm(),c||null,d)}let Rh=(()=>{class s{static create(u,c){if(Array.isArray(u))return r_({name:""},c,u,"");{const d=u.name??"";return r_({name:d},u.parent,u.providers,d)}}}return s.THROW_IF_NOT_FOUND=jr,s.NULL=new Aw,s.\u0275prov=St({token:s,providedIn:"any",factory:()=>ln(Ah)}),s.__NG_ELEMENT_ID__=-1,s})();function Nh(s,o=vt.Default){const u=Ie();return null===u?ln(s,o):ol(Un(),u,K(s),o)}function o0(){throw new Error("invalid")}function a0(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const g=u[c+1];if(-1!==g){const _=s.data[g];Ku(u[c]),_.contentQueries(2,o[g],g)}}}function a_(s,o,u,c,d,g,_,D,b,A,N){const F=o.blueprint.slice();return F[Jn]=d,F[Bt]=76|c,(null!==N||s&&1024&s[Bt])&&(F[Bt]|=1024),$u(F),F[xn]=F[ts]=s,F[Ln]=u,F[Ua]=_||s&&s[Ua],F[$t]=D||s&&s[$t],F[Ba]=b||s&&s[Ba]||null,F[mo]=A||s&&s[mo]||null,F[Rr]=g,F[Xn]=function gh(){return ph++}(),F[tc]=N,F[vr]=2==o.type?s[vr]:F,F}function Ph(s,o,u,c,d){let g=s.data[o];if(null===g)g=function u_(s,o,u,c,d){const g=Xf(),_=Gu(),b=s.data[o]=function pn(s,o,u,c,d,g){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?g:g&&g.parent,u,o,c,d);return null===s.firstChild&&(s.firstChild=b),null!==g&&(_?null==g.child&&null!==b.parent&&(g.child=b):null===g.next&&(g.next=b,b.prev=g)),b}(s,o,u,c,d),function qu(){return Nt.lFrame.inI18n}()&&(g.flags|=32);else if(64&g.type){g.type=u,g.value=c,g.attrs=d;const _=function _s(){const s=Nt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();g.injectorIndex=null===_?-1:_.injectorIndex}return Es(g,!0),g}function Gp(s,o,u,c){if(0===u)return-1;const d=o.length;for(let g=0;g<u;g++)o.push(c),s.blueprint.push(c),s.data.push(null);return d}function Kr(s,o,u){sa(o);try{const c=s.viewQuery;null!==c&&Xp(1,c,u);const d=s.template;null!==d&&l0(s,o,d,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&a0(s,o),s.staticViewQueries&&Xp(2,s.viewQuery,u);const g=s.components;null!==g&&function vb(s,o){for(let u=0;u<o.length;u++)v0(s,o[u])}(o,g)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[Bt]&=-5,mc()}}function Oh(s,o,u,c){const d=o[Bt];if(128!=(128&d)){sa(o);try{$u(o),function cc(s){return Nt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&l0(s,o,u,2,c);const _=3==(3&d);if(_){const A=s.preOrderCheckHooks;null!==A&&vc(o,A,null)}else{const A=s.preOrderHooks;null!==A&&_c(o,A,0,null),Yu(o,0)}if(function Fh(s){for(let o=ko(s);null!==o;o=mh(o)){if(!o[Lu])continue;const u=o[Hs];for(let c=0;c<u.length;c++){const d=u[c];512&d[Bt]||za(d[xn],1),d[Bt]|=512}}}(o),function Ib(s){for(let o=ko(s);null!==o;o=mh(o))for(let u=er;u<o.length;u++){const c=o[u],d=c[Xe];na(c)&&Oh(d,c,d.template,c[Ln])}}(o),null!==s.contentQueries&&a0(s,o),_){const A=s.contentCheckHooks;null!==A&&vc(o,A)}else{const A=s.contentHooks;null!==A&&_c(o,A,1),Yu(o,1)}!function yb(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const d=u[c];if(d<0)vo(~d);else{const g=d,_=u[++c],D=u[++c];Dm(_,g),D(2,o[g])}}}finally{vo(-1)}}(s,o);const D=s.components;null!==D&&function u0(s,o){for(let u=0;u<o.length;u++)y0(s,o[u])}(o,D);const b=s.viewQuery;if(null!==b&&Xp(2,b,c),_){const A=s.viewCheckHooks;null!==A&&vc(o,A)}else{const A=s.viewHooks;null!==A&&_c(o,A,2),Yu(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[Bt]&=-41,512&o[Bt]&&(o[Bt]&=-513,za(o[xn],-1))}finally{mc()}}}function l0(s,o,u,c,d){const g=wr(),_=2&c;try{vo(-1),_&&o.length>en&&Zm(s,o,en,!1),bn(_?2:0,d),u(c,d)}finally{vo(g),bn(_?3:1,d)}}function l_(s,o,u){if(Vu(o)){const d=o.directiveEnd;for(let g=o.directiveStart;g<d;g++){const _=s.data[g];_.contentQueries&&_.contentQueries(1,u[g],g)}}}function Rs(s,o,u){Jf()&&(function Oi(s,o,u,c){const d=u.directiveStart,g=u.directiveEnd;Uu(u)&&function wb(s,o,u){const c=ni(o,s),d=d0(u),g=s[Ua],_=Qp(s,a_(s,d,null,u.onPush?32:16,c,o,g,g.createRenderer(c,u),null,null,null));s[o.index]=_}(o,u,s.data[d+u.componentOffset]),s.firstCreatePass||bo(u,o),Fe(c,o);const _=u.initialInputs;for(let D=d;D<g;D++){const b=s.data[D],A=Is(o,s,D,u);Fe(A,o),null!==_&&ga(0,D-d,A,b,0,_),ti(b)&&(xr(u.index,o)[Ln]=Is(o,s,D,u))}}(s,o,u,ni(u,o)),64==(64&u.flags)&&Zp(s,o,u))}function c0(s,o,u=ni){const c=o.localNames;if(null!==c){let d=o.index+1;for(let g=0;g<c.length;g+=2){const _=c[g+1],D=-1===_?u(o,s):s[_];s[d++]=D}}}function d0(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=ve(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function ve(s,o,u,c,d,g,_,D,b,A){const N=en+c,F=N+d,G=function sd(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:Wt);return u}(N,F),Q="function"==typeof A?A():A;return G[Xe]={type:s,blueprint:G,template:u,queries:null,viewQuery:D,declTNode:o,data:G.slice().fill(null,N),bindingStartIndex:N,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:b,consts:Q,incompleteFirstPass:!1}}function bu(s,o,u,c){const d=p_(o);null===u?d.push(c):(d.push(u),s.firstCreatePass&&w0(s).push(c,d.length-1))}function h0(s,o,u,c){for(let d in s)if(s.hasOwnProperty(d)){u=null===u?{}:u;const g=s[d];null===c?oo(u,o,d,g):c.hasOwnProperty(d)&&oo(u,o,c[d],g)}return u}function oo(s,o,u,c){s.hasOwnProperty(u)?s[u].push(o,c):s[u]=[o,c]}function qp(s,o){const u=xr(o,s);16&u[Bt]||(u[Bt]|=32)}function Kp(s,o,u,c){if(Jf()){const d=null===c?null:{"":-1},g=function Sl(s,o){const u=s.directiveRegistry;let c=null,d=null;if(u)for(let g=0;g<u.length;g++){const _=u[g];if(Bp(o,_.selectors,!1))if(c||(c=[]),ti(_))if(null!==_.findHostDirectiveDefs){const D=[];d=d||new Map,_.findHostDirectiveDefs(_,D,d),c.unshift(...D,_),d_(s,o,D.length)}else c.unshift(_),d_(s,o,0);else d=d||new Map,_.findHostDirectiveDefs?.(_,c,d),c.push(_)}return null===c?null:[c,d]}(s,u);let _,D;null===g?_=D=null:[_,D]=g,null!==_&&f0(s,o,u,_,d,D),d&&function p0(s,o,u){if(o){const c=s.localNames=[];for(let d=0;d<o.length;d+=2){const g=u[o[d+1]];if(null==g)throw new fe(-301,!1);c.push(o[d],g)}}}(u,c,d)}u.mergedAttrs=Do(u.mergedAttrs,u.attrs)}function f0(s,o,u,c,d,g){for(let A=0;A<c.length;A++)il(bo(u,o),s,c[A].type);!function g0(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}(u,s.data.length,c.length);for(let A=0;A<c.length;A++){const N=c[A];N.providersResolver&&N.providersResolver(N)}let _=!1,D=!1,b=Gp(s,o,c.length,null);for(let A=0;A<c.length;A++){const N=c[A];u.mergedAttrs=Do(u.mergedAttrs,N.hostAttrs),ki(s,u,o,b,N),h_(b,N,d),null!==N.contentQueries&&(u.flags|=4),(null!==N.hostBindings||null!==N.hostAttrs||0!==N.hostVars)&&(u.flags|=64);const F=N.type.prototype;!_&&(F.ngOnChanges||F.ngOnInit||F.ngDoCheck)&&((s.preOrderHooks??(s.preOrderHooks=[])).push(u.index),_=!0),!D&&(F.ngOnChanges||F.ngDoCheck)&&((s.preOrderCheckHooks??(s.preOrderCheckHooks=[])).push(u.index),D=!0),b++}!function et(s,o,u){const d=o.directiveEnd,g=s.data,_=o.attrs,D=[];let b=null,A=null;for(let N=o.directiveStart;N<d;N++){const F=g[N],G=u?u.get(F):null,ye=G?G.outputs:null;b=h0(F.inputs,N,b,G?G.inputs:null),A=h0(F.outputs,N,A,ye);const Ve=null===b||null===_||id(o)?null:f_(b,N,_);D.push(Ve)}null!==b&&(b.hasOwnProperty("class")&&(o.flags|=8),b.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=D,o.inputs=b,o.outputs=A}(s,u,g)}function Zp(s,o,u){const c=u.directiveStart,d=u.directiveEnd,g=u.index,_=function Er(){return Nt.lFrame.currentDirectiveIndex}();try{vo(g);for(let D=c;D<d;D++){const b=s.data[D],A=o[D];ia(D),(null!==b.hostBindings||0!==b.hostVars||null!==b.hostAttrs)&&si(b,A)}}finally{vo(-1),ia(_)}}function si(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function d_(s,o,u){o.componentOffset=u,(s.components??(s.components=[])).push(o.index)}function h_(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;ti(o)&&(u[""]=s)}}function ki(s,o,u,c,d){s.data[c]=d;const g=d.factory||(d.factory=fi(d.type)),_=new Qu(g,ti(d),Nh);s.blueprint[c]=_,u[c]=_,function _b(s,o,u,c,d){const g=d.hostBindings;if(g){let _=s.hostBindingOpCodes;null===_&&(_=s.hostBindingOpCodes=[]);const D=~o.index;(function Eb(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(_)!=D&&_.push(D),_.push(u,c,g)}}(s,o,c,Gp(s,u,d.hostVars,Wt),d)}function ps(s,o,u,c,d,g){const _=ni(s,o);!function kh(s,o,u,c,d,g,_){if(null==g)s.removeAttribute(o,d,u);else{const D=null==_?Ne(g):_(g,c||"",d);s.setAttribute(o,d,D,u)}}(o[$t],_,g,s.value,u,c,d)}function ga(s,o,u,c,d,g){const _=g[o];if(null!==_){const D=c.setInput;for(let b=0;b<_.length;){const A=_[b++],N=_[b++],F=_[b++];null!==D?c.setInput(u,F,A,N):u[N]=F}}}function f_(s,o,u){let c=null,d=0;for(;d<u.length;){const g=u[d];if(0!==g)if(5!==g){if("number"==typeof g)break;if(s.hasOwnProperty(g)){null===c&&(c=[]);const _=s[g];for(let D=0;D<_.length;D+=2)if(_[D]===o){c.push(g,_[D+1],u[d+1]);break}}d+=2}else d+=2;else d+=4}return c}function m0(s,o,u,c){return[s,!0,!1,o,null,0,c,u,null,null]}function y0(s,o){const u=xr(o,s);if(na(u)){const c=u[Xe];48&u[Bt]?Oh(c,u,c.template,u[Ln]):u[es]>0&&Yp(u)}}function Yp(s){for(let c=ko(s);null!==c;c=mh(c))for(let d=er;d<c.length;d++){const g=c[d];if(na(g))if(512&g[Bt]){const _=g[Xe];Oh(_,g,_.template,g[Ln])}else g[es]>0&&Yp(g)}const u=s[Xe].components;if(null!==u)for(let c=0;c<u.length;c++){const d=xr(u[c],s);na(d)&&d[es]>0&&Yp(d)}}function v0(s,o){const u=xr(o,s),c=u[Xe];(function Db(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),Kr(c,u,u[Ln])}function Qp(s,o){return s[Ai]?s[ec][an]=o:s[Ai]=o,s[ec]=o,o}function Jp(s){for(;s;){s[Bt]|=32;const o=pu(s);if(Mi(s)&&!o)return s;s=o}return null}function Lh(s,o,u,c=!0){const d=o[Ua];d.begin&&d.begin();try{Oh(s,o,s.template,u)}catch(_){throw c&&I0(o,_),_}finally{d.end&&d.end()}}function Xp(s,o,u){Ku(0),o(s,u)}function p_(s){return s[Zo]||(s[Zo]=[])}function w0(s){return s.cleanup||(s.cleanup=[])}function I0(s,o){const u=s[mo],c=u?u.get(Up,null):null;c&&c.handleError(o)}function od(s,o,u,c,d){for(let g=0;g<u.length;){const _=u[g++],D=u[g++],b=o[_],A=s.data[_];null!==A.setInput?A.setInput(b,d,c,D):b[D]=d}}function Xm(s,o,u){let c=u?s.styles:null,d=u?s.classes:null,g=0;if(null!==o)for(let _=0;_<o.length;_++){const D=o[_];"number"==typeof D?g=D:1==g?d=de(d,D):2==g&&(c=de(c,D+": "+o[++_]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=d:s.classesWithoutHost=d}function ad(s,o,u,c,d=!1){for(;null!==u;){const g=o[u.index];if(null!==g&&c.push(Vn(g)),hi(g))for(let D=er;D<g.length;D++){const b=g[D],A=b[Xe].firstChild;null!==A&&ad(b[Xe],b,A,c)}const _=u.type;if(8&_)ad(s,o,u.child,c);else if(32&_){const D=fu(u,o);let b;for(;b=D();)c.push(b)}else if(16&_){const D=eo(o,u);if(Array.isArray(D))c.push(...D);else{const b=pu(o[vr]);ad(b[Xe],b,D,c,!0)}}u=d?u.projectionNext:u.next}return c}class ud{get rootNodes(){const o=this._lView,u=o[Xe];return ad(u,o,u.firstChild,[])}constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ln]}set context(o){this._lView[Ln]=o}get destroyed(){return 128==(128&this._lView[Bt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[xn];if(hi(o)){const u=o[ja],c=u?u.indexOf(this):-1;c>-1&&(jc(o,c),Tc(u,c))}this._attachedToViewContainer=!1}yu(this._lView[Xe],this._lView)}onDestroy(o){bu(this._lView[Xe],this._lView,null,o)}markForCheck(){Jp(this._cdRefInjectingView||this._lView)}detach(){this._lView[Bt]&=-65}reattach(){this._lView[Bt]|=64}detectChanges(){Lh(this._lView[Xe],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new fe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Sw(s,o){Eu(s,o,o[$t],2,null,null)}(this._lView[Xe],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new fe(902,!1);this._appRef=o}}class Cb extends ud{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;Lh(o[Xe],o,o[Ln],!1)}checkNoChanges(){}get context(){return null}}class g_ extends bl{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=kt(o);return new ld(u,this.ngModule)}}function m_(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class ey{constructor(o,u){this.injector=o,this.parentInjector=u}get(o,u,c){c=Si(c);const d=this.injector.get(o,Qv,c);return d!==Qv||u===Qv?d:this.parentInjector.get(o,u,c)}}class ld extends Lw{get inputs(){return m_(this.componentDef.inputs)}get outputs(){return m_(this.componentDef.outputs)}constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function sb(s){return s.map(ib).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}create(o,u,c,d){let g=(d=d||this.ngModule)instanceof td?d:d?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const _=g?new ey(o,g):o,D=_.get(Bw,null);if(null===D)throw new fe(407,!1);const b=_.get(KC,null),A=D.createRenderer(null,this.componentDef),N=this.componentDef.selectors[0][0]||"div",F=c?function Jm(s,o,u){return s.selectRootElement(o,u===X.ShadowDom)}(A,c,this.componentDef.encapsulation):gp(A,N,function D0(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(N)),G=this.componentDef.onPush?288:272,Q=ve(0,null,null,1,0,null,null,null,null,null),ye=a_(null,Q,null,G,null,null,D,A,b,_,null);let Ve,Ze;sa(ye);try{const dt=this.componentDef;let xt,Re=null;dt.findHostDirectiveDefs?(xt=[],Re=new Map,dt.findHostDirectiveDefs(dt,xt,Re),xt.push(dt)):xt=[dt];const zt=function v_(s,o){const u=s[Xe],c=en;return s[c]=o,Ph(u,c,2,"#host",null)}(ye,F),Wn=function b0(s,o,u,c,d,g,_,D){const b=d[Xe];!function S0(s,o,u,c){for(const d of s)o.mergedAttrs=Do(o.mergedAttrs,d.hostAttrs);null!==o.mergedAttrs&&(Xm(o,o.mergedAttrs,!0),null!==u&&_l(c,u,o))}(c,s,o,_);const A=g.createRenderer(o,u),N=a_(d,d0(u),null,u.onPush?32:16,d[s.index],s,g,A,D||null,null,null);return b.firstCreatePass&&d_(b,s,c.length-1),Qp(d,N),d[s.index]=N}(zt,F,dt,xt,ye,D,A);Ze=Gi(Q,en),F&&function T0(s,o,u,c){if(c)el(s,u,["ng-version",Yv.full]);else{const{attrs:d,classes:g}=function Km(s){const o=[],u=[];let c=1,d=2;for(;c<s.length;){let g=s[c];if("string"==typeof g)2===d?""!==g&&o.push(g,s[++c]):8===d&&u.push(g);else{if(!so(d))break;d=g}c++}return{attrs:o,classes:u}}(o.selectors[0]);d&&el(s,u,d),g&&g.length>0&&Yc(s,u,g.join(" "))}}(A,dt,F,c),void 0!==u&&function A0(s,o,u){const c=s.projection=[];for(let d=0;d<o.length;d++){const g=u[d];c.push(null!=g?Array.from(g):null)}}(Ze,this.ngContentSelectors,u),Ve=function bb(s,o,u,c,d,g){const _=Un(),D=d[Xe],b=ni(_,d);f0(D,d,_,u,null,c);for(let N=0;N<u.length;N++)Fe(Is(d,D,_.directiveStart+N,_),d);Zp(D,d,_),b&&Fe(b,d);const A=Is(d,D,_.directiveStart+_.componentOffset,_);if(s[Ln]=d[Ln]=A,null!==g)for(const N of g)N(A,o);return l_(D,_,s),A}(Wn,dt,xt,Re,ye,[__]),Kr(Q,ye,null)}finally{mc()}return new y_(this.componentType,Ve,nd(Ze,ye),ye,Ze)}}class y_ extends HC{constructor(o,u,c,d,g){super(),this.location=c,this._rootLView=d,this._tNode=g,this.instance=u,this.hostView=this.changeDetectorRef=new Cb(d),this.componentType=o}setInput(o,u){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[o])){const g=this._rootLView;od(g[Xe],g,d,o,u),qp(g,this._tNode.index)}}get injector(){return new aa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function __(){const s=Un();yc(Ie()[Xe],s)}function w_(s){let o=function E_(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const c=[s];for(;o;){let d;if(ti(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new fe(903,!1);d=o.\u0275dir}if(d){if(u){c.push(d);const _=s;_.inputs=eg(s.inputs),_.declaredInputs=eg(s.declaredInputs),_.outputs=eg(s.outputs);const D=d.hostBindings;D&&vi(s,D);const b=d.viewQuery,A=d.contentQueries;if(b&&D_(s,b),A&&oi(s,A),ge(s.inputs,d.inputs),ge(s.declaredInputs,d.declaredInputs),ge(s.outputs,d.outputs),ti(d)&&d.data.animation){const N=s.data;N.animation=(N.animation||[]).concat(d.data.animation)}}const g=d.features;if(g)for(let _=0;_<g.length;_++){const D=g[_];D&&D.ngInherit&&D(s),D===w_&&(u=!1)}}o=Object.getPrototypeOf(o)}!function I_(s){let o=0,u=null;for(let c=s.length-1;c>=0;c--){const d=s[c];d.hostVars=o+=d.hostVars,d.hostAttrs=Do(d.hostAttrs,u=Do(u,d.hostAttrs))}}(c)}function eg(s){return s===Ye?{}:s===We?[]:s}function D_(s,o){const u=s.viewQuery;s.viewQuery=u?(c,d)=>{o(c,d),u(c,d)}:o}function oi(s,o){const u=s.contentQueries;s.contentQueries=u?(c,d,g)=>{o(c,d,g),u(c,d,g)}:o}function vi(s,o){const u=s.hostBindings;s.hostBindings=u?(c,d)=>{o(c,d),u(c,d)}:o}function Tl(s){return!!T_(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function T_(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function _i(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function iy(s,o,u,c){const d=Ie();return _i(d,ws(),o)&&(tn(),ps(En(),d,s,o,u,c)),iy}function P_(s,o,u,c,d,g,_,D){const b=Ie(),A=tn(),N=s+en,F=A.firstCreatePass?function N0(s,o,u,c,d,g,_,D,b){const A=o.consts,N=Ph(o,s,4,_||null,xi(A,D));Kp(o,u,N,xi(A,b)),yc(o,N);const F=N.tView=ve(2,N,c,d,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A);return null!==o.queries&&(o.queries.template(o,N),F.queries=o.queries.embeddedTView(N)),N}(N,A,b,o,u,c,d,g,_):A.data[N];Es(F,!1);const G=b[$t].createComment("");Eh(A,b,G,F),Fe(G,b),Qp(b,b[N]=m0(G,b,G,F)),$a(F)&&Rs(A,b,F),null!=_&&c0(b,F,D)}function sy(s){return function is(s,o){return s[o]}(function ss(){return Nt.lFrame.contextLView}(),en+s)}function ig(s,o,u){const c=Ie();return _i(c,ws(),o)&&function Dt(s,o,u,c,d,g,_,D){const b=ni(o,u);let N,A=o.inputs;!D&&null!=A&&(N=A[c])?(od(s,u,N,c,d),Uu(o)&&qp(u,o.index)):3&o.type&&(c=function c_(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),d=null!=_?_(d,o.value||"",c):d,g.setProperty(b,c,d))}(tn(),En(),c,s,o,c[$t],u,!1),ig}function sg(s,o,u,c,d){const _=d?"class":"style";od(s,u,o.inputs[_],_,c)}function Ml(s,o,u,c){const d=Ie(),g=tn(),_=en+s,D=d[$t],b=g.firstCreatePass?function oy(s,o,u,c,d,g){const _=o.consts,b=Ph(o,s,2,c,xi(_,d));return Kp(o,u,b,xi(_,g)),null!==b.attrs&&Xm(b,b.attrs,!1),null!==b.mergedAttrs&&Xm(b,b.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,b),b}(_,g,d,o,u,c):g.data[_],A=d[_]=gp(D,o,function Cm(){return Nt.lFrame.currentNamespace}()),N=$a(b);return Es(b,!0),_l(D,A,b),32!=(32&b.flags)&&Eh(g,d,A,b),0===function zu(){return Nt.lFrame.elementDepthCount}()&&Fe(A,d),function Yd(){Nt.lFrame.elementDepthCount++}(),N&&(Rs(g,d,b),l_(g,b,d)),null!==c&&c0(d,b),Ml}function og(){let s=Un();Gu()?function Jd(){Nt.lFrame.isParent=!1}():(s=s.parent,Es(s,!1));const o=s;!function ac(){Nt.lFrame.elementDepthCount--}();const u=tn();return u.firstCreatePass&&(yc(u,s),Vu(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function wo(s){return 0!=(8&s.flags)}(o)&&sg(u,o,Ie(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Gs(s){return 0!=(16&s.flags)}(o)&&sg(u,o,Ie(),o.stylesWithoutHost,!1),og}function O_(s,o,u,c){return Ml(s,o,u,c),og(),O_}function L_(){return Ie()}function ay(s){return!!s&&"function"==typeof s.then}function P0(s){return!!s&&"function"==typeof s.subscribe}const qh=P0;function uy(s,o,u,c){const d=Ie(),g=tn(),_=Un();return function Rl(s,o,u,c,d,g,_){const D=$a(c),A=s.firstCreatePass&&w0(s),N=o[Ln],F=p_(o);let G=!0;if(3&c.type||_){const Ve=ni(c,o),Ze=_?_(Ve):Ve,dt=F.length,xt=_?zt=>_(Vn(zt[c.index])):c.index;let Re=null;if(!_&&D&&(Re=function lg(s,o,u,c){const d=s.cleanup;if(null!=d)for(let g=0;g<d.length-1;g+=2){const _=d[g];if(_===u&&d[g+1]===c){const D=o[Zo],b=d[g+2];return D.length>b?D[b]:null}"string"==typeof _&&(g+=2)}return null}(s,o,d,c.index)),null!==Re)(Re.__ngLastListenerFn__||Re).__ngNextListenerFn__=g,Re.__ngLastListenerFn__=g,G=!1;else{g=O0(c,o,N,g,!1);const zt=u.listen(Ze,d,g);F.push(g,zt),A&&A.push(d,xt,dt,dt+1)}}else g=O0(c,o,N,g,!1);const Q=c.outputs;let ye;if(G&&null!==Q&&(ye=Q[d])){const Ve=ye.length;if(Ve)for(let Ze=0;Ze<Ve;Ze+=2){const Wn=o[ye[Ze]][ye[Ze+1]].subscribe(g),sr=F.length;F.push(g,Wn),A&&A.push(d,c.index,sr,-(sr+1))}}}(g,d,d[$t],_,s,o,c),uy}function ly(s,o,u,c){try{return bn(6,o,u),!1!==u(c)}catch(d){return I0(s,d),!1}finally{bn(7,o,u)}}function O0(s,o,u,c,d){return function g(_){if(_===Function)return c;Jp(s.componentOffset>-1?xr(s.index,o):o);let b=ly(o,u,c,_),A=g.__ngNextListenerFn__;for(;A;)b=ly(o,u,A,_)&&b,A=A.__ngNextListenerFn__;return d&&!1===b&&(_.preventDefault(),_.returnValue=!1),b}}function k0(s=1){return function Zu(s){return(Nt.lFrame.contextLView=function eh(s,o){for(;s>0;)o=o[ts],s--;return o}(s,Nt.lFrame.contextLView))[Ln]}(s)}function fg(s,o){return s<<17|o<<2}function Nl(s){return s>>17&32767}function U_(s){return 2|s}function Bo(s){return(131068&s)>>2}function ma(s,o){return-131069&s|o<<2}function cy(s){return 1|s}function B_(s,o,u,c,d){const g=s[u+1],_=null===o;let D=c?Nl(g):Bo(g),b=!1;for(;0!==D&&(!1===b||_);){const N=s[D+1];kb(s[D],o)&&(b=!0,s[D+1]=c?cy(N):U_(N)),D=c?Nl(N):Bo(N)}b&&(s[u+1]=c?U_(g):cy(g))}function kb(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&rt(s,o)>=0}function pd(s,o){return function jo(s,o,u,c){const d=Ie(),g=tn(),_=function os(s){const o=Nt.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}(2);g.firstUpdatePass&&function q_(s,o,u,c){const d=s.data;if(null===d[u+1]){const g=d[wr()],_=function G_(s,o){return o>=s.expandoStartIndex}(s,u);(function yg(s,o){return 0!=(s.flags&(o?8:16))})(g,c)&&null===o&&!_&&(o=!1),o=function z0(s,o,u,c){const d=function Wu(s){const o=Nt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let g=c?o.residualClasses:o.residualStyles;if(null===d)0===(c?o.classBindings:o.styleBindings)&&(u=gg(u=gy(null,s,o,u,c),o.attrs,c),g=null);else{const _=o.directiveStylingLast;if(-1===_||s[_]!==d)if(u=gy(d,s,o,u,c),null===g){let b=function py(s,o,u){const c=u?o.classBindings:o.styleBindings;if(0!==Bo(c))return s[Nl(c)]}(s,o,c);void 0!==b&&Array.isArray(b)&&(b=gy(null,s,o,b[1],c),b=gg(b,o.attrs,c),function G0(s,o,u,c){s[Nl(u?o.classBindings:o.styleBindings)]=c}(s,o,c,b))}else g=function _a(s,o,u){let c;const d=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<d;g++)c=gg(c,s[g].hostAttrs,u);return gg(c,o.attrs,u)}(s,o,c)}return void 0!==g&&(c?o.residualClasses=g:o.residualStyles=g),u}(d,g,o,c),function Pb(s,o,u,c,d,g){let _=g?o.classBindings:o.styleBindings,D=Nl(_),b=Bo(_);s[c]=u;let N,A=!1;if(Array.isArray(u)?(N=u[1],(null===N||rt(u,N)>0)&&(A=!0)):N=u,d)if(0!==b){const G=Nl(s[D+1]);s[c+1]=fg(G,D),0!==G&&(s[G+1]=ma(s[G+1],c)),s[D+1]=function xb(s,o){return 131071&s|o<<17}(s[D+1],c)}else s[c+1]=fg(D,0),0!==D&&(s[D+1]=ma(s[D+1],c)),D=c;else s[c+1]=fg(b,0),0===D?D=c:s[b+1]=ma(s[b+1],c),b=c;A&&(s[c+1]=U_(s[c+1])),B_(s,N,c,!0),B_(s,N,c,!1),function Ob(s,o,u,c,d){const g=d?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof o&&rt(g,o)>=0&&(u[c+1]=cy(u[c+1]))}(o,N,s,c,g),_=fg(D,b),g?o.classBindings=_:o.styleBindings=_}(d,g,o,u,_,c)}}(g,s,_,c),o!==Wt&&_i(d,_,o)&&function W_(s,o,u,c,d,g,_,D){if(!(3&o.type))return;const b=s.data,A=b[D+1],N=function U0(s){return 1==(1&s)}(A)?yy(b,o,u,d,Bo(A),_):void 0;gd(N)||(gd(g)||function Rb(s){return 2==(2&s)}(A)&&(g=yy(b,null,u,d,D,_)),function wp(s,o,u,c,d){if(o)d?s.addClass(u,c):s.removeClass(u,c);else{let g=-1===c.indexOf("-")?void 0:Zn.DashCase;null==d?s.removeStyle(u,c,g):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),g|=Zn.Important),s.setStyle(u,c,d,g))}}(c,_,zs(wr(),u),d,g))}(g,g.data[wr()],d,d[$t],s,d[_+1]=function W0(s,o){return null==s||""===s||("string"==typeof o?s+=o:"object"==typeof s&&(s=_e(Wr(s)))),s}(o,u),c,_)}(s,o,null,!0),pd}function gy(s,o,u,c,d){let g=null;const _=u.directiveEnd;let D=u.directiveStylingLast;for(-1===D?D=u.directiveStart:D++;D<_&&(g=o[D],c=gg(c,g.hostAttrs,d),g!==s);)D++;return null!==s&&(u.directiveStylingLast=D),c}function gg(s,o,u){const c=u?1:2;let d=-1;if(null!==o)for(let g=0;g<o.length;g++){const _=o[g];"number"==typeof _?d=_:d===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Jt(s,_,!!u||o[++g]))}return void 0===s?null:s}function yy(s,o,u,c,d,g){const _=null===o;let D;for(;d>0;){const b=s[d],A=Array.isArray(b),N=A?b[1]:b,F=null===N;let G=u[d+1];G===Wt&&(G=F?We:void 0);let Q=F?ls(G,c):N===c?G:void 0;if(A&&!gd(Q)&&(Q=ls(b,c)),gd(Q)&&(D=Q,_))return D;const ye=s[d+1];d=_?Nl(ye):Bo(ye)}if(null!==o){let b=g?o.residualClasses:o.residualStyles;null!=b&&(D=ls(b,c))}return D}function gd(s){return void 0!==s}function K0(s,o=""){const u=Ie(),c=tn(),d=s+en,g=c.firstCreatePass?Ph(c,d,1,o,null):c.data[d],_=u[d]=function yh(s,o){return s.createText(o)}(u[$t],o);Eh(c,u,_,g),Es(g,!1)}function Pl(s,o,u){const c=Ie(),d=function Tu(s,o,u,c){return _i(s,ws(),u)?o+Ne(u)+c:Wt}(c,s,o,u);return d!==Wt&&function Su(s,o,u){const c=zs(o,s);!function pp(s,o,u){s.setValue(o,u)}(s[$t],c,u)}(c,wr(),d),Pl}const Ol=void 0;var Bb=["en",[["a","p"],["AM","PM"],Ol],[["AM","PM"],Ol,Ol],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ol,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ol,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ol,"{1} 'at' {0}",Ol],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function ef(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let tf={};function rE(s){const o=function jb(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=rI(o);if(u)return u;const c=o.split("-")[0];if(u=rI(c),u)return u;if("en"===c)return Bb;throw new fe(701,!1)}function iE(s){return rE(s)[Rt.PluralCase]}function rI(s){return s in tf||(tf[s]=Tt.ng&&Tt.ng.common&&Tt.ng.common.locales&&Tt.ng.common.locales[s]),tf[s]}var Rt=(()=>((Rt=Rt||{})[Rt.LocaleId=0]="LocaleId",Rt[Rt.DayPeriodsFormat=1]="DayPeriodsFormat",Rt[Rt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Rt[Rt.DaysFormat=3]="DaysFormat",Rt[Rt.DaysStandalone=4]="DaysStandalone",Rt[Rt.MonthsFormat=5]="MonthsFormat",Rt[Rt.MonthsStandalone=6]="MonthsStandalone",Rt[Rt.Eras=7]="Eras",Rt[Rt.FirstDayOfWeek=8]="FirstDayOfWeek",Rt[Rt.WeekendRange=9]="WeekendRange",Rt[Rt.DateFormat=10]="DateFormat",Rt[Rt.TimeFormat=11]="TimeFormat",Rt[Rt.DateTimeFormat=12]="DateTimeFormat",Rt[Rt.NumberSymbols=13]="NumberSymbols",Rt[Rt.NumberFormats=14]="NumberFormats",Rt[Rt.CurrencyCode=15]="CurrencyCode",Rt[Rt.CurrencySymbol=16]="CurrencySymbol",Rt[Rt.CurrencyName=17]="CurrencyName",Rt[Rt.Currencies=18]="Currencies",Rt[Rt.Directionality=19]="Directionality",Rt[Rt.PluralCase=20]="PluralCase",Rt[Rt.ExtraData=21]="ExtraData",Rt))();const rr="en-US";let pr=rr;function by(s,o,u,c,d){if(s=K(s),Array.isArray(s))for(let g=0;g<s.length;g++)by(s[g],o,u,c,d);else{const g=tn(),_=Ie();let D=fa(s)?s:K(s.provide),b=kw(s);const A=Un(),N=1048575&A.providerIndexes,F=A.directiveStart,G=A.providerIndexes>>20;if(fa(s)||!s.multi){const Q=new Qu(b,d,Nh),ye=Sy(D,o,d?N:N+G,F);-1===ye?(il(bo(A,_),g,D),pE(g,s,o.length),o.push(D),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),u.push(Q),_.push(Q)):(u[ye]=Q,_[ye]=Q)}else{const Q=Sy(D,o,N+G,F),ye=Sy(D,o,N,N+G),Ze=ye>=0&&u[ye];if(d&&!Ze||!d&&!(Q>=0&&u[Q])){il(bo(A,_),g,D);const dt=function DI(s,o,u,c,d){const g=new Qu(s,u,Nh);return g.multi=[],g.index=o,g.componentProviders=0,gE(g,d,c&&!u),g}(d?mE:oS,u.length,d,c,b);!d&&Ze&&(u[ye].providerFactory=dt),pE(g,s,o.length,0),o.push(D),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),u.push(dt),_.push(dt)}else pE(g,s,Q>-1?Q:ye,gE(u[d?ye:Q],b,!d&&c));!d&&c&&Ze&&u[ye].componentProviders++}}}function pE(s,o,u,c){const d=fa(o),g=function Mh(s){return!!s.useClass}(o);if(d||g){const b=(g?K(o.useClass):o).prototype.ngOnDestroy;if(b){const A=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const N=A.indexOf(u);-1===N?A.push(u,[c,b]):A[N+1].push(c,b)}else A.push(u,b)}}}function gE(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function Sy(s,o,u,c){for(let d=u;d<c;d++)if(o[d]===s)return d;return-1}function oS(s,o,u,c){return Fr(this.multi,[])}function mE(s,o,u,c){const d=this.multi;let g;if(this.providerFactory){const _=this.providerFactory.componentProviders,D=Is(u,u[Xe],this.providerFactory.index,c);g=D.slice(0,_),Fr(d,g);for(let b=_;b<D.length;b++)g.push(D[b])}else g=[],Fr(d,g);return g}function Fr(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function Mu(s,o=[]){return u=>{u.providersResolver=(c,d)=>function sS(s,o,u){const c=tn();if(c.firstCreatePass){const d=ti(s);by(u,c.data,c.blueprint,d,!0),by(o,c.data,c.blueprint,d,!1)}}(c,d?d(s):s,o)}}class _d{}class Pn{}function Ty(s,o){return new jn(s,o??null)}class jn extends _d{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new g_(this);const c=zr(o);this._bootstrapComponents=pa(c.bootstrap),this._r3Injector=lb(o,u,[{provide:_d,useValue:this},{provide:bl,useValue:this.componentFactoryResolver}],_e(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Ay extends Pn{constructor(o){super(),this.moduleType=o}create(o){return new jn(this.moduleType,o)}}class ff extends _d{constructor(o,u,c){super(),this.componentFactoryResolver=new g_(this),this.instance=null;const d=new Pw([...o,{provide:_d,useValue:this},{provide:bl,useValue:this.componentFactoryResolver}],u||Hm(),c,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function Ui(s,o,u=null){return new ff(s,o,u).injector}let CI=(()=>{class s{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const c=Mw(0,u.type),d=c.length>0?Ui([c],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,d)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=St({token:s,providedIn:"environment",factory:()=>new s(ln(td))}),s})();function bI(s){s.getStandaloneInjector=o=>o.get(CI).getOrCreateStandaloneInjector(s)}function Ul(s){return o=>{setTimeout(s,void 0,o)}}const co=class Tn extends m.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){let d=o,g=u||(()=>null),_=c;if(o&&"object"==typeof o){const b=o;d=b.next?.bind(b),g=b.error?.bind(b),_=b.complete?.bind(b)}this.__isAsync&&(g=Ul(g),d&&(d=Ul(d)),_&&(_=Ul(_)));const D=super.subscribe({next:d,error:g,complete:_});return o instanceof J.w0&&o.add(D),D}};function wE(){return this._results[Symbol.iterator]()}class Oy{get changes(){return this._changes||(this._changes=new co)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Oy.prototype;u[Symbol.iterator]||(u[Symbol.iterator]=wE)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const d=function qr(s){return s.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function Sm(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let d=s[c],g=o[c];if(u&&(d=u(d),g=u(g)),g!==d)return!1}return!0}(c._results,d,u))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Dd=(()=>{class s{}return s.__NG_ELEMENT_ID__=VI,s})();const FI=Dd,LI=class extends FI{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o,u){const c=this._declarationTContainer.tView,d=a_(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,u||null);d[js]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[zi];return null!==_&&(d[zi]=_.createEmbeddedView(c)),Kr(c,d,o),new ud(d)}};function VI(){return ky(Un(),Ie())}function ky(s,o){return 4&s.type?new LI(o,s,nd(s,o)):null}let Fy=(()=>{class s{}return s.__NG_ELEMENT_ID__=lS,s})();function lS(){return jI(Un(),Ie())}const UI=Fy,BI=class extends UI{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return nd(this._hostTNode,this._hostLView)}get injector(){return new aa(this._hostTNode,this._hostLView)}get parentInjector(){const o=gn(this._hostTNode,this._hostLView);if(oa(o)){const u=Za(o,this._hostLView),c=Ka(o);return new aa(u[Xe].data[c+8],u)}return new aa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=IE(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-er}createEmbeddedView(o,u,c){let d,g;"number"==typeof c?d=c:null!=c&&(d=c.index,g=c.injector);const _=o.createEmbeddedView(u||{},g);return this.insert(_,d),_}createComponent(o,u,c,d,g){const _=o&&!function Mo(s){return"function"==typeof s}(o);let D;if(_)D=u;else{const F=u||{};D=F.index,c=F.injector,d=F.projectableNodes,g=F.environmentInjector||F.ngModuleRef}const b=_?o:new ld(kt(o)),A=c||this.parentInjector;if(!g&&null==b.ngModule){const G=(_?A:this.parentInjector).get(td,null);G&&(g=G)}const N=b.create(A,d,void 0,g);return this.insert(N.hostView,D),N}insert(o,u){const c=o._lView,d=c[Xe];if(function Yf(s){return hi(s[xn])}(c)){const N=this.indexOf(o);if(-1!==N)this.detach(N);else{const F=c[xn],G=new BI(F,F[Rr],F[xn]);G.detach(G.indexOf(o))}}const g=this._adjustIndex(u),_=this._lContainer;!function Pv(s,o,u,c){const d=er+c,g=u.length;c>0&&(u[d-1][an]=o),c<g-er?(o[an]=u[d],su(u,er+c,o)):(u.push(o),o[an]=null),o[xn]=u;const _=o[js];null!==_&&u!==_&&function Ov(s,o){const u=s[Hs];o[vr]!==o[xn][xn][vr]&&(s[Lu]=!0),null===u?s[Hs]=[o]:u.push(o)}(_,o);const D=o[zi];null!==D&&D.insertView(s),o[Bt]|=64}(d,c,_,g);const D=_p(g,_),b=c[$t],A=Gc(b,_[$s]);return null!==A&&function vh(s,o,u,c,d,g){c[Jn]=d,c[Rr]=o,Eu(s,c,u,1,d,g)}(d,_[Rr],b,c,A,D),o.attachToViewContainerRef(),su(DE(_),g,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=IE(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=jc(this._lContainer,u);c&&(Tc(DE(this._lContainer),u),yu(c[Xe],c))}detach(o){const u=this._adjustIndex(o,-1),c=jc(this._lContainer,u);return c&&null!=Tc(DE(this._lContainer),u)?new ud(c):null}_adjustIndex(o,u=0){return o??this.length+u}};function IE(s){return s[ja]}function DE(s){return s[ja]||(s[ja]=[])}function jI(s,o){let u;const c=o[s.index];if(hi(c))u=c;else{let d;if(8&s.type)d=Vn(c);else{const g=o[$t];d=g.createComment("");const _=ni(s,o);Xs(g,Gc(g,_),d,function vp(s,o){return s.nextSibling(o)}(g,_),!1)}o[s.index]=u=m0(c,o,d,s),Qp(o,u)}return new BI(u,s,o)}class CE{constructor(o){this.queryList=o,this.matches=null}clone(){return new CE(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ng{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,d=[];for(let g=0;g<c;g++){const _=u.getByIndex(g);d.push(this.queries[_.indexInDeclarationView].clone())}return new Ng(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==vf(o,u).matches&&this.queries[u].setDirty()}}class Bl{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class Cd{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const d=null!==u?u.length:0,g=this.getByIndex(c).embeddedTView(o,d);g&&(g.indexInDeclarationView=c,null!==u?u.push(g):u=[g])}return null!==u?new Cd(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class yf{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new yf(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const g=c[d];this.matchTNodeWithReadOption(o,u,Ly(u,g)),this.matchTNodeWithReadOption(o,u,Ir(u,o,g,!1,!1))}else c===Dd?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,Ir(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===Du||d===Fy||d===Dd&&4&u.type)this.addMatch(u.index,-2);else{const g=Ir(u,o,d,!1,!1);null!==g&&this.addMatch(u.index,g)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function Ly(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function HI(s,o,u,c){return-1===u?function $I(s,o){return 11&s.type?nd(s,o):4&s.type?ky(s,o):null}(o,s):-2===u?function Nu(s,o,u){return u===Du?nd(o,s):u===Dd?ky(o,s):u===Fy?jI(o,s):void 0}(s,o,c):Is(s,s[Xe],u,o)}function bE(s,o,u,c){const d=o[zi].queries[c];if(null===d.matches){const g=s.data,_=u.matches,D=[];for(let b=0;b<_.length;b+=2){const A=_[b];D.push(A<0?null:HI(o,g[A],_[b+1],u.metadata.read))}d.matches=D}return d.matches}function jl(s,o,u,c){const d=s.queries.getByIndex(u),g=d.matches;if(null!==g){const _=bE(s,o,d,u);for(let D=0;D<g.length;D+=2){const b=g[D];if(b>0)c.push(_[D/2]);else{const A=g[D+1],N=o[-b];for(let F=er;F<N.length;F++){const G=N[F];G[js]===G[xn]&&jl(G[Xe],G,A,c)}if(null!==N[Hs]){const F=N[Hs];for(let G=0;G<F.length;G++){const Q=F[G];jl(Q[Xe],Q,A,c)}}}}}return c}function SE(s){const o=Ie(),u=tn(),c=dc();Ku(c+1);const d=vf(u,c);if(s.dirty&&function ta(s){return 4==(4&s[Bt])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const g=d.crossesNgTemplate?jl(u,o,c,[]):bE(u,o,d,c);s.reset(g,Uw),s.notifyOnChanges()}return!0}return!1}function Pg(s,o,u,c){const d=tn();if(d.firstCreatePass){const g=Un();(function Uy(s,o,u){null===s.queries&&(s.queries=new Cd),s.queries.track(new yf(o,u))})(d,new Bl(o,u,c),g.index),function By(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(d,s),2==(2&u)&&(d.staticContentQueries=!0)}!function Bi(s,o,u){const c=new Oy(4==(4&u));bu(s,o,c,c.destroy),null===o[zi]&&(o[zi]=new Ng),o[zi].queries.push(new CE(c))}(d,Ie(),u)}function Vy(){return function bd(s,o){return s[zi].queries[o].queryList}(Ie(),dc())}function vf(s,o){return s.queries.getByIndex(o)}function ji(s){return!!zr(s)}function Hg(...s){}const zg=new wn("Application Initializer");let Gg=(()=>{class s{constructor(u){this.appInits=u,this.resolve=Hg,this.reject=Hg,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const g=this.appInits[d]();if(ay(g))u.push(g);else if(qh(g)){const _=new Promise((D,b)=>{g.subscribe({complete:D,error:b})});u.push(_)}}Promise.all(u).then(()=>{c()}).catch(d=>{this.reject(d)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(ln(zg,8))},s.\u0275prov=St({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const uD=new wn("AppId",{providedIn:"root",factory:function xE(){return`${qg()}${qg()}${qg()}`}});function qg(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Df=new wn("Platform Initializer"),Wg=new wn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Wy=new wn("AnimationModuleType");let lD=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=St({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const Kg=new wn("LocaleId",{providedIn:"root",factory:()=>yr(Kg,vt.Optional|vt.SkipSelf)||function cD(){return typeof $localize<"u"&&$localize.locale||rr}()}),vS=new wn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class wS{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let IS=(()=>{class s{compileModuleSync(u){return new Ay(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),g=pa(zr(u).declarations).reduce((_,D)=>{const b=kt(D);return b&&_.push(new ld(b)),_},[]);return new wS(c,g)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=St({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const fD=(()=>Promise.resolve(0))();function Ad(s){typeof Zone>"u"?fD.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Fs{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new co(!1),this.onMicrotaskEmpty=new co(!1),this.onStable=new co(!1),this.onError=new co(!1),typeof Zone>"u")throw new fe(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&u,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function Ta(){let s=Tt.requestAnimationFrame,o=Tt.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function mD(s){const o=()=>{!function gD(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Tt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,PE(s),s.isCheckStableRunning=!0,Ky(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),PE(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,d,g,_,D)=>{try{return yD(s),u.invokeTask(d,g,_,D)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&o(),bf(s)}},onInvoke:(u,c,d,g,_,D,b)=>{try{return yD(s),u.invoke(d,g,_,D,b)}finally{s.shouldCoalesceRunChangeDetection&&o(),bf(s)}},onHasTask:(u,c,d,g)=>{u.hasTask(d,g),c===d&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,PE(s),Ky(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(u,c,d,g)=>(u.handleError(d,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Fs.isInAngularZone())throw new fe(909,!1)}static assertNotInAngularZone(){if(Fs.isInAngularZone())throw new fe(909,!1)}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,d){const g=this._inner,_=g.scheduleEventTask("NgZoneEvent: "+d,o,Zg,Hg,Hg);try{return g.runTask(_,u,c)}finally{g.cancelTask(_)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const Zg={};function Ky(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function PE(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function yD(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function bf(s){s._nesting--,Ky(s)}class OE{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new co,this.onMicrotaskEmpty=new co,this.onStable=new co,this.onError=new co}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,d){return o.apply(u,c)}}const vD=new wn(""),kE=new wn("");let Zy,FE=(()=>{class s{constructor(u,c,d){this._ngZone=u,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Zy||(function CS(s){Zy=s}(d),d.addToWindow(c)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Fs.assertNotInAngularZone(),Ad(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ad(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,d){let g=-1;c&&c>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==g),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:g,updateCb:d})}whenStable(u,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,c,d){return[]}}return s.\u0275fac=function(u){return new(u||s)(ln(Fs),ln(LE),ln(kE))},s.\u0275prov=St({token:s,factory:s.\u0275fac}),s})(),LE=(()=>{class s{constructor(){this._applications=new Map}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return Zy?.findTestabilityInTree(this,u,c)??null}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=St({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const Pu=!1;let zl=null;const _D=new wn("AllowMultipleToken"),Aa=new wn("PlatformDestroyListeners"),Md=new wn("appBootstrapListener");class Ou{constructor(o,u){this.name=o,this.token=u}}function Gl(s,o,u=[]){const c=`Platform: ${o}`,d=new wn(c);return(g=[])=>{let _=Qy();if(!_||_.injector.get(_D,!1)){const D=[...u,...g,{provide:d,useValue:!0}];s?s(D):function ID(s){if(zl&&!zl.get(_D,!1))throw new fe(400,!1);zl=s;const o=s.get(Jy);(function VE(s){const o=s.get(Df,null);o&&o.forEach(u=>u())})(s)}(function ql(s=[],o){return Rh.create({name:o,providers:[{provide:Gv,useValue:"platform"},{provide:Aa,useValue:new Set([()=>zl=null])},...s]})}(D,c))}return function Rd(s){const o=Qy();if(!o)throw new fe(401,!1);return o}()}}function Qy(){return zl?.get(Jy)??null}let Jy=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const d=function BE(s,o){let u;return u="noop"===s?new OE:("zone.js"===s?void 0:s)||new Fs(o),u}(c?.ngZone,function Xy(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(c)),g=[{provide:Fs,useValue:d}];return d.run(()=>{const _=Rh.create({providers:g,parent:this.injector,name:u.moduleType.name}),D=u.create(_),b=D.injector.get(Up,null);if(!b)throw new fe(402,!1);return d.runOutsideAngular(()=>{const A=d.onError.subscribe({next:N=>{b.handleError(N)}});D.onDestroy(()=>{Qg(this._modules,D),A.unsubscribe()})}),function jE(s,o,u){try{const c=u();return ay(c)?c.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(b,d,()=>{const A=D.injector.get(Gg);return A.runInitializers(),A.donePromise.then(()=>(function Os(s){gt(s,"Expected localeId to be defined"),"string"==typeof s&&(pr=s.toLowerCase().replace(/_/g,"-"))}(D.injector.get(Kg,rr)||rr),this._moduleDoBootstrap(D),D))})})}bootstrapModule(u,c=[]){const d=DD({},c);return function ED(s,o,u){const c=new Ay(u);return Promise.resolve(c)}(0,0,u).then(g=>this.bootstrapModuleFactory(g,d))}_moduleDoBootstrap(u){const c=u.injector.get(Yg);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!u.instance.ngDoBootstrap)throw new fe(-403,!1);u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new fe(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const u=this._injector.get(Aa,null);u&&(u.forEach(c=>c()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(ln(Rh))},s.\u0275prov=St({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function DD(s,o){return Array.isArray(o)?o.reduce(DD,s):{...s,...o}}let Yg=(()=>{class s{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(u,c,d){this._zone=u,this._injector=c,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new O.y(D=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{D.next(this._stable),D.complete()})}),_=new O.y(D=>{let b;this._zone.runOutsideAngular(()=>{b=this._zone.onStable.subscribe(()=>{Fs.assertNotInAngularZone(),Ad(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,D.next(!0))})})});const A=this._zone.onUnstable.subscribe(()=>{Fs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{D.next(!1)}))});return()=>{b.unsubscribe(),A.unsubscribe()}});this.isStable=(0,ie.T)(g,_.pipe((0,se.B)()))}bootstrap(u,c){const d=u instanceof Lw;if(!this._injector.get(Gg).done){!d&&Ti(u);throw new fe(405,Pu)}let _;_=d?u:this._injector.get(bl).resolveComponentFactory(u),this.componentTypes.push(_.componentType);const D=function wD(s){return s.isBoundToModule}(_)?void 0:this._injector.get(_d),A=_.create(Rh.NULL,[],c||_.selector,D),N=A.location.nativeElement,F=A.injector.get(vD,null);return F?.registerApplication(N),A.onDestroy(()=>{this.detachView(A.hostView),Qg(this.components,A),F?.unregisterApplication(N)}),this._loadComponent(A),A}tick(){if(this._runningTick)throw new fe(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;Qg(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u);const c=this._injector.get(Md,[]);c.push(...this._bootstrapListeners),c.forEach(d=>d(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>Qg(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new fe(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(u){return new(u||s)(ln(Fs),ln(td),ln(Up))},s.\u0275prov=St({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Qg(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}function xd(){return!1}let TS=(()=>{class s{}return s.__NG_ELEMENT_ID__=em,s})();function em(s){return function Nd(s,o,u){if(Uu(s)&&!u){const c=xr(s.index,o);return new ud(c,c)}return 47&s.type?new ud(o[vr],o):null}(Un(),Ie(),16==(16&s))}class Ii{constructor(){}supports(o){return Tl(o)}create(o){return new iv(o)}}const SD=(s,o)=>o;class iv{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||SD}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,d=0,g=null;for(;u||c;){const _=!c||u&&u.currentIndex<Od(c,d,g)?u:c,D=Od(_,d,g),b=_.currentIndex;if(_===c)d--,c=c._nextRemoved;else if(u=u._next,null==_.previousIndex)d++;else{g||(g=[]);const A=D-d,N=b-d;if(A!=N){for(let G=0;G<A;G++){const Q=G<g.length?g[G]:g[G]=0,ye=Q+G;N<=ye&&ye<A&&(g[G]=Q+1)}g[_.previousIndex]=N-A}}D!==b&&o(_,D,b)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!Tl(o))throw new fe(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,g,_,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let D=0;D<this.length;D++)g=o[D],_=this._trackByFn(D,g),null!==u&&Object.is(u.trackById,_)?(c&&(u=this._verifyReinsertion(u,g,_,D)),Object.is(u.item,g)||this._addIdentityChange(u,g)):(u=this._mismatch(u,g,_,D),c=!0),u=u._next}else d=0,function x0(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[Symbol.iterator]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,D=>{_=this._trackByFn(d,D),null!==u&&Object.is(u.trackById,_)?(c&&(u=this._verifyReinsertion(u,D,_,d)),Object.is(u.item,D)||this._addIdentityChange(u,D)):(u=this._mismatch(u,D,_,d),c=!0),u=u._next,d++}),this.length=d;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,d){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,g,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,g,d)):o=this._addAfter(new sv(u,c),g,d),o}_verifyReinsertion(o,u,c,d){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==g?o=this._reinsertAfter(g,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,g=o._nextRemoved;return null===d?this._removalsHead=g:d._nextRemoved=g,null===g?this._removalsTail=d:g._prevRemoved=d,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const d=null===u?this._itHead:u._next;return o._next=d,o._prev=u,null===d?this._itTail=o:d._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new ku),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ku),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class sv{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class TD{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class ku{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new TD,this.map.set(u,c)),c.add(o)}get(o,u){const d=this.map.get(o);return d?d.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Od(s,o,u){const c=s.previousIndex;if(null===c)return c;let d=0;return u&&c<u.length&&(d=u[c]),c+o+d}class WE{constructor(){}supports(o){return o instanceof Map||T_(o)}create(){return new kd}}class kd{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||T_(o)))throw new fe(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(u&&u.key===d)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const g=this._getOrCreateRecordForKey(d,c);u=this._insertBeforeOrAppend(u,g)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,u);const g=d._prev,_=d._next;return g&&(g._next=_),_&&(_._prev=g),d._next=null,d._prev=null,d}const c=new NS(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class NS{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Fd(){return new ov([new Ii])}let ov=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||Fd()),deps:[[s,new Ro,new qi]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(null!=c)return c;throw new fe(901,!1)}}return s.\u0275prov=St({token:s,providedIn:"root",factory:Fd}),s})();function KE(){return new ZE([new WE])}let ZE=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||KE()),deps:[[s,new Ro,new qi]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(c)return c;throw new fe(901,!1)}}return s.\u0275prov=St({token:s,providedIn:"root",factory:KE}),s})();const av=Gl(null,"core",[]);let MD=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(ln(Yg))},s.\u0275mod=Me({type:s}),s.\u0275inj=yn({}),s})();function kS(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(It,Se,k)=>{k.d(Se,{Z:()=>qe});var m=k(2090),J=k(4859),O=k(6881),ie=k(1877);class se{constructor(fe,xe){this._delegate=fe,this.firebase=xe,(0,O._addComponent)(fe,new J.wA("app-compat",()=>this,"PUBLIC")),this.container=fe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(fe){this._delegate.automaticDataCollectionEnabled=fe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(fe=>{this._delegate.checkDestroyed(),fe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(fe,xe=O._DEFAULT_ENTRY_NAME){var Ne;this._delegate.checkDestroyed();const Be=this._delegate.container.getProvider(fe);return!Be.isInitialized()&&"EXPLICIT"===(null===(Ne=Be.getComponent())||void 0===Ne?void 0:Ne.instantiationMode)&&Be.initialize(),Be.getImmediate({identifier:xe})}_removeServiceInstance(fe,xe=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(fe).clearInstance(xe)}_addComponent(fe){(0,O._addComponent)(this._delegate,fe)}_addOrOverwriteComponent(fe){(0,O._addOrOverwriteComponent)(this._delegate,fe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ge=new m.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),z=function de(){const pt=function _e(pt){const fe={},xe={__esModule:!0,initializeApp:function Pe(Oe,at={}){const re=O.initializeApp(Oe,at);if((0,m.r3)(fe,re.name))return fe[re.name];const At=new pt(re,xe);return fe[re.name]=At,At},app:Be,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function we(Oe){const at=Oe.name,re=at.replace("-compat","");if(O._registerComponent(Oe)&&"PUBLIC"===Oe.type){const At=(nt=Be())=>{if("function"!=typeof nt[re])throw ge.create("invalid-app-argument",{appName:at});return nt[re]()};void 0!==Oe.serviceProps&&(0,m.ZB)(At,Oe.serviceProps),xe[re]=At,pt.prototype[re]=function(...nt){return this._getService.bind(this,at).apply(this,Oe.multipleInstances?nt:[])}}return"PUBLIC"===Oe.type?xe[re]:null},removeApp:function Ne(Oe){delete fe[Oe]},useAsService:function ze(Oe,at){return"serverAuth"===at?null:at},modularAPIs:O}};function Be(Oe){if(!(0,m.r3)(fe,Oe=Oe||O._DEFAULT_ENTRY_NAME))throw ge.create("no-app",{appName:Oe});return fe[Oe]}return xe.default=xe,Object.defineProperty(xe,"apps",{get:function Ee(){return Object.keys(fe).map(Oe=>fe[Oe])}}),Be.App=pt,xe}(se);return pt.INTERNAL=Object.assign(Object.assign({},pt.INTERNAL),{createFirebaseNamespace:de,extendNamespace:function fe(xe){(0,m.ZB)(pt,xe)},createSubscribe:m.ne,ErrorFactory:m.LL,deepExtend:m.ZB}),pt}(),$=new ie.Yd("@firebase/app-compat");if((0,m.jU)()&&void 0!==self.firebase){$.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const pt=self.firebase.SDK_VERSION;pt&&pt.indexOf("LITE")>=0&&$.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const qe=z;!function Ce(pt){(0,O.registerVersion)("@firebase/app-compat","0.2.13",pt)}()},6881:(It,Se,k)=>{k.r(Se),k.d(Se,{FirebaseError:()=>ie.ZR,SDK_VERSION:()=>Fa,_DEFAULT_ENTRY_NAME:()=>An,_addComponent:()=>ut,_addOrOverwriteComponent:()=>Ot,_apps:()=>ci,_clearComponents:()=>mr,_components:()=>Tt,_getProvider:()=>jr,_registerComponent:()=>po,_removeServiceInstance:()=>Mr,deleteApp:()=>ln,getApp:()=>$r,getApps:()=>bi,initializeApp:()=>on,onLog:()=>Si,registerVersion:()=>yr,setLogLevel:()=>kn});var m=k(5861),J=k(4859),O=k(1877),ie=k(2090);const se=(le,ee)=>ee.some(Me=>le instanceof Me);let ne,ge;const z=new WeakMap,$=new WeakMap,K=new WeakMap,He=new WeakMap,Ce=new WeakMap;let fe={get(le,ee,Me){if(le instanceof IDBTransaction){if("done"===ee)return $.get(le);if("objectStoreNames"===ee)return le.objectStoreNames||K.get(le);if("store"===ee)return Me.objectStoreNames[1]?void 0:Me.objectStore(Me.objectStoreNames[0])}return Pe(le[ee])},set:(le,ee,Me)=>(le[ee]=Me,!0),has:(le,ee)=>le instanceof IDBTransaction&&("done"===ee||"store"===ee)||ee in le};function Be(le){return"function"==typeof le?function Ne(le){return le!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function de(){return ge||(ge=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(le)?function(...ee){return le.apply(Ee(this),ee),Pe(z.get(this))}:function(...ee){return Pe(le.apply(Ee(this),ee))}:function(ee,...Me){const yt=le.call(Ee(this),ee,...Me);return K.set(yt,ee.sort?ee.sort():[ee]),Pe(yt)}}(le):(le instanceof IDBTransaction&&function pt(le){if($.has(le))return;const ee=new Promise((Me,yt)=>{const bt=()=>{le.removeEventListener("complete",qt),le.removeEventListener("error",cn),le.removeEventListener("abort",cn)},qt=()=>{Me(),bt()},cn=()=>{yt(le.error||new DOMException("AbortError","AbortError")),bt()};le.addEventListener("complete",qt),le.addEventListener("error",cn),le.addEventListener("abort",cn)});$.set(le,ee)}(le),se(le,function _e(){return ne||(ne=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(le,fe):le)}function Pe(le){if(le instanceof IDBRequest)return function qe(le){const ee=new Promise((Me,yt)=>{const bt=()=>{le.removeEventListener("success",qt),le.removeEventListener("error",cn)},qt=()=>{Me(Pe(le.result)),bt()},cn=()=>{yt(le.error),bt()};le.addEventListener("success",qt),le.addEventListener("error",cn)});return ee.then(Me=>{Me instanceof IDBCursor&&z.set(Me,le)}).catch(()=>{}),Ce.set(ee,le),ee}(le);if(He.has(le))return He.get(le);const ee=Be(le);return ee!==le&&(He.set(le,ee),Ce.set(ee,le)),ee}const Ee=le=>Ce.get(le),Oe=["get","getKey","getAll","getAllKeys","count"],at=["put","add","delete","clear"],re=new Map;function At(le,ee){if(!(le instanceof IDBDatabase)||ee in le||"string"!=typeof ee)return;if(re.get(ee))return re.get(ee);const Me=ee.replace(/FromIndex$/,""),yt=ee!==Me,bt=at.includes(Me);if(!(Me in(yt?IDBIndex:IDBObjectStore).prototype)||!bt&&!Oe.includes(Me))return;const qt=function(){var cn=(0,m.Z)(function*(kt,...nn){const Cn=this.transaction(kt,bt?"readwrite":"readonly");let Ti=Cn.store;return yt&&(Ti=Ti.index(nn.shift())),(yield Promise.all([Ti[Me](...nn),bt&&Cn.done]))[0]});return function(nn){return cn.apply(this,arguments)}}();return re.set(ee,qt),qt}!function xe(le){fe=le(fe)}(le=>({...le,get:(ee,Me,yt)=>At(ee,Me)||le.get(ee,Me,yt),has:(ee,Me)=>!!At(ee,Me)||le.has(ee,Me)}));class nt{constructor(ee){this.container=ee}getPlatformInfoString(){return this.container.getProviders().map(Me=>{if(function Xt(le){return"VERSION"===le.getComponent()?.type}(Me)){const yt=Me.getImmediate();return`${yt.library}/${yt.version}`}return null}).filter(Me=>Me).join(" ")}}const ht="@firebase/app",pe=new O.Yd("@firebase/app"),An="[DEFAULT]",Ci={[ht]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ci=new Map,Tt=new Map;function ut(le,ee){try{le.container.addComponent(ee)}catch(Me){pe.debug(`Component ${ee.name} failed to register with FirebaseApp ${le.name}`,Me)}}function Ot(le,ee){le.container.addOrOverwriteComponent(ee)}function po(le){const ee=le.name;if(Tt.has(ee))return pe.debug(`There were multiple attempts to register component ${ee}.`),!1;Tt.set(ee,le);for(const Me of ci.values())ut(Me,le);return!0}function jr(le,ee){const Me=le.container.getProvider("heartbeat").getImmediate({optional:!0});return Me&&Me.triggerHeartbeat(),le.container.getProvider(ee)}function Mr(le,ee,Me=An){jr(le,ee).clearInstance(Me)}function mr(){Tt.clear()}const di=new ie.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class vn{constructor(ee,Me,yt){this._isDeleted=!1,this._options=Object.assign({},ee),this._config=Object.assign({},Me),this._name=Me.name,this._automaticDataCollectionEnabled=Me.automaticDataCollectionEnabled,this._container=yt,this.container.addComponent(new J.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ee){this.checkDestroyed(),this._automaticDataCollectionEnabled=ee}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ee){this._isDeleted=ee}checkDestroyed(){if(this.isDeleted)throw di.create("app-deleted",{appName:this._name})}}const Fa="9.23.0";function on(le,ee={}){let Me=le;"object"!=typeof ee&&(ee={name:ee});const yt=Object.assign({name:An,automaticDataCollectionEnabled:!1},ee),bt=yt.name;if("string"!=typeof bt||!bt)throw di.create("bad-app-name",{appName:String(bt)});if(Me||(Me=(0,ie.aH)()),!Me)throw di.create("no-options");const qt=ci.get(bt);if(qt){if((0,ie.vZ)(Me,qt.options)&&(0,ie.vZ)(yt,qt.config))return qt;throw di.create("duplicate-app",{appName:bt})}const cn=new J.H0(bt);for(const nn of Tt.values())cn.addComponent(nn);const kt=new vn(Me,yt,cn);return ci.set(bt,kt),kt}function $r(le=An){const ee=ci.get(le);if(!ee&&le===An&&(0,ie.aH)())return on();if(!ee)throw di.create("no-app",{appName:le});return ee}function bi(){return Array.from(ci.values())}function ln(le){return $n.apply(this,arguments)}function $n(){return($n=(0,m.Z)(function*(le){const ee=le.name;ci.has(ee)&&(ci.delete(ee),yield Promise.all(le.container.getProviders().map(Me=>Me.delete())),le.isDeleted=!0)})).apply(this,arguments)}function yr(le,ee,Me){var yt;let bt=null!==(yt=Ci[le])&&void 0!==yt?yt:le;Me&&(bt+=`-${Me}`);const qt=bt.match(/\s|\//),cn=ee.match(/\s|\//);if(qt||cn){const kt=[`Unable to register library "${bt}" with version "${ee}":`];return qt&&kt.push(`library name "${bt}" contains illegal characters (whitespace or "/")`),qt&&cn&&kt.push("and"),cn&&kt.push(`version name "${ee}" contains illegal characters (whitespace or "/")`),void pe.warn(kt.join(" "))}po(new J.wA(`${bt}-version`,()=>({library:bt,version:ee}),"VERSION"))}function Si(le,ee){if(null!==le&&"function"!=typeof le)throw di.create("invalid-log-argument");(0,O.Am)(le,ee)}function kn(le){(0,O.Ub)(le)}const Hr="firebase-heartbeat-database",ei=1,B="firebase-heartbeat-store";let V=null;function q(){return V||(V=function we(le,ee,{blocked:Me,upgrade:yt,blocking:bt,terminated:qt}={}){const cn=indexedDB.open(le,ee),kt=Pe(cn);return yt&&cn.addEventListener("upgradeneeded",nn=>{yt(Pe(cn.result),nn.oldVersion,nn.newVersion,Pe(cn.transaction),nn)}),Me&&cn.addEventListener("blocked",nn=>Me(nn.oldVersion,nn.newVersion,nn)),kt.then(nn=>{qt&&nn.addEventListener("close",()=>qt()),bt&&nn.addEventListener("versionchange",Cn=>bt(Cn.oldVersion,Cn.newVersion,Cn))}).catch(()=>{}),kt}(Hr,ei,{upgrade:(le,ee)=>{0===ee&&le.createObjectStore(B)}}).catch(le=>{throw di.create("idb-open",{originalErrorMessage:le.message})})),V}function X(){return(X=(0,m.Z)(function*(le){try{return yield(yield q()).transaction(B).objectStore(B).get(sn(le))}catch(ee){if(ee instanceof ie.ZR)pe.warn(ee.message);else{const Me=di.create("idb-get",{originalErrorMessage:ee?.message});pe.warn(Me.message)}}})).apply(this,arguments)}function Ye(le,ee){return We.apply(this,arguments)}function We(){return(We=(0,m.Z)(function*(le,ee){try{const yt=(yield q()).transaction(B,"readwrite");yield yt.objectStore(B).put(ee,sn(le)),yield yt.done}catch(Me){if(Me instanceof ie.ZR)pe.warn(Me.message);else{const yt=di.create("idb-set",{originalErrorMessage:Me?.message});pe.warn(yt.message)}}})).apply(this,arguments)}function sn(le){return`${le.name}!${le.options.appId}`}class Fn{constructor(ee){this.container=ee,this._heartbeatsCache=null;const Me=this.container.getProvider("app").getImmediate();this._storage=new Xi(Me),this._heartbeatsCachePromise=this._storage.read().then(yt=>(this._heartbeatsCache=yt,yt))}triggerHeartbeat(){var ee=this;return(0,m.Z)(function*(){const yt=ee.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),bt=Gt();if(null===ee._heartbeatsCache&&(ee._heartbeatsCache=yield ee._heartbeatsCachePromise),ee._heartbeatsCache.lastSentHeartbeatDate!==bt&&!ee._heartbeatsCache.heartbeats.some(qt=>qt.date===bt))return ee._heartbeatsCache.heartbeats.push({date:bt,agent:yt}),ee._heartbeatsCache.heartbeats=ee._heartbeatsCache.heartbeats.filter(qt=>{const cn=new Date(qt.date).valueOf();return Date.now()-cn<=2592e6}),ee._storage.overwrite(ee._heartbeatsCache)})()}getHeartbeatsHeader(){var ee=this;return(0,m.Z)(function*(){if(null===ee._heartbeatsCache&&(yield ee._heartbeatsCachePromise),null===ee._heartbeatsCache||0===ee._heartbeatsCache.heartbeats.length)return"";const Me=Gt(),{heartbeatsToSend:yt,unsentEntries:bt}=function Qn(le,ee=1024){const Me=[];let yt=le.slice();for(const bt of le){const qt=Me.find(cn=>cn.agent===bt.agent);if(qt){if(qt.dates.push(bt.date),Hi(Me)>ee){qt.dates.pop();break}}else if(Me.push({agent:bt.agent,dates:[bt.date]}),Hi(Me)>ee){Me.pop();break}yt=yt.slice(1)}return{heartbeatsToSend:Me,unsentEntries:yt}}(ee._heartbeatsCache.heartbeats),qt=(0,ie.L)(JSON.stringify({version:2,heartbeats:yt}));return ee._heartbeatsCache.lastSentHeartbeatDate=Me,bt.length>0?(ee._heartbeatsCache.heartbeats=bt,yield ee._storage.overwrite(ee._heartbeatsCache)):(ee._heartbeatsCache.heartbeats=[],ee._storage.overwrite(ee._heartbeatsCache)),qt})()}}function Gt(){return(new Date).toISOString().substring(0,10)}class Xi{constructor(ee){this.app=ee,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,m.Z)(function*(){return!!(0,ie.hl)()&&(0,ie.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ee=this;return(0,m.Z)(function*(){return(yield ee._canUseIndexedDBPromise)&&(yield function me(le){return X.apply(this,arguments)}(ee.app))||{heartbeats:[]}})()}overwrite(ee){var Me=this;return(0,m.Z)(function*(){var yt;if(yield Me._canUseIndexedDBPromise){const qt=yield Me.read();return Ye(Me.app,{lastSentHeartbeatDate:null!==(yt=ee.lastSentHeartbeatDate)&&void 0!==yt?yt:qt.lastSentHeartbeatDate,heartbeats:ee.heartbeats})}})()}add(ee){var Me=this;return(0,m.Z)(function*(){var yt;if(yield Me._canUseIndexedDBPromise){const qt=yield Me.read();return Ye(Me.app,{lastSentHeartbeatDate:null!==(yt=ee.lastSentHeartbeatDate)&&void 0!==yt?yt:qt.lastSentHeartbeatDate,heartbeats:[...qt.heartbeats,...ee.heartbeats]})}})()}}function Hi(le){return(0,ie.L)(JSON.stringify({version:2,heartbeats:le})).length}!function La(le){po(new J.wA("platform-logger",ee=>new nt(ee),"PRIVATE")),po(new J.wA("heartbeat",ee=>new Fn(ee),"PRIVATE")),yr(ht,"0.9.13",le),yr(ht,"0.9.13","esm2017"),yr("fire-js","")}("")},4859:(It,Se,k)=>{k.d(Se,{H0:()=>_e,wA:()=>O});var m=k(5861),J=k(2090);class O{constructor(z,$,K){this.name=z,this.instanceFactory=$,this.type=K,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(z){return this.instantiationMode=z,this}setMultipleInstances(z){return this.multipleInstances=z,this}setServiceProps(z){return this.serviceProps=z,this}setInstanceCreatedCallback(z){return this.onInstanceCreated=z,this}}const ie="[DEFAULT]";class se{constructor(z,$){this.name=z,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(z){const $=this.normalizeInstanceIdentifier(z);if(!this.instancesDeferred.has($)){const K=new J.BH;if(this.instancesDeferred.set($,K),this.isInitialized($)||this.shouldAutoInitialize())try{const He=this.getOrInitializeService({instanceIdentifier:$});He&&K.resolve(He)}catch{}}return this.instancesDeferred.get($).promise}getImmediate(z){var $;const K=this.normalizeInstanceIdentifier(z?.identifier),He=null!==($=z?.optional)&&void 0!==$&&$;if(!this.isInitialized(K)&&!this.shouldAutoInitialize()){if(He)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:K})}catch(Ce){if(He)return null;throw Ce}}getComponent(){return this.component}setComponent(z){if(z.name!==this.name)throw Error(`Mismatching Component ${z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=z,this.shouldAutoInitialize()){if(function ge(de){return"EAGER"===de.instantiationMode}(z))try{this.getOrInitializeService({instanceIdentifier:ie})}catch{}for(const[$,K]of this.instancesDeferred.entries()){const He=this.normalizeInstanceIdentifier($);try{const Ce=this.getOrInitializeService({instanceIdentifier:He});K.resolve(Ce)}catch{}}}}clearInstance(z=ie){this.instancesDeferred.delete(z),this.instancesOptions.delete(z),this.instances.delete(z)}delete(){var z=this;return(0,m.Z)(function*(){const $=Array.from(z.instances.values());yield Promise.all([...$.filter(K=>"INTERNAL"in K).map(K=>K.INTERNAL.delete()),...$.filter(K=>"_delete"in K).map(K=>K._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(z=ie){return this.instances.has(z)}getOptions(z=ie){return this.instancesOptions.get(z)||{}}initialize(z={}){const{options:$={}}=z,K=this.normalizeInstanceIdentifier(z.instanceIdentifier);if(this.isInitialized(K))throw Error(`${this.name}(${K}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const He=this.getOrInitializeService({instanceIdentifier:K,options:$});for(const[Ce,qe]of this.instancesDeferred.entries())K===this.normalizeInstanceIdentifier(Ce)&&qe.resolve(He);return He}onInit(z,$){var K;const He=this.normalizeInstanceIdentifier($),Ce=null!==(K=this.onInitCallbacks.get(He))&&void 0!==K?K:new Set;Ce.add(z),this.onInitCallbacks.set(He,Ce);const qe=this.instances.get(He);return qe&&z(qe,He),()=>{Ce.delete(z)}}invokeOnInitCallbacks(z,$){const K=this.onInitCallbacks.get($);if(K)for(const He of K)try{He(z,$)}catch{}}getOrInitializeService({instanceIdentifier:z,options:$={}}){let K=this.instances.get(z);if(!K&&this.component&&(K=this.component.instanceFactory(this.container,{instanceIdentifier:(de=z,de===ie?void 0:de),options:$}),this.instances.set(z,K),this.instancesOptions.set(z,$),this.invokeOnInitCallbacks(K,z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,z,K)}catch{}var de;return K||null}normalizeInstanceIdentifier(z=ie){return this.component?this.component.multipleInstances?z:ie:z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class _e{constructor(z){this.name=z,this.providers=new Map}addComponent(z){const $=this.getProvider(z.name);if($.isComponentSet())throw new Error(`Component ${z.name} has already been registered with ${this.name}`);$.setComponent(z)}addOrOverwriteComponent(z){this.getProvider(z.name).isComponentSet()&&this.providers.delete(z.name),this.addComponent(z)}getProvider(z){if(this.providers.has(z))return this.providers.get(z);const $=new se(z,this);return this.providers.set(z,$),$}getProviders(){return Array.from(this.providers.values())}}},1877:(It,Se,k)=>{k.d(Se,{Am:()=>de,Ub:()=>_e,Yd:()=>ge,in:()=>J});const m=[];var J=(()=>{return(z=J||(J={}))[z.DEBUG=0]="DEBUG",z[z.VERBOSE=1]="VERBOSE",z[z.INFO=2]="INFO",z[z.WARN=3]="WARN",z[z.ERROR=4]="ERROR",z[z.SILENT=5]="SILENT",J;var z})();const O={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},ie=J.INFO,se={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},ne=(z,$,...K)=>{if($<z.logLevel)return;const He=(new Date).toISOString(),Ce=se[$];if(!Ce)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[Ce](`[${He}]  ${z.name}:`,...K)};class ge{constructor($){this.name=$,this._logLevel=ie,this._logHandler=ne,this._userLogHandler=null,m.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in J))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?O[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...$),this._logHandler(this,J.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...$),this._logHandler(this,J.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,J.INFO,...$),this._logHandler(this,J.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,J.WARN,...$),this._logHandler(this,J.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...$),this._logHandler(this,J.ERROR,...$)}}function _e(z){m.forEach($=>{$.setLogLevel(z)})}function de(z,$){for(const K of m){let He=null;$&&$.level&&(He=O[$.level]),K.userLogHandler=null===z?null:(Ce,qe,...pt)=>{const fe=pt.map(xe=>{if(null==xe)return null;if("string"==typeof xe)return xe;if("number"==typeof xe||"boolean"==typeof xe)return xe.toString();if(xe instanceof Error)return xe.message;try{return JSON.stringify(xe)}catch{return null}}).filter(xe=>xe).join(" ");qe>=(He??Ce.logLevel)&&z({level:J[qe].toLowerCase(),message:fe,args:pt,type:Ce.name})}}}},259:(It,Se,k)=>{k.d(Se,{C6:()=>m.getApps,Mq:()=>m.getApp});var m=k(6881);(0,m.registerVersion)("firebase","9.23.0","app")},9260:(It,Se,k)=>{k.d(Se,{Z:()=>m.Z});var m=k(3942);m.Z.registerVersion("firebase","9.23.0","app-compat")},2644:(It,Se,k)=>{k.r(Se);var m=k(5861),J=k(3942),O=k(2090),ie=k(6881),se=k(655),ne=k(1877),ge=k(4859);const de={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},K_EMAIL_SIGNIN="EMAIL_SIGNIN",K_PASSWORD_RESET="PASSWORD_RESET",K_RECOVER_EMAIL="RECOVER_EMAIL",K_REVERT_SECOND_FACTOR_ADDITION="REVERT_SECOND_FACTOR_ADDITION",K_VERIFY_AND_CHANGE_EMAIL="VERIFY_AND_CHANGE_EMAIL",K_VERIFY_EMAIL="VERIFY_EMAIL";const qe=function He(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},pt=function Ce(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},fe=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ne=new ne.Yd("@firebase/auth");function Pe(v,...h){Ne.logLevel<=ne.in.ERROR&&Ne.error(`Auth (${ie.SDK_VERSION}): ${v}`,...h)}function Ee(v,...h){throw at(v,...h)}function we(v,...h){return at(v,...h)}function ze(v,h,p){const E=Object.assign(Object.assign({},pt()),{[h]:p});return new O.LL("auth","Firebase",E).create(h,{appName:v.name})}function Oe(v,h,p){if(!(h instanceof p))throw p.name!==h.constructor.name&&Ee(v,"argument-error"),ze(v,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function at(v,...h){if("string"!=typeof v){const p=h[0],E=[...h.slice(1)];return E[0]&&(E[0].appName=v.name),v._errorFactory.create(p,...E)}return fe.create(v,...h)}function re(v,h,...p){if(!v)throw at(h,...p)}function At(v){const h="INTERNAL ASSERTION FAILED: "+v;throw Pe(h),new Error(h)}function nt(v,h){v||At(h)}function Xt(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function ht(){return"http:"===he()||"https:"===he()}function he(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class Te{constructor(h,p){this.shortDelay=h,this.longDelay=p,nt(p>h,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function pe(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ht()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ge(v,h){nt(v.emulator,"Emulator should always be set here");const{url:p}=v.emulator;return h?`${p}${h.startsWith("/")?h.slice(1):h}`:p}class je{static initialize(h,p,E){this.fetchImpl=h,p&&(this.headersImpl=p),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void At("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void At("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void At("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const gt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ft=new Te(3e4,6e4);function Lt(v,h){return v.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:v.tenantId}):h}function Je(v,h,p,E){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,m.Z)(function*(v,h,p,E,T={}){return St(v,T,(0,m.Z)(function*(){let x={},j={};E&&("GET"===h?j=E:x={body:JSON.stringify(E)});const Y=(0,O.xO)(Object.assign({key:v.config.apiKey},j)).slice(1),Ae=yield v._getAdditionalHeaders();return Ae["Content-Type"]="application/json",v.languageCode&&(Ae["X-Firebase-Locale"]=v.languageCode),je.fetch()(Ur(v,v.config.apiHost,p,Y),Object.assign({method:h,headers:Ae,referrerPolicy:"no-referrer"},x))}))})).apply(this,arguments)}function St(v,h,p){return un.apply(this,arguments)}function un(){return(un=(0,m.Z)(function*(v,h,p){v._canInitEmulator=!1;const E=Object.assign(Object.assign({},gt),h);try{const T=new Xr(v),x=yield Promise.race([p(),T.promise]);T.clearNetworkTimeout();const j=yield x.json();if("needConfirmation"in j)throw Br(v,"account-exists-with-different-credential",j);if(x.ok&&!("errorMessage"in j))return j;{const Y=x.ok?j.errorMessage:j.error.message,[Ae,$e]=Y.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ae)throw Br(v,"credential-already-in-use",j);if("EMAIL_EXISTS"===Ae)throw Br(v,"email-already-in-use",j);if("USER_DISABLED"===Ae)throw Br(v,"user-disabled",j);const tt=E[Ae]||Ae.toLowerCase().replace(/[_\s]+/g,"-");if($e)throw ze(v,tt,$e);Ee(v,tt)}}catch(T){if(T instanceof O.ZR)throw T;Ee(v,"network-request-failed",{message:String(T)})}})).apply(this,arguments)}function yn(v,h,p,E){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,m.Z)(function*(v,h,p,E,T={}){const x=yield Je(v,h,p,E,T);return"mfaPendingCredential"in x&&Ee(v,"multi-factor-auth-required",{_serverResponse:x}),x})).apply(this,arguments)}function Ur(v,h,p,E){const T=`${h}${p}?${E}`;return v.config.emulator?Ge(v.config,T):`${v.config.apiScheme}://${T}`}class Xr{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((p,E)=>{this.timer=setTimeout(()=>E(we(this.auth,"network-request-failed")),ft.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Br(v,h,p){const E={appName:v.name};p.email&&(E.email=p.email),p.phoneNumber&&(E.phoneNumber=p.phoneNumber);const T=we(v,h,E);return T.customData._tokenResponse=p,T}function Ji(){return(Ji=(0,m.Z)(function*(v,h){return Je(v,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function Bs(){return(Bs=(0,m.Z)(function*(v,h){return Je(v,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Di(){return(Di=(0,m.Z)(function*(v,h){return Je(v,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function vt(v){if(v)try{const h=new Date(Number(v));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function An(){return(An=(0,m.Z)(function*(v,h=!1){const p=(0,O.m9)(v),E=yield p.getIdToken(h),T=ci(E);re(T&&T.exp&&T.auth_time&&T.iat,p.auth,"internal-error");const x="object"==typeof T.firebase?T.firebase:void 0,j=x?.sign_in_provider;return{claims:T,token:E,authTime:vt(Ci(T.auth_time)),issuedAtTime:vt(Ci(T.iat)),expirationTime:vt(Ci(T.exp)),signInProvider:j||null,signInSecondFactor:x?.sign_in_second_factor||null}})).apply(this,arguments)}function Ci(v){return 1e3*Number(v)}function ci(v){const[h,p,E]=v.split(".");if(void 0===h||void 0===p||void 0===E)return Pe("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,O.tV)(p);return T?JSON.parse(T):(Pe("Failed to decode base64 JWT payload"),null)}catch(T){return Pe("Caught error parsing JWT payload as JSON",T?.toString()),null}}function ut(v,h){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,m.Z)(function*(v,h,p=!1){if(p)return h;try{return yield h}catch(E){throw E instanceof O.ZR&&function po({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}(E)&&v.auth.currentUser===v&&(yield v.auth.signOut()),E}})).apply(this,arguments)}class jr{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var p;if(h){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const T=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(h=!1){var p=this;if(!this.isRunning)return;const E=this.getInterval(h);this.timerId=setTimeout((0,m.Z)(function*(){yield p.iteration()}),E)}iteration(){var h=this;return(0,m.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p?.code&&h.schedule(!0))}h.schedule()})()}}class Mr{constructor(h,p){this.createdAt=h,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=vt(this.lastLoginAt),this.creationTime=vt(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function mr(v){return On.apply(this,arguments)}function On(){return On=(0,m.Z)(function*(v){var h;const p=v.auth,E=yield v.getIdToken(),T=yield ut(v,function Ar(v,h){return Di.apply(this,arguments)}(p,{idToken:E}));re(T?.users.length,p,"internal-error");const x=T.users[0];v._notifyReloadListener(x);const j=null!==(h=x.providerUserInfo)&&void 0!==h&&h.length?function on(v){return v.map(h=>{var{providerId:p}=h,E=(0,se._T)(h,["providerId"]);return{providerId:p,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}(x.providerUserInfo):[],Y=function Fa(v,h){return[...v.filter(E=>!h.some(T=>T.providerId===E.providerId)),...h]}(v.providerData,j),tt=!!v.isAnonymous&&!(v.email&&x.passwordHash||Y?.length),st={uid:x.localId,displayName:x.displayName||null,photoURL:x.photoUrl||null,email:x.email||null,emailVerified:x.emailVerified||!1,phoneNumber:x.phoneNumber||null,tenantId:x.tenantId||null,providerData:Y,metadata:new Mr(x.createdAt,x.lastLoginAt),isAnonymous:tt};Object.assign(v,st)}),On.apply(this,arguments)}function vn(){return(vn=(0,m.Z)(function*(v){const h=(0,O.m9)(v);yield mr(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function bi(){return(bi=(0,m.Z)(function*(v,h){const p=yield St(v,{},(0,m.Z)(function*(){const E=(0,O.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:T,apiKey:x}=v.config,j=Ur(v,T,"/v1/token",`key=${x}`),Y=yield v._getAdditionalHeaders();return Y["Content-Type"]="application/x-www-form-urlencoded",je.fetch()(j,{method:"POST",headers:Y,body:E})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class ln{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){re(h.idToken,"internal-error"),re(typeof h.idToken<"u","internal-error"),re(typeof h.refreshToken<"u","internal-error");const p="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function Tt(v){const h=ci(v);return re(h,"internal-error"),re(typeof h.exp<"u","internal-error"),re(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,p)}getToken(h,p=!1){var E=this;return(0,m.Z)(function*(){return re(!E.accessToken||E.refreshToken,h,"user-token-expired"),p||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(h,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,p){var E=this;return(0,m.Z)(function*(){const{accessToken:T,refreshToken:x,expiresIn:j}=yield function $r(v,h){return bi.apply(this,arguments)}(h,p);E.updateTokensAndExpiration(T,x,Number(j))})()}updateTokensAndExpiration(h,p,E){this.refreshToken=p||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(h,p){const{refreshToken:E,accessToken:T,expirationTime:x}=p,j=new ln;return E&&(re("string"==typeof E,"internal-error",{appName:h}),j.refreshToken=E),T&&(re("string"==typeof T,"internal-error",{appName:h}),j.accessToken=T),x&&(re("number"==typeof x,"internal-error",{appName:h}),j.expirationTime=x),j}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new ln,this.toJSON())}_performRefresh(){return At("not implemented")}}function $n(v,h){re("string"==typeof v||typeof v>"u","internal-error",{appName:h})}class yr{constructor(h){var{uid:p,auth:E,stsTokenManager:T}=h,x=(0,se._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new jr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=E,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=x.displayName||null,this.email=x.email||null,this.emailVerified=x.emailVerified||!1,this.phoneNumber=x.phoneNumber||null,this.photoURL=x.photoURL||null,this.isAnonymous=x.isAnonymous||!1,this.tenantId=x.tenantId||null,this.providerData=x.providerData?[...x.providerData]:[],this.metadata=new Mr(x.createdAt||void 0,x.lastLoginAt||void 0)}getIdToken(h){var p=this;return(0,m.Z)(function*(){const E=yield ut(p,p.stsTokenManager.getToken(p.auth,h));return re(E,p.auth,"internal-error"),p.accessToken!==E&&(p.accessToken=E,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),E})()}getIdTokenResult(h){return function ka(v){return An.apply(this,arguments)}(this,h)}reload(){return function di(v){return vn.apply(this,arguments)}(this)}_assign(h){this!==h&&(re(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(p=>Object.assign({},p)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){const p=new yr(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}));return p.metadata._copy(this.metadata),p}_onReload(h){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,p=!1){var E=this;return(0,m.Z)(function*(){let T=!1;h.idToken&&h.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(h),T=!0),p&&(yield mr(E)),yield E.auth._persistUserIfCurrent(E),T&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var h=this;return(0,m.Z)(function*(){const p=yield h.getIdToken();return yield ut(h,function ho(v,h){return Ji.apply(this,arguments)}(h.auth,{idToken:p})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,p){var E,T,x,j,Y,Ae,$e,tt;const st=null!==(E=p.displayName)&&void 0!==E?E:void 0,zn=null!==(T=p.email)&&void 0!==T?T:void 0,Wi=null!==(x=p.phoneNumber)&&void 0!==x?x:void 0,Rp=null!==(j=p.photoURL)&&void 0!==j?j:void 0,xp=null!==(Y=p.tenantId)&&void 0!==Y?Y:void 0,Xc=null!==(Ae=p._redirectEventId)&&void 0!==Ae?Ae:void 0,nr=null!==($e=p.createdAt)&&void 0!==$e?$e:void 0,Bm=null!==(tt=p.lastLoginAt)&&void 0!==tt?tt:void 0,{uid:Np,emailVerified:ed,isAnonymous:Pi,providerData:Th,stsTokenManager:Il}=p;re(Np&&Il,h,"internal-error");const jv=ln.fromJSON(this.name,Il);re("string"==typeof Np,h,"internal-error"),$n(st,h.name),$n(zn,h.name),re("boolean"==typeof ed,h,"internal-error"),re("boolean"==typeof Pi,h,"internal-error"),$n(Wi,h.name),$n(Rp,h.name),$n(xp,h.name),$n(Xc,h.name),$n(nr,h.name),$n(Bm,h.name);const Pp=new yr({uid:Np,auth:h,email:zn,emailVerified:ed,displayName:st,isAnonymous:Pi,photoURL:Rp,phoneNumber:Wi,tenantId:xp,stsTokenManager:jv,createdAt:nr,lastLoginAt:Bm});return Th&&Array.isArray(Th)&&(Pp.providerData=Th.map(Op=>Object.assign({},Op))),Xc&&(Pp._redirectEventId=Xc),Pp}static _fromIdTokenResponse(h,p,E=!1){return(0,m.Z)(function*(){const T=new ln;T.updateFromServerResponse(p);const x=new yr({uid:p.localId,auth:h,stsTokenManager:T,isAnonymous:E});return yield mr(x),x})()}}const Si=new Map;function kn(v){nt(v instanceof Function,"Expected a class definition");let h=Si.get(v);return h?(nt(h instanceof v,"Instance stored in cache mismatched with class"),h):(h=new v,Si.set(v,h),h)}const ei=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,m.Z)(function*(){return!0})()}_set(p,E){var T=this;return(0,m.Z)(function*(){T.storage[p]=E})()}_get(p){var E=this;return(0,m.Z)(function*(){const T=E.storage[p];return void 0===T?null:T})()}_remove(p){var E=this;return(0,m.Z)(function*(){delete E.storage[p]})()}_addListener(p,E){}_removeListener(p,E){}}return v.type="NONE",v})();function B(v,h,p){return`firebase:${v}:${h}:${p}`}class V{constructor(h,p,E){this.persistence=h,this.auth=p,this.userKey=E;const{config:T,name:x}=this.auth;this.fullUserKey=B(this.userKey,T.apiKey,x),this.fullPersistenceKey=B("persistence",T.apiKey,x),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,m.Z)(function*(){const p=yield h.persistence._get(h.fullUserKey);return p?yr._fromJSON(h.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var p=this;return(0,m.Z)(function*(){if(p.persistence===h)return;const E=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=h,E?p.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,p,E="authUser"){return(0,m.Z)(function*(){if(!p.length)return new V(kn(ei),h,E);const T=(yield Promise.all(p.map(function(){var $e=(0,m.Z)(function*(tt){if(yield tt._isAvailable())return tt});return function(tt){return $e.apply(this,arguments)}}()))).filter($e=>$e);let x=T[0]||kn(ei);const j=B(E,h.config.apiKey,h.name);let Y=null;for(const $e of p)try{const tt=yield $e._get(j);if(tt){const st=yr._fromJSON(h,tt);$e!==x&&(Y=st),x=$e;break}}catch{}const Ae=T.filter($e=>$e._shouldAllowMigration);return x._shouldAllowMigration&&Ae.length?(x=Ae[0],Y&&(yield x._set(j,Y.toJSON())),yield Promise.all(p.map(function(){var $e=(0,m.Z)(function*(tt){if(tt!==x)try{yield tt._remove(j)}catch{}});return function(tt){return $e.apply(this,arguments)}}())),new V(x,h,E)):new V(x,h,E)})()}}function q(v){const h=v.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(We(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(me(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Kn(h))return"Blackberry";if(Mn(h))return"Webos";if(X(h))return"Safari";if((h.includes("chrome/")||Ye(h))&&!h.includes("edge/"))return"Chrome";if(sn(h))return"Android";{const E=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function me(v=(0,O.z$)()){return/firefox\//i.test(v)}function X(v=(0,O.z$)()){const h=v.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function Ye(v=(0,O.z$)()){return/crios\//i.test(v)}function We(v=(0,O.z$)()){return/iemobile/i.test(v)}function sn(v=(0,O.z$)()){return/android/i.test(v)}function Kn(v=(0,O.z$)()){return/blackberry/i.test(v)}function Mn(v=(0,O.z$)()){return/webos/i.test(v)}function Fn(v=(0,O.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function Hi(v=(0,O.z$)()){return Fn(v)||sn(v)||Mn(v)||Kn(v)||/windows phone/i.test(v)||We(v)}function le(v,h=[]){let p;switch(v){case"Browser":p=q((0,O.z$)());break;case"Worker":p=`${q((0,O.z$)())}-${v}`;break;default:p=v}const E=h.length?h.join(","):"FirebaseCore-web";return`${p}/JsCore/${ie.SDK_VERSION}/${E}`}function Me(){return(Me=(0,m.Z)(function*(v){return(yield Je(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function yt(v,h){return bt.apply(this,arguments)}function bt(){return(bt=(0,m.Z)(function*(v,h){return Je(v,"GET","/v2/recaptchaConfig",Lt(v,h))})).apply(this,arguments)}function qt(v){return void 0!==v&&void 0!==v.getResponse}function cn(v){return void 0!==v&&void 0!==v.enterprise}class kt{constructor(h){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===h.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=h.recaptchaKey.split("/")[3],this.emailPasswordEnabled=h.recaptchaEnforcementState.some(p=>"EMAIL_PASSWORD_PROVIDER"===p.provider&&"OFF"!==p.enforcementState)}}function Cn(v){return new Promise((h,p)=>{const E=document.createElement("script");E.setAttribute("src",v),E.onload=h,E.onerror=T=>{const x=we("internal-error");x.customData=T,p(x)},E.type="text/javascript",E.charset="UTF-8",function nn(){var v,h;return null!==(h=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==h?h:document}().appendChild(E)})}function Ti(v){return`__${v}${Math.floor(1e6*Math.random())}`}const Va="NO_RECAPTCHA";class go{constructor(h){this.type="recaptcha-enterprise",this.auth=an(h)}verify(h="verify",p=!1){var E=this;return(0,m.Z)(function*(){function x(){return x=(0,m.Z)(function*(Y){if(!p){if(null==Y.tenantId&&null!=Y._agentRecaptchaConfig)return Y._agentRecaptchaConfig.siteKey;if(null!=Y.tenantId&&void 0!==Y._tenantRecaptchaConfigs[Y.tenantId])return Y._tenantRecaptchaConfigs[Y.tenantId].siteKey}return new Promise(function(){var Ae=(0,m.Z)(function*($e,tt){yt(Y,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(st=>{if(void 0!==st.recaptchaKey){const zn=new kt(st);return null==Y.tenantId?Y._agentRecaptchaConfig=zn:Y._tenantRecaptchaConfigs[Y.tenantId]=zn,$e(zn.siteKey)}tt(new Error("recaptcha Enterprise site key undefined"))}).catch(st=>{tt(st)})});return function($e,tt){return Ae.apply(this,arguments)}}())}),x.apply(this,arguments)}function j(Y,Ae,$e){const tt=window.grecaptcha;cn(tt)?tt.enterprise.ready(()=>{tt.enterprise.execute(Y,{action:h}).then(st=>{Ae(st)}).catch(()=>{Ae(Va)})}):$e(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Y,Ae)=>{(function T(Y){return x.apply(this,arguments)})(E.auth).then($e=>{if(!p&&cn(window.grecaptcha))j($e,Y,Ae);else{if(typeof window>"u")return void Ae(new Error("RecaptchaVerifier is only supported in browser"));Cn("https://www.google.com/recaptcha/enterprise.js?render="+$e).then(()=>{j($e,Y,Ae)}).catch(tt=>{Ae(tt)})}}).catch($e=>{Ae($e)})})})()}}function Jn(v,h,p){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,m.Z)(function*(v,h,p,E=!1){const T=new go(v);let x;try{x=yield T.verify(p)}catch{x=yield T.verify(p,!0)}const j=Object.assign({},h);return Object.assign(j,E?{captchaResp:x}:{captchaResponse:x}),Object.assign(j,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(j,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),j})).apply(this,arguments)}class Bt{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,p){const E=x=>new Promise((j,Y)=>{try{j(h(x))}catch(Ae){Y(Ae)}});E.onAbort=p,this.queue.push(E);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(h){var p=this;return(0,m.Z)(function*(){if(p.auth.currentUser===h)return;const E=[];try{for(const T of p.queue)yield T(h),T.onAbort&&E.push(T.onAbort)}catch(T){E.reverse();for(const x of E)try{x()}catch{}throw p.auth._errorFactory.create("login-blocked",{originalMessage:T?.message})}})()}}class xn{constructor(h,p,E,T){this.app=h,this.heartbeatServiceProvider=p,this.appCheckServiceProvider=E,this.config=T,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new es(this),this.idTokenSubscription=new es(this),this.beforeStateQueue=new Bt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=T.sdkClientVersion}_initializeWithPersistence(h,p){var E=this;return p&&(this._popupRedirectResolver=kn(p)),this._initializationPromise=this.queue((0,m.Z)(function*(){var T,x;if(!E._deleted&&(E.persistenceManager=yield V.create(E,h),!E._deleted)){if(null!==(T=E._popupRedirectResolver)&&void 0!==T&&T._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(p),E.lastNotifiedUid=(null===(x=E.currentUser)||void 0===x?void 0:x.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,m.Z)(function*(){if(h._deleted)return;const p=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||p){if(h.currentUser&&p&&h.currentUser.uid===p.uid)return h._currentUser._assign(p),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(p,!0)}})()}initializeCurrentUser(h){var p=this;return(0,m.Z)(function*(){var E;const T=yield p.assertedPersistence.getCurrentUser();let x=T,j=!1;if(h&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const Y=null===(E=p.redirectUser)||void 0===E?void 0:E._redirectEventId,Ae=x?._redirectEventId,$e=yield p.tryRedirectSignIn(h);(!Y||Y===Ae)&&$e?.user&&(x=$e.user,j=!0)}if(!x)return p.directlySetCurrentUser(null);if(!x._redirectEventId){if(j)try{yield p.beforeStateQueue.runMiddleware(x)}catch(Y){x=T,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(Y))}return x?p.reloadAndSetCurrentUserOrClear(x):p.directlySetCurrentUser(null)}return re(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===x._redirectEventId?p.directlySetCurrentUser(x):p.reloadAndSetCurrentUserOrClear(x)})()}tryRedirectSignIn(h){var p=this;return(0,m.Z)(function*(){let E=null;try{E=yield p._popupRedirectResolver._completeRedirectFn(p,h,!0)}catch{yield p._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(h){var p=this;return(0,m.Z)(function*(){try{yield mr(h)}catch(E){if("auth/network-request-failed"!==E?.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function De(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var h=this;return(0,m.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var p=this;return(0,m.Z)(function*(){const E=h?(0,O.m9)(h):null;return E&&re(E.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(E&&E._clone(p))})()}_updateCurrentUser(h,p=!1){var E=this;return(0,m.Z)(function*(){if(!E._deleted)return h&&re(E.tenantId===h.tenantId,E,"tenant-id-mismatch"),p||(yield E.beforeStateQueue.runMiddleware(h)),E.queue((0,m.Z)(function*(){yield E.directlySetCurrentUser(h),E.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,m.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var p=this;return this.queue((0,m.Z)(function*(){yield p.assertedPersistence.setPersistence(kn(h))}))}initializeRecaptchaConfig(){var h=this;return(0,m.Z)(function*(){const p=yield yt(h,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),E=new kt(p);null==h.tenantId?h._agentRecaptchaConfig=E:h._tenantRecaptchaConfigs[h.tenantId]=E,E.emailPasswordEnabled&&new go(h).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new O.LL("auth","Firebase",h())}onAuthStateChanged(h,p,E){return this.registerStateListener(this.authStateSubscription,h,p,E)}beforeAuthStateChanged(h,p){return this.beforeStateQueue.pushCallback(h,p)}onIdTokenChanged(h,p,E){return this.registerStateListener(this.idTokenSubscription,h,p,E)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,p){var E=this;return(0,m.Z)(function*(){const T=yield E.getOrInitRedirectPersistenceManager(p);return null===h?T.removeCurrentUser():T.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var p=this;return(0,m.Z)(function*(){if(!p.redirectPersistenceManager){const E=h&&kn(h)||p._popupRedirectResolver;re(E,p,"argument-error"),p.redirectPersistenceManager=yield V.create(p,[kn(E._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(h){var p=this;return(0,m.Z)(function*(){var E,T;return p._isInitialized&&(yield p.queue((0,m.Z)(function*(){}))),(null===(E=p._currentUser)||void 0===E?void 0:E._redirectEventId)===h?p._currentUser:(null===(T=p.redirectUser)||void 0===T?void 0:T._redirectEventId)===h?p.redirectUser:null})()}_persistUserIfCurrent(h){var p=this;return(0,m.Z)(function*(){if(h===p.currentUser)return p.queue((0,m.Z)(function*(){return p.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(p=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,p,E,T){if(this._deleted)return()=>{};const x="function"==typeof p?p:p.next.bind(p),j=this._isInitialized?Promise.resolve():this._initializationPromise;return re(j,this,"internal-error"),j.then(()=>x(this.currentUser)),"function"==typeof p?h.addObserver(p,E,T):h.addObserver(p)}directlySetCurrentUser(h){var p=this;return(0,m.Z)(function*(){p.currentUser&&p.currentUser!==h&&p._currentUser._stopProactiveRefresh(),h&&p.isProactiveRefreshEnabled&&h._startProactiveRefresh(),p.currentUser=h,h?yield p.assertedPersistence.setCurrentUser(h):yield p.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=le(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,m.Z)(function*(){var p;const E={"X-Client-Version":h.clientVersion};h.app.options.appId&&(E["X-Firebase-gmpid"]=h.app.options.appId);const T=yield null===(p=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();T&&(E["X-Firebase-Client"]=T);const x=yield h._getAppCheckToken();return x&&(E["X-Firebase-AppCheck"]=x),E})()}_getAppCheckToken(){var h=this;return(0,m.Z)(function*(){var p;const E=yield null===(p=h.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getToken();return E?.error&&function Be(v,...h){Ne.logLevel<=ne.in.WARN&&Ne.warn(`Auth (${ie.SDK_VERSION}): ${v}`,...h)}(`Error while retrieving App Check token: ${E.error}`),E?.token})()}}function an(v){return(0,O.m9)(v)}class es{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,O.ne)(p=>this.observer=p)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function mo(v){const h=v.indexOf(":");return h<0?"":v.substr(0,h+1)}function $t(v){if(!v)return null;const h=Number(v);return isNaN(h)?null:h}class Ai{constructor(h,p){this.providerId=h,this.signInMethod=p}toJSON(){return At("not implemented")}_getIdTokenResponse(h){return At("not implemented")}_linkToIdToken(h,p){return At("not implemented")}_getReauthenticationResolver(h){return At("not implemented")}}function ec(v,h){return ts.apply(this,arguments)}function ts(){return(ts=(0,m.Z)(function*(v,h){return Je(v,"POST","/v1/accounts:resetPassword",Lt(v,h))})).apply(this,arguments)}function vr(v,h){return js.apply(this,arguments)}function js(){return(js=(0,m.Z)(function*(v,h){return Je(v,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function zi(){return(zi=(0,m.Z)(function*(v,h){return Je(v,"POST","/v1/accounts:update",Lt(v,h))})).apply(this,arguments)}function Xn(v,h){return tc.apply(this,arguments)}function tc(){return(tc=(0,m.Z)(function*(v,h){return yn(v,"POST","/v1/accounts:signInWithPassword",Lt(v,h))})).apply(this,arguments)}function en(v,h){return Gd.apply(this,arguments)}function Gd(){return(Gd=(0,m.Z)(function*(v,h){return Je(v,"POST","/v1/accounts:sendOobCode",Lt(v,h))})).apply(this,arguments)}function Lu(){return(Lu=(0,m.Z)(function*(v,h){return en(v,h)})).apply(this,arguments)}function $s(v,h){return ja.apply(this,arguments)}function ja(){return(ja=(0,m.Z)(function*(v,h){return en(v,h)})).apply(this,arguments)}function Hs(v,h){return er.apply(this,arguments)}function er(){return(er=(0,m.Z)(function*(v,h){return en(v,h)})).apply(this,arguments)}function Gr(){return(Gr=(0,m.Z)(function*(v,h){return en(v,h)})).apply(this,arguments)}function Vu(){return(Vu=(0,m.Z)(function*(v,h){return yn(v,"POST","/v1/accounts:signInWithEmailLink",Lt(v,h))})).apply(this,arguments)}function $a(){return($a=(0,m.Z)(function*(v,h){return yn(v,"POST","/v1/accounts:signInWithEmailLink",Lt(v,h))})).apply(this,arguments)}class ti extends Ai{constructor(h,p,E,T=null){super("password",E),this._email=h,this._password=p,this._tenantId=T}static _fromEmailAndPassword(h,p){return new ti(h,p,"password")}static _fromEmailAndCode(h,p,E=null){return new ti(h,p,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h;if(p?.email&&p?.password){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(h){var p=this;return(0,m.Z)(function*(){var E;switch(p.signInMethod){case"password":const T={returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(E=h._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const x=yield Jn(h,T,"signInWithPassword");return Xn(h,x)}return Xn(h,T).catch(function(){var x=(0,m.Z)(function*(j){if("auth/missing-recaptcha-token"===j.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Y=yield Jn(h,T,"signInWithPassword");return Xn(h,Y)}return Promise.reject(j)});return function(j){return x.apply(this,arguments)}}());case"emailLink":return function hi(v,h){return Vu.apply(this,arguments)}(h,{email:p._email,oobCode:p._password});default:Ee(h,"internal-error")}})()}_linkToIdToken(h,p){var E=this;return(0,m.Z)(function*(){switch(E.signInMethod){case"password":return vr(h,{idToken:p,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Uu(v,h){return $a.apply(this,arguments)}(h,{idToken:p,email:E._email,oobCode:E._password});default:Ee(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Mi(v,h){return $f.apply(this,arguments)}function $f(){return($f=(0,m.Z)(function*(v,h){return yn(v,"POST","/v1/accounts:signInWithIdp",Lt(v,h))})).apply(this,arguments)}class ns extends Ai{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const p=new ns(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(p.idToken=h.idToken),h.accessToken&&(p.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(p.nonce=h.nonce),h.pendingToken&&(p.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(p.accessToken=h.oauthToken,p.secret=h.oauthTokenSecret):Ee("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:E,signInMethod:T}=p,x=(0,se._T)(p,["providerId","signInMethod"]);if(!E||!T)return null;const j=new ns(E,T);return j.idToken=x.idToken||void 0,j.accessToken=x.accessToken||void 0,j.secret=x.secret,j.nonce=x.nonce,j.pendingToken=x.pendingToken||null,j}_getIdTokenResponse(h){return Mi(h,this.buildRequest())}_linkToIdToken(h,p){const E=this.buildRequest();return E.idToken=p,Mi(h,E)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Mi(h,p)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),h.postBody=(0,O.xO)(p)}return h}}function nc(){return(nc=(0,m.Z)(function*(v,h){return Je(v,"POST","/v1/accounts:sendVerificationCode",Lt(v,h))})).apply(this,arguments)}function qd(){return(qd=(0,m.Z)(function*(v,h){return yn(v,"POST","/v1/accounts:signInWithPhoneNumber",Lt(v,h))})).apply(this,arguments)}function Bu(){return(Bu=(0,m.Z)(function*(v,h){const p=yield yn(v,"POST","/v1/accounts:signInWithPhoneNumber",Lt(v,h));if(p.temporaryProof)throw Br(v,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const Wd={USER_NOT_FOUND:"user-not-found"};function ju(){return(ju=(0,m.Z)(function*(v,h){return yn(v,"POST","/v1/accounts:signInWithPhoneNumber",Lt(v,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Wd)})).apply(this,arguments)}class Ri extends Ai{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,p){return new Ri({verificationId:h,verificationCode:p})}static _fromTokenResponse(h,p){return new Ri({phoneNumber:h,temporaryProof:p})}_getIdTokenResponse(h){return function Em(v,h){return qd.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,p){return function wm(v,h){return Bu.apply(this,arguments)}(h,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function Tv(v,h){return ju.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:p,verificationId:E,verificationCode:T}=this.params;return h&&p?{temporaryProof:h,phoneNumber:p}:{sessionInfo:E,code:T}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:p,verificationCode:E,phoneNumber:T,temporaryProof:x}=h;return E||p||T||x?new Ri({verificationId:p,verificationCode:E,phoneNumber:T,temporaryProof:x}):null}}class Qo{constructor(h){var p,E,T,x,j,Y;const Ae=(0,O.zd)((0,O.pd)(h)),$e=null!==(p=Ae.apiKey)&&void 0!==p?p:null,tt=null!==(E=Ae.oobCode)&&void 0!==E?E:null,st=function zf(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Ae.mode)&&void 0!==T?T:null);re($e&&tt&&st,"argument-error"),this.apiKey=$e,this.operation=st,this.code=tt,this.continueUrl=null!==(x=Ae.continueUrl)&&void 0!==x?x:null,this.languageCode=null!==(j=Ae.languageCode)&&void 0!==j?j:null,this.tenantId=null!==(Y=Ae.tenantId)&&void 0!==Y?Y:null}static parseLink(h){const p=function Im(v){const h=(0,O.zd)((0,O.pd)(v)).link,p=h?(0,O.zd)((0,O.pd)(h)).deep_link_id:null,E=(0,O.zd)((0,O.pd)(v)).deep_link_id;return(E?(0,O.zd)((0,O.pd)(E)).link:null)||E||p||h||v}(h);try{return new Qo(p)}catch{return null}}}let qf=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(p,E){return ti._fromEmailAndPassword(p,E)}static credentialWithLink(p,E){const T=Qo.parseLink(E);return re(T,"argument-error"),ti._fromEmailAndCode(p,T.code,T.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class vs{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class rc extends vs{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class fi extends rc{static credentialFromJSON(h){const p="string"==typeof h?JSON.parse(h):h;return re("providerId"in p&&"signInMethod"in p,"argument-error"),ns._fromParams(p)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return re(h.idToken||h.accessToken,"argument-error"),ns._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return fi.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return fi.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:p,oauthAccessToken:E,oauthTokenSecret:T,pendingToken:x,nonce:j,providerId:Y}=h;if(!E&&!T&&!p&&!x||!Y)return null;try{return new fi(Y)._credential({idToken:p,accessToken:E,nonce:j,pendingToken:x})}catch{return null}}}let Wf=(()=>{class v extends rc{constructor(){super("facebook.com")}static credential(p){return ns._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return v.credentialFromTaggedObject(p)}static credentialFromError(p){return v.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return v.credential(p.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),Jo=(()=>{class v extends rc{constructor(){super("google.com"),this.addScope("profile")}static credential(p,E){return ns._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:E})}static credentialFromResult(p){return v.credentialFromTaggedObject(p)}static credentialFromError(p){return v.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:E,oauthAccessToken:T}=p;if(!E&&!T)return null;try{return v.credential(E,T)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),ic=(()=>{class v extends rc{constructor(){super("github.com")}static credential(p){return ns._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return v.credentialFromTaggedObject(p)}static credentialFromError(p){return v.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return v.credential(p.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class yo extends Ai{constructor(h,p){super(h,h),this.pendingToken=p}_getIdTokenResponse(h){return Mi(h,this.buildRequest())}_linkToIdToken(h,p){const E=this.buildRequest();return E.idToken=p,Mi(h,E)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Mi(h,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:E,signInMethod:T,pendingToken:x}=p;return E&&T&&x&&E===T?new yo(E,x):null}static _create(h,p){return new yo(h,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Xo extends vs{constructor(h){re(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return Xo.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return Xo.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const p=yo.fromJSON(h);return re(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:p,providerId:E}=h;if(!p||!E)return null;try{return yo._create(E,p)}catch{return null}}}let Kd=(()=>{class v extends rc{constructor(){super("twitter.com")}static credential(p,E){return ns._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:E})}static credentialFromResult(p){return v.credentialFromTaggedObject(p)}static credentialFromError(p){return v.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:E,oauthTokenSecret:T}=p;if(!E||!T)return null;try{return v.credential(E,T)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function rs(v,h){return oc.apply(this,arguments)}function oc(){return(oc=(0,m.Z)(function*(v,h){return yn(v,"POST","/v1/accounts:signUp",Lt(v,h))})).apply(this,arguments)}class bn{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,p,E,T=!1){return(0,m.Z)(function*(){const x=yield yr._fromIdTokenResponse(h,E,T),j=Ha(E);return new bn({user:x,providerId:j,_tokenResponse:E,operationType:p})})()}static _forOperation(h,p,E){return(0,m.Z)(function*(){yield h._updateTokensIfNecessary(E,!0);const T=Ha(E);return new bn({user:h,providerId:T,_tokenResponse:E,operationType:p})})()}}function Ha(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Vn(){return(Vn=(0,m.Z)(function*(v){var h;const p=an(v);if(yield p._initializationPromise,null!==(h=p.currentUser)&&void 0!==h&&h.isAnonymous)return new bn({user:p.currentUser,providerId:null,operationType:"signIn"});const E=yield rs(p,{returnSecureToken:!0}),T=yield bn._fromIdTokenResponse(p,"signIn",E,!0);return yield p._updateCurrentUser(T.user),T})).apply(this,arguments)}class ea extends O.ZR{constructor(h,p,E,T){var x;super(p.code,p.message),this.operationType=E,this.user=T,Object.setPrototypeOf(this,ea.prototype),this.customData={appName:h.name,tenantId:null!==(x=h.tenantId)&&void 0!==x?x:void 0,_serverResponse:p.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(h,p,E,T){return new ea(h,p,E,T)}}function zs(v,h,p,E){return("reauthenticate"===h?p._getReauthenticationResolver(v):p._getIdTokenResponse(v)).catch(x=>{throw"auth/multi-factor-auth-required"===x.code?ea._fromErrorAndOperation(v,x,h,E):x})}function ni(v){return new Set(v.map(({providerId:h})=>h).filter(h=>!!h))}function Gi(){return Gi=(0,m.Z)(function*(v,h){const p=(0,O.m9)(v);yield ta(!0,p,h);const{providerUserInfo:E}=yield function fo(v,h){return Bs.apply(this,arguments)}(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[h]}),T=ni(E||[]);return p.providerData=p.providerData.filter(x=>T.has(x.providerId)),T.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p}),Gi.apply(this,arguments)}function is(v,h){return xr.apply(this,arguments)}function xr(){return(xr=(0,m.Z)(function*(v,h,p=!1){const E=yield ut(v,h._linkToIdToken(v.auth,yield v.getIdToken()),p);return bn._forOperation(v,"link",E)})).apply(this,arguments)}function ta(v,h,p){return na.apply(this,arguments)}function na(){return(na=(0,m.Z)(function*(v,h,p){yield mr(h);const T=!1===v?"provider-already-linked":"no-such-provider";re(ni(h.providerData).has(p)===v,h.auth,T)})).apply(this,arguments)}function Yf(v,h){return xi.apply(this,arguments)}function xi(){return(xi=(0,m.Z)(function*(v,h,p=!1){const{auth:E}=v,T="reauthenticate";try{const x=yield ut(v,zs(E,T,h,v),p);re(x.idToken,E,"internal-error");const j=ci(x.idToken);re(j,E,"internal-error");const{sub:Y}=j;return re(v.uid===Y,E,"user-mismatch"),bn._forOperation(v,T,x)}catch(x){throw"auth/user-not-found"===x?.code&&Ee(E,"user-mismatch"),x}})).apply(this,arguments)}function $u(v,h){return za.apply(this,arguments)}function za(){return(za=(0,m.Z)(function*(v,h,p=!1){const E="signIn",T=yield zs(v,E,h),x=yield bn._fromIdTokenResponse(v,E,T);return p||(yield v._updateCurrentUser(x.user)),x})).apply(this,arguments)}function Nt(v,h){return Hu.apply(this,arguments)}function Hu(){return(Hu=(0,m.Z)(function*(v,h){return $u(an(v),h)})).apply(this,arguments)}function Qf(v,h){return zu.apply(this,arguments)}function zu(){return(zu=(0,m.Z)(function*(v,h){const p=(0,O.m9)(v);return yield ta(!1,p,h.providerId),is(p,h)})).apply(this,arguments)}function Yd(v,h){return ac.apply(this,arguments)}function ac(){return(ac=(0,m.Z)(function*(v,h){return Yf((0,O.m9)(v),h)})).apply(this,arguments)}function Qd(){return(Qd=(0,m.Z)(function*(v,h){return yn(v,"POST","/v1/accounts:signInWithCustomToken",Lt(v,h))})).apply(this,arguments)}function Ie(){return Ie=(0,m.Z)(function*(v,h){const p=an(v),E=yield function Jf(v,h){return Qd.apply(this,arguments)}(p,{token:h,returnSecureToken:!0}),T=yield bn._fromIdTokenResponse(p,"signIn",E);return yield p._updateCurrentUser(T.user),T}),Ie.apply(this,arguments)}class tn{constructor(h,p){this.factorId=h,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(h,p){return"phoneInfo"in p?Ga._fromServerResponse(h,p):"totpInfo"in p?uc._fromServerResponse(h,p):Ee(h,"internal-error")}}class Ga extends tn{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,p){return new Ga(p)}}class uc extends tn{constructor(h){super("totp",h)}static _fromServerResponse(h,p){return new uc(p)}}function Un(v,h,p){var E;re((null===(E=p.url)||void 0===E?void 0:E.length)>0,v,"invalid-continue-uri"),re(typeof p.dynamicLinkDomain>"u"||p.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),h.continueUrl=p.url,h.dynamicLinkDomain=p.dynamicLinkDomain,h.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(re(p.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),h.iOSBundleId=p.iOS.bundleId),p.android&&(re(p.android.packageName.length>0,v,"missing-android-pkg-name"),h.androidInstallApp=p.android.installApp,h.androidMinimumVersionCode=p.android.minimumVersion,h.androidPackageName=p.android.packageName)}function _s(){return _s=(0,m.Z)(function*(v,h,p){var E;const T=an(v),x={requestType:"PASSWORD_RESET",email:h,clientType:"CLIENT_TYPE_WEB"};if(null!==(E=T._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const j=yield Jn(T,x,"getOobCode",!0);p&&Un(T,j,p),yield $s(T,j)}else p&&Un(T,x,p),yield $s(T,x).catch(function(){var j=(0,m.Z)(function*(Y){if("auth/missing-recaptcha-token"!==Y.code)return Promise.reject(Y);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Ae=yield Jn(T,x,"getOobCode",!0);p&&Un(T,Ae,p),yield $s(T,Ae)}});return function(Y){return j.apply(this,arguments)}}())}),_s.apply(this,arguments)}function Gu(){return(Gu=(0,m.Z)(function*(v,h,p){yield ec((0,O.m9)(v),{oobCode:h,newPassword:p})})).apply(this,arguments)}function ss(){return ss=(0,m.Z)(function*(v,h){yield function Yo(v,h){return zi.apply(this,arguments)}((0,O.m9)(v),{oobCode:h})}),ss.apply(this,arguments)}function lc(v,h){return ra.apply(this,arguments)}function ra(){return(ra=(0,m.Z)(function*(v,h){const p=(0,O.m9)(v),E=yield ec(p,{oobCode:h}),T=E.requestType;switch(re(T,p,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":re(E.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":re(E.mfaInfo,p,"internal-error");default:re(E.email,p,"internal-error")}let x=null;return E.mfaInfo&&(x=tn._fromServerResponse(an(p),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:x},operation:T}})).apply(this,arguments)}function _r(){return(_r=(0,m.Z)(function*(v,h){const{data:p}=yield lc((0,O.m9)(v),h);return p.email})).apply(this,arguments)}function ws(){return ws=(0,m.Z)(function*(v,h,p){var E;const T=an(v),x={returnSecureToken:!0,email:h,password:p,clientType:"CLIENT_TYPE_WEB"};let j;if(null!==(E=T._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const $e=yield Jn(T,x,"signUpPassword");j=rs(T,$e)}else j=rs(T,x).catch(function(){var $e=(0,m.Z)(function*(tt){if("auth/missing-recaptcha-token"===tt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const st=yield Jn(T,x,"signUpPassword");return rs(T,st)}return Promise.reject(tt)});return function(tt){return $e.apply(this,arguments)}}());const Y=yield j.catch($e=>Promise.reject($e)),Ae=yield bn._fromIdTokenResponse(T,"signIn",Y);return yield T._updateCurrentUser(Ae.user),Ae}),ws.apply(this,arguments)}function qa(){return qa=(0,m.Z)(function*(v,h,p){var E;const T=an(v),x={requestType:"EMAIL_SIGNIN",email:h,clientType:"CLIENT_TYPE_WEB"};function j(Y,Ae){re(Ae.handleCodeInApp,T,"argument-error"),Ae&&Un(T,Y,Ae)}if(null!==(E=T._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const Y=yield Jn(T,x,"getOobCode",!0);j(Y,p),yield Hs(T,Y)}else j(x,p),yield Hs(T,x).catch(function(){var Y=(0,m.Z)(function*(Ae){if("auth/missing-recaptcha-token"!==Ae.code)return Promise.reject(Ae);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const $e=yield Jn(T,x,"getOobCode",!0);j($e,p),yield Hs(T,$e)}});return function(Ae){return Y.apply(this,arguments)}}())}),qa.apply(this,arguments)}function ia(){return(ia=(0,m.Z)(function*(v,h,p){const E=(0,O.m9)(v),T=qf.credentialWithLink(h,p||Xt());return re(T._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Nt(E,T)})).apply(this,arguments)}function dc(){return(dc=(0,m.Z)(function*(v,h){return Je(v,"POST","/v1/accounts:createAuthUri",Lt(v,h))})).apply(this,arguments)}function hc(){return hc=(0,m.Z)(function*(v,h){const E={identifier:h,continueUri:ht()?Xt():"http://localhost"},{signinMethods:T}=yield function Wu(v,h){return dc.apply(this,arguments)}((0,O.m9)(v),E);return T||[]}),hc.apply(this,arguments)}function sa(){return sa=(0,m.Z)(function*(v,h){const p=(0,O.m9)(v),T={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};h&&Un(p.auth,T,h);const{email:x}=yield function Fu(v,h){return Lu.apply(this,arguments)}(p.auth,T);x!==v.email&&(yield v.reload())}),sa.apply(this,arguments)}function Wa(){return Wa=(0,m.Z)(function*(v,h,p){const E=(0,O.m9)(v),x={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:h};p&&Un(E.auth,x,p);const{email:j}=yield function vm(v,h){return Gr.apply(this,arguments)}(E.auth,x);j!==v.email&&(yield v.reload())}),Wa.apply(this,arguments)}function gc(){return(gc=(0,m.Z)(function*(v,h){return Je(v,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Zu(){return Zu=(0,m.Z)(function*(v,{displayName:h,photoURL:p}){if(void 0===h&&void 0===p)return;const E=(0,O.m9)(v),x={idToken:yield E.getIdToken(),displayName:h,photoUrl:p,returnSecureToken:!0},j=yield ut(E,function Xd(v,h){return gc.apply(this,arguments)}(E.auth,x));E.displayName=j.displayName||null,E.photoURL=j.photoUrl||null;const Y=E.providerData.find(({providerId:Ae})=>"password"===Ae);Y&&(Y.displayName=E.displayName,Y.photoURL=E.photoURL),yield E._updateTokensIfNecessary(j)}),Zu.apply(this,arguments)}function vo(v,h,p){return En.apply(this,arguments)}function En(){return(En=(0,m.Z)(function*(v,h,p){const{auth:E}=v,x={idToken:yield v.getIdToken(),returnSecureToken:!0};h&&(x.email=h),p&&(x.password=p);const j=yield ut(v,vr(E,x));yield v._updateTokensIfNecessary(j,!0)})).apply(this,arguments)}class _o{constructor(h,p,E={}){this.isNewUser=h,this.providerId=p,this.profile=E}}class tp extends _o{constructor(h,p,E,T){super(h,p,E),this.username=T}}class th extends _o{constructor(h,p){super(h,"facebook.com",p)}}class Cm extends tp{constructor(h,p){super(h,"github.com",p,"string"==typeof p?.login?p?.login:null)}}class np extends _o{constructor(h,p){super(h,"google.com",p)}}class yc extends tp{constructor(h,p,E){super(h,"twitter.com",p,E)}}function vc(v){const{user:h,_tokenResponse:p}=v;return h.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function ep(v){var h,p;if(!v)return null;const{providerId:E}=v,T=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},x=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!E&&v?.idToken){const j=null===(p=null===(h=ci(v.idToken))||void 0===h?void 0:h.firebase)||void 0===p?void 0:p.sign_in_provider;if(j)return new _o(x,"anonymous"!==j&&"custom"!==j?j:null)}if(!E)return null;switch(E){case"facebook.com":return new th(x,T);case"github.com":return new Cm(x,T);case"google.com":return new np(x,T);case"twitter.com":return new yc(x,T,v.screenName||null);case"custom":case"anonymous":return new _o(x,null);default:return new _o(x,E,T)}}(p)}class wo{constructor(h,p,E){this.type=h,this.credential=p,this.auth=E}static _fromIdtoken(h,p){return new wo("enroll",h,p)}static _fromMfaPendingCredential(h){return new wo("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var p,E;if(h?.multiFactorSession){if(null!==(p=h.multiFactorSession)&&void 0!==p&&p.pendingCredential)return wo._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(E=h.multiFactorSession)&&void 0!==E&&E.idToken)return wo._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Gs{constructor(h,p,E){this.session=h,this.hints=p,this.signInResolver=E}static _fromError(h,p){const E=an(h),T=p.customData._serverResponse,x=(T.mfaInfo||[]).map(Y=>tn._fromServerResponse(E,Y));re(T.mfaPendingCredential,E,"internal-error");const j=wo._fromMfaPendingCredential(T.mfaPendingCredential);return new Gs(j,x,function(){var Y=(0,m.Z)(function*(Ae){const $e=yield Ae._process(E,j);delete T.mfaInfo,delete T.mfaPendingCredential;const tt=Object.assign(Object.assign({},T),{idToken:$e.idToken,refreshToken:$e.refreshToken});switch(p.operationType){case"signIn":const st=yield bn._fromIdTokenResponse(E,p.operationType,tt);return yield E._updateCurrentUser(st.user),st;case"reauthenticate":return re(p.user,E,"internal-error"),bn._forOperation(p.user,p.operationType,tt);default:Ee(E,"internal-error")}});return function(Ae){return Y.apply(this,arguments)}}())}resolveSignIn(h){var p=this;return(0,m.Z)(function*(){return p.signInResolver(h)})()}}class Co{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(E=>tn._fromServerResponse(h.auth,E)))})}static _fromUser(h){return new Co(h)}getSession(){var h=this;return(0,m.Z)(function*(){return wo._fromIdtoken(yield h.user.getIdToken(),h.user.auth)})()}enroll(h,p){var E=this;return(0,m.Z)(function*(){const T=h,x=yield E.getSession(),j=yield ut(E.user,T._process(E.user.auth,x,p));return yield E.user._updateTokensIfNecessary(j),E.user.reload()})()}unenroll(h){var p=this;return(0,m.Z)(function*(){const E="string"==typeof h?h:h.uid,T=yield p.user.getIdToken();try{const x=yield ut(p.user,function Do(v,h){return Je(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Lt(v,h))}(p.user.auth,{idToken:T,mfaEnrollmentId:E}));p.enrolledFactors=p.enrolledFactors.filter(({uid:j})=>j!==E),yield p.user._updateTokensIfNecessary(x),yield p.user.reload()}catch(x){throw x}})()}}const oa=new WeakMap,nl="__sak";class Za{constructor(h,p){this.storageRetriever=h,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(nl,"1"),this.storage.removeItem(nl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,p){return this.storage.setItem(h,JSON.stringify(p)),Promise.resolve()}_get(h){const p=this.storage.getItem(h);return Promise.resolve(p?JSON.parse(p):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const qs=(()=>{class v extends Za{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,E)=>this.onStorageEvent(p,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function rl(){const v=(0,O.z$)();return X(v)||Fn(v)}()&&function La(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Hi(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const E of Object.keys(this.listeners)){const T=this.storage.getItem(E),x=this.localCache[E];T!==x&&p(E,x,T)}}onStorageEvent(p,E=!1){if(!p.key)return void this.forAllChangedKeys((Y,Ae,$e)=>{this.notifyListeners(Y,$e)});const T=p.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Y=this.storage.getItem(T);if(p.newValue!==Y)null!==p.newValue?this.storage.setItem(T,p.newValue):this.storage.removeItem(T);else if(this.localCache[T]===p.newValue&&!E)return}const x=()=>{const Y=this.storage.getItem(T);!E&&this.localCache[T]===Y||this.notifyListeners(T,Y)},j=this.storage.getItem(T);!function Xi(){return(0,O.w1)()&&10===document.documentMode}()||j===p.newValue||p.newValue===p.oldValue?x():setTimeout(x,10)}notifyListeners(p,E){this.localCache[p]=E;const T=this.listeners[p];if(T)for(const x of Array.from(T))x(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,E,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:E,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(E)}_removeListener(p,E){this.listeners[p]&&(this.listeners[p].delete(E),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,E){var T=()=>super._set,x=this;return(0,m.Z)(function*(){yield T().call(x,p,E),x.localCache[p]=JSON.stringify(E)})()}_get(p){var E=()=>super._get,T=this;return(0,m.Z)(function*(){const x=yield E().call(T,p);return T.localCache[p]=JSON.stringify(x),x})()}_remove(p){var E=()=>super._remove,T=this;return(0,m.Z)(function*(){yield E().call(T,p),delete T.localCache[p]})()}}return v.type="LOCAL",v})(),lr=(()=>{class v extends Za{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,E){}_removeListener(p,E){}}return v.type="SESSION",v})();let bo=(()=>{class v{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const E=this.receivers.find(x=>x.isListeningto(p));if(E)return E;const T=new v(p);return this.receivers.push(T),T}isListeningto(p){return this.eventTarget===p}handleEvent(p){var E=this;return(0,m.Z)(function*(){const T=p,{eventId:x,eventType:j,data:Y}=T.data,Ae=E.handlersMap[j];if(!Ae?.size)return;T.ports[0].postMessage({status:"ack",eventId:x,eventType:j});const $e=Array.from(Ae).map(function(){var st=(0,m.Z)(function*(zn){return zn(T.origin,Y)});return function(zn){return st.apply(this,arguments)}}()),tt=yield function bm(v){return Promise.all(v.map(function(){var h=(0,m.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(E){return{fulfilled:!1,reason:E}}});return function(p){return h.apply(this,arguments)}}()))}($e);T.ports[0].postMessage({status:"done",eventId:x,eventType:j,response:tt})})()}_subscribe(p,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(E)}_unsubscribe(p,E){this.handlersMap[p]&&E&&this.handlersMap[p].delete(E),(!E||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function So(v="",h=10){let p="";for(let E=0;E<h;E++)p+=Math.floor(10*Math.random());return v+p}class sp{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,p,E=50){var T=this;return(0,m.Z)(function*(){const x=typeof MessageChannel<"u"?new MessageChannel:null;if(!x)throw new Error("connection_unavailable");let j,Y;return new Promise((Ae,$e)=>{const tt=So("",20);x.port1.start();const st=setTimeout(()=>{$e(new Error("unsupported_event"))},E);Y={messageChannel:x,onMessage(zn){const Wi=zn;if(Wi.data.eventId===tt)switch(Wi.data.status){case"ack":clearTimeout(st),j=setTimeout(()=>{$e(new Error("timeout"))},3e3);break;case"done":clearTimeout(j),Ae(Wi.data.response);break;default:clearTimeout(st),clearTimeout(j),$e(new Error("invalid_response"))}}},T.handlers.add(Y),x.port1.addEventListener("message",Y.onMessage),T.target.postMessage({eventType:h,eventId:tt,data:p},[x.port2])}).finally(()=>{Y&&T.removeMessageHandler(Y)})})()}}function gn(){return window}function Ic(){return typeof gn().WorkerGlobalScope<"u"&&"function"==typeof gn().importScripts}function sl(){return(sl=(0,m.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const al="firebaseLocalStorageDb",Ir=1,Is="firebaseLocalStorage",ul="fbase_key";class Qa{constructor(h){this.request=h}toPromise(){return new Promise((h,p)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function Ja(v,h){return v.transaction([Is],h?"readwrite":"readonly").objectStore(Is)}function Cc(){const v=indexedDB.open(al,Ir);return new Promise((h,p)=>{v.addEventListener("error",()=>{p(v.error)}),v.addEventListener("upgradeneeded",()=>{const E=v.result;try{E.createObjectStore(Is,{keyPath:ul})}catch(T){p(T)}}),v.addEventListener("success",(0,m.Z)(function*(){const E=v.result;E.objectStoreNames.contains(Is)?h(E):(E.close(),yield function aa(){const v=indexedDB.deleteDatabase(al);return new Qa(v).toPromise()}(),h(yield Cc()))}))})}function ua(v,h,p){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,m.Z)(function*(v,h,p){const E=Ja(v,!0).put({[ul]:h,value:p});return new Qa(E).toPromise()})).apply(this,arguments)}function eu(){return(eu=(0,m.Z)(function*(v,h){const p=Ja(v,!1).get(h),E=yield new Qa(p).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function tu(v,h){const p=Ja(v,!0).delete(h);return new Qa(p).toPromise()}const la=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,m.Z)(function*(){return p.db||(p.db=yield Cc()),p.db})()}_withRetries(p){var E=this;return(0,m.Z)(function*(){let T=0;for(;;)try{const x=yield E._openDb();return yield p(x)}catch(x){if(T++>3)throw x;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,m.Z)(function*(){return Ic()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,m.Z)(function*(){p.receiver=bo._getInstance(function tr(){return Ic()?self:null}()),p.receiver._subscribe("keyChanged",function(){var E=(0,m.Z)(function*(T,x){return{keyProcessed:(yield p._poll()).includes(x.key)}});return function(T,x){return E.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var E=(0,m.Z)(function*(T,x){return["keyChanged"]});return function(T,x){return E.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,m.Z)(function*(){var E,T;if(p.activeServiceWorker=yield function Dc(){return sl.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new sp(p.activeServiceWorker);const x=yield p.sender._send("ping",{},800);x&&null!==(E=x[0])&&void 0!==E&&E.fulfilled&&null!==(T=x[0])&&void 0!==T&&T.value.includes("keyChanged")&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var E=this;return(0,m.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function ol(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:p},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,m.Z)(function*(){try{if(!indexedDB)return!1;const p=yield Cc();return yield ua(p,nl,"1"),yield tu(p,nl),!0}catch{}return!1})()}_withPendingWrite(p){var E=this;return(0,m.Z)(function*(){E.pendingWrites++;try{yield p()}finally{E.pendingWrites--}})()}_set(p,E){var T=this;return(0,m.Z)(function*(){return T._withPendingWrite((0,m.Z)(function*(){return yield T._withRetries(x=>ua(x,p,E)),T.localCache[p]=E,T.notifyServiceWorker(p)}))})()}_get(p){var E=this;return(0,m.Z)(function*(){const T=yield E._withRetries(x=>function ll(v,h){return eu.apply(this,arguments)}(x,p));return E.localCache[p]=T,T})()}_remove(p){var E=this;return(0,m.Z)(function*(){return E._withPendingWrite((0,m.Z)(function*(){return yield E._withRetries(T=>tu(T,p)),delete E.localCache[p],E.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,m.Z)(function*(){const E=yield p._withRetries(j=>{const Y=Ja(j,!1).getAll();return new Qa(Y).toPromise()});if(!E)return[];if(0!==p.pendingWrites)return[];const T=[],x=new Set;for(const{fbase_key:j,value:Y}of E)x.add(j),JSON.stringify(p.localCache[j])!==JSON.stringify(Y)&&(p.notifyListeners(j,Y),T.push(j));for(const j of Object.keys(p.localCache))p.localCache[j]&&!x.has(j)&&(p.notifyListeners(j,null),T.push(j));return T})()}notifyListeners(p,E){this.localCache[p]=E;const T=this.listeners[p];if(T)for(const x of Array.from(T))x(E)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,m.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(E)}_removeListener(p,E){this.listeners[p]&&(this.listeners[p].delete(E),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})(),iu=1e12;class bc{constructor(h){this.auth=h,this.counter=iu,this._widgets=new Map}render(h,p){const E=this.counter;return this._widgets.set(E,new Sc(h,this.auth.name,p||{})),this.counter++,E}reset(h){var p;const E=h||iu;null===(p=this._widgets.get(E))||void 0===p||p.delete(),this._widgets.delete(E)}getResponse(h){var p;return(null===(p=this._widgets.get(h||iu))||void 0===p?void 0:p.getResponse())||""}execute(h){var p=this;return(0,m.Z)(function*(){var E;return null===(E=p._widgets.get(h||iu))||void 0===E||E.execute(),""})()}}class Sc{constructor(h,p,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof h?document.getElementById(h):h;re(T,"argument-error",{appName:p}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Av(v){const h=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<v;E++)h.push(p.charAt(Math.floor(Math.random()*p.length)));return h.join("")}(50);const{callback:h,"expired-callback":p}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ap=Ti("rcb"),Mv=new Te(3e4,6e4);class dl{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=gn().grecaptcha)||void 0===h||!h.render)}load(h,p=""){return re(function up(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(p),h,"argument-error"),this.shouldResolveImmediately(p)&&qt(gn().grecaptcha)?Promise.resolve(gn().grecaptcha):new Promise((E,T)=>{const x=gn().setTimeout(()=>{T(we(h,"network-request-failed"))},Mv.get());gn()[ap]=()=>{gn().clearTimeout(x),delete gn()[ap];const Y=gn().grecaptcha;if(!Y||!qt(Y))return void T(we(h,"internal-error"));const Ae=Y.render;Y.render=($e,tt)=>{const st=Ae($e,tt);return this.counter++,st},this.hostLanguage=p,E(Y)},Cn(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:ap,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(x),T(we(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var p;return!(null===(p=gn().grecaptcha)||void 0===p||!p.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Rv{load(h){return(0,m.Z)(function*(){return new bc(h)})()}clearedOneInstance(){}}const Hn="recaptcha",ah={theme:"light",type:"image"};class Mo{constructor(h,p=Object.assign({},ah),E){this.parameters=p,this.type=Hn,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=an(E),this.isInvisible="invisible"===this.parameters.size,re(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof h?document.getElementById(h):h;re(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Rv:new dl,this.validateStartingState()}verify(){var h=this;return(0,m.Z)(function*(){h.assertNotDestroyed();const p=yield h.render(),E=h.getAssertedRecaptcha();return E.getResponse(p)||new Promise(x=>{const j=Y=>{Y&&(h.tokenChangeListeners.delete(j),x(Y))};h.tokenChangeListeners.add(j),h.isInvisible&&E.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){re(!this.parameters.sitekey,this.auth,"argument-error"),re(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),re(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return p=>{if(this.tokenChangeListeners.forEach(E=>E(p)),"function"==typeof h)h(p);else if("string"==typeof h){const E=gn()[h];"function"==typeof E&&E(p)}}}assertNotDestroyed(){re(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,m.Z)(function*(){if(yield h.init(),!h.widgetId){let p=h.container;if(!h.isInvisible){const E=document.createElement("div");p.appendChild(E),p=E}h.widgetId=h.getAssertedRecaptcha().render(p,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,m.Z)(function*(){re(ht()&&!Ic(),h.auth,"internal-error"),yield function Sm(){let v=null;return new Promise(h=>{"complete"!==document.readyState?(v=()=>h(),window.addEventListener("load",v)):h()}).catch(h=>{throw v&&window.removeEventListener("load",v),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const p=yield function ee(v){return Me.apply(this,arguments)}(h.auth);re(p,h.auth,"internal-error"),h.parameters.sitekey=p})()}getAssertedRecaptcha(){return re(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class qr{constructor(h,p){this.verificationId=h,this.onConfirmation=p}confirm(h){const p=Ri._fromVerification(this.verificationId,h);return this.onConfirmation(p)}}function su(){return(su=(0,m.Z)(function*(v,h,p){const E=an(v),T=yield ou(E,h,(0,O.m9)(p));return new qr(T,x=>Nt(E,x))})).apply(this,arguments)}function Ws(){return(Ws=(0,m.Z)(function*(v,h,p){const E=(0,O.m9)(v);yield ta(!1,E,"phone");const T=yield ou(E.auth,h,(0,O.m9)(p));return new qr(T,x=>Qf(E,x))})).apply(this,arguments)}function lh(){return(lh=(0,m.Z)(function*(v,h,p){const E=(0,O.m9)(v),T=yield ou(E.auth,h,(0,O.m9)(p));return new qr(T,x=>Yd(E,x))})).apply(this,arguments)}function ou(v,h,p){return lp.apply(this,arguments)}function lp(){return lp=(0,m.Z)(function*(v,h,p){var E;const T=yield p.verify();try{let x;if(re("string"==typeof T,v,"argument-error"),re(p.type===Hn,v,"argument-error"),x="string"==typeof h?{phoneNumber:h}:h,"session"in x){const j=x.session;if("phoneNumber"in x)return re("enroll"===j.type,v,"internal-error"),(yield function Ec(v,h){return Je(v,"POST","/v2/accounts/mfaEnrollment:start",Lt(v,h))}(v,{idToken:j.credential,phoneEnrollmentInfo:{phoneNumber:x.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{re("signin"===j.type,v,"internal-error");const Y=(null===(E=x.multiFactorHint)||void 0===E?void 0:E.uid)||x.multiFactorUid;return re(Y,v,"missing-multi-factor-info"),(yield function cl(v,h){return Je(v,"POST","/v2/accounts/mfaSignIn:start",Lt(v,h))}(v,{mfaPendingCredential:j.credential,mfaEnrollmentId:Y,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:j}=yield function _m(v,h){return nc.apply(this,arguments)}(v,{phoneNumber:x.phoneNumber,recaptchaToken:T});return j}}finally{p._reset()}}),lp.apply(this,arguments)}function ls(){return(ls=(0,m.Z)(function*(v,h){yield is((0,O.m9)(v),h)})).apply(this,arguments)}let rt=(()=>{class v{constructor(p){this.providerId=v.PROVIDER_ID,this.auth=an(p)}verifyPhoneNumber(p,E){return ou(this.auth,p,(0,O.m9)(E))}static credential(p,E){return Ri._fromVerification(p,E)}static credentialFromResult(p){return v.credentialFromTaggedObject(p)}static credentialFromError(p){return v.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:E,temporaryProof:T}=p;return E&&T?Ri._fromTokenResponse(E,T):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function pi(v,h){return h?kn(h):(re(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class Nn extends Ai{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Mi(h,this._buildIdpRequest())}_linkToIdToken(h,p){return Mi(h,this._buildIdpRequest(p))}_getReauthenticationResolver(h){return Mi(h,this._buildIdpRequest())}_buildIdpRequest(h){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(p.idToken=h),p}}function ch(v){return $u(v.auth,new Nn(v),v.bypassAuthState)}function au(v){const{auth:h,user:p}=v;return re(p,h,"internal-error"),Yf(p,new Nn(v),v.bypassAuthState)}function gi(v){return hl.apply(this,arguments)}function hl(){return(hl=(0,m.Z)(function*(v){const{auth:h,user:p}=v;return re(p,h,"internal-error"),is(p,new Nn(v),v.bypassAuthState)})).apply(this,arguments)}class Ac{constructor(h,p,E,T,x=!1){this.auth=h,this.resolver=E,this.user=T,this.bypassAuthState=x,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var h=this;return new Promise(function(){var p=(0,m.Z)(function*(E,T){h.pendingPromise={resolve:E,reject:T};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(x){h.reject(x)}});return function(E,T){return p.apply(this,arguments)}}())}onAuthEvent(h){var p=this;return(0,m.Z)(function*(){const{urlResponse:E,sessionId:T,postBody:x,tenantId:j,error:Y,type:Ae}=h;if(Y)return void p.reject(Y);const $e={auth:p.auth,requestUri:E,sessionId:T,tenantId:j||void 0,postBody:x||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Ae)($e))}catch(tt){p.reject(tt)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return ch;case"linkViaPopup":case"linkViaRedirect":return gi;case"reauthViaPopup":case"reauthViaRedirect":return au;default:Ee(this.auth,"internal-error")}}resolve(h){nt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){nt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const cs=new Te(2e3,1e4);function da(){return(da=(0,m.Z)(function*(v,h,p){const E=an(v);Oe(v,h,vs);const T=pi(E,p);return new Rc(E,"signInViaPopup",h,T).executeNotNull()})).apply(this,arguments)}function qi(){return(qi=(0,m.Z)(function*(v,h,p){const E=(0,O.m9)(v);Oe(E.auth,h,vs);const T=pi(E.auth,p);return new Rc(E.auth,"reauthViaPopup",h,T,E).executeNotNull()})).apply(this,arguments)}function Ro(){return(Ro=(0,m.Z)(function*(v,h,p){const E=(0,O.m9)(v);Oe(E.auth,h,vs);const T=pi(E.auth,p);return new Rc(E.auth,"linkViaPopup",h,T,E).executeNotNull()})).apply(this,arguments)}let Rc=(()=>{class v extends Ac{constructor(p,E,T,x,j){super(p,E,x,j),this.provider=T,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var p=this;return(0,m.Z)(function*(){const E=yield p.execute();return re(E,p.auth,"internal-error"),E})()}onExecution(){var p=this;return(0,m.Z)(function*(){nt(1===p.filter.length,"Popup operations only handle one event");const E=So();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],E),p.authWindow.associatedEvent=E,p.resolver._originValidation(p.auth).catch(T=>{p.reject(T)}),p.resolver._isIframeWebStorageSupported(p.auth,T=>{T||p.reject(we(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(we(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const p=()=>{var E,T;this.pollId=null!==(T=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==T&&T.closed?window.setTimeout(()=>{this.pollId=null,this.reject(we(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(p,cs.get())};p()}}return v.currentPopupAction=null,v})();const lu="pendingRedirect",Ds=new Map;class cr extends Ac{constructor(h,p,E=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,E),this.eventId=null}execute(){var h=()=>super.execute,p=this;return(0,m.Z)(function*(){let E=Ds.get(p.auth._key());if(!E){try{const x=(yield function fl(v,h){return xc.apply(this,arguments)}(p.resolver,p.auth))?yield h().call(p):null;E=()=>Promise.resolve(x)}catch(T){E=()=>Promise.reject(T)}Ds.set(p.auth._key(),E)}return p.bypassAuthState||Ds.set(p.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(h){var p=()=>super.onAuthEvent,E=this;return(0,m.Z)(function*(){if("signInViaRedirect"===h.type)return p().call(E,h);if("unknown"!==h.type){if(h.eventId){const T=yield E.auth._redirectUserForId(h.eventId);if(T)return E.user=T,p().call(E,h);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,m.Z)(function*(){})()}cleanUp(){}}function xc(){return(xc=(0,m.Z)(function*(v,h){const p=xo(h),E=hh(v);if(!(yield E._isAvailable()))return!1;const T="true"===(yield E._get(p));return yield E._remove(p),T})).apply(this,arguments)}function dh(v,h){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,m.Z)(function*(v,h){return hh(v)._set(xo(h),"true")})).apply(this,arguments)}function Nc(v,h){Ds.set(v._key(),h)}function hh(v){return kn(v._redirectPersistence)}function xo(v){return B(lu,v.config.apiKey,v.name)}function Pc(v,h,p){return function Tm(v,h,p){return cu.apply(this,arguments)}(v,h,p)}function cu(){return(cu=(0,m.Z)(function*(v,h,p){const E=an(v);Oe(v,h,vs),yield E._initializationPromise;const T=pi(E,p);return yield dh(T,E),T._openRedirect(E,h,"signInViaRedirect")})).apply(this,arguments)}function du(v,h,p){return function Ys(v,h,p){return No.apply(this,arguments)}(v,h,p)}function No(){return(No=(0,m.Z)(function*(v,h,p){const E=(0,O.m9)(v);Oe(E.auth,h,vs),yield E.auth._initializationPromise;const T=pi(E.auth,p);yield dh(T,E.auth);const x=yield dr(E);return T._openRedirect(E.auth,h,"reauthViaRedirect",x)})).apply(this,arguments)}function Nr(v,h,p){return function fh(v,h,p){return hu.apply(this,arguments)}(v,h,p)}function hu(){return(hu=(0,m.Z)(function*(v,h,p){const E=(0,O.m9)(v);Oe(E.auth,h,vs),yield E.auth._initializationPromise;const T=pi(E.auth,p);yield ta(!1,E,h.providerId),yield dh(T,E.auth);const x=yield dr(E);return T._openRedirect(E.auth,h,"linkViaRedirect",x)})).apply(this,arguments)}function Cs(){return(Cs=(0,m.Z)(function*(v,h){return yield an(v)._initializationPromise,ha(v,h,!1)})).apply(this,arguments)}function ha(v,h){return ri.apply(this,arguments)}function ri(){return(ri=(0,m.Z)(function*(v,h,p=!1){const E=an(v),T=pi(E,h),j=yield new cr(E,T,p).execute();return j&&!p&&(delete j.user._redirectEventId,yield E._persistUserIfCurrent(j.user),yield E._setRedirectUser(null,h)),j})).apply(this,arguments)}function dr(v){return ds.apply(this,arguments)}function ds(){return(ds=(0,m.Z)(function*(v){const h=So(`${v.uid}:::`);return v._redirectEventId=h,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),h})).apply(this,arguments)}class kc{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let p=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(h,E)&&(p=!0,this.sendToConsumer(h,E),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Cr(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hs(v);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=h,p=!0)),p}sendToConsumer(h,p){var E;if(h.error&&!hs(h)){const T=(null===(E=h.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";p.onError(we(this.auth,T))}else p.onAuthEvent(h)}isEventForConsumer(h,p){const E=null===p.eventId||!!h.eventId&&h.eventId===p.eventId;return p.filter.includes(h.type)&&E}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ii(h))}saveEventToCache(h){this.cachedEventUids.add(ii(h)),this.lastProcessedEventTime=Date.now()}}function ii(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(h=>h).join("-")}function hs({type:v,error:h}){return"unknown"===v&&"auth/no-auth-event"===h?.code}function Po(v){return cp.apply(this,arguments)}function cp(){return(cp=(0,m.Z)(function*(v,h={}){return Je(v,"GET","/v1/projects",h)})).apply(this,arguments)}const Fc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Lc=/^https?/;function fs(){return(fs=(0,m.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:h}=yield Po(v);for(const p of h)try{if(Uc(p))return}catch{}Ee(v,"unauthorized-domain")})).apply(this,arguments)}function Uc(v){const h=Xt(),{protocol:p,hostname:E}=new URL(h);if(v.startsWith("chrome-extension://")){const j=new URL(v);return""===j.hostname&&""===E?"chrome-extension:"===p&&v.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===p&&j.hostname===E}if(!Lc.test(p))return!1;if(Fc.test(v))return E===v;const T=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(E)}const pl=new Te(3e4,6e4);function Vt(){const v=gn().___jsl;if(v?.H)for(const h of Object.keys(v.H))if(v.H[h].r=v.H[h].r||[],v.H[h].L=v.H[h].L||[],v.H[h].r=[...v.H[h].L],v.CP)for(let p=0;p<v.CP.length;p++)v.CP[p]=null}let gl=null;const Am=new Te(5e3,15e3),dp="__/auth/iframe",mi="emulator/auth/iframe",ph={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gh=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hp(v){const h=v.config;re(h.authDomain,v,"auth-domain-config-required");const p=h.emulator?Ge(h,mi):`https://${v.config.authDomain}/${dp}`,E={apiKey:h.apiKey,appName:v.name,v:ie.SDK_VERSION},T=gh.get(v.config.apiHost);T&&(E.eid=T);const x=v._getFrameworks();return x.length&&(E.fw=x.join(",")),`${p}?${(0,O.xO)(E).slice(1)}`}function C(){return C=(0,m.Z)(function*(v){const h=yield function Ni(v){return gl=gl||function Zn(v){return new Promise((h,p)=>{var E,T,x;function j(){Vt(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{Vt(),p(we(v,"network-request-failed"))},timeout:pl.get()})}if(null!==(T=null===(E=gn().gapi)||void 0===E?void 0:E.iframes)&&void 0!==T&&T.Iframe)h(gapi.iframes.getContext());else{if(null===(x=gn().gapi)||void 0===x||!x.load){const Y=Ti("iframefcb");return gn()[Y]=()=>{gapi.load?j():p(we(v,"network-request-failed"))},Cn(`https://apis.google.com/js/api.js?onload=${Y}`).catch(Ae=>p(Ae))}j()}}).catch(h=>{throw gl=null,h})}(v),gl}(v),p=gn().gapi;return re(p,v,"internal-error"),h.open({where:document.body,url:hp(v),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ph,dontclear:!0},E=>new Promise(function(){var T=(0,m.Z)(function*(x,j){yield E.restyle({setHideOnLeave:!1});const Y=we(v,"network-request-failed"),Ae=gn().setTimeout(()=>{j(Y)},Am.get());function $e(){gn().clearTimeout(Ae),x(E)}E.ping($e).then($e,()=>{j(Y)})});return function(x,j){return T.apply(this,arguments)}}()))}),C.apply(this,arguments)}const M={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},P=500,H=600,Z="_blank",ue="http://localhost";class Fe{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Mt="__/auth/handler",Ft="emulator/auth/handler",Pr=encodeURIComponent("fac");function In(v,h,p,E,T,x){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,m.Z)(function*(v,h,p,E,T,x){re(v.config.authDomain,v,"auth-domain-config-required"),re(v.config.apiKey,v,"invalid-api-key");const j={apiKey:v.config.apiKey,appName:v.name,authType:p,redirectUrl:E,v:ie.SDK_VERSION,eventId:T};if(h instanceof vs){h.setDefaultLanguage(v.languageCode),j.providerId=h.providerId||"",(0,O.xb)(h.getCustomParameters())||(j.customParameters=JSON.stringify(h.getCustomParameters()));for(const[tt,st]of Object.entries(x||{}))j[tt]=st}if(h instanceof rc){const tt=h.getScopes().filter(st=>""!==st);tt.length>0&&(j.scopes=tt.join(","))}v.tenantId&&(j.tid=v.tenantId);const Y=j;for(const tt of Object.keys(Y))void 0===Y[tt]&&delete Y[tt];const Ae=yield v._getAppCheckToken(),$e=Ae?`#${Pr}=${encodeURIComponent(Ae)}`:"";return`${function Oo({config:v}){return v.emulator?Ge(v,Ft):`https://${v.authDomain}/${Mt}`}(v)}?${(0,O.xO)(Y).slice(1)}${$e}`})).apply(this,arguments)}const Qs="webStorageSupport",bs=class br{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lr,this._completeRedirectFn=ha,this._overrideRedirectResult=Nc}_openPopup(h,p,E,T){var x=this;return(0,m.Z)(function*(){var j;nt(null===(j=x.eventManagers[h._key()])||void 0===j?void 0:j.manager,"_initialize() not called before _openPopup()");const Y=yield In(h,p,E,Xt(),T);return function Ue(v,h,p,E=P,T=H){const x=Math.max((window.screen.availHeight-T)/2,0).toString(),j=Math.max((window.screen.availWidth-E)/2,0).toString();let Y="";const Ae=Object.assign(Object.assign({},M),{width:E.toString(),height:T.toString(),top:x,left:j}),$e=(0,O.z$)().toLowerCase();p&&(Y=Ye($e)?Z:p),me($e)&&(h=h||ue,Ae.scrollbars="yes");const tt=Object.entries(Ae).reduce((zn,[Wi,Rp])=>`${zn}${Wi}=${Rp},`,"");if(function Qn(v=(0,O.z$)()){var h;return Fn(v)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}($e)&&"_self"!==Y)return function ct(v,h){const p=document.createElement("a");p.href=v,p.target=h;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(E)}(h||"",Y),new Fe(null);const st=window.open(h||"",Y,tt);re(st,v,"popup-blocked");try{st.focus()}catch{}return new Fe(st)}(h,Y,So())})()}_openRedirect(h,p,E,T){var x=this;return(0,m.Z)(function*(){return yield x._originValidation(h),function il(v){gn().location.href=v}(yield In(h,p,E,Xt(),T)),new Promise(()=>{})})()}_initialize(h){const p=h._key();if(this.eventManagers[p]){const{manager:T,promise:x}=this.eventManagers[p];return T?Promise.resolve(T):(nt(x,"If manager is not set, promise should be"),x)}const E=this.initAndGetManager(h);return this.eventManagers[p]={promise:E},E.catch(()=>{delete this.eventManagers[p]}),E}initAndGetManager(h){var p=this;return(0,m.Z)(function*(){const E=yield function w(v){return C.apply(this,arguments)}(h),T=new kc(h);return E.register("authEvent",x=>(re(x?.authEvent,h,"invalid-auth-event"),{status:T.onEvent(x.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[h._key()]={manager:T},p.iframes[h._key()]=E,T})()}_isIframeWebStorageSupported(h,p){this.iframes[h._key()].send(Qs,{type:Qs},T=>{var x;const j=null===(x=T?.[0])||void 0===x?void 0:x[Qs];void 0!==j&&p(!!j),Ee(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Vc(v){return fs.apply(this,arguments)}(h)),this.originValidationPromises[p]}get _shouldInitProactively(){return Hi()||X()||Fn()}};class Js{constructor(h){this.factorId=h}_process(h,p,E){switch(p.type){case"enroll":return this._finalizeEnroll(h,p.credential,E);case"signin":return this._finalizeSignIn(h,p.credential);default:return At("unexpected MultiFactorSessionType")}}}class fu extends Js{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new fu(h)}_finalizeEnroll(h,p,E){return function el(v,h){return Je(v,"POST","/v2/accounts/mfaEnrollment:finalize",Lt(v,h))}(h,{idToken:p,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,p){return function Ao(v,h){return Je(v,"POST","/v2/accounts/mfaSignIn:finalize",Lt(v,h))}(h,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let xv=(()=>{class v{constructor(){}static assertion(p){return fu._fromCredential(p)}}return v.FACTOR_ID="phone",v})();var mh="@firebase/auth";class Fo{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var p=this;return(0,m.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const p=this.auth.onIdTokenChanged(E=>{h(E?.stsTokenManager.accessToken||null)});this.internalListeners.set(h,p),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const p=this.internalListeners.get(h);p&&(this.internalListeners.delete(h),p(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function mu(){return window}(0,O.Pz)("authIdTokenMaxAge"),function pp(v){(0,ie._registerComponent)(new ge.wA("auth",(h,{options:p})=>{const E=h.getProvider("app").getImmediate(),T=h.getProvider("heartbeat"),x=h.getProvider("app-check-internal"),{apiKey:j,authDomain:Y}=E.options;re(j&&!j.includes(":"),"invalid-api-key",{appName:E.name});const Ae={apiKey:j,authDomain:Y,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:le(v)},$e=new xn(E,T,x,Ae);return function Zo(v,h){const p=h?.persistence||[],E=(Array.isArray(p)?p:[p]).map(kn);h?.errorMap&&v._updateErrorMap(h.errorMap),v._initializeWithPersistence(E,h?.popupRedirectResolver)}($e,p),$e},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,p,E)=>{h.getProvider("auth-internal").initialize()})),(0,ie._registerComponent)(new ge.wA("auth-internal",h=>{const p=an(h.getProvider("auth").getImmediate());return new Fo(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ie.registerVersion)(mh,"0.23.2",function yh(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,ie.registerVersion)(mh,"0.23.2","esm2017")}("Browser");const Pv=2e3;function _h(){return _h=(0,m.Z)(function*(v,h,p){var E;const{BuildInfo:T}=mu();nt(h.sessionId,"AuthEvent did not contain a session ID");const x=yield function yp(v){return Xs.apply(this,arguments)}(h.sessionId),j={};return Fn()?j.ibi=T.packageName:sn()?j.apn=T.packageName:Ee(v,"operation-not-supported-in-this-environment"),T.displayName&&(j.appDisplayName=T.displayName),j.sessionId=x,In(v,p,h.type,void 0,null!==(E=h.eventId)&&void 0!==E?E:void 0,j)}),_h.apply(this,arguments)}function yu(){return(yu=(0,m.Z)(function*(v){const{BuildInfo:h}=mu(),p={};Fn()?p.iosBundleId=h.packageName:sn()?p.androidPackageName=h.packageName:Ee(v,"operation-not-supported-in-this-environment"),yield Po(v,p)})).apply(this,arguments)}function $c(){return($c=(0,m.Z)(function*(v,h,p){const{cordova:E}=mu();let T=()=>{};try{yield new Promise((x,j)=>{let Y=null;function Ae(){var st;x();const zn=null===(st=E.plugins.browsertab)||void 0===st?void 0:st.close;"function"==typeof zn&&zn(),"function"==typeof p?.close&&p.close()}function $e(){Y||(Y=window.setTimeout(()=>{j(we(v,"redirect-cancelled-by-user"))},Pv))}function tt(){"visible"===document?.visibilityState&&$e()}h.addPassiveListener(Ae),document.addEventListener("resume",$e,!1),sn()&&document.addEventListener("visibilitychange",tt,!1),T=()=>{h.removePassiveListener(Ae),document.removeEventListener("resume",$e,!1),document.removeEventListener("visibilitychange",tt,!1),Y&&window.clearTimeout(Y)}})}finally{T()}})).apply(this,arguments)}function Xs(){return(Xs=(0,m.Z)(function*(v){const h=function Rm(v){if(nt(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(v);const h=new ArrayBuffer(v.length),p=new Uint8Array(h);for(let E=0;E<v.length;E++)p[E]=v.charCodeAt(E);return p}(v),p=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(p)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const ml=20;class Hc extends kc{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(h)),super.onEvent(h)}initialized(){var h=this;return(0,m.Z)(function*(){yield h.initPromise})()}}function vp(v){return qc.apply(this,arguments)}function qc(){return(qc=(0,m.Z)(function*(v){const h=yield Wc()._get(Kc(v));return h&&(yield Wc()._remove(Kc(v))),h})).apply(this,arguments)}function xm(){const v=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<ml;p++){const E=Math.floor(Math.random()*h.length);v.push(h.charAt(E))}return v.join("")}function Wc(){return kn(qs)}function Kc(v){return B("authEvent",v.config.apiKey,v.name)}function eo(v){if(!v?.includes("?"))return{};const[h,...p]=v.split("?");return(0,O.zd)(p.join("?"))}const Ep=class Zc{constructor(){this._redirectPersistence=lr,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ha,this._overrideRedirectResult=Nc}_initialize(h){var p=this;return(0,m.Z)(function*(){const E=h._key();let T=p.eventManagers.get(E);return T||(T=new Hc(h),p.eventManagers.set(E,T),p.attachCallbackListeners(h,T)),T})()}_openPopup(h){Ee(h,"operation-not-supported-in-this-environment")}_openRedirect(h,p,E,T){var x=this;return(0,m.Z)(function*(){!function kv(v){var h,p,E,T,x,j,Y,Ae,$e,tt;const st=mu();re("function"==typeof(null===(h=st?.universalLinks)||void 0===h?void 0:h.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),re(typeof(null===(p=st?.BuildInfo)||void 0===p?void 0:p.packageName)<"u",v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),re("function"==typeof(null===(x=null===(T=null===(E=st?.cordova)||void 0===E?void 0:E.plugins)||void 0===T?void 0:T.browsertab)||void 0===x?void 0:x.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),re("function"==typeof(null===(Ae=null===(Y=null===(j=st?.cordova)||void 0===j?void 0:j.plugins)||void 0===Y?void 0:Y.browsertab)||void 0===Ae?void 0:Ae.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),re("function"==typeof(null===(tt=null===($e=st?.cordova)||void 0===$e?void 0:$e.InAppBrowser)||void 0===tt?void 0:tt.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const j=yield x._initialize(h);yield j.initialized(),j.resetRedirect(),function Zs(){Ds.clear()}(),yield x._originValidation(h);const Y=function zc(v,h,p=null){return{type:h,eventId:p,urlResponse:null,sessionId:xm(),postBody:null,tenantId:v.tenantId,error:we(v,"no-auth-event")}}(h,E,T);yield function Gc(v,h){return Wc()._set(Kc(v),h)}(h,Y);const Ae=yield function Ov(v,h,p){return _h.apply(this,arguments)}(h,Y,p),$e=yield function mp(v){const{cordova:h}=mu();return new Promise(p=>{h.plugins.browsertab.isAvailable(E=>{let T=null;E?h.plugins.browsertab.openUrl(v):T=h.InAppBrowser.open(v,function Gt(v=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),p(T)})})}(Ae);return function vu(v,h,p){return $c.apply(this,arguments)}(h,j,$e)})()}_isIframeWebStorageSupported(h,p){throw new Error("Method not implemented.")}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function jc(v){return yu.apply(this,arguments)}(h)),this.originValidationPromises[p]}attachCallbackListeners(h,p){const{universalLinks:E,handleOpenURL:T,BuildInfo:x}=mu(),j=setTimeout((0,m.Z)(function*(){yield vp(h),p.onEvent(Eu())}),500),Y=function(){var tt=(0,m.Z)(function*(st){clearTimeout(j);const zn=yield vp(h);let Wi=null;zn&&st?.url&&(Wi=function _u(v,h){var p,E;const T=function yl(v){const h=eo(v),p=h.link?decodeURIComponent(h.link):void 0,E=eo(p).link,T=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return eo(T).link||T||E||p||v}(h);if(T.includes("/__/auth/callback")){const x=eo(T),j=x.firebaseError?function Eh(v){try{return JSON.parse(v)}catch{return null}}(decodeURIComponent(x.firebaseError)):null,Y=null===(E=null===(p=j?.code)||void 0===p?void 0:p.split("auth/"))||void 0===E?void 0:E[1],Ae=Y?we(Y):null;return Ae?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:Ae,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:T,postBody:null}}return null}(zn,st.url)),p.onEvent(Wi||Eu())});return function(zn){return tt.apply(this,arguments)}}();typeof E<"u"&&"function"==typeof E.subscribe&&E.subscribe(null,Y);const Ae=T,$e=`${x.packageName.toLowerCase()}://`;mu().handleOpenURL=function(){var tt=(0,m.Z)(function*(st){if(st.toLowerCase().startsWith($e)&&Y({url:st}),"function"==typeof Ae)try{Ae(st)}catch(zn){console.error(zn)}});return function(st){return tt.apply(this,arguments)}}()}};function Eu(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:we("no-auth-event")}}const wp=1e3;function Ss(){var v;return(null===(v=self?.location)||void 0===v?void 0:v.protocol)||null}function _l(v=(0,O.z$)()){return!("file:"!==Ss()&&"ionic:"!==Ss()&&"capacitor:"!==Ss()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function Pm(){try{const v=self.localStorage,h=So();if(v)return v.setItem(h,"1"),v.removeItem(h),!function Fv(v=(0,O.z$)()){return function Ip(){return(0,O.w1)()&&11===document?.documentMode}()||function wl(v=(0,O.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,O.hl)()}catch{return Om()&&(0,O.hl)()}return!1}function Om(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Dp(){return(function Yc(){return"http:"===Ss()||"https:"===Ss()}()||(0,O.ru)()||_l())&&!function El(){return(0,O.b$)()||(0,O.UG)()}()&&Pm()&&!Om()}function wh(){return _l()&&typeof document<"u"}function Ih(){return(Ih=(0,m.Z)(function*(){return!!wh()&&new Promise(v=>{const h=setTimeout(()=>{v(!1)},wp);document.addEventListener("deviceready",()=>{clearTimeout(h),v(!0)})})})).apply(this,arguments)}const yi={LOCAL:"local",NONE:"none",SESSION:"session"},wu=re,Cp="persistence";function Ch(v){return bp.apply(this,arguments)}function bp(){return(bp=(0,m.Z)(function*(v){yield v._initializationPromise;const h=Sp(),p=B(Cp,v.config.apiKey,v.name);h&&h.setItem(p,v._getPersistence())})).apply(this,arguments)}function Sp(){var v;try{return(null===(v=function Dh(){return typeof window<"u"?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch{return null}}const Tp=re;class no{constructor(){this.browserResolver=kn(bs),this.cordovaResolver=kn(Ep),this.underlyingResolver=null,this._redirectPersistence=lr,this._completeRedirectFn=ha,this._overrideRedirectResult=Nc}_initialize(h){var p=this;return(0,m.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,p,E,T){var x=this;return(0,m.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openPopup(h,p,E,T)})()}_openRedirect(h,p,E,T){var x=this;return(0,m.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openRedirect(h,p,E,T)})()}_isIframeWebStorageSupported(h,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,p)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return wh()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Tp(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,m.Z)(function*(){if(h.underlyingResolver)return;const p=yield function Lv(){return Ih.apply(this,arguments)}();h.underlyingResolver=p?h.cordovaResolver:h.browserResolver})()}}function Wr(v){return v.unwrap()}function Fm(v){return Bv(v)}function Bv(v){const{_tokenResponse:h}=v instanceof O.ZR?v.customData:v;if(!h)return null;if(!(v instanceof O.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return rt.credentialFromResult(v);const p=h.providerId;if(!p||p===de.PASSWORD)return null;let E;switch(p){case de.GOOGLE:E=Jo;break;case de.FACEBOOK:E=Wf;break;case de.GITHUB:E=ic;break;case de.TWITTER:E=Kd;break;default:const{oauthIdToken:T,oauthAccessToken:x,oauthTokenSecret:j,pendingToken:Y,nonce:Ae}=h;return x||j||T||Y?Y?p.startsWith("saml.")?yo._create(p,Y):ns._fromParams({providerId:p,signInMethod:p,pendingToken:Y,idToken:T,accessToken:x}):new fi(p).credential({idToken:T,accessToken:x,rawNonce:Ae}):null}return v instanceof O.ZR?E.credentialFromError(v):E.credentialFromResult(v)}function Or(v,h){return h.catch(p=>{throw p instanceof O.ZR&&function Uv(v,h){var p;const E=null===(p=h.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===h?.code)h.resolver=new Qc(v,function Xu(v,h){var p;const E=(0,O.m9)(v),T=h;return re(h.customData.operationType,E,"argument-error"),re(null===(p=T.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,E,"argument-error"),Gs._fromError(E,T)}(v,h));else if(E){const T=Bv(h),x=h;T&&(x.credential=T,x.tenantId=E.tenantId||void 0,x.email=E.email||void 0,x.phoneNumber=E.phoneNumber||void 0)}}(v,p),p}).then(p=>{const T=p.user;return{operationType:p.operationType,credential:Fm(p),additionalUserInfo:vc(p),user:io.getOrCreate(T)}})}function Ap(v,h){return Lm.apply(this,arguments)}function Lm(){return(Lm=(0,m.Z)(function*(v,h){const p=yield h;return{verificationId:p.verificationId,confirm:E=>Or(v,p.confirm(E))}})).apply(this,arguments)}class Qc{constructor(h,p){this.resolver=p,this.auth=function ro(v){return v.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return Or(Wr(this.auth),this.resolver.resolveSignIn(h))}}class io{constructor(h){this._delegate=h,this.multiFactor=function Ka(v){const h=(0,O.m9)(v);return oa.has(h)||oa.set(h,Co._fromUser(h)),oa.get(h)}(h)}static getOrCreate(h){return io.USER_MAP.has(h)||io.USER_MAP.set(h,new io(h)),io.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var p=this;return(0,m.Z)(function*(){return Or(p.auth,Qf(p._delegate,h))})()}linkWithPhoneNumber(h,p){var E=this;return(0,m.Z)(function*(){return Ap(E.auth,function Tc(v,h,p){return Ws.apply(this,arguments)}(E._delegate,h,p))})()}linkWithPopup(h){var p=this;return(0,m.Z)(function*(){return Or(p.auth,function Ct(v,h,p){return Ro.apply(this,arguments)}(p._delegate,h,no))})()}linkWithRedirect(h){var p=this;return(0,m.Z)(function*(){return yield Ch(an(p.auth)),Nr(p._delegate,h,no)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var p=this;return(0,m.Z)(function*(){return Or(p.auth,Yd(p._delegate,h))})()}reauthenticateWithPhoneNumber(h,p){return Ap(this.auth,function uh(v,h,p){return lh.apply(this,arguments)}(this._delegate,h,p))}reauthenticateWithPopup(h){return Or(this.auth,function Mc(v,h,p){return qi.apply(this,arguments)}(this._delegate,h,no))}reauthenticateWithRedirect(h){var p=this;return(0,m.Z)(function*(){return yield Ch(an(p.auth)),du(p._delegate,h,no)})()}sendEmailVerification(h){return function fc(v,h){return sa.apply(this,arguments)}(this._delegate,h)}unlink(h){var p=this;return(0,m.Z)(function*(){return yield function Zf(v,h){return Gi.apply(this,arguments)}(p._delegate,h),p})()}updateEmail(h){return function eh(v,h){return vo((0,O.m9)(v),h,null)}(this._delegate,h)}updatePassword(h){return function wr(v,h){return vo((0,O.m9)(v),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function Jt(v,h){return ls.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function mc(v,h){return Zu.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,p){return function pc(v,h,p){return Wa.apply(this,arguments)}(this._delegate,h,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}io.USER_MAP=new WeakMap;const Iu=re;let Mp=(()=>{class v{constructor(p,E){if(this.app=p,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=p.options;Iu(T,"invalid-api-key",{appName:p.name}),Iu(T,"invalid-api-key",{appName:p.name});const x=typeof window<"u"?no:void 0;this._delegate=E.initialize({options:{persistence:Jc(T,p.name),popupRedirectResolver:x}}),this._delegate._updateErrorMap(qe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?io.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,E){!function Ln(v,h,p){const E=an(v);re(E._canInitEmulator,E,"emulator-config-failed"),re(/^https?:\/\//.test(h),E,"invalid-emulator-scheme");const T=!!p?.disableWarnings,x=mo(h),{host:j,port:Y}=function Ua(v){const h=mo(v),p=/(\/\/)?([^?#/]+)/.exec(v.substr(h.length));if(!p)return{host:"",port:null};const E=p[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(E);if(T){const x=T[1];return{host:x,port:$t(E.substr(x.length+1))}}{const[x,j]=E.split(":");return{host:x,port:$t(j)}}}(h);E.config.emulator={url:`${x}//${j}${null===Y?"":`:${Y}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:j,port:Y,protocol:x.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function Ba(){function v(){const h=document.createElement("p"),p=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,p,E)}applyActionCode(p){return function Jd(v,h){return ss.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return lc(this._delegate,p)}confirmPasswordReset(p,E){return function Es(v,h,p){return Gu.apply(this,arguments)}(this._delegate,p,E)}createUserWithEmailAndPassword(p,E){var T=this;return(0,m.Z)(function*(){return Or(T._delegate,function cc(v,h,p){return ws.apply(this,arguments)}(T._delegate,p,E))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function Ku(v,h){return hc.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function Dm(v,h){return"EMAIL_SIGNIN"===Qo.parseLink(h)?.operation}(0,p)}getRedirectResult(){var p=this;return(0,m.Z)(function*(){Iu(Dp(),p._delegate,"operation-not-supported-in-this-environment");const E=yield function Dr(v,h){return Cs.apply(this,arguments)}(p._delegate,no);return E?Or(p._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function Nm(v,h){an(v)._logFramework(h)}(this._delegate,p)}onAuthStateChanged(p,E,T){const{next:x,error:j,complete:Y}=bh(p,E,T);return this._delegate.onAuthStateChanged(x,j,Y)}onIdTokenChanged(p,E,T){const{next:x,error:j,complete:Y}=bh(p,E,T);return this._delegate.onIdTokenChanged(x,j,Y)}sendSignInLinkToEmail(p,E){return function qu(v,h,p){return qa.apply(this,arguments)}(this._delegate,p,E)}sendPasswordResetEmail(p,E){return function Xf(v,h,p){return _s.apply(this,arguments)}(this._delegate,p,E||void 0)}setPersistence(p){var E=this;return(0,m.Z)(function*(){let T;switch(function km(v,h){wu(Object.values(yi).includes(h),v,"invalid-persistence-type"),(0,O.b$)()?wu(h!==yi.SESSION,v,"unsupported-persistence-type"):(0,O.UG)()?wu(h===yi.NONE,v,"unsupported-persistence-type"):Om()?wu(h===yi.NONE||h===yi.LOCAL&&(0,O.hl)(),v,"unsupported-persistence-type"):wu(h===yi.NONE||Pm(),v,"unsupported-persistence-type")}(E._delegate,p),p){case yi.SESSION:T=lr;break;case yi.LOCAL:T=(yield kn(la)._isAvailable())?la:qs;break;case yi.NONE:T=ei;break;default:return Ee("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return Or(this._delegate,function Zd(v){return Vn.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return Or(this._delegate,Nt(this._delegate,p))}signInWithCustomToken(p){return Or(this._delegate,function _n(v,h){return Ie.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,E){return Or(this._delegate,function os(v,h,p){return Nt((0,O.m9)(v),qf.credential(h,p))}(this._delegate,p,E))}signInWithEmailLink(p,E){return Or(this._delegate,function Er(v,h,p){return ia.apply(this,arguments)}(this._delegate,p,E))}signInWithPhoneNumber(p,E){return Ap(this._delegate,function ca(v,h,p){return su.apply(this,arguments)}(this._delegate,p,E))}signInWithPopup(p){var E=this;return(0,m.Z)(function*(){return Iu(Dp(),E._delegate,"operation-not-supported-in-this-environment"),Or(E._delegate,function uu(v,h,p){return da.apply(this,arguments)}(E._delegate,p,no))})()}signInWithRedirect(p){var E=this;return(0,m.Z)(function*(){return Iu(Dp(),E._delegate,"operation-not-supported-in-this-environment"),yield Ch(E._delegate),Pc(E._delegate,p,no)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function ur(v,h){return _r.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=yi,v})();function bh(v,h,p){let E=v;"function"!=typeof v&&({next:E,error:h,complete:p}=v);const T=E;return{next:j=>T(j&&io.getOrCreate(j)),error:h,complete:p}}function Jc(v,h){const p=function Vv(v,h){const p=Sp();if(!p)return[];const E=B(Cp,v,h);switch(p.getItem(E)){case yi.NONE:return[ei];case yi.LOCAL:return[la,lr];case yi.SESSION:return[lr];default:return[]}}(v,h);if(typeof self<"u"&&!p.includes(la)&&p.push(la),typeof window<"u")for(const E of[qs,lr])p.includes(E)||p.push(E);return p.includes(ei)||p.push(ei),p}class Ts{constructor(){this.providerId="phone",this._delegate=new rt(Wr(J.Z.auth()))}static credential(h,p){return rt.credential(h,p)}verifyPhoneNumber(h,p){return this._delegate.verifyPhoneNumber(h,p)}unwrap(){return this._delegate}}Ts.PHONE_SIGN_IN_METHOD=rt.PHONE_SIGN_IN_METHOD,Ts.PROVIDER_ID=rt.PROVIDER_ID;const Lo=re;class Vm{constructor(h,p,E=J.Z.app()){var T;Lo(null===(T=E.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new Mo(h,p,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Sh(v){v.INTERNAL.registerComponent(new ge.wA("auth-compat",h=>{const p=h.getProvider("app-compat").getImmediate(),E=h.getProvider("auth");return new Mp(p,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:K_EMAIL_SIGNIN,PASSWORD_RESET:K_PASSWORD_RESET,RECOVER_EMAIL:K_RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:K_REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:K_VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:K_VERIFY_EMAIL}},EmailAuthProvider:qf,FacebookAuthProvider:Wf,GithubAuthProvider:ic,GoogleAuthProvider:Jo,OAuthProvider:fi,SAMLAuthProvider:Xo,PhoneAuthProvider:Ts,PhoneMultiFactorGenerator:xv,RecaptchaVerifier:Vm,TwitterAuthProvider:Kd,Auth:Mp,AuthCredential:Ai,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.4.2")}(J.Z)},5861:(It,Se,k)=>{function m(O,ie,se,ne,ge,_e,de){try{var z=O[_e](de),$=z.value}catch(K){return void se(K)}z.done?ie($):Promise.resolve($).then(ne,ge)}function J(O){return function(){var ie=this,se=arguments;return new Promise(function(ne,ge){var _e=O.apply(ie,se);function de($){m(_e,ne,ge,de,z,"next",$)}function z($){m(_e,ne,ge,de,z,"throw",$)}de(void 0)})}}k.d(Se,{Z:()=>J})}},It=>{It(It.s=1906)}]);